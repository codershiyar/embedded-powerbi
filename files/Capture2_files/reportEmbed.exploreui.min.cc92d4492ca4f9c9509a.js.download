"use strict";(self.webpackChunkreportEmbed=self.webpackChunkreportEmbed||[]).push([[2],{15377:function(Ve,se,t){t.d(se,{L:function(){return P}});var e=t(7005),n=t(73637),f=t(85867),i=t(24267),O=t(78186),T=t(35380),V=t(20113),h=t(68128),M=t(80338),I=t(85385),b=function(u){return{"accessibility-info-collapsed":u}},P=function(){function g(u,s){this.hotkeyDialogService=u,this.highContrastCssGenerationService=s,this.onClose=new n.EventEmitter,this.isCollapsed=!0,this.initializeHighContrastRules()}return g.prototype.onFocusIn=function(){this.show()},g.prototype.onFocusOut=function(){this.hide()},g.prototype.showKeyboardShortcuts=function(u){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(p){switch(p.label){case 0:return[4,this.hotkeyDialogService.show()];case 1:return p.sent().afterClosed().subscribe(function(){u.target.focus()}),[2]}})})},g.prototype.skipToContent=function(){this.hide(),this.onClose.emit()},g.prototype.hide=function(){this.isCollapsed=!0},g.prototype.show=function(){this.isCollapsed=!1},g.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".accessibility-info.themeableElement","{background-color: @backgroundColor !important; outline: 1px solid @foregroundColor}"),this.highContrastCssGenerationService.addRule(".accessibility-info.themeableElement a","{color: @foregroundColor !important;}"),this.highContrastCssGenerationService.addRule(".accessibility-info.themeableElement pbi-office-icon.pbi-office-icon svg > path.OfficeIconColors_HighContrast, svg","{fill: @foregroundColor !important;}")},g.\u0275fac=function(s){return new(s||g)(n.\u0275\u0275directiveInject(f.g),n.\u0275\u0275directiveInject(i.g))},g.\u0275cmp=n.\u0275\u0275defineComponent({type:g,selectors:[["accessibility-info"]],hostBindings:function(s,p){1&s&&n.\u0275\u0275listener("focusin",function(){return p.onFocusIn()})("focusout",function(){return p.onFocusOut()})},outputs:{onClose:"onClose"},decls:12,vars:12,consts:[["keyboard-shortcuts","ctrl-Enter","focus-nav-mode","Browser",1,"accessibility-info","themeableElement",3,"ngClass"],[1,"accessibility-info-items"],["tabindex","0","role","button","localize","HotkeyDialog_Help_Desc",1,"link",3,"accessible-click"],["localize","AccessibilityInfo_ShowScreenReaderTips","target","_blank","href","https://go.microsoft.com/fwlink/?linkid=852575"],["name","open_16_regular"],["tabindex","0","role","button","localize","AccessibilityInfo_SkipToContent",1,"link",3,"accessible-click"]],template:function(s,p){1&s&&(n.\u0275\u0275elementStart(0,"div",0)(1,"ul",1)(2,"li")(3,"span",2),n.\u0275\u0275listener("accessible-click",function(A){return p.showKeyboardShortcuts(A)}),n.\u0275\u0275pipe(4,"localize"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(5,"li"),n.\u0275\u0275element(6,"a",3),n.\u0275\u0275pipe(7,"localize"),n.\u0275\u0275element(8,"tri-svg-icon",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(9,"li")(10,"span",5),n.\u0275\u0275listener("accessible-click",function(){return p.skipToContent()}),n.\u0275\u0275pipe(11,"localize"),n.\u0275\u0275elementEnd()()()()),2&s&&(n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(10,b,p.isCollapsed)),n.\u0275\u0275advance(3),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(4,4,"HotkeyDialog_Help_Desc")),n.\u0275\u0275advance(3),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(7,6,"AccessibilityInfo_ShowScreenReaderTips_OpenInNewTab")),n.\u0275\u0275advance(4),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(11,8,"AccessibilityInfo_SkipToContent")))},dependencies:[O.NgClass,T.X,V.t,h.q,M.M,I.F],styles:["[_nghost-%COMP%]{position:absolute;z-index:10000003}@media print{[_nghost-%COMP%]{display:none}}.accessibility-info[_ngcontent-%COMP%]{position:absolute;left:0;top:0;margin:10px;padding:16px;background:white;border-radius:2px;box-shadow:0 6.4px 14.4px rgba(0,0,0,.133),0 1.2px 3.6px rgba(0,0,0,.11);outline:none;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;white-space:nowrap}.accessibility-info-items[_ngcontent-%COMP%]{display:flex;flex-direction:column}.accessibility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px}.accessibility-info[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:unset}.accessibility-info-collapsed[_ngcontent-%COMP%]{width:1px;height:1px;margin:-1px;border:0px;overflow:hidden;padding:0;opacity:0}.accessibility-info[_ngcontent-%COMP%]   tri-svg-icon[_ngcontent-%COMP%]{fill:var(--default-link-color, #1F3A93);height:16px;width:16px;margin-left:5px}.accessibility-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .accessibility-info[_ngcontent-%COMP%]   span.link[_ngcontent-%COMP%]{color:var(--default-link-color, #1F3A93);text-decoration:unset;font-size:14px;outline:none;padding:1px}.accessibility-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:focus, .accessibility-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{border:1px solid var(--neutral-primary-color, #333333)}.accessibility-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:var(--default-visited-link-color, #551A8B)}.accessibility-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--neutral-dark-color, #212121);cursor:pointer}"]}),g}()},2793:function(Ve,se,t){t.d(se,{z:function(){return Fe}});var e=t(7005),n=t(73637),f=t(29494),i=t(37473),O=t(36670),T=t(60040),V=t(80242),h=t(70377),M=t(33714),I=t(67471),b=t(18266),P=t(14814),g=t(10378),u=t(78186),s=t(30411),p=t(52181),C=t(20113),A=t(92275),S=t(45055),L=t(37247),D=t(85385),m=powerbi.explore.contracts.BookmarkExtensions,v=jsCommon.DropPosition,l=jsCommon.BrowserUtils,y=["bookmarkElement"];function d(fe,ae){if(1&fe&&n.\u0275\u0275element(0,"i",8),2&fe){var pe=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",pe.getExpandCollapseIconClasses())}}function w(fe,ae){1&fe&&n.\u0275\u0275element(0,"i",9)}function x(fe,ae){if(1&fe){var pe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"input",10),n.\u0275\u0275listener("keydown",function(ce){n.\u0275\u0275restoreView(pe);var J=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(J.handleKeyDown(ce))})("blur",function(){n.\u0275\u0275restoreView(pe);var ce=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(ce.renameBookmark())})("ngModelChange",function(ce){n.\u0275\u0275restoreView(pe);var J=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(J.bookmark.displayName=ce)}),n.\u0275\u0275elementEnd()}if(2&fe){var ge=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngModel",ge.bookmark.displayName)}}function N(fe,ae){if(1&fe){var pe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"i",11)(1,"button",12),n.\u0275\u0275listener("accessible-click",function(Me){n.\u0275\u0275restoreView(pe);var ce=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(ce.showContextMenu(Me))}),n.\u0275\u0275pipe(2,"localize"),n.\u0275\u0275element(3,"span",13),n.\u0275\u0275elementEnd()()}2&fe&&(n.\u0275\u0275advance(1),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(2,1,"Options_Menu")))}function X(fe,ae){if(1&fe){var pe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"bookmark-node",15),n.\u0275\u0275listener("onGroupBookmarks",function(){n.\u0275\u0275restoreView(pe);var J=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(J.groupBookmarks())})("onUngroupBookmarks",function(){n.\u0275\u0275restoreView(pe);var J=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(J.ungroupBookmarks())})("onMultiSelectBookmarks",function(J){n.\u0275\u0275restoreView(pe);var ie=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(ie.multiSelectBookmark(J))}),n.\u0275\u0275elementEnd()}if(2&fe){var ge=ae.$implicit,Me=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("bookmark",ge)("selectedBookmarks",Me.selectedBookmarks)("parentBookmark",Me.bookmark)("isEditable",Me.isEditable)}}function ne(fe,ae){if(1&fe&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,X,1,4,"bookmark-node",14),n.\u0275\u0275elementContainerEnd()),2&fe){var pe=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",pe.bookmark.children)}}var Ce=function(ae,pe,ge,Me){return{"bookmark-selected":ae,"child-bookmark":pe,disabled:ge,"default-bookmark":Me}},he=function(){return["trimmedTextWithEllipsis"]},Fe=function(){function fe(ae,pe,ge,Me,ce,J,ie,G,j){var F=this;this.promiseFactory=ae,this.bookmarkService=pe,this.dragDataService=ge,this.explorationCapabilities=Me,this.featureSwitchService=ce,this.lazyScoped=J,this.localizationService=ie,this.pbiMenuService=G,this.screenReaderService=j,this.onGroupBookmarks=new n.EventEmitter,this.onUngroupBookmarks=new n.EventEmitter,this.onMultiSelectBookmarks=new n.EventEmitter,this.Bookmark=powerbi.explore.contracts.BookmarkExtensions,this.dropConfig={accept:"bookmark"},this.getDragContext=function(){return{data:{bookmark:F.bookmark,parent:F.parentBookmark}}},this.dropActionHandler=function(E){return F.getDropAction(E)},this.bookmarkAuthoringPromise=this.lazyScoped.get("bookmarkAuthoringService")}return fe.prototype.ngOnInit=function(){var ae=this;this.isEditing=!1,this.isDefaultBookmark=this.bookmark.isDefault,this.pbiEditableLabelOptions={disableClick:!0,customTooltip:!1,inputMatchLabelWidth:!1,onEdit:function(){return ae.startEditName()},onBlur:function(){return ae.cancelEditName()}}},fe.prototype.ngOnChanges=function(ae){ae.parentBookmark&&(this.isChildBookmark=!!this.parentBookmark),ae.bookmark&&(this.hasChildren=m.isBookmarkGroup(this.bookmark))},fe.prototype.ngAfterViewInit=function(){var ae=this;this.bookmarkElement.nativeElement.addEventListener(jsCommon.DOMConstants.contextmenuEventName,function(pe){ae.isEditable&&(pe.preventDefault(),ae.showContextMenu(pe))})},fe.prototype.dragDisabled=function(){return!(!this.capabilities||!this.capabilities.disallowDrag)},fe.prototype.isDisabled=function(){if(m.isBookmarkGroup(this.bookmark))return!1;var ae=this.bookmark.options;return ae&&ae.suppressActiveSection&&ae.suppressData&&ae.suppressDisplay},fe.prototype.isSelected=function(){var ae=this;return this.selectedBookmarks&&_.some(this.selectedBookmarks,function(pe){return pe.name===ae.bookmark.name})},fe.prototype.getExpandCollapseIconClasses=function(){if(m.isBookmarkGroup(this.bookmark))return this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign?this.bookmark.isExpanded?"pbi-glyph-chevrondownmedium":"pbi-glyph-arrowright":"".concat(this.bookmark.isExpanded?"expanded":""," pbi-glyph-caretright")},fe.prototype.getExpandCollapseState=function(){if(m.isBookmarkGroup(this.bookmark))return this.bookmark.isExpanded},fe.prototype.handleKeydown=function(ae){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(pe){switch(pe.label){case 0:return document.activeElement.id!==this.bookmarkElement.nativeElement.id?[2]:13!==ae.keyCode?[3,2]:[4,this.selectBookmark(void 0,!1)];case 1:return pe.sent(),[3,4];case 2:return 32!==ae.keyCode?[3,4]:[4,this.selectBookmark(void 0,ae.ctrlKey||ae.shiftKey)];case 3:pe.sent(),pe.label=4;case 4:return[2]}})})},fe.prototype.selectBookmark=function(ae,pe){var ge;return void 0===pe&&(pe=!1),(0,e.mG)(this,void 0,powerbi.Promise,function(){var Me,J,ie,G;return(0,e.Jh)(this,function(j){switch(j.label){case 0:return this.isDisabled()?[2]:(Me=ae?ae.ctrlKey||ae.shiftKey:pe,this.isEditable&&Me?(!m.isBookmarkGroup(this.bookmark)&&!this.isChildBookmark&&this.multiSelectBookmark(this.bookmark),[3,6]):[3,1]);case 1:return m.isBookmarkGroup(this.bookmark)?(this.bookmark.isExpanded=!this.bookmark.isExpanded,[3,6]):[3,2];case 2:return m.isWebBookmark(this.bookmark)?[4,this.lazyScoped.get("personalBookmarks")]:[3,4];case 3:return J=j.sent(),[3,5];case 4:J=this.bookmarkService,j.label=5;case 5:J.apply(this.bookmark),(ie=null===(ge=this.bookmark)||void 0===ge?void 0:ge.displayName)&&(G=this.localizationService.format("Selected",ie),this.screenReaderService.alert(G)),j.label=6;case 6:return[2]}})})},fe.prototype.multiSelectBookmark=function(ae){this.onMultiSelectBookmarks.emit(ae)},fe.prototype.dropOntoSibling=function(ae){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var pe,ge,Me,ce,J;return(0,e.Jh)(this,function(ie){switch(ie.label){case 0:return(pe=this.dragDataService.getDragContext())&&pe.data?(ge=pe.data.bookmark,Me=this.parentBookmark,ce=this.bookmark,J=3===ae,m.isBookmarkGroup(this.bookmark)&&m.isStateBookmark(ge)&&J&&this.bookmark.isExpanded&&(Me=this.bookmark,ce=this.bookmark.children[0],J=!1),m.isBookmarkGroup(ge)&&this.isLastChildBookmark()&&J&&(Me=null,ce=this.parentBookmark),[4,this.bookmarkAuthoringPromise]):[2];case 1:return ie.sent().move(ge,ce,J,Me),[2]}})})},fe.prototype.startEditName=function(){!this.isEditable||(this.isEditing=!0)},fe.prototype.cancelEditName=function(){this.isEditing=!1},fe.prototype.handleKeyDown=function(ae){"Enter"===ae.key&&l.noModifierPressed(ae)?this.renameBookmark():"Escape"===ae.key&&l.noModifierPressed(ae)&&this.cancelEditName(),ae.stopPropagation()},fe.prototype.renameBookmark=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var pe;return(0,e.Jh)(this,function(ge){switch(ge.label){case 0:return jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(this.bookmark.displayName)?[2]:(this.cancelEditName(),m.isWebBookmark(this.bookmark)?[4,this.lazyScoped.get("personalBookmarks")]:[3,2]);case 1:return pe=ge.sent(),[3,4];case 2:return[4,this.bookmarkAuthoringPromise];case 3:pe=ge.sent(),ge.label=4;case 4:return pe.rename(this.bookmark,this.bookmark.displayName),[2]}})})},fe.prototype.showContextMenu=function(ae){var pe=this;if(ae.stopPropagation(),this.contextMenuOperations)this.contextMenuOperations.handleContextMenu(this,this.bookmarkElement.nativeElement);else{var ge=this.getMenuItemCollection(),ce=(0,e.pi)((0,e.pi)({},{x:ae.pageX,y:ae.pageY}),{element:ae.target}),J=O.p.getPbiMenuConfig(ge,ce);this.pbiMenuService.open(J).onButtonClick$.pipe((0,i.q)(1)).subscribe(function(G){pe.selectMenuItem(G.id)})}},fe.prototype.selectMenuItem=function(ae){switch(ae){case 0:this.groupBookmarks();break;case 1:this.ungroupBookmarks();break;case 2:this.editBookmark();break;case 3:this.deleteBookmark();break;case 4:this.updateBookmark();break;case 5:this.toggleApplyDataOption();break;case 7:this.toggleApplyDisplayOption();break;case 6:this.toggleApplyActiveSectionOption();break;case 8:this.toggleApplyOnlyToSelectedVisuals()}},fe.prototype.getBookmarkRole=function(){return m.isWebBookmark(this.bookmark)?"option":"treeitem"},fe.prototype.getAriaLevel=function(){return m.isWebBookmark(this.bookmark)?null:this.isChildBookmark?2:1},fe.prototype.deleteBookmark=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(ae){switch(ae.label){case 0:return[4,this.bookmarkAuthoringPromise];case 1:return ae.sent().remove(this.bookmark),[2]}})})},fe.prototype.updateBookmark=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(ae){switch(ae.label){case 0:return m.isStateBookmark(this.bookmark)?[4,this.bookmarkAuthoringPromise]:[2];case 1:return ae.sent().update(this.bookmark),[2]}})})},fe.prototype.groupBookmarks=function(){this.onGroupBookmarks.emit()},fe.prototype.ungroupBookmarks=function(){this.onUngroupBookmarks.emit(this.bookmark)},fe.prototype.editBookmark=function(){this.isEditing=!0},fe.prototype.toggleApplyDataOption=function(){this.toggleBookmarkOption("suppressData")},fe.prototype.toggleApplyDisplayOption=function(){this.toggleBookmarkOption("suppressDisplay")},fe.prototype.toggleApplyActiveSectionOption=function(){this.toggleBookmarkOption("suppressActiveSection")},fe.prototype.toggleApplyOnlyToSelectedVisuals=function(){this.toggleBookmarkOption("applyOnlyToTargetVisuals")},fe.prototype.toggleBookmarkOption=function(ae){m.isStateBookmark(this.bookmark)&&(this.bookmark.options||(this.bookmark.options={}),this.bookmark.options[ae]=!this.bookmark.options[ae])},fe.prototype.getDropAction=function(ae){var pe=this.promiseFactory.defer(),ge=this.dragDataService.getDragContext();if(ge&&ge.data&&this.isEditable)if(m.isBookmarkGroup(ge.data.bookmark)){var ce=m.isBookmarkGroup(this.bookmark)&&!this.bookmark.isExpanded||m.isStateBookmark(this.bookmark)&&!this.isChildBookmark||this.isLastChildBookmark();v.isAbove(ae)&&!this.isChildBookmark?pe.resolve(2):!v.isAbove(ae)&&ce?pe.resolve(3):pe.resolve(0)}else v.isAbove(ae)?pe.resolve(2):pe.resolve(3);else pe.resolve(0);return pe.promise},fe.prototype.isLastChildBookmark=function(){if(this.parentBookmark){var ae=this.parentBookmark.children;return ae.indexOf(this.bookmark)===ae.length-1}return!1},fe.prototype.getMenuItemCollection=function(){return m.isBookmarkGroup(this.bookmark)?this.getMenuItemCollectionForBookmarkGroup(this.bookmark):this.getMenuItemCollectionForStateBookmark(this.bookmark)},fe.prototype.getMenuItemCollectionForBookmarkGroup=function(ae){var pe={items:[]};return pe.items.push({key:2,type:0,text:this.localizationService.get("ItemAction_Rename")}),pe.items.push({key:1,type:0,text:this.localizationService.get("Ungroup")}),pe},fe.prototype.getMenuItemCollectionForStateBookmark=function(ae){var pe={items:[]},ge=ae.options;pe.items.push({key:4,type:0,text:this.localizationService.get("PBI_Button_Label_Update")}),pe.items.push({key:2,type:0,text:this.localizationService.get("ItemAction_Rename")}),pe.items.push({key:3,type:0,text:this.localizationService.get("Delete")}),pe.items.push(this.isChildBookmark?{key:1,type:0,text:this.localizationService.get("Ungroup")}:{key:0,type:0,text:this.localizationService.get("Group_Action"),disabled:!this.isSelected()}),pe.items.push({type:1}),pe.items.push({key:5,type:0,text:this.localizationService.get("ExplorationBookmarks_Data"),tooltip:this.localizationService.get("ExplorationBookmarks_Data_Tooltip"),checked:!(ge&&ge.suppressData)}),pe.items.push({key:7,type:0,text:this.localizationService.get("ExplorationBookmarks_Display"),tooltip:this.localizationService.get("ExplorationBookmarks_Display_Tooltip"),checked:!(ge&&ge.suppressDisplay)}),pe.items.push({key:6,type:0,text:this.localizationService.get("ExplorationBookmarks_ActiveSection"),tooltip:this.localizationService.get("ExplorationBookmarks_ActiveSection_Tooltip"),checked:!(ge&&ge.suppressActiveSection)}),pe.items.push({type:1});var Me=ge&&ge.applyOnlyToTargetVisuals;return pe.items.push({key:8,type:0,text:this.localizationService.get("AllVisuals"),tooltip:this.localizationService.get("ExplorationBookmarks_AllVisuals_Tooltip"),checked:!Me}),pe.items.push({key:8,type:0,text:this.localizationService.get("ExplorationBookmarks_SelectedVisuals"),tooltip:this.localizationService.get("ExplorationBookmarks_SelectedVisuals_Tooltip"),checked:Me}),pe},fe.\u0275fac=function(pe){return new(pe||fe)(n.\u0275\u0275directiveInject(f.t),n.\u0275\u0275directiveInject(T.F),n.\u0275\u0275directiveInject(V.x),n.\u0275\u0275directiveInject(h.U),n.\u0275\u0275directiveInject(M.vZ),n.\u0275\u0275directiveInject(I.H),n.\u0275\u0275directiveInject(b.o),n.\u0275\u0275directiveInject(P.o),n.\u0275\u0275directiveInject(g.g))},fe.\u0275cmp=n.\u0275\u0275defineComponent({type:fe,selectors:[["bookmark-node"]],viewQuery:function(pe,ge){var Me;(1&pe&&n.\u0275\u0275viewQuery(y,5),2&pe)&&(n.\u0275\u0275queryRefresh(Me=n.\u0275\u0275loadQuery())&&(ge.bookmarkElement=Me.first))},inputs:{bookmark:"bookmark",selectedBookmarks:"selectedBookmarks",isEditable:"isEditable",parentBookmark:"parentBookmark",contextMenuOperations:"contextMenuOperations",capabilities:"capabilities"},outputs:{onGroupBookmarks:"onGroupBookmarks",onUngroupBookmarks:"onUngroupBookmarks",onMultiSelectBookmarks:"onMultiSelectBookmarks"},features:[n.\u0275\u0275NgOnChangesFeature],decls:8,vars:27,consts:[["tabindex","0",1,"ui-droppable","dropzone","bookmark","themeableElement",3,"id","ngClass","drag","getDragContext","dragDisabled","drop","dropAction","click","keydown","dropHandler"],["bookmarkElement",""],["aria-hidden","true","class","caret glyphicon glyph-mini smallFontSize item-auto",3,"ngClass",4,"ngIf"],["localizeTooltip","DefaultBookmarkTooltip","class","caret glyphicon pbi-glyph-bookmark-default glyph-mini smallFontSize item-auto",4,"ngIf"],[1,"unselectable","title"],[3,"ngModel","keydown","blur","ngModelChange",4,"pbiEditableLabel","pbiEditableLabelValue","pbiEditableLabelMode","pbiEditableLabelEditable","pbiEditableLabelClasses"],["class","menuContainer item-auto",4,"ngIf"],[4,"ngIf"],["aria-hidden","true",1,"caret","glyphicon","glyph-mini","smallFontSize","item-auto",3,"ngClass"],["localizeTooltip","DefaultBookmarkTooltip",1,"caret","glyphicon","pbi-glyph-bookmark-default","glyph-mini","smallFontSize","item-auto"],[3,"ngModel","keydown","blur","ngModelChange"],[1,"menuContainer","item-auto"],["localizeTooltip","Options_Menu",1,"optionsMenu",3,"accessible-click"],[1,"glyphicon","pbi-glyph-more"],[3,"bookmark","selectedBookmarks","parentBookmark","isEditable","onGroupBookmarks","onUngroupBookmarks","onMultiSelectBookmarks",4,"ngFor","ngForOf"],[3,"bookmark","selectedBookmarks","parentBookmark","isEditable","onGroupBookmarks","onUngroupBookmarks","onMultiSelectBookmarks"]],template:function(pe,ge){1&pe&&(n.\u0275\u0275elementStart(0,"div",0,1),n.\u0275\u0275listener("click",function(ce){return ge.selectBookmark(ce)})("keydown",function(ce){return ge.handleKeydown(ce)})("dropHandler",function(ce){return ge.dropOntoSibling(ce.dropAction)}),n.\u0275\u0275template(2,d,1,1,"i",2),n.\u0275\u0275template(3,w,1,0,"i",3),n.\u0275\u0275elementStart(4,"div",4),n.\u0275\u0275template(5,x,1,1,"input",5),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,N,4,3,"i",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(7,ne,2,1,"ng-container",7)),2&pe&&(n.\u0275\u0275propertyInterpolate("id",ge.bookmark.name),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction4(21,Ce,ge.isSelected(),ge.isChildBookmark,ge.isDisabled(),ge.isDefaultBookmark))("drag","bookmark")("getDragContext",ge.getDragContext)("dragDisabled",ge.dragDisabled())("drop",ge.dropConfig)("dropAction",ge.dropActionHandler),n.\u0275\u0275attribute("role",ge.getBookmarkRole())("aria-level",ge.getAriaLevel())("aria-label",ge.bookmark.displayName)("aria-selected",ge.isSelected())("aria-expanded",ge.getExpandCollapseState()),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",ge.hasChildren),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",ge.isDefaultBookmark),n.\u0275\u0275advance(2),n.\u0275\u0275property("pbiEditableLabel",ge.pbiEditableLabelOptions)("pbiEditableLabelValue",ge.bookmark.displayName)("pbiEditableLabelMode",!0)("pbiEditableLabelEditable",ge.isEditing)("pbiEditableLabelClasses",n.\u0275\u0275pureFunction0(26,he)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",ge.isEditable),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",ge.Bookmark.isBookmarkGroup(ge.bookmark)&&ge.bookmark.isExpanded))},dependencies:[u.NgClass,u.NgForOf,u.NgIf,s.Fj,s.JJ,s.On,p.r,C.t,A.w,S.W,L.D,fe,D.F],styles:["i.caret[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;padding:0;color:var(--neutral-tertiary-color, #A6A6A6);transform-origin:50% 50%;transition:transform .25s}i.caret.expanded[_ngcontent-%COMP%]{transform:rotate(0)}i.caret.glyphicon[_ngcontent-%COMP%]{margin:0 4px 0 0}.newPaneColors[_nghost-%COMP%]   i.caret[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   i.caret[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}"]}),fe}()},19709:function(Ve,se,t){t.d(se,{d:function(){return b}});var e=t(7005),n=t(73637),f=t(60040),i=t(23196),O=t(42),T=t(67471),V=t(35380),h=t(52181),M=t(85385),I=powerbi.explore.services.events,b=function(){function P(g,u,s,p){this.bookmarkService=g,this.eventBridge=u,this.viewModeState=s,this.lazyScopedProviderModern=p}return P.prototype.ngOnInit=function(){return(0,e.mG)(this,void 0,void 0,function(){var g=this;return(0,e.Jh)(this,function(u){switch(u.label){case 0:return this.eventsChannel=this.eventBridge.createChannelSubscriptionManager().subscribe(I.bookmarkViewStateChanged,function(){return g.init()}).subscribe(I.bookmarkApplied,function(s,p){!g.inPersonalBookmarksViewState()||(g.currentBookmark=_.find(g.bookmarksToPlay,function(C){return C.name===p.bookmarkName}))}),[4,this.init()];case 1:return u.sent(),[2]}})})},P.prototype.ngOnDestroy=function(){this.eventsChannel&&this.eventsChannel.unsubscribeAll()},P.prototype.ngOnChanges=function(g){return(0,e.mG)(this,void 0,void 0,function(){var u;return(0,e.Jh)(this,function(s){switch(s.label){case 0:return(g.selectedBookmark.isFirstChange()||this.selectedBookmark)&&(this.currentBookmark=this.selectedBookmark),this.currentBookmarkIndex<0?(u=this,[4,this.getBookmarkService()]):[3,2];case 1:u.bookmarksToPlay=s.sent().getBookmarkListToPlay(this.currentBookmark),s.label=2;case 2:return[2]}})})},Object.defineProperty(P.prototype,"currentBookmarkIndex",{get:function(){var u=this;return this.currentBookmark?_.findIndex(this.bookmarksToPlay,function(s){return s.name===u.currentBookmark.name}):0},enumerable:!1,configurable:!0}),Object.defineProperty(P.prototype,"currentBookmarkName",{get:function(){return this.currentBookmark?this.currentBookmark.displayName:""},enumerable:!1,configurable:!0}),P.prototype.switchTo=function(g){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(s){switch(s.label){case 0:return[4,this.getBookmarkService()];case 1:return s.sent().apply(this.bookmarksToPlay[g]),[2]}})})},P.prototype.exit=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(u){switch(u.label){case 0:return[4,this.getBookmarkService()];case 1:return u.sent().setPlayMode(!1),[2]}})})},P.prototype.init=function(){return(0,e.mG)(this,void 0,void 0,function(){var g,u,s;return(0,e.Jh)(this,function(p){switch(p.label){case 0:return null==this.viewModeState.getViewState().bookmarkView?[2]:[4,this.getBookmarkService()];case 1:return g=p.sent(),u=this.getSelectedBookmark(),this.bookmarksToPlay=g.getBookmarkListToPlay(u),s=u&&u.name,!_.isEmpty(this.bookmarksToPlay)&&this.bookmarksToPlay[0].name!==s&&g.apply(this.bookmarksToPlay[0]),[2]}})})},P.prototype.getBookmarkService=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(g){return this.inPersonalBookmarksViewState()?[2,this.lazyScopedProviderModern.get("personalBookmarks")]:[2,this.bookmarkService]})})},P.prototype.getSelectedBookmark=function(){if(!this.inPersonalBookmarksViewState())return this.selectedBookmark},P.prototype.inPersonalBookmarksViewState=function(){return 1===this.viewModeState.getViewState().bookmarkView},P.\u0275fac=function(u){return new(u||P)(n.\u0275\u0275directiveInject(f.F),n.\u0275\u0275directiveInject(i.J),n.\u0275\u0275directiveInject(O.kc),n.\u0275\u0275directiveInject(T.H))},P.\u0275cmp=n.\u0275\u0275defineComponent({type:P,selectors:[["bookmark-play"]],inputs:{selectedBookmark:"selectedBookmark"},features:[n.\u0275\u0275NgOnChangesFeature],decls:17,vars:14,consts:[["localize","ExplorationBookmarks_PlayPosition","localize-fragments","",1,"bookmark-position"],["fragment-index","0","localize","Generic_Bookmark"],["fragment-index","1"],["fragment-index","2"],[1,"bookmark-title"],["localizeTooltip","Previous_ButtonText",1,"bookmark-icon",3,"disabled","click"],[1,"glyphicon","pbi-glyph-arrowleft","glyph-small"],["localizeTooltip","Next_ButtonText",1,"bookmark-icon",3,"disabled","click"],[1,"glyphicon","pbi-glyph-arrowright","glyph-small"],["localizeTooltip","Close",1,"bookmark-icon",3,"click"],[1,"glyphicon","pbi-glyph-close","glyph-small"]],template:function(u,s){1&u&&(n.\u0275\u0275elementStart(0,"span",0),n.\u0275\u0275element(1,"span",1),n.\u0275\u0275elementStart(2,"span",2),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(4,"span",3),n.\u0275\u0275text(5),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(6,"span",4),n.\u0275\u0275text(7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(8,"button",5),n.\u0275\u0275listener("click",function(){return s.switchTo(s.currentBookmarkIndex-1)}),n.\u0275\u0275pipe(9,"localize"),n.\u0275\u0275element(10,"i",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(11,"button",7),n.\u0275\u0275listener("click",function(){return s.switchTo(s.currentBookmarkIndex+1)}),n.\u0275\u0275pipe(12,"localize"),n.\u0275\u0275element(13,"i",8),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(14,"button",9),n.\u0275\u0275listener("click",function(){return s.exit()}),n.\u0275\u0275pipe(15,"localize"),n.\u0275\u0275element(16,"i",10),n.\u0275\u0275elementEnd()),2&u&&(n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(s.currentBookmarkIndex+1),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(null==s.bookmarksToPlay?null:s.bookmarksToPlay.length),n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(s.currentBookmarkName),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",s.currentBookmarkIndex<=0),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(9,8,"Previous_ButtonText")),n.\u0275\u0275advance(3),n.\u0275\u0275property("disabled",s.currentBookmarkIndex>=(null==s.bookmarksToPlay?null:s.bookmarksToPlay.length)-1),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(12,10,"Next_ButtonText")),n.\u0275\u0275advance(3),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(15,12,"Close")))},dependencies:[V.X,h.r,M.F],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex;flex-direction:row;height:100%;background-color:var(--neutral-tertiary-alt-color, #C8C8C8);font-size:17px;color:var(--neutral-primary-color, #333333);align-items:center}[_nghost-%COMP%]   .hideOverflowText[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   .bookmark-position[_ngcontent-%COMP%]{margin-left:20px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   .bookmark-title[_ngcontent-%COMP%]{flex-grow:1;text-align:center;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]{height:21px;margin-right:16px;display:flex;flex-direction:row;align-items:center;background-color:transparent}[_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--neutral-primary-color, #333333)}[_nghost-%COMP%]   button.bookmark-icon[disabled][_ngcontent-%COMP%], [_nghost-%COMP%]   button.bookmark-icon[disabled][_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   button.bookmark-icon[disabled][_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [_nghost-%COMP%]   button.bookmark-icon[disabled][_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:var(--neutral-tertiary-color, #A6A6A6);background-color:transparent;pointer-events:none}[_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]:focus:hover, [_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]:active:hover{background-color:transparent}[_nghost-%COMP%]   button.bookmark-icon[_ngcontent-%COMP%]   i.glyphicon[_ngcontent-%COMP%]{margin:0}"]}),P}()},35784:function(Ve,se,t){t.d(se,{m:function(){return h}});var e=t(7005),n=t(73637),f=t(67471),i=t(42),O=t(78186),T=t(2793);function V(M,I){if(1&M){var b=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"bookmark-node",1),n.\u0275\u0275listener("onGroupBookmarks",function(){n.\u0275\u0275restoreView(b);var s=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(s.groupBookmarks())})("onUngroupBookmarks",function(s){n.\u0275\u0275restoreView(b);var p=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(p.ungroupBookmarks(s))})("onMultiSelectBookmarks",function(s){n.\u0275\u0275restoreView(b);var p=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(p.multiSelectBookmark(s))}),n.\u0275\u0275elementEnd()}if(2&M){var P=I.$implicit,g=n.\u0275\u0275nextContext();n.\u0275\u0275property("bookmark",P)("selectedBookmarks",g.multiSelectedBookmarks)("isEditable",g.isEditable())("capabilities",g.capabilities)("contextMenuOperations",g.contextMenuOperations)}}var h=function(){function M(I,b){this.lazyScoped=I,this.viewModeState=b,this.bookmarkAuthoringPromise=this.lazyScoped.get("bookmarkAuthoringService")}return M.prototype.ngOnChanges=function(I){I.selectedBookmark&&this.resetMultiSelectedBookmarks()},M.prototype.isEditable=function(){return!this.isPlayMode()&&(this.capabilities&&this.capabilities.editableInAllViewModes||1===this.viewModeState.getMode())},M.prototype.groupBookmarks=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(I){switch(I.label){case 0:return[4,this.bookmarkAuthoringPromise];case 1:return I.sent().group(this.multiSelectedBookmarks),this.resetMultiSelectedBookmarks(),[2]}})})},M.prototype.ungroupBookmarks=function(I){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(b){switch(b.label){case 0:return powerbi.explore.contracts.BookmarkExtensions.isStateBookmark(I)?[2]:[4,this.bookmarkAuthoringPromise];case 1:return b.sent().ungroup(I),[2]}})})},M.prototype.multiSelectBookmark=function(I){if(this.isMultiSelectAllowed()){var b=_.findIndex(this.multiSelectedBookmarks,function(P){return P.name===I.name});b>-1?this.multiSelectedBookmarks.splice(b,1):this.multiSelectedBookmarks.push(I)}},M.prototype.resetMultiSelectedBookmarks=function(){if(this.selectedBookmark){if(powerbi.explore.contracts.BookmarkExtensions.isBookmarkGroup(this.selectedBookmark))return;this.multiSelectedBookmarks=[this.selectedBookmark]}else this.multiSelectedBookmarks=[]},M.prototype.isMultiSelectAllowed=function(){var I=this;return(!this.capabilities||!this.capabilities.disallowMultiSelect)&&this.isEditable()&&(!this.selectedBookmark||_.some(this.bookmarks,function(b){return b.name===I.selectedBookmark.name}))},M.prototype.isPlayMode=function(){return null!=this.viewModeState.getViewState().bookmarkView},M.\u0275fac=function(b){return new(b||M)(n.\u0275\u0275directiveInject(f.H),n.\u0275\u0275directiveInject(i.kc))},M.\u0275cmp=n.\u0275\u0275defineComponent({type:M,selectors:[["bookmark-tree"]],inputs:{bookmarks:"bookmarks",selectedBookmark:"selectedBookmark",capabilities:"capabilities",contextMenuOperations:"contextMenuOperations"},features:[n.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"bookmark","selectedBookmarks","isEditable","capabilities","contextMenuOperations","onGroupBookmarks","onUngroupBookmarks","onMultiSelectBookmarks",4,"ngFor","ngForOf"],[3,"bookmark","selectedBookmarks","isEditable","capabilities","contextMenuOperations","onGroupBookmarks","onUngroupBookmarks","onMultiSelectBookmarks"]],template:function(b,P){1&b&&n.\u0275\u0275template(0,V,1,5,"bookmark-node",0),2&b&&n.\u0275\u0275property("ngForOf",P.bookmarks)},dependencies:[O.NgForOf,T.z],styles:[".bookmark-list[_ngcontent-%COMP%]{display:block;flex:1 1 0px;overflow-y:auto;box-sizing:border-box;align-items:stretch;padding:0 4px}.bookmark-list[_ngcontent-%COMP%]   .scroll-content.scroll-scrolly_visible[_ngcontent-%COMP%]{padding-right:10px}"]}),M}()},80409:function(Ve,se,t){t.d(se,{P:function(){return A}});var e=t(73637),n=t(70377),f=t(33714),i=t(42),O=t(78186),T=t(31053),V=t(35380),h=t(52181),M=t(78469),I=t(85385),b=function(){function S(L){this.explorationCapabilities=L}return S.prototype.transform=function(L){return L&&!!this.explorationCapabilities.getCapabilities().showPersonalBookmarksInPane},S.\u0275fac=function(D){return new(D||S)(e.\u0275\u0275directiveInject(n.U,16))},S.\u0275pipe=e.\u0275\u0275definePipe({name:"computeIsReportPanelToggleEnabled",type:S,pure:!0}),S}(),P=function(L,D){return{bookmarks:L,selectedBookmark:D}};function g(S,L){if(1&S&&e.\u0275\u0275element(0,"pbi-lazy-load",3),2&S){var D=e.\u0275\u0275nextContext();e.\u0275\u0275property("modulePath",D.bookmarksPaneModulePath)("componentId","BookmarkListComponentId")("inputArgs",e.\u0275\u0275pureFunction2(3,P,D.bookmarks,D.selectedBookmark))}}function u(S,L){if(1&S&&e.\u0275\u0275element(0,"pbi-lazy-load",15),2&S){var D=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("modulePath",D.personalBookmarksModulePath)("componentId",D.personalBookmarksComponentId)}}function s(S,L){if(1&S){var D=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-expansion-panel",11),e.\u0275\u0275listener("opened",function(){e.\u0275\u0275restoreView(D);var l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.onExpansionPanelOpened(l.bookmarksViewStatePersonal))}),e.\u0275\u0275elementStart(1,"mat-expansion-panel-header",7),e.\u0275\u0275element(2,"i",12)(3,"mat-panel-title",13),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,u,1,2,"pbi-lazy-load",14),e.\u0275\u0275elementEnd()}if(2&S){var m=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("@.disabled",!0)("hideToggle",m.newPaneColorsEnabled),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",m.currentBookmarksView===m.bookmarksViewStatePersonal)}}function p(S,L){if(1&S&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275element(1,"pbi-lazy-load",3),e.\u0275\u0275elementContainerEnd()),2&S){var D=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("modulePath",D.bookmarksPaneModulePath)("componentId","BookmarkListComponentId")("inputArgs",e.\u0275\u0275pureFunction2(3,P,D.bookmarks,D.selectedBookmark))}}function C(S,L){if(1&S){var D=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",4)(1,"mat-accordion",4),e.\u0275\u0275template(2,s,5,3,"mat-expansion-panel",5),e.\u0275\u0275pipe(3,"computeIsReportPanelToggleEnabled"),e.\u0275\u0275elementStart(4,"mat-expansion-panel",6),e.\u0275\u0275listener("opened",function(){e.\u0275\u0275restoreView(D);var l=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(l.onExpansionPanelOpened(l.bookmarksViewStateReport))}),e.\u0275\u0275pipe(5,"computeIsReportPanelToggleEnabled"),e.\u0275\u0275pipe(6,"computeIsReportPanelToggleEnabled"),e.\u0275\u0275elementStart(7,"mat-expansion-panel-header",7),e.\u0275\u0275element(8,"i",8)(9,"mat-panel-title",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,p,2,6,"ng-container",10),e.\u0275\u0275elementEnd()()()}if(2&S){var m=e.\u0275\u0275nextContext();e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(3,6,m.supportExpandablePanels)),e.\u0275\u0275advance(2),e.\u0275\u0275property("@.disabled",!0)("expanded",!0)("disabled",!e.\u0275\u0275pipeBind1(5,8,m.supportExpandablePanels))("hideToggle",m.newPaneColorsEnabled||!e.\u0275\u0275pipeBind1(6,10,m.supportExpandablePanels)),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",m.currentBookmarksView===m.bookmarksViewStateReport)}}var A=function(){function S(L,D,m){this.explorationCapabilities=L,this.featureSwitchService=D,this.viewModeState=m,this.personalBookmarksModulePath="@powerbi/WebBookmarksUI/web-bookmarks-ui.module#WebBookmarksUIModule",this.personalBookmarksComponentId="PersonalBookmarksComponentId",this.bookmarksViewStatePersonal=1,this.bookmarksViewStateReport=0,this.newPaneColorsEnabled=this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign}return S.prototype.onExpansionPanelOpened=function(L){this.currentBookmarksView=L,this.viewModeState.setBookmarkViewState(void 0)},Object.defineProperty(S.prototype,"bookmarksPaneModulePath",{get:function(){return"@powerbi/ExploreUI/lazy-modules/bookmarks-pane/bookmarks-pane.module#BookmarksPaneModule"},enumerable:!1,configurable:!0}),S.\u0275fac=function(D){return new(D||S)(e.\u0275\u0275directiveInject(n.U),e.\u0275\u0275directiveInject(f.vZ),e.\u0275\u0275directiveInject(i.kc))},S.\u0275cmp=e.\u0275\u0275defineComponent({type:S,selectors:[["bookmarks-pane-content"]],inputs:{bookmarks:"bookmarks",selectedBookmark:"selectedBookmark",supportExpandablePanels:"supportExpandablePanels"},decls:4,vars:5,consts:[[3,"modulePath","componentId","inputArgs",4,"ngIf"],["class","flexStretchItem",4,"ngIf"],["href","https://go.microsoft.com/fwlink/?linkid=856391","target","_blank","localize","ExplorationBookmarks_HelpLink",1,"bookmark-help"],[3,"modulePath","componentId","inputArgs"],[1,"flexStretchItem"],[3,"hideToggle","opened",4,"ngIf"],[3,"expanded","disabled","hideToggle","opened"],["localizeTooltip","Pane_Toggle"],["ng-if","newPaneColorsEnabled && supportExpandablePanels | computeIsReportPanelToggleEnabled",1,"expansionIndicator","glyphicon","glyph-mini"],["localize","ReportBookmarks"],[4,"ngIf"],[3,"hideToggle","opened"],["ng-if","newPaneColorsEnabled",1,"expansionIndicator","glyphicon","glyph-mini"],["localize","PersonalBookmarks"],[3,"modulePath","componentId",4,"ngIf"],[3,"modulePath","componentId"]],template:function(D,m){1&D&&(e.\u0275\u0275template(0,g,1,6,"pbi-lazy-load",0),e.\u0275\u0275template(1,C,11,12,"section",1),e.\u0275\u0275element(2,"a",2),e.\u0275\u0275pipe(3,"localize")),2&D&&(e.\u0275\u0275property("ngIf",!m.supportExpandablePanels),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!m.supportExpandablePanels),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(3,3,"ExplorationBookmarks_HelpLink")))},dependencies:[O.NgIf,T.R,V.X,h.r,M.pp,M.ib,M.yz,M.yK,I.F,b],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto}.flexStretchItem[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;align-self:stretch}.mat-expansion-panel[_ngcontent-%COMP%]:not(:first-of-type) > .mat-expansion-panel-header[_ngcontent-%COMP%]{border-top:none}.mat-expansion-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:0 0 40px;border-radius:0!important}.mat-expansion-panel.mat-expanded[_ngcontent-%COMP%]{flex:1 1 auto;align-self:stretch}.bookmark-help[_ngcontent-%COMP%]{flex:none;padding:6px 10px 12px;border-top:1px solid var(--neutral-primary-color, #333333);color:var(--neutral-lighter-color, #F4F4F4)}.mat-expansion-panel[_ngcontent-%COMP%]:not([class*=mat-elevation-z]){box-shadow:none!important}  .mat-expansion-panel-spacing{margin:0!important}  .mat-expansion-panel{background-color:var(--neutral-primary-color-alt, #444444)}  .mat-expansion-panel .mat-expansion-panel-header{height:40px!important;padding:0 16px;font-size:14px;border-bottom:1px solid var(--black-color, #000);border-top:1px solid var(--black-color, #000)}  .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title{color:var(--white-color, #FFF);margin:0}  .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-indicator:after{color:var(--white-color, #FFF)}  .mat-expansion-panel .mat-expansion-panel-content{display:flex;flex:1 1 auto;flex-direction:column}  .mat-expansion-panel .mat-expansion-panel-content .mat-expansion-panel-body{display:flex;flex-direction:column;flex:1 1 auto;padding:0}  .mat-expansion-panel .mat-expansion-panel-content bookmark-list .bookmark-content.bookmark-empty .bookmark-info{line-height:normal;font-size:12px;color:var(--white-color, #FFF)}.newPaneColors[_nghost-%COMP%]   .bookmark-help[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .bookmark-help[_ngcontent-%COMP%]{border-color:var(--gray-40, #E1DFDD);color:var(--fluent-theme-link-darker-color, #005A9E)}.newPaneColors[_nghost-%COMP%]   mat-expansion-panel-header[aria-expanded=true][_ngcontent-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]:before, .newPaneColors   [_nghost-%COMP%]   mat-expansion-panel-header[aria-expanded=true][_ngcontent-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]:before{content:"\\e70e"}.newPaneColors[_nghost-%COMP%]   mat-expansion-panel-header[aria-expanded=false][_ngcontent-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]:before, .newPaneColors   [_nghost-%COMP%]   mat-expansion-panel-header[aria-expanded=false][_ngcontent-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]:before{content:"\\e70d"}.newPaneColors[_nghost-%COMP%]   .expansionIndicator[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .expansionIndicator[_ngcontent-%COMP%]{color:var(--gray-180, #252423);margin-top:4px}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel{background-color:var(--gray-20, #F3F2F1)}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header{border-color:var(--gray-40, #E1DFDD)}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title{color:var(--gray-180, #252423)}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-indicator:after, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-indicator:after{color:var(--gray-180, #252423)}.newPaneColors[_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-content bookmark-list .bookmark-content.bookmark-empty .bookmark-info, .newPaneColors   [_nghost-%COMP%]     .mat-expansion-panel .mat-expansion-panel-content bookmark-list .bookmark-content.bookmark-empty .bookmark-info{color:var(--gray-180, #252423)}html[data-focus-source="key"]   .newPaneColors[_nghost-%COMP%]   .bookmark-help[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   .newPaneColors   [_nghost-%COMP%]   .bookmark-help[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   .newPaneColors[_nghost-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   .newPaneColors   [_nghost-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px;background:unset}']}),S}()},25434:function(Ve,se,t){t.d(se,{f:function(){return A}});var e=t(73637),n=t(78186),f=t(35380),i=t(52181),O=t(68128);function T(S,L){1&S&&e.\u0275\u0275element(0,"div",13)}function V(S,L){1&S&&e.\u0275\u0275element(0,"div",14)}function h(S,L){if(1&S){var D=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"a",16),e.\u0275\u0275listener("click",function(v){e.\u0275\u0275restoreView(D);var l=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(l.onShowErrorDetails(v))}),e.\u0275\u0275elementEnd()}}function M(S,L){if(1&S&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,h,1,0,"a",15),e.\u0275\u0275elementContainerEnd()),2&S){var D=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!(D.errorInfo&&D.errorInfo.hideSeeDetails))}}function I(S,L){if(1&S&&e.\u0275\u0275element(0,"a",17),2&S){var D=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("href",D.errorInfo.details.helpLink,e.\u0275\u0275sanitizeUrl)}}function b(S,L){1&S&&e.\u0275\u0275element(0,"span",18)}function P(S,L){1&S&&e.\u0275\u0275element(0,"span",19)}function g(S,L){1&S&&e.\u0275\u0275element(0,"span",18)}function u(S,L){1&S&&e.\u0275\u0275element(0,"span",20)}function s(S,L){1&S&&e.\u0275\u0275element(0,"span",20)}function p(S,L){1&S&&e.\u0275\u0275element(0,"span",21)}var A=function(){function S(){this.fixErrors=new e.EventEmitter,this.showErrorDetails=new e.EventEmitter}return S.prototype.ngOnInit=function(){this.updateErrorOverlayVisibility(this.viewport)},S.prototype.ngOnChanges=function(L){L.viewport&&this.updateErrorOverlayVisibility(this.viewport),(L.errorInfo||L.viewMode)&&(this.isFixButtonVisible=this.errorInfo&&(1===this.viewMode&&0!==this.errorInfo.fixableError||0===this.viewMode&&3===this.errorInfo.fixableError))},S.prototype.updateErrorOverlayVisibility=function(L){!L||(this.showErrorMessage=L.width>=270)},S.prototype.onShowErrorDetails=function(L){L.preventDefault(),this.showErrorDetails.emit()},S.\u0275fac=function(D){return new(D||S)},S.\u0275cmp=e.\u0275\u0275defineComponent({type:S,selectors:[["canvas-visual-error-overlay"]],inputs:{errorInfo:"errorInfo",viewMode:"viewMode",viewport:"viewport"},outputs:{fixErrors:"fixErrors",showErrorDetails:"showErrorDetails"},features:[e.\u0275\u0275NgOnChangesFeature],decls:19,vars:14,consts:[["focus-nav-mode","Group","keyboard-shortcuts","ctrl-ArrowRight scoped",1,"errorMessage","themableBackgroundColorSolid"],[3,"ngSwitch"],["class","glyphicon pbi-glyph-error glyph-med",4,"ngSwitchDefault"],["class","glyphicon pbi-glyph-blockedsite glyph-med",4,"ngSwitchCase"],[1,"errorSpan",3,"hidden"],[4,"ngSwitchDefault"],["localize","LearnMore","localizeTooltip","LearnMore","class","errorSeeMore","target","_blank",4,"ngSwitchCase"],[1,"fixThisContainer"],[1,"btn","primary",3,"hidden","click"],["localize","Fix_This","localizeTooltip","FixReferences_ToolTip",4,"ngSwitchCase"],["localize","Fix_This","localizeTooltip","RelationshipDetection_Tooltip",4,"ngSwitchCase"],["localize","VisualContainer_EnableScriptVisuals",4,"ngSwitchCase"],["localize","Fix_This","localizeTooltip","FixDataSourceSettings_ToolTip",4,"ngSwitchCase"],[1,"glyphicon","pbi-glyph-error","glyph-med"],[1,"glyphicon","pbi-glyph-blockedsite","glyph-med"],["localize","VisualContainer_ShowErrorDetails","localizeTooltip","VisualContainer_ShowErrorDetails","class","errorSeeMore","href","",3,"click",4,"ngIf"],["localize","VisualContainer_ShowErrorDetails","localizeTooltip","VisualContainer_ShowErrorDetails","href","",1,"errorSeeMore",3,"click"],["localize","LearnMore","localizeTooltip","LearnMore","target","_blank",1,"errorSeeMore"],["localize","Fix_This","localizeTooltip","FixReferences_ToolTip"],["localize","Fix_This","localizeTooltip","RelationshipDetection_Tooltip"],["localize","VisualContainer_EnableScriptVisuals"],["localize","Fix_This","localizeTooltip","FixDataSourceSettings_ToolTip"]],template:function(D,m){1&D&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,T,1,0,"div",2),e.\u0275\u0275template(3,V,1,0,"div",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div")(5,"span",4),e.\u0275\u0275text(6),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerStart(7,1),e.\u0275\u0275template(8,M,2,1,"ng-container",5),e.\u0275\u0275template(9,I,1,1,"a",6),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",7)(11,"button",8),e.\u0275\u0275listener("click",function(){return m.fixErrors.emit()}),e.\u0275\u0275elementContainerStart(12,1),e.\u0275\u0275template(13,b,1,0,"span",9),e.\u0275\u0275template(14,P,1,0,"span",10),e.\u0275\u0275template(15,g,1,0,"span",9),e.\u0275\u0275template(16,u,1,0,"span",11),e.\u0275\u0275template(17,s,1,0,"span",11),e.\u0275\u0275template(18,p,1,0,"span",12),e.\u0275\u0275elementContainerEnd(),e.\u0275\u0275elementEnd()()()),2&D&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",m.errorInfo&&m.errorInfo.overlayType),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!m.showErrorMessage),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(m.errorInfo&&m.errorInfo.details&&m.errorInfo.details.message),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",m.errorInfo&&m.errorInfo.details&&m.errorInfo.details.errorType),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(2),e.\u0275\u0275property("hidden",!m.isFixButtonVisible),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitch",m.errorInfo&&m.errorInfo.fixableError),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",1),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",2),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",3),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",4),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",5),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase",6))},dependencies:[n.NgIf,n.NgSwitch,n.NgSwitchCase,n.NgSwitchDefault,f.X,i.r,O.q],styles:["[_nghost-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:14px;display:table;background-color:var(--neutral-lighter-color, #F4F4F4);width:100%;height:100%;color:var(--black-color, #000)}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]{display:table-cell;line-height:normal;vertical-align:middle;padding:0 20px;margin:4px;text-align:center}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   .errorSpan[_ngcontent-%COMP%]{margin-right:4px}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   .fixThisContainer[_ngcontent-%COMP%]{margin-top:12px}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   a.errorSeeMore[_ngcontent-%COMP%]{text-decoration:underline}[_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active, [_nghost-%COMP%]   .errorMessage[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{outline:1px solid #000000}"]}),S}()},85217:function(Ve,se,t){t.d(se,{f:function(){return I}});var e=t(73637),n=t(70377),f=t(18266),i=t(78186),O=t(72661),T=t(85385);function V(b,P){if(1&b&&e.\u0275\u0275element(0,"i"),2&b){var g=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("infoIcon glyphicon ",g.useStylableHeader()?"pbi-glyph-info-nocircle":"pbi-glyph-info","")}}function h(b,P){1&b&&e.\u0275\u0275element(0,"i",4)}function M(b,P){1&b&&e.\u0275\u0275element(0,"i",5)}var I=function(){function b(P,g){this.explorationCapabilities=P,this.localizationService=g}return b.prototype.getTooltipConfig=function(){return{tooltipArrowPosition:powerbi.common.ArrowPosition.arrowTopLeft,tooltipDelay:100,tooltipDescription:this.getWarningMessage()}},b.prototype.getWarningMessage=function(){var P=this.details;return P?this.hasAdditionalErrorInfo(P)?P.message+" "+this.localizationService.get("VisualContainer_ClickToSeeMore"):P.message:""},b.prototype.useStylableHeader=function(){return this.explorationCapabilities&&this.explorationCapabilities.getCapabilities().visualContainerOptions.useStylableHeader},b.prototype.isClickable=function(){var P=this.details;return!!P&&(!_.isEmpty(P.message)||this.hasAdditionalErrorInfo(P))},b.prototype.hasAdditionalErrorInfo=function(P){return powerbi.explore.util.ErrorDetailsUtility.hasAdditionalErrorInfo(P)},b.\u0275fac=function(g){return new(g||b)(e.\u0275\u0275directiveInject(n.U),e.\u0275\u0275directiveInject(f.o))},b.\u0275cmp=e.\u0275\u0275defineComponent({type:b,selectors:[["canvas-visual-header-icon"]],inputs:{details:"details",iconType:"iconType"},decls:5,vars:9,consts:[[3,"pbi-tooltip","disabled","ngSwitch"],[3,"class",4,"ngSwitchCase"],["class","warningIcon pbi-glyph-warning glyphicon",4,"ngSwitchCase"],["class","errorIcon pbi-glyph-error glyphicon",4,"ngSwitchCase"],[1,"warningIcon","pbi-glyph-warning","glyphicon"],[1,"errorIcon","pbi-glyph-error","glyphicon"]],template:function(g,u){1&g&&(e.\u0275\u0275elementStart(0,"button",0),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275template(2,V,1,3,"i",1),e.\u0275\u0275template(3,h,1,0,"i",2),e.\u0275\u0275template(4,M,1,0,"i",3),e.\u0275\u0275elementEnd()),2&g&&(e.\u0275\u0275property("pbi-tooltip",u.getTooltipConfig())("disabled",!u.isClickable())("ngSwitch",u.iconType),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,7,"VisualContainer_ClickToSeeMore")),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngSwitchCase","info"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","warning"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngSwitchCase","error"))},dependencies:[i.NgSwitch,i.NgSwitchCase,O.i,T.F],styles:[".warningIcon[_ngcontent-%COMP%], .infoIcon[_ngcontent-%COMP%], .errorIcon[_ngcontent-%COMP%]{font-size:16px}.warningIcon[_ngcontent-%COMP%]{color:var(--theme-primary-color, #F2C811)}.infoIcon[_ngcontent-%COMP%]{color:var(--info-dark-color, #33669A)}.errorIcon[_ngcontent-%COMP%]{color:var(--warning-color, #A4262C)}"]}),b}()},48621:function(Ve,se,t){t.d(se,{Fy:function(){return C}});var e=t(73637),n=t(23196),f=t(31969),i=t(71136),O=t(52181),T=t(9339),V=powerbi.explore.services.events,h=["carouselScrollPane"],M=["previousPageButton"],I=["nextPageButton"],b=function(){return{"aria-label":"Carousel_PreviousPages"}},P=function(){return{"aria-label":"Carousel_NextPages"}},g=["*"],C=function(){function A(S,L,D,m){this.eventBridge=S,this.rtlService=L,this.element=D,this.renderer=m,this.onSeeAll=new e.EventEmitter,this.previousWidth=0,this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager()}return Object.defineProperty(A.prototype,"isRtl",{get:function(){return this.rtlService.isRtlLayout},enumerable:!1,configurable:!0}),A.prototype.carouselResized=function(){if(this.autoResize){var S=this.element.nativeElement.parentElement.offsetWidth;S!==this.previousWidth&&(this.previousWidth=S,this.updateCarouselWidth(),this.scrollActiveItemIntoView())}},A.prototype.ngOnInit=function(){var S=this;if(this.isScrollingActiveItemIntoView=!1,this.autoResize){this.subscriptionManager.subscribe(V.sectionNameChanged,function(){return S.updateCarouselWidth()});var L=0;new MutationObserver(function(v){S.updateCarouselWidth();var l=S.getScrollChildren().length;L===l-1?S.scrollToLast():0===L&&S.scrollActiveItemIntoView(),L=l}).observe(this.scrollPane.nativeElement,{childList:!0,characterData:!0,attributes:!0})}},A.prototype.ngOnDestroy=function(){this.subscriptionManager&&this.subscriptionManager.unsubscribeAll()},A.prototype.ngOnChanges=function(){this.updateCarouselWidth(),this.scrollActiveItemIntoView()},A.prototype.ngAfterViewInit=function(){var S=this;this.subscriptionManager.subscribe(V.updateNavButtonEvent,function(){return S.updateNavButtonVisibility()})},A.prototype.getScrollChildren=function(){var S=this.scrollPane.nativeElement.children;return this.isReadingMode&&(S=$(S).not(".hidden-in-view-mode")),S},A.prototype.onNavButtonContainerRightClick=function(S){S.preventDefault(),this.onSeeAll&&this.onSeeAll.emit(S)},A.prototype.scrollToNext=function(){for(var S=this.getScrollChildren(),L=this.scrollPane.nativeElement.offsetWidth,D=this.isRtl?S.length-1:0;this.isRtl?D>=0:D<S.length;this.isRtl?D--:D++){var m=$(S[D]);if(m.position().left+m.width()>L){this.scrollToChild(m);break}}},A.prototype.scrollToPrevious=function(){for(var D,S=this.scrollPane,L=this.getScrollChildren(),m=-S.nativeElement.offsetWidth,v=this.isRtl?L.length-1:0;this.isRtl?v>=0:v<L.length;this.isRtl?v--:v++)if((D=$(L[v])).position().left>=m){this.scrollToChild(D);break}},A.prototype.scrollToChild=function(S){var L=this;if(S&&S.length>0){this.isScrollingActiveItemIntoView=!0;var D=$(this.scrollPane.nativeElement),m=D.scrollLeft()+S.position().left-D.position().left;D.animate({scrollLeft:m},250,function(){L.updateNavButtonVisibility(),L.isScrollingActiveItemIntoView=!1})}},A.prototype.scrollToLast=function(){var S=_.last(this.getScrollChildren());this.scrollToChild($(S))},A.prototype.scrollActiveItemIntoView=function(){if(!this.isScrollingActiveItemIntoView){var S=this.element.nativeElement.getElementsByClassName("selected");this.scrollToChild($(S[0]))}},A.prototype.updateCarouselWidth=function(){if(null!==this.scrollPane.nativeElement.offsetParent){for(var S=this.element.nativeElement.parentElement.offsetWidth,L=this.getScrollChildren(),D=0,m=0,v=L.length;m<v;m++)D+=$(L[m]).outerWidth(!0);var l=D+40;S>39&&(l=Math.min(S-(this.isReadingMode?0:39),l)),$(this.element.nativeElement).width(l)}this.updateNavButtonVisibility()},A.prototype.updateNavButtonVisibility=function(){this.renderer.setProperty(this.previousNavButton.nativeElement,"disabled",!1),this.renderer.setProperty(this.nextNavButton.nativeElement,"disabled",!1);var S=this.isRtl?-1:1;S*this.scrollPane.nativeElement.scrollLeft<=0&&this.renderer.setProperty(this.previousNavButton.nativeElement,"disabled",!0),Math.abs(S*this.scrollPane.nativeElement.scrollLeft+(this.scrollPane.nativeElement.offsetWidth-this.scrollPane.nativeElement.scrollWidth))<=2&&this.renderer.setProperty(this.nextNavButton.nativeElement,"disabled",!0)},A.\u0275fac=function(L){return new(L||A)(e.\u0275\u0275directiveInject(n.J),e.\u0275\u0275directiveInject(f.q),e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Renderer2))},A.\u0275cmp=e.\u0275\u0275defineComponent({type:A,selectors:[["carousel"]],viewQuery:function(L,D){if(1&L&&(e.\u0275\u0275viewQuery(h,7),e.\u0275\u0275viewQuery(M,7),e.\u0275\u0275viewQuery(I,7)),2&L){var m=void 0;e.\u0275\u0275queryRefresh(m=e.\u0275\u0275loadQuery())&&(D.scrollPane=m.first),e.\u0275\u0275queryRefresh(m=e.\u0275\u0275loadQuery())&&(D.previousNavButton=m.first),e.\u0275\u0275queryRefresh(m=e.\u0275\u0275loadQuery())&&(D.nextNavButton=m.first)}},inputs:{autoResize:"autoResize",isReadingMode:"isReadingMode"},outputs:{onSeeAll:"onSeeAll"},features:[e.\u0275\u0275NgOnChangesFeature],ngContentSelectors:g,decls:11,vars:4,consts:[["role","presentation","data-automation-id","carousel",1,"carouselControl",3,"mouseenter","on-resize"],["data-automation-id","carousel_navButtonContainer",1,"navButtonContainer",3,"contextmenu"],["tabindex","-1","localize-tooltip","Carousel_PreviousPages","data-automation-id","carousel_previousPage",1,"carouselNavButton","previousPage",3,"localizeAttr","click"],["previousPageButton",""],[1,"glyphicon","pbi-glyph-caretleft","glyph-mini"],["tabindex","-1","localize-tooltip","Carousel_NextPages","data-automation-id","carousel_nextPage",1,"carouselNavButton","nextPage",3,"localizeAttr","click"],["nextPageButton",""],[1,"glyphicon","pbi-glyph-caretright","glyph-mini"],["role","presentation","data-automation-id","carousel_carouselScrollPane",1,"carouselScrollPane"],["carouselScrollPane",""]],template:function(L,D){1&L&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275listener("mouseenter",function(){return D.updateNavButtonVisibility()})("on-resize",function(){return D.carouselResized()}),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275listener("contextmenu",function(v){return D.onNavButtonContainerRightClick(v)}),e.\u0275\u0275elementStart(2,"button",2,3),e.\u0275\u0275listener("click",function(){return D.isRtl?D.scrollToNext():D.scrollToPrevious()}),e.\u0275\u0275element(4,"i",4),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"button",5,6),e.\u0275\u0275listener("click",function(){return D.isRtl?D.scrollToPrevious():D.scrollToNext()}),e.\u0275\u0275element(7,"i",7),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(8,"div",8,9),e.\u0275\u0275projection(10),e.\u0275\u0275elementEnd()()),2&L&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("localizeAttr",e.\u0275\u0275pureFunction0(2,b)),e.\u0275\u0275advance(3),e.\u0275\u0275property("localizeAttr",e.\u0275\u0275pureFunction0(3,P)))},dependencies:[i.b,O.r,T.O],styles:[".carouselControl[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;height:100%}.carouselControl[_ngcontent-%COMP%]:hover   .carouselNavButton[_ngcontent-%COMP%]{opacity:1}.carouselControl[_ngcontent-%COMP%]   .navButtonContainer[_ngcontent-%COMP%]{display:flex}.carouselControl[_ngcontent-%COMP%]   .carouselNavButton[_ngcontent-%COMP%]{width:20px;padding:0;margin:0;border:none;background:transparent;line-height:1em;font-size:1em;outline:none;opacity:0;transition:opacity .5s}.carouselControl[_ngcontent-%COMP%]   .carouselNavButton.previousPage[_ngcontent-%COMP%]{left:0}.carouselControl[_ngcontent-%COMP%]   .carouselNavButton.nextPage[_ngcontent-%COMP%]{right:0}.carouselControl[_ngcontent-%COMP%]   .carouselScrollPane[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden}",".exploreHost.landingController[_nghost-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]{width:inherit!important}.exploreHost.landingController[_nghost-%COMP%]   .carouselControl[_ngcontent-%COMP%]   .navButtonContainer[_ngcontent-%COMP%]   .carouselNavButton.nextPage[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .carouselControl[_ngcontent-%COMP%]   .navButtonContainer[_ngcontent-%COMP%]   .carouselNavButton.nextPage[_ngcontent-%COMP%]{border-right:none}.exploreHost.landingController[_nghost-%COMP%]   .carouselScrollPane[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .carouselScrollPane[_ngcontent-%COMP%]{left:88px!important}"]}),A}()},71430:function(Ve,se,t){t.d(se,{D:function(){return p}});var e=t(73637),n=t(70377),f=t(33714),i=t(25956),O=t(77212),T=t(28252),V=t(42),h=t(78186),M=t(31053),I=t(68128),b=t(95473),P=t(96935),g=powerbi.telemetry,u=powerbi.explore.util;function s(C,A){if(1&C&&(e.\u0275\u0275elementStart(0,"div",4),e.\u0275\u0275element(1,"pbi-lazy-load",5),e.\u0275\u0275elementEnd()),2&C){var S=e.\u0275\u0275nextContext();e.\u0275\u0275property("hidden",!S.viewModel.isPaneExpanded),e.\u0275\u0275advance(1),e.\u0275\u0275property("modulePath",S.fieldListModulePath)("componentId","FieldListContainerComponentId")}}var p=function(){function C(A,S,L,D,m,v){this.explorationCapabilities=A,this.featureSwitchService=S,this.gettingStarted=L,this.panesVisibility=D,this.telemetryService=m,this.viewModeState=v,this.exploreUIShellConfig=powerbi.explore.modules.ExploreUIShellModule}return C.prototype.ngOnInit=function(){var A=this;this.visibilitySubscription=this.gettingStarted.fieldsPaneVisibility$.subscribe(function(S){var L=A.explorationCapabilities.getCapabilities();A.viewModel.isPaneExpanded!==S&&!L.forceCollapseTaskPane&&A.panesVisibility.togglePaneExpansion(2)}),this.paneTitleKey=this.featureSwitchService.featureSwitches.onObject?this.viewModel.title:"TaskPane_Fields"},C.prototype.ngOnDestroy=function(){this.visibilitySubscription.unsubscribe()},C.prototype.toggleDataPane=function(){var A=this.panesVisibility.togglePaneExpansion(2);this.telemetryService.logEvent(g.EXTogglePaneExpanded,{paneType:"Task",expanded:A,viewMode:u.getTelemetryViewMode(this.viewModeState.getMode())})},Object.defineProperty(C.prototype,"fieldListModulePath",{get:function(){return"./lazy-modules/field-list/field-list.module#FieldListModule"},enumerable:!1,configurable:!0}),C.prototype.close=function(){this.panesVisibility.closePane(2)},C.\u0275fac=function(S){return new(S||C)(e.\u0275\u0275directiveInject(n.U),e.\u0275\u0275directiveInject(f.vZ),e.\u0275\u0275directiveInject(i.c),e.\u0275\u0275directiveInject(O.r),e.\u0275\u0275directiveInject(T.y0),e.\u0275\u0275directiveInject(V.kc))},C.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["data-pane"]],inputs:{viewModel:"viewModel"},decls:4,vars:5,consts:[["disableScroll","","modeling-context-changer","","data-automation-type","taskPaneGroup","keyboard-shortcuts","ctrl-F6","focus-nav-mode","Group","focus-priority","12",3,"expanded","title","allowToggle","showClose","onClose","onToggle"],["noPadding","",1,"paneSection"],["class","paneContents","pbiLazyLoadContents","exploreUIShellConfig",3,"hidden",4,"ngIf"],["tabindex","0",1,"paneStopBottom"],["pbiLazyLoadContents","exploreUIShellConfig",1,"paneContents",3,"hidden"],[3,"modulePath","componentId"]],template:function(S,L){1&S&&(e.\u0275\u0275elementStart(0,"pbi-pane",0),e.\u0275\u0275listener("onClose",function(){return L.close()})("onToggle",function(){return L.toggleDataPane()}),e.\u0275\u0275elementStart(1,"pbi-pane-section",1),e.\u0275\u0275template(2,s,2,3,"div",2),e.\u0275\u0275element(3,"div",3),e.\u0275\u0275elementEnd()()),2&S&&(e.\u0275\u0275property("expanded",L.viewModel.isPaneExpanded)("title",L.paneTitleKey)("allowToggle",!L.viewModel.disallowExpandCollapse)("showClose",L.viewModel.allowClosingPane),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",L.viewModel.isPaneVisible))},dependencies:[h.NgIf,M.R,I.q,b.V,P.i],encapsulation:2,changeDetection:0}),C}()},87460:function(Ve,se,t){t.d(se,{X:function(){return k}});var e=t(7005),n=t(29494),f=t(73637),i=t(16660),O=t(83406),T=t(18766),V=t(26326),h=t(23196),M=t(25991),I=t(32130),b=t(97850),P=t(59897),g=t(33714),u=t(33874),s=t(26092),p=t(18266),C=t(15338),A=t(10378),S=t(28252),L=t(5801),D=t(71442),m=t(14096),v=t(56339),l=t(78186),y=t(35380),d=t(80338),w=t(40166),x=powerbi.explore,N=x.contracts,X=powerbi.data,Ce=x.services.events,he=x.util,Fe=x.viewModels,fe=powerbi.visuals,ae=X.DataViewObjectDefinitions,pe=he.DetailVisualUtils,ge=powerbi.Prototype,Me=X.SQConstantExpr,ce=X.SQExprBuilder,J=x.util.SparklinesUtil,ie=fe.TablixProperties,G=x.util.VisualContainerUtils;function j(R,z){if(1&R&&f.\u0275\u0275element(0,"visual-modern",3),2&R){var Q=f.\u0275\u0275nextContext();f.\u0275\u0275property("viewModel",Q.viewModel.visual)("supportsScreenReader",!0)}}function F(R,z){if(1&R&&(f.\u0275\u0275elementStart(0,"div",6),f.\u0275\u0275element(1,"tri-svg-icon",7),f.\u0275\u0275elementStart(2,"div",8),f.\u0275\u0275element(3,"span",9),f.\u0275\u0275elementEnd(),f.\u0275\u0275elementStart(4,"div",10)(5,"span",11),f.\u0275\u0275text(6),f.\u0275\u0275elementEnd()()()),2&R){var Q=f.\u0275\u0275nextContext(2);f.\u0275\u0275advance(6),f.\u0275\u0275textInterpolate(Q.errorMessage)}}function E(R,z){if(1&R&&(f.\u0275\u0275elementStart(0,"div",4),f.\u0275\u0275template(1,F,7,1,"div",5),f.\u0275\u0275elementEnd()),2&R){var Q=f.\u0275\u0275nextContext();f.\u0275\u0275styleProp("width",Q.viewModel.visual.viewport.width,"px")("height",Q.viewModel.visual.viewport.height,"px"),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",Q.inVisualCalcMode&&Q.isInitialized)}}var k=function(){function R(z,Q,me,le,K,q,ye,Le,Ne,be,Y,ue,Pe,Ae,Ze,ot,lt,yt,De,Ie,Oe){this.conceptualSchemaProxy=z,this.dataSourcesService=Q,this.drillService=me,this.eventBridge=le,this.explorationNavigation=K,this.featureSwitchService=q,this.filterGenerator=ye,this.geocoder=Le,this.geolocationService=Ne,this.localizationService=be,this.modulLoader=Y,this.promiseFactory=ue,this.screenReaderService=Pe,this.singleExecutableDataProxyFactory=Ae,this.telemetryService=Ze,this.visibility=ot,this.visualAuthoring=lt,this.visualAuthoringOperations=yt,this.visualHostTooltipServiceFactory=De,this.visualPlugin=Ie,this.visualQueryGenerator=Oe,this.inVisualCalcMode=!1}return R.prototype.ngOnChanges=function(z){null!=this.viewModel&&(z.themeCollection&&(this.viewModel.visual.themeCollection=z.themeCollection.currentValue),z.viewport&&(this.viewModel.visual.viewport=pe.adjustViewport(this.viewModel.parentContract.detailVisualLayout,z.viewport.currentValue,this.inVisualCalcMode)),z.visualContainer&&(this.viewModel.parentContract=z.visualContainer.currentValue),void 0===this.isInitialized&&this.initializeVisual())},R.prototype.ngOnInit=function(){this.viewModel=Fe.DetailVisualViewModelUtils.convertDetailVisual(this.visualContainer,this.themeCollection,this.viewport,this.inVisualCalcMode,this.detailVisualSpinnerActionCallback),this.inVisualCalcMode=this.inVisualCalcMode,this.detailVisualSpinnerActionCallback=this.detailVisualSpinnerActionCallback,this.dataProxy=this.singleExecutableDataProxyFactory.create(),this.visualDataProxyService=x.services.createExploreVisualDataProxyService(this.dataProxy,this.filterGenerator,this.promiseFactory,this.visualPlugin),this.queryVisualHostServices=this.createQueryVisualHostServices(),this.initializeVisual()},R.prototype.ngOnDestroy=function(){this.subscriptionManager&&this.subscriptionManager.unsubscribeAll()},R.prototype.initializeVisual=function(){var z=this;if(this.viewModel&&this.viewModel.parentContract){var Q=this.viewModel.parentContract,me=this.viewModel.visual;me.visualPlugin=this.visualPlugin,me.interactivityOptions={isInteractiveLegend:!1,selection:!1},me.type=18&Q.visibility?fe.plugins.pivotTable.name:fe.plugins.accessibleTable.name;var K={conceptualSchemaProxy:this.conceptualSchemaProxy,dataSources:this.dataSourcesService,drill:this.drillService,eventBridge:this.eventBridge,explorationNavigation:this.explorationNavigation,featureSwitchService:this.featureSwitchService,filterGenerator:this.filterGenerator,geocoder:this.geocoder,geolocationService:this.geolocationService,localizationService:this.localizationService,moduleLoader:this.modulLoader,promiseFactory:this.promiseFactory,screenReaderService:this.screenReaderService,singleExecutableDataProxyFactory:this.singleExecutableDataProxyFactory,telemetryService:this.telemetryService,visibility:this.visibility,visualAuthoring:this.visualAuthoring,visualHostTooltipServiceFactory:this.visualHostTooltipServiceFactory,visualPlugin:this.visualPlugin,visualAuthoringOperations:this.visualAuthoringOperations,visualQueryGenerator:this.visualQueryGenerator,geolocation:this.geolocationService,visualHostTooltipService:this.visualHostTooltipServiceFactory.create(me)};me.hostServices=ge.inherit(x.services.createVisualHostServices(K),function(q){q.persistProperties=function(ye){return z.persistProperties(ye)},q.getLocalizedString=function(ye){for(var Le,Ne=[],be=1;be<arguments.length;be++)Ne[be-1]=arguments[be];return(Le=z.localizationService).format.apply(Le,(0,e.ev)([ye],Ne||[],!1))},q.getViewMode=function(){return 1},q.loadMoreData=function(){z.runQuery(!1,!1,!0)},q.alertScreenReader=function(ye){return z.screenReaderService.alertPolite(ye)}}),this.initializeDetailVisualContract(me.type),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(Ce.visualContainerChanged,function(q,ye){ye&&z.viewModel.parentContract&&ye.affectContainer(z.viewModel.parentContract)&&z.runQuery(!1)}).subscribe(Ce.filterContainerChanged,function(q,ye){(0!==ye.scope.scopeType||ye.scope.container===z.viewModel.parentContract)&&z.runQuery(!1)}).subscribe(Ce.parentExpandCollapseAction,function(q,ye){ye.visualContainer===z.viewModel.parentContract&&z.runQuery(!1)}),this.isInitialized=!1,this.runQuery(!0)}},R.prototype.initializeDetailVisualContract=function(z){this.detailVisualContract={name:this.viewModel.parentContract.name,config:{singleVisual:{visualType:z}},layouts:jsCommon.ArrayExtensions.extendWithId([{id:0,position:{x:0,y:0,width:0,height:0}}])}},R.prototype.updateSubtotalState=function(){var z=this.viewModel.parentContract,Q=!1,me=!1;if(z.config&&z.config.singleVisual&&!this.inVisualCalcMode)if("pivotTable"===z.config.singleVisual.visualType){if(Q=!0,me=!0,z.config.singleVisual.objects){var le=ae.getValue(z.config.singleVisual.objects,ie.PropSubTotalsPivotTableColumnSubtotals,void 0);le&&le.value&&(me=Me.getBooleanValue(le)),(le=ae.getValue(z.config.singleVisual.objects,ie.PropSubTotalsPivotTableRowSubtotals,void 0))&&le.value&&(Q=Me.getBooleanValue(le))}}else"tableEx"===z.config.singleVisual.visualType?Q=!0:z.config.singleVisual.visualType===powerbi.visuals.plugins.waterfallChart.name&&(me=!0);else this.inVisualCalcMode&&(Q=!0,me=!0);var K=this.detailVisualContract.config.singleVisual.objects||{};ae.setValue(K,ie.PropSubTotalsPivotTableRowSubtotals,null,ce.boolean(Q)),ae.setValue(K,ie.PropSubTotalsPivotTableColumnSubtotals,null,ce.boolean(me)),this.inVisualCalcMode&&(ae.setValue(K,ie.PropRowsSteppedLayout,null,ce.boolean(!1)),ae.setValue(K,ie.PropRowsExpandCompositeHierarchy,null,ce.boolean(!0)),ae.setValue(K,ie.PropSubTotalsPivotTableRowSubtotalsPerLevel,null,ce.boolean(!0)),ae.setValue(K,ie.PropSubTotalsPivotTableColumnSubtotalsPerLevel,null,ce.boolean(!0)),ae.setValue(K,ie.PropSubTotalsPivotTableLevelSubtotalEnabled,null,ce.boolean(!0)),ae.setValue(K,ie.PropSubTotalsPivotTableRowSubtotalsPosition,null,ce.text(powerbi.visuals.rowSubtotalPosition.bottom))),this.detailVisualContract.config.singleVisual.objects=K},R.prototype.persistProperties=function(z){var Q=this.detailVisualContract,me=_.isArray(z)?{replace:z}:z;this.visualAuthoring.persistProperties(me,Q,!0)&&this.runQuery(!1,!0)},R.prototype.runQuery=function(z,Q,me){var le=this;if(void 0===me&&(me=!1),this.viewModel&&this.viewModel.parentContract){this.updateSubtotalState();var K=this.viewModel.parentContract,q=this.dataSourcesService.get();if(q&&K.config&&K.config.singleVisual){if(null==K.config.singleVisual.query)return this.clearData(),this.errorMessage=this.localizationService.get("Please_Add_Field_Or_VisualCalc"),void(this.isInitialized=!0);me&&!this.visualDataProxyService.canLoadMore()||(this.startSpinner(),this.conceptualSchemaProxy.get(q).then(function(ye){var Le=le.viewModel.parentContract,Ne=N.SingleVisualConfig.clone(Le.config.singleVisual),be={name:Le.name,config:{singleVisual:Ne}};return J.replaceSparklineDataWithMeasure(ye,be,le.visualAuthoringOperations),le.inVisualCalcMode&&null!=Ne.query&&(le.drillService.drillToLastLevel(be),Ne.query.expansionStates=[]),le.visualDataProxyService.runQuery({dataSources:q,schema:ye,config:be.config.singleVisual,hostServices:le.queryVisualHostServices,visualQueryGenerator:le.visualQueryGenerator,executionType:me?1:2,preferCurrentData:Q,additionalDataViewKinds:2,useNativeReferenceNameAsDisplayNames:le.inVisualCalcMode,disableHidden:le.inVisualCalcMode,enableAllSubtotal:le.inVisualCalcMode}).then(function(ue){return le.onDataChanged(ue,z,me)},function(ue){return le.clearData(ue)})},function(ye){return le.clearData(ye)}).finally(function(){le.stopSpinner(),le.isInitialized=!0}))}}},R.prototype.clearData=function(z){var Q=this.viewModel;Q.visual.dataTransforms={},Q.visual.data={dataView:{metadata:{columns:[]},matrix:{rows:{root:{children:[],childIdentityFields:[]},levels:[]},columns:{root:{children:[]},levels:[]},valueSources:[]}},dataViewSource:null},Q.hasData=!1,this.errorMessage=this.getErrorDetails(z)},R.prototype.getErrorDetails=function(z){if(null!=z&&z.getDetails){var Q=z.getDetails(this.localizationService),me=_.first(null==Q?void 0:Q.displayableErrorInfo);if(null!=me&&me.errorInfoValue)return me.errorInfoValue}return this.defaultNoDataErrorMessage||(this.defaultNoDataErrorMessage=this.localizationService.get("DetailVisual_No_Data_Detail")),this.defaultNoDataErrorMessage},R.prototype.onDataChanged=function(z,Q,me){var le;if(le=z?{dataView:z&&z.dataReaderResult?z.dataReaderResult.dataView:null,dataViewSource:z&&z.dataViewSource?z.dataViewSource:null}:this.viewModel.visual.data){var K=le.dataView;if(K&&!K.matrix)return void this.clearData();var ye,q=G.isSegment(le.dataView);if(q&&(le.isFirstSegment=q),null!=K){var Le=this.visualDataProxyService.lastExecutedQuery(),Ne=G.getDataRolesForVisual(this.viewModel.parentContract,this.visualPlugin),be=_.map(Ne,function(ue){return ue.name}),Y=he.MatrixVisualDataViewConverter.generate(K,Le.transforms.selects,Le.transforms.splits,be,Le.transforms.roles&&Le.transforms.roles.ordering,this.featureSwitchService);if(ye=Y?Y.transformActions:void 0,le.dataView=Y&&Y.dataView?Y.dataView:le.dataView,!ye)return void this.clearData();ye.objects=this.detailVisualContract.config.singleVisual.objects}me&&(X.segmentation.DataViewMerger.mergeDataViews(K=this.viewModel.visual.data.dataView,le.dataView),le.dataView=K),this.viewModel.visual.dataTransforms=ye,this.viewModel.visual.data=le,this.viewModel.hasData=!0,this.errorMessage=void 0}},R.prototype.createQueryVisualHostServices=function(){var z=this;return ge.inherit(x.util.VisualHostServicesUtil.createQueryVisualHostServices(),function(Q){Q.getFilters=function(me,le){var K=z.explorationNavigation;return me.calculateDetailVisualFilter(K.getCurrentExploration(),K.getCurrentSection(),z.viewModel.parentContract,le,1)},Q.getDataSourceVariables=function(){var me=z.explorationNavigation.getCurrentExploration();return void 0!==me?me.dataSourceVariables:void 0}})},R.prototype.startSpinner=function(){this.detailVisualSpinnerActionCallback(0)},R.prototype.stopSpinner=function(){this.detailVisualSpinnerActionCallback(1)},R.\u0275fac=function(Q){return new(Q||R)(f.\u0275\u0275directiveInject(i.i),f.\u0275\u0275directiveInject(T.D),f.\u0275\u0275directiveInject(V.s),f.\u0275\u0275directiveInject(h.J),f.\u0275\u0275directiveInject(M.z),f.\u0275\u0275directiveInject(g.vZ),f.\u0275\u0275directiveInject(I.r),f.\u0275\u0275directiveInject(u.iS),f.\u0275\u0275directiveInject(s._1),f.\u0275\u0275directiveInject(p.o),f.\u0275\u0275directiveInject(C.m),f.\u0275\u0275directiveInject(n.t),f.\u0275\u0275directiveInject(A.g),f.\u0275\u0275directiveInject(O.U),f.\u0275\u0275directiveInject(S.y0),f.\u0275\u0275directiveInject(b.w),f.\u0275\u0275directiveInject(L.$),f.\u0275\u0275directiveInject(D.Q),f.\u0275\u0275directiveInject(m.q),f.\u0275\u0275directiveInject(v.D),f.\u0275\u0275directiveInject(P.S))},R.\u0275cmp=f.\u0275\u0275defineComponent({type:R,selectors:[["detail-visual"]],inputs:{visualContainer:"visualContainer",themeCollection:"themeCollection",viewport:"viewport",inVisualCalcMode:"inVisualCalcMode",detailVisualSpinnerActionCallback:"detailVisualSpinnerActionCallback"},features:[f.\u0275\u0275NgOnChangesFeature],decls:3,vars:5,consts:[["role","document",1,"detailVisual",3,"ngSwitch"],[3,"viewModel","supportsScreenReader",4,"ngSwitchCase"],["class","noDataOverlay",3,"width","height",4,"ngSwitchCase"],[3,"viewModel","supportsScreenReader"],[1,"noDataOverlay"],["class","errorMessage",4,"ngIf"],[1,"errorMessage"],["name","table_triangle_20_regular","sprite","visual-calc-icons",1,"errorSvgIcon"],[1,"messageTitle"],["localize","DetailVisual_No_Data_Title",1,"errorSpan"],[1,"messageDetail"],[1,"errorSpan"]],template:function(Q,me){1&Q&&(f.\u0275\u0275elementStart(0,"div",0),f.\u0275\u0275template(1,j,1,2,"visual-modern",1),f.\u0275\u0275template(2,E,2,5,"div",2),f.\u0275\u0275elementEnd()),2&Q&&(f.\u0275\u0275classProp("noBorder",me.inVisualCalcMode),f.\u0275\u0275property("ngSwitch",me.viewModel&&me.viewModel.hasData),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngSwitchCase",!0),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngSwitchCase",!1))},dependencies:[l.NgIf,l.NgSwitch,l.NgSwitchCase,y.X,d.M,w.y],styles:['[_nghost-%COMP%]{font-family:Segoe UI,"Segoe UI Web (West European)",-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif;font-size:14px;display:flex;width:100%;height:100%;flex:1}[_nghost-%COMP%]   .noDataOverlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;line-height:normal;margin:4px;gap:10px;text-align:center;background-color:transparent}[_nghost-%COMP%]   .noDataOverlay[_ngcontent-%COMP%]   .errorSvgIcon[_ngcontent-%COMP%]{color:var(--globalColorDarkOrangeShade10)}[_nghost-%COMP%]   .noDataOverlay[_ngcontent-%COMP%]   .messageTitle[_ngcontent-%COMP%]{margin-bottom:20px;font-weight:600;font-size:18px;color:#323130}[_nghost-%COMP%]   .noDataOverlay[_ngcontent-%COMP%]   .messageDetail[_ngcontent-%COMP%]{font-weight:400;font-size:14px;line-height:20px;color:#484644;white-space:pre-wrap;overflow-y:auto;max-height:200px;margin-right:10px}[_nghost-%COMP%]   .hide[_ngcontent-%COMP%]{display:none}',".exploreHost.landingController   .visualContainer.popOut.seeData[_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController   .visualContainer.popOut.seeData   [_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color, #FFF);-webkit-user-select:text;user-select:text}.exploreHost.landingController.phoneLayouts   .visualContainer.popOut.seeData[_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController.phoneLayouts   .visualContainer.popOut.seeData   [_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController.tabletPortraitLayout   .visualContainer.popOut.seeData[_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController.tabletPortraitLayout   .visualContainer.popOut.seeData   [_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%]{border-style:none}.exploreHost.landingController.phoneLayouts[_nghost-%COMP%]   .visualContainer.popOut.seeData[_nghost-%COMP%], .exploreHost.landingController.phoneLayouts   .visualContainer.popOut.seeData   [_nghost-%COMP%]{height:100%}.exploreHost.landingController.phoneLayouts[_nghost-%COMP%]   .visualContainer.popOut.seeData[_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%], .exploreHost.landingController.phoneLayouts   .visualContainer.popOut.seeData   [_nghost-%COMP%]   .detailVisual[_ngcontent-%COMP%]{height:100%}"]}),R}()},71657:function(Ve,se,t){t.d(se,{L:function(){return n}});var e=t(73637),n=function(){function i(){}return i.prototype.ngOnChanges=function(O){O.viewModel&&this.onViewModelChange()},i.prototype.onViewModelChange=function(){var O=function(i,O,T){var V=$("<canvas></canvas>").attr({width:i.UnitLength,height:O.UnitLength}).get(0),h=V.getContext("2d");h.fillStyle=T;for(var M=0;M<i.UnitDivisions;++M){var I=Math.round(M*i.UnitLength/i.UnitDivisions);h.fillRect(I,0,1,1)}for(M=1;M<O.UnitDivisions;++M){var b=Math.round(M*O.UnitLength/O.UnitDivisions);h.fillRect(0,b,1,1)}return V}(this.viewModel.layoutX,this.viewModel.layoutY,this.viewModel.color);this.unitImageUrl=O.toDataURL("image/png")},i.\u0275fac=function(T){return new(T||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["dot-grid"]],inputs:{viewModel:"viewModel"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:2,consts:[[1,"container"],[1,"hideEdgeDots"],[1,"background"]],template:function(T,V){1&T&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275element(2,"div",2),e.\u0275\u0275elementEnd()()),2&T&&(e.\u0275\u0275advance(2),e.\u0275\u0275styleProp("background-image","url("+V.unitImageUrl+")"))},styles:[".container[_ngcontent-%COMP%], .hideEdgeDots[_ngcontent-%COMP%], .background[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;pointer-events:none;display:inline-block}.container[_ngcontent-%COMP%]{top:0}.hideEdgeDots[_ngcontent-%COMP%]{overflow:hidden;padding-left:1px;padding-top:20px;box-sizing:border-box}.background[_ngcontent-%COMP%]{background-repeat:repeat;background-position-x:-1px}.stylableVisualContainerHeader[_nghost-%COMP%]   .hideEdgeDots[_ngcontent-%COMP%], .stylableVisualContainerHeader   [_nghost-%COMP%]   .hideEdgeDots[_ngcontent-%COMP%]{padding-top:1px}.stylableVisualContainerHeader[_nghost-%COMP%]   .background[_ngcontent-%COMP%], .stylableVisualContainerHeader   [_nghost-%COMP%]   .background[_ngcontent-%COMP%]{background-position-y:-1px}@media print{.container[_ngcontent-%COMP%]{display:none}}"]}),i}()},65764:function(Ve,se,t){t.d(se,{w:function(){return fe}});var e=t(7005),n=t(73637),f=t(30411),i=t(48007),O=t(24708),T=t(21810),V=t(93880),h=t(19461),M=t(59091),I=t(41456),b=t(70377),P=t(33714),g=t(18266),u=t(61278),s=t(10378),p=t(78186),C=t(35380),A=t(18601),S=t(58622),L=t(73602),D=t(72661),m=powerbi.explore.util.DurationDisplayHelper,v=powerbi.explore.util.DurationParser,l=jsCommon.NumberExtensions,y=jsCommon.StringExtensions,d=function(pe){return{invalid:pe}};function w(ae,pe){if(1&ae&&(n.\u0275\u0275elementStart(0,"form",6)(1,"div",7)(2,"div",8),n.\u0275\u0275element(3,"num-up-down",9),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"mat-select",10),n.\u0275\u0275element(6,"mat-option",11)(7,"mat-option",12)(8,"mat-option",13)(9,"mat-option",14),n.\u0275\u0275elementEnd()()()),2&ae){var ge=n.\u0275\u0275nextContext();n.\u0275\u0275property("formGroup",ge.durationPickerGroup),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(9,d,ge.durationPickerGroup.invalid)),n.\u0275\u0275advance(1),n.\u0275\u0275property("pbi-tooltip",n.\u0275\u0275pipeBind1(4,7,ge.tooltipConfig$))("labelId",ge.labelId)("ariaDescribedby",ge.ariaDescribedby),n.\u0275\u0275advance(2),n.\u0275\u0275property("panelClass",ge.newPaneColors),n.\u0275\u0275attribute("aria-labelledby",ge.labelId)}}function x(ae,pe){1&ae&&n.\u0275\u0275element(0,"span",15)}function N(ae,pe){1&ae&&n.\u0275\u0275element(0,"span",16)}function X(ae,pe){1&ae&&n.\u0275\u0275element(0,"b",25)}function ne(ae,pe){1&ae&&n.\u0275\u0275element(0,"b",26)}function Ce(ae,pe){if(1&ae&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"div",19),n.\u0275\u0275template(2,X,1,0,"b",20),n.\u0275\u0275template(3,ne,1,0,"ng-template",null,21,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementStart(5,"div",19),n.\u0275\u0275element(6,"span",22),n.\u0275\u0275elementStart(7,"b"),n.\u0275\u0275text(8),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(9,"div",19),n.\u0275\u0275element(10,"span",23),n.\u0275\u0275elementStart(11,"b"),n.\u0275\u0275text(12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementStart(13,"div",19),n.\u0275\u0275element(14,"span",24),n.\u0275\u0275elementStart(15,"b"),n.\u0275\u0275text(16),n.\u0275\u0275elementEnd()(),n.\u0275\u0275elementContainerEnd()),2&ae){var ge=pe.ngIf,Me=n.\u0275\u0275reference(4);n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",ge.adminConfig.autoRefreshEnabled)("ngIfElse",Me),n.\u0275\u0275advance(6),n.\u0275\u0275textInterpolate1(" ",ge.adminTimeString,""),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate1(" ",ge.effectiveRefreshInterval,""),n.\u0275\u0275advance(4),n.\u0275\u0275textInterpolate1(" ",ge.lastRefreshTimestamp,"")}}function he(ae,pe){1&ae&&n.\u0275\u0275element(0,"div",27)}function Fe(ae,pe){if(1&ae&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,Ce,17,5,"ng-container",17),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275template(3,he,1,0,"ng-template",null,18,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementContainerEnd()),2&ae){var ge=n.\u0275\u0275reference(4),Me=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(2,2,Me.refreshStatistics$))("ngIfElse",ge)}}var fe=function(ae){function pe(ge,Me,ce,J,ie){var G=ae.call(this)||this;return G.explorationCapabilities=ge,G.featureSwitchService=Me,G.localizationService=ce,G.reportRefreshService=J,G.screenReaderService=ie,G.modelValueChange=new n.EventEmitter,G.showDetails=!1,G.milliSecondsinOneSecond=1e3,G.refreshStatistics$=(0,i.F)(G.milliSecondsinOneSecond/2).pipe((0,O.U)(function(j){return G.reportRefreshService.getRefreshStats()}),(0,T.h)(function(j){return!!j}),(0,T.h)(function(j){return void 0!==j.adminConfig}),(0,O.U)(function(j){return(0,e.pi)((0,e.pi)({},j),{lastRefreshTimestamp:j.lastRefreshTimestamp||G.localizationService.get("TwoDashes"),effectiveRefreshInterval:m.convertSecondsToTimeString(j.effectiveRefreshInterval/G.milliSecondsinOneSecond,G.localizationService),adminTimeString:m.convertSecondsToTimeString(j.adminConfig.refreshIntervalSeconds,G.localizationService)})})),G.validateFormGroup=function(j){var F=j.get("value").value,E=j.get("unit").value,k=null==F||y.isNullOrUndefinedOrWhiteSpaceString(E),R=G.validators.integer&&l.isDecimal(F);return k||R?{integer:!0}:m.isBelowMinimumValue(F,E,G.validators.min)?{min:!0}:m.isAboveMaximumValue(F,E,G.validators.max)?{max:!0}:null},G.newPaneColors=G.featureSwitchService.featureSwitches.paneColorRefresh||G.explorationCapabilities.getCapabilities().showFluentDesign?"pbi-modern-select-panel themeableElement":"pbi-modern-select-old-panel themeableElement",G}return(0,e.ZT)(pe,ae),pe.prototype.ngOnInit=function(){this.createFormGroup(),this.setModel()},pe.prototype.setModel=function(){var ge=this;this.mergePropertyInputsAndFormControl(this.changes$("modelValue"),this.value$.pipe((0,T.h)(function(Me){return!_.isNull(Me)})),"modelValue",this.onDestroy$).subscribe(function(Me){var ce=v.parseISODurationdString(Me),J=v.durationParseResultToArray(ce);J.length>0?ge.durationPickerGroup.setValue({value:J[0].value,unit:J[0].unit},{emitEvent:!1}):"Unable to parse the following time string: ".concat(Me)})},pe.prototype.createFormGroup=function(){var ge=this;this.durationPickerGroup=new f.nJ({value:new f.p4,unit:new f.p4},{validators:this.validateFormGroup});var Me=this.durationPickerGroup.statusChanges.pipe((0,O.U)(function(ie){return"INVALID"!==ie}),(0,V.O)(!0),(0,h.R)(this.onDestroy$)),ce=this.changes$("validators").pipe((0,O.U)(function(ie){return ge.getErrorMessages(ie)}));this.tooltipConfig$=Me.pipe((0,M.M)(ce),(0,O.U)(function(ie){var j=ie[1];if(ge.durationPickerGroup.errors){var F=Object.keys(ge.durationPickerGroup.errors)[0];return ge.getTooltipConfig(j[F])}})),this.durationPickerGroup.valueChanges.pipe((0,h.R)(this.onDestroy$)).subscribe(function(ie){return ge.onUpdate(ie,"VALID"===ge.durationPickerGroup.status)}),this.mergePropertyInputsAndFormControl(this.changes$("isDisabled"),this.disabled$,"isDisabled",this.onDestroy$).subscribe(function(ie){ie&&!ge.durationPickerGroup.disabled?ge.durationPickerGroup.disable({emitEvent:!1}):!ie&&!ge.durationPickerGroup.enabled&&ge.durationPickerGroup.enable({emitEvent:!1})})},pe.prototype.onUpdate=function(ge,Me){if(Me){var ce=[{value:ge.value,unit:ge.unit,isTimeUnit:m.isTimeUnit(ge.unit)}],J=v.durationParseResultItemsToDurationParseResult(ce),ie=v.durationParseResultToISODurationString(J);this.modelValueChange.emit(ie),this.onValueChange(ie),this.onTouched();var G=m.getTimeString(ce[0],this.localizationService);this.screenReaderService.alert(G)}},pe.prototype.getErrorMessages=function(ge){return{integer:this.localizationService.get("No_Decimal_Input"),min:this.localizationService.format("DurationPicker_Error_Below_Minimum",[m.getReadableTimeString(ge.min,this.localizationService)]),max:this.localizationService.format("DurationPicker_Error_Above_Maximum",[m.getReadableTimeString(ge.max,this.localizationService)])}},pe.prototype.getTooltipConfig=function(ge){if(ge)return{tooltipDescription:ge,tooltipShowOnFocus:!0}},pe.\u0275fac=function(Me){return new(Me||pe)(n.\u0275\u0275directiveInject(b.U),n.\u0275\u0275directiveInject(P.vZ),n.\u0275\u0275directiveInject(g.o),n.\u0275\u0275directiveInject(u.F),n.\u0275\u0275directiveInject(s.g))},pe.\u0275cmp=n.\u0275\u0275defineComponent({type:pe,selectors:[["duration-picker"]],inputs:{modelValue:"modelValue",validators:"validators",isDisabled:"isDisabled",labelId:"labelId",ariaDescribedby:"ariaDescribedby",tooltipConfig:"tooltipConfig"},outputs:{modelValueChange:"modelValueChange"},features:[n.\u0275\u0275ProvidersFeature([{provide:f.JU,useExisting:(0,n.forwardRef)(function(){return pe}),multi:!0}]),n.\u0275\u0275InheritDefinitionFeature],decls:7,vars:7,consts:[[3,"formGroup",4,"ngIf"],[1,"info-container"],["type","button",1,"info-button",3,"disabled","click"],["localize","Generic_HideDetails",4,"ngIf","ngIfElse"],["showDetailsView",""],[4,"ngIf"],[3,"formGroup"],[1,"controls-container"],[1,"num-up-down",3,"ngClass"],["formControlName","value",3,"pbi-tooltip","labelId","ariaDescribedby"],["formControlName","unit","disableOptionCentering","true",1,"themeableElement","pbi-modern-select",3,"panelClass"],["value","S","localize","TimeUnit_Seconds_Lowercase"],["value","M","localize","TimeUnit_Minutes_Lowercase"],["value","H","localize","TimeUnit_Hours_Lowercase"],["value","D","localize","TimeUnit_Days_Lowercase"],["localize","Generic_HideDetails"],["localize","Generic_ShowDetails"],[4,"ngIf","ngIfElse"],["calculating",""],[1,"info-label"],["localize","DurationPicker_Admin_Enabled_True",4,"ngIf","ngIfElse"],["notEnabled",""],["localize","DurationPicker_Admin_Interval"],["localize","DurationPicker_Actual_Rate"],["localize","DurationPicker_Last_Refresh"],["localize","DurationPicker_Admin_Enabled_True"],["localize","DurationPicker_Admin_Enabled_False"],["localize","DurationPicker_Calculating_Refresh_Stats"]],template:function(Me,ce){if(1&Me&&(n.\u0275\u0275template(0,w,10,11,"form",0),n.\u0275\u0275elementStart(1,"div",1)(2,"button",2),n.\u0275\u0275listener("click",function(){return ce.showDetails=!ce.showDetails}),n.\u0275\u0275template(3,x,1,0,"span",3),n.\u0275\u0275template(4,N,1,0,"ng-template",null,4,n.\u0275\u0275templateRefExtractor),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(6,Fe,5,4,"ng-container",5),n.\u0275\u0275elementEnd()),2&Me){var J=n.\u0275\u0275reference(5);n.\u0275\u0275property("ngIf",ce.durationPickerGroup),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("disabled",ce.durationPickerGroup.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",ce.durationPickerGroup.disabled),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",ce.showDetails)("ngIfElse",J),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",ce.showDetails)}},dependencies:[p.NgClass,p.NgIf,f._Y,f.JJ,f.JL,C.X,A.gD,S.ey,L.x4,D.i,f.sg,f.u,p.AsyncPipe],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;width:100%}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]{display:flex;flex-grow:1}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   .num-up-down[_ngcontent-%COMP%]{margin-right:4px}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   .num-up-down[_ngcontent-%COMP%]   num-up-down[_ngcontent-%COMP%]{width:70px}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   .num-up-down.invalid[_ngcontent-%COMP%]   num-up-down[_ngcontent-%COMP%]{border-color:var(--fluent-theme-error-dark-color, #A80000)}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{height:24px}[_nghost-%COMP%]   .controls-container[_ngcontent-%COMP%]   mat-select.mat-select-disabled[_ngcontent-%COMP%]{background-color:var(--gray-20, #F3F2F1);border-color:var(--gray-60, #C8C6C4);color:var(--gray-90, #A19F9D)}.info-container.disabled[_ngcontent-%COMP%]{color:var(--gray-90, #A19F9D)}.info-container[_ngcontent-%COMP%]   .info-button[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;color:var(--fluent-theme-link-color, #0078D4);background:none;border:none;padding:1px;cursor:pointer}html[data-focus-source="key"][_nghost-%COMP%]   .info-container[_ngcontent-%COMP%]   .info-button[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .info-container[_ngcontent-%COMP%]   .info-button[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.info-container[_ngcontent-%COMP%]   .info-button[disabled][_ngcontent-%COMP%]{color:var(--gray-90, #A19F9D)}.info-container[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding:1px 0}'],changeDetection:0}),pe}(I.N)},17607:function(Ve,se,t){t.d(se,{H:function(){return v}});var e=t(7005),n=t(73637),f=t(34429),i=t(42),O=t(16850),T=t(23196),V=t(67471),h=t(78186),M=t(52181),I=t(20113),b=t(68128),P=t(19709),g=t(48621),u=t(9256),s=t(8178),p=powerbi.explore.services.events,C=function(y,d){return{selected:y,"hidden-in-view-mode":d}};function A(l,y){if(1&l&&(n.\u0275\u0275elementStart(0,"li",9),n.\u0275\u0275element(1,"exploration-navigation-tab",10),n.\u0275\u0275elementEnd()),2&l){var d=y.$implicit,w=y.index,x=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(6,C,d.selected,x.isHiddenInViewMode(d))),n.\u0275\u0275advance(1),n.\u0275\u0275property("viewModel",d)("isEditing",x.isEditMode())("tabIndex",w)("isOnlyVisibleTab",x.isOnlySectionVisibleInViewMode(d))("isHiddenInViewMode",x.isHiddenInViewMode(d))}}function S(l,y){if(1&l&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,A,2,9,"li",8),n.\u0275\u0275elementContainerEnd()),2&l){var d=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",d.viewModel.exploration.sections)}}function L(l,y){if(1&l){var d=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"li",11),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(d);var x=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(x.createSection())}),n.\u0275\u0275elementStart(1,"div",12)(2,"div",13),n.\u0275\u0275element(3,"svg-use-symbol",14),n.\u0275\u0275elementEnd()()()}}function D(l,y){if(1&l){var d=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"ul",4)(1,"carousel",5),n.\u0275\u0275listener("onSeeAll",function(N){n.\u0275\u0275restoreView(d);var X=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(X.seeAllSections(N))}),n.\u0275\u0275template(2,S,2,1,"ng-container",6),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,L,4,0,"li",7),n.\u0275\u0275elementEnd()}if(2&l){var w=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("isReadingMode",w.isReadingMode()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",w.viewModel),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",w.isEditMode())}}function m(l,y){if(1&l&&(n.\u0275\u0275elementStart(0,"ul",15),n.\u0275\u0275element(1,"bookmark-play",16),n.\u0275\u0275elementEnd()),2&l){var d=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("selectedBookmark",d.viewModel.exploration.contract.activeBookmark)}}var v=function(){function l(y,d,w,x,N){var X=this;this.formFactor=y,this.viewModeState=d,this.dropdown=w,this.eventBridge=x,this.lazyScoped=N,this.eventBridge.createChannelSubscriptionManager().subscribe(p.renameSection,function(ne,Ce){return X.renameSection(Ce)})}return l.prototype.isBookmarkView=function(){return null!=this.viewModeState.getViewState().bookmarkView},l.prototype.createSection=function(){this.eventBridge.publishToChannel(p.createSection)},l.prototype.seeAllSections=function(y){var d=this,w={items:[]},x=this.isReadingMode();_.forEach(this.viewModel.exploration.sections,function(N,X){(!x||!d.isHiddenInViewMode(N))&&w.items.push({key:X,text:N.displayName,type:0,selected:N.selected})}),this.dropdown.showContextMenu(w,{x:y.pageX,y:y.pageY},function(N){return d.eventBridge.publishToChannel(p.switchSection,{index:N})},!0,void 0,!0,!0)},l.prototype.isEditMode=function(){return this.formFactor.getCurrentLayoutCapabilities().canAddRemoveSections()},l.prototype.isReadingMode=function(){return 0===this.viewModeState.getMode()},l.prototype.getModeString=function(){return this.isEditMode()?"editing":this.isReadingMode()||1===this.viewModeState.getMode()&&1===this.formFactor.getCurrentLayout()?"reading":void 0},l.prototype.isHiddenInViewMode=function(y){return!!(1&y.contract.visibility)},l.prototype.isOnlySectionVisibleInViewMode=function(y){if(this.isHiddenInViewMode(y))return!1;for(var d=0,w=this.viewModel.exploration.sections;d<w.length;d++){var x=w[d];if(x!==y&&!this.isHiddenInViewMode(x))return!1}return!0},l.prototype.renameSection=function(y){return(0,e.mG)(this,void 0,void 0,function(){var d=this;return(0,e.Jh)(this,function(w){return this.lazyScoped.get("explorationAuthoring").then(function(x){x.renameSection(d.viewModel,y.sectionNewName,y.sectionIndex)}),[2]})})},l.\u0275fac=function(d){return new(d||l)(n.\u0275\u0275directiveInject(f.F),n.\u0275\u0275directiveInject(i.kc),n.\u0275\u0275directiveInject(O.V),n.\u0275\u0275directiveInject(T.J),n.\u0275\u0275directiveInject(V.H))},l.\u0275cmp=n.\u0275\u0275defineComponent({type:l,selectors:[["exploration-footer-modern"]],inputs:{viewModel:"viewModel"},decls:4,vars:5,consts:[["keyboard-shortcuts","ctrl-F6","data-automation-type","explorationNavigationContent","tabindex","0","focus-nav-mode","Group","focus-priority","14"],[1,"background"],["class","pane sections","role","presentation",4,"ngIf"],["class","pane sections","pbiLazyLoadContents","exploreUIShellConfig",4,"ngIf"],["role","presentation",1,"pane","sections"],["autoResize","true","role","tablist",3,"isReadingMode","onSeeAll"],[4,"ngIf"],["class","section static create","localizeTooltip","Carousel_NewPage","tabindex","0","focusElement","","role","button","data-automation-id","carousel_NewPage",3,"accessible-click",4,"ngIf"],["class","section static","role","presentation","data-automation-id","carousel_section",3,"ngClass",4,"ngFor","ngForOf"],["role","presentation","data-automation-id","carousel_section",1,"section","static",3,"ngClass"],["data-automation-type","explorationNavigationTab",3,"viewModel","isEditing","tabIndex","isOnlyVisibleTab","isHiddenInViewMode"],["localizeTooltip","Carousel_NewPage","tabindex","0","focusElement","","role","button","data-automation-id","carousel_NewPage",1,"section","static","create",3,"accessible-click"],[1,"thumbnail-container"],[1,"thumbnail"],["sheet","exploreCanvasIcons","symbolId","slidethumb_addnew"],["pbiLazyLoadContents","exploreUIShellConfig",1,"pane","sections"],[3,"selectedBookmark"]],template:function(d,w){1&d&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"div",1),n.\u0275\u0275template(2,D,4,3,"ul",2),n.\u0275\u0275template(3,m,2,1,"ul",3),n.\u0275\u0275elementEnd()),2&d&&(n.\u0275\u0275classMapInterpolate1("explorationNavigationContent unselectable ",w.getModeString(),""),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!w.isBookmarkView()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",w.isBookmarkView()))},dependencies:[h.NgClass,h.NgForOf,h.NgIf,M.r,I.t,b.q,P.d,g.Fy,u.j,s.k],styles:["[_nghost-%COMP%]     .explorationNavigationContent{position:absolute;left:0;z-index:2;overflow:hidden;height:35px;background-color:var(--white-color, #FFF);width:100%;outline:0}[_nghost-%COMP%]     .editing, [_nghost-%COMP%]     .reading, [_nghost-%COMP%]     .pane{bottom:0}[_nghost-%COMP%]     .reading{background:var(--neutral-primary-color, #333333)}[_nghost-%COMP%]     .reading .pane.sections .carouselControl .carouselScrollPane{right:0}[_nghost-%COMP%]     .pane{display:flex;justify-content:flex-start;align-items:center;left:0;color:var(--neutral-secondary-alt-color, #777777)}[_nghost-%COMP%]     .pane.sections{width:100%;background-color:var(--gray-20, #F3F2F1);height:100%}[_nghost-%COMP%]     .pane.sections .carouselControl{display:flex}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselScrollPane{display:flex}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton{opacity:1;color:var(--theme-secondary-color, #000000)}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton i{padding-left:0;margin-left:2px;margin-right:6px}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton:disabled{color:var(--neutral-tertiary-alt-color, #C8C8C8)}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton:disabled:hover{background-color:var(--neutral-light-color, #EAEAEA)}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton.previousPage{padding:1px 0 0 2px}[_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton.nextPage{border-style:solid;border-color:var(--neutral-tertiary-color, #A6A6A6);border-width:0 1px 0 0;padding:1px 2px 0 0;right:0;left:15px}html[dir=rtl]   [_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton i{margin-left:6px;margin-right:2px}html[dir=rtl]   [_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton.previousPage{padding:1px 2px 0 0}html[dir=rtl]   [_nghost-%COMP%]     .pane.sections .carouselControl .carouselNavButton.nextPage{border-width:0 0 0 1px;padding:1px 0 0 2px;left:0;right:15px}[_nghost-%COMP%]     .pane.sections.dragover li:nth-last-child(1){border-bottom:2px solid var(--black-color, #000)}  carousel{display:flex;height:100%;overflow-x:hidden}  .explorationContainer .section{height:35px;font-size:12px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;color:var(--gray-180, #252423);margin:0 auto;line-height:normal;border-right:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);bottom:0}  .explorationContainer .section .section-index{display:none}  .explorationContainer .section.static{box-sizing:border-box}  .explorationContainer .section.static .sectionDeleteIcon{display:none}  .explorationContainer .section.static:hover,   .explorationContainer .section.static .thumbnail-container:focus{outline:none}  .explorationContainer .section.static:hover .sectionDeleteIcon,   .explorationContainer .section.static .thumbnail-container:focus .sectionDeleteIcon{display:inline;position:absolute;top:0;right:4px;z-index:2;background-color:transparent;cursor:pointer}  .explorationContainer .section.static:hover .section-index,   .explorationContainer .section.static .thumbnail-container:focus .section-index{color:var(--neutral-dark-color, #212121)}  .explorationContainer .section.static.create{margin:0;border-right:none;width:39px}  .explorationContainer .section.selected{background-color:var(--white-color, #FFF);border-bottom:4px solid var(--theme-primary-color, #F2C811);font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif}  .explorationContainer .section.dynamic{background-color:transparent;left:0;padding:3px 20px}  .explorationContainer .section.dynamic .section-index{display:inline-block;position:relative;left:1px;height:100%;text-align:center;font-size:12px;font-family:Segoe UI Semibold,wf_segoe-ui_semibold,helvetica,arial,sans-serif;color:var(--neutral-primary-color-alt3, #515151);bottom:2px;border:none;padding:0;box-sizing:content-box}  .explorationContainer .section.dynamic .section-index::selection{background:var(--theme-primary-color, #F2C811);color:var(--text-primary-content-color, #515151)}  .explorationContainer .section.dynamic .section-index:hover{color:var(--neutral-dark-color, #212121)}  .explorationContainer .section.dynamic .textLabel{max-width:240px;overflow:hidden;text-overflow:ellipsis;cursor:default;line-height:35px}  .explorationContainer .section.dynamic input{margin-top:3px;line-height:29px;height:29px}  .explorationContainer .section .thumbnail-container{position:relative;box-sizing:border-box;border:none;display:flex;align-items:center}  html[data-focus-source=key]   .explorationContainer .section .thumbnail-container:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}  .explorationContainer .section .hidden-tab{padding-left:28px;padding-right:12px}  .explorationContainer .section .sectionHiddenIcon{position:absolute;top:15px;left:12px;color:var(--neutral-primary-color-alt3, #515151)}  .explorationContainer .section.ui-draggable-dragging{border-right:none}  .explorationContainer .section.ui-draggable-dragging .sectionDeleteIcon{display:none}  .explorationContainer .section.ui-draggable-dragging .sectionHiddenIcon{position:absolute;top:15px;left:6px;color:var(--neutral-primary-color-alt3, #515151)}  .explorationContainer .section.dragover{border-top:2px solid var(--black-color, #000)}  .explorationContainer .section.create{left:3px;outline:none}html[data-focus-source=key][_ngcontent-%COMP%]     .explorationContainer .section.create:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}  .explorationContainer .section.create .thumbnail-container{padding-top:5px;background-color:var(--theme-primary-color, #F2C811);height:inherit;position:initial}  .explorationContainer .section.create .thumbnail-container .thumbnail svg-use-symbol svg{height:24px;width:39px}  .explorationContainer .section.hidden-in-view-mode{display:none}  .explorationContainer.editing .section.hidden-in-view-mode{display:inline-block}",".exploreHost.landingController[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]{height:44px}.exploreHost.landingController[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%]{height:44px;background-color:var(--fluentThemeNeutralLighterAltColor)}.exploreHost.landingController[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%]   .section.static[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%]   .section.static[_ngcontent-%COMP%]{height:initial;background-color:transparent;padding:4px;border:none}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton{width:44px}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton .glyphicon, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton .glyphicon, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton .glyphicon, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton .glyphicon{margin-top:5px}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton .glyph-mini, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton .glyph-mini, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton .glyph-mini, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton .glyph-mini{font-size:20px}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled .glyph-mini, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled .glyph-mini, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled .glyph-mini, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled .glyph-mini{color:var(--fluentThemeLightGrayColor)}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:not(:disabled) .glyph-mini, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:not(:disabled) .glyph-mini, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:not(:disabled) .glyph-mini, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:not(:disabled) .glyph-mini{color:var(--fluentThemeErrorTextColor)}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:hover, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:hover, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:hover, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:hover, .exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover{background-color:var(--fluentThemeNeutralLighterAltColor)}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:hover .glyphicon, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:hover .glyphicon, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:hover .glyphicon, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:hover .glyphicon, .exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover .glyphicon, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover .glyphicon, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover .glyphicon, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton:disabled:hover .glyphicon{margin-top:5px;color:var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton.nextPage, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton.nextPage, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselNavButton.nextPage, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselNavButton.nextPage{left:39px}.exploreHost.landingController.tabletLandscapeLayout[_nghost-%COMP%]     .carouselControl .carouselScrollPane, .exploreHost.landingController.tabletLandscapeLayout   [_nghost-%COMP%]     .carouselControl .carouselScrollPane, .exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]     .carouselControl .carouselScrollPane, .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]     .carouselControl .carouselScrollPane{left:84px}.exploreHost.landingController.coverNativeNotch[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%], .exploreHost.landingController.coverNativeNotch   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]{height:calc(44px + env(safe-area-inset-bottom))}.exploreHost.landingController.coverNativeNotch[_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%], .exploreHost.landingController.coverNativeNotch   [_nghost-%COMP%]   .explorationNavigationContent[_ngcontent-%COMP%]   .pane.sections[_ngcontent-%COMP%]{height:calc(44px + env(safe-area-inset-bottom));padding-bottom:env(safe-area-inset-bottom)}"]}),l}()},9256:function(Ve,se,t){t.d(se,{j:function(){return l}});var e=t(30830),n=t(69314),f=t(73637),i=t(23196),O=t(16850),T=t(67471),V=t(42),h=t(78186),M=t(30411),I=t(52181),b=t(20113),P=t(92275),g=t(45055),u=t(37247),s=powerbi.explore.services.events,p=["sectionElement"];function C(y,d){1&y&&f.\u0275\u0275element(0,"div",5)}function A(y,d){if(1&y){var w=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"input",6),f.\u0275\u0275listener("ngModelChange",function(X){f.\u0275\u0275restoreView(w);var ne=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(ne.viewModel.displayName=X)})("blur",function(){f.\u0275\u0275restoreView(w);var X=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(X.renameSection(X.viewModel.displayName))}),f.\u0275\u0275elementEnd()}if(2&y){var x=f.\u0275\u0275nextContext();f.\u0275\u0275property("ngModel",x.viewModel.displayName)}}function S(y,d){if(1&y){var w=f.\u0275\u0275getCurrentView();f.\u0275\u0275elementStart(0,"div",7),f.\u0275\u0275listener("click",function(N){f.\u0275\u0275restoreView(w);var X=f.\u0275\u0275nextContext();return f.\u0275\u0275resetView(X.deleteSection(N))}),f.\u0275\u0275text(1,"x"),f.\u0275\u0275elementEnd()}2&y&&f.\u0275\u0275attribute("aria-hidden",!0)}var L=function(d,w){return{"hidden-tab":d,selected:w}},D=function(){return{accept:"sections"}},l=function(){function y(d,w,x,N,X){var ne=this;this.eventBridge=d,this.platformCapabilities=w,this.dropdown=x,this.lazyScoped=N,this.viewModeState=X,this.editableLabelOptions={disableClick:!0,inputMatchLabelWidth:!0,onEdit:function(){return ne.beginEditSection()},onBlur:function(){return ne.endEditSection()}},this.supportsMinervaDialog=this.platformCapabilities.supportsMinervaDialog}return y.prototype.ngOnInit=function(){this.viewModel.isTabEditable=!1},y.prototype.drop=function(d,w){if(1===this.viewModeState.getMode()){var x=this.getSections(),N=x.index(d.target),X=x.index(w.draggable);this.eventBridge.publishToChannel(s.reorderSection,{originalIndex:X,targetIndex:N})}},y.prototype.getSections=function(){return $(".pane.sections").find(".section.dynamic")},y.prototype.deleteSection=function(d,w){void 0===w&&(w=this.tabIndex),this.eventBridge.publishToChannel(s.deleteSectionInitiated,{sectionIndex:w,supportMinervaDialog:this.supportsMinervaDialog}),d&&d.stopPropagation&&d.stopPropagation()},y.prototype.beginEditSection=function(){this.viewModel.isTabEditable=!0},y.prototype.endEditSection=function(){this.viewModel.isTabEditable=!1,this.renameSection(this.viewModel.displayName),this.updateWidth()},y.prototype.updateWidth=function(){this.eventBridge.publishToChannel(s.sectionNameChanged)},y.prototype.changeSection=function(d){void 0===d&&(d=this.tabIndex),!this.viewModel.selected&&(this.eventBridge.publishToChannel(s.switchSection,{index:d}),event&&event.stopPropagation&&event.stopPropagation(),this.sectionElement.nativeElement.focus())},y.prototype.renameSection=function(d,w){void 0===w&&(w=this.tabIndex),this.viewModel.isTabEditable=!1,jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(d)||this.viewModel.contract.displayName===d?this.viewModel.displayName=this.viewModel.contract.displayName:this.eventBridge.publishToChannel(s.renameSection,{sectionNewName:d,sectionIndex:w})},y.prototype.showContextMenu=function(d){var w=this;if(d.preventDefault(),this.isEditing){var x=this.getMenuItemsCollection();this.dropdown.showContextMenu(x,{x:d.pageX,y:d.pageY},function(N){return w.selectMenuItem(N)},!1)}},y.prototype.onKeyDown=function(d){if(this.isEditing)switch(d.keyCode){case e.yY:this.isOnlyVisibleTab||this.deleteSection(d,this.tabIndex);break;case e.oh:case e.SV:case e.Sd:case e.uR:jsCommon.BrowserUtils.isCtrlOrMeta(d)&&this.reorderSection(d)}},y.prototype.reorderSection=function(d){var w=this.getSections(),x=w.index(d.target),N=0,X=!0;switch(d.keyCode){case d.shiftKey&&e.oh:N=0===x?x:x-1;break;case d.shiftKey&&e.SV:N=x===w.length-1?x:x+1;break;case e.Sd:N=0;break;case e.uR:N=w.length-1;break;default:X=!1}X&&(this.eventBridge.publishToChannel(s.reorderSection,{originalIndex:x,targetIndex:N}),d.stopPropagation())},y.prototype.getMenuItemsCollection=function(){for(var d={items:[]},w=0,x=this.viewModel.menuItems.items;w<x.length;w++){var N=x[w],X=N.key,ne=!1;this.isOnlyVisibleTab&&(2===X||3===X)||(3===X&&(ne=!!this.isHiddenInViewMode),d.items.push({key:X,type:0,text:N.text,checked:ne}))}return d},y.prototype.toggleSectionVisibility=function(){var d=this,w=this.isHiddenInViewMode?0:1;this.lazyScoped.get("explorationAuthoring").then(function(x){x.setSectionVisibility(d.viewModel.contract,w)})},y.prototype.selectMenuItem=function(d){switch(d){case 0:this.eventBridge.publishToChannel(s.duplicateSection,this.tabIndex);break;case 1:this.beginEditSection();break;case 2:this.deleteSection(null,this.tabIndex);break;case 3:this.toggleSectionVisibility()}},y.\u0275fac=function(w){return new(w||y)(f.\u0275\u0275directiveInject(i.J),f.\u0275\u0275directiveInject(n.E),f.\u0275\u0275directiveInject(O.V),f.\u0275\u0275directiveInject(T.H),f.\u0275\u0275directiveInject(V.kc))},y.\u0275cmp=f.\u0275\u0275defineComponent({type:y,selectors:[["exploration-navigation-tab"]],viewQuery:function(w,x){var N;(1&w&&f.\u0275\u0275viewQuery(p,5),2&w)&&(f.\u0275\u0275queryRefresh(N=f.\u0275\u0275loadQuery())&&(x.sectionElement=N.first))},inputs:{viewModel:"viewModel",displayName:"displayName",isEditing:"isEditing",isOnlyVisibleTab:"isOnlyVisibleTab",isHiddenInViewMode:"isHiddenInViewMode",tabIndex:"tabIndex"},decls:5,vars:14,consts:[["role","tab","tabindex","0",1,"section","dynamic","thumbnail-container",3,"ngClass","drag","drop","dblclick","accessible-click","contextmenu","keydown","dropHandler"],["sectionElement",""],["class","glyphicon glyph-mini pbi-glyph-hide3 sectionHiddenIcon",4,"ngIf"],["class","section-index textInput",3,"ngModel","ngModelChange","blur",4,"pbiEditableLabel","pbiEditableLabelValue","pbiEditableLabelMode","pbiEditableLabelEditable"],["class","sectionDeleteIcon","localizeTooltip","Carousel_DeletePage",3,"click",4,"ngIf"],[1,"glyphicon","glyph-mini","pbi-glyph-hide3","sectionHiddenIcon"],[1,"section-index","textInput",3,"ngModel","ngModelChange","blur"],["localizeTooltip","Carousel_DeletePage",1,"sectionDeleteIcon",3,"click"]],template:function(w,x){1&w&&(f.\u0275\u0275elementStart(0,"div",0,1),f.\u0275\u0275listener("dblclick",function(){return x.beginEditSection()})("accessible-click",function(){return x.changeSection()})("contextmenu",function(X){return x.showContextMenu(X)})("keydown",function(X){return x.onKeyDown(X)})("dropHandler",function(X){return x.drop(X.event,X.ui)}),f.\u0275\u0275template(2,C,1,0,"div",2),f.\u0275\u0275template(3,A,1,1,"input",3),f.\u0275\u0275template(4,S,2,1,"div",4),f.\u0275\u0275elementEnd()),2&w&&(f.\u0275\u0275property("ngClass",f.\u0275\u0275pureFunction2(10,L,x.isHiddenInViewMode,x.viewModel.selected))("drag","sections")("drop",f.\u0275\u0275pureFunction0(13,D)),f.\u0275\u0275attribute("aria-selected",x.viewModel.selected),f.\u0275\u0275advance(2),f.\u0275\u0275property("ngIf",x.isHiddenInViewMode),f.\u0275\u0275advance(1),f.\u0275\u0275property("pbiEditableLabel",x.editableLabelOptions)("pbiEditableLabelValue",x.viewModel.displayName)("pbiEditableLabelMode",x.isEditing)("pbiEditableLabelEditable",x.viewModel.isTabEditable),f.\u0275\u0275advance(1),f.\u0275\u0275property("ngIf",x.isEditing&&!x.isOnlyVisibleTab))},dependencies:[h.NgClass,h.NgIf,M.Fj,M.JJ,M.On,I.r,b.t,P.w,g.W,u.D],styles:['.exploreHost.landingController[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]{background-color:var(--fluentThemeNeutralLighterAltColor);border-radius:4px;padding:3px 10px;height:100%}.exploreHost.landingController[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     pbi-text-label, .exploreHost.landingController   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     pbi-text-label{height:100%}.exploreHost.landingController[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]   .section-index[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]   .section-index[_ngcontent-%COMP%]{font-size:13px;margin-top:4px}.exploreHost.landingController[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     .textLabel, .exploreHost.landingController   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     .textLabel{font-size:13px;line-height:24px;padding:0;color:var(--fluentThemeNeutralPrimaryAltColor)}.exploreHost.landingController   .selected[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%], .exploreHost.landingController   .selected   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]{background-color:var(--fluentThemeWhiteColor)}.exploreHost.landingController   .selected[_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     .textLabel:after, .exploreHost.landingController   .selected   [_nghost-%COMP%]   .section.dynamic[_ngcontent-%COMP%]     .textLabel:after{content:"";float:left;width:100%;height:4px;border-radius:2px;background:var(--fluentThemePrimaryColor)}']}),y}()},89663:function(Ve,se,t){t.d(se,{m:function(){return M}});var e=t(7005),n=t(73637),f=t(84752),i=t(78186),O=t(31053),T=t(27937);function V(I,b){if(1&I&&n.\u0275\u0275element(0,"pbi-lazy-load",2),2&I){var P=n.\u0275\u0275nextContext();n.\u0275\u0275property("modulePath",P.modulePath)("componentId",P.componentId)("inputArgs",P.inputArgs)("outputArgs",P.outputArgs)}}function h(I,b){1&I&&n.\u0275\u0275element(0,"pbi-spinner",3)}var M=function(I){function b(){var P=null!==I&&I.apply(this,arguments)||this;return P.initialExpr=void 0,P.withFieldList=!1,P.onExprChange=new n.EventEmitter,P.onCrossPickerDrop=new n.EventEmitter,P.componentId="FieldPickerComponentId",P.modulePath="./lazy-modules/field-picker-modern/field-picker-modern.module#FieldPickerModernModule",P.initialExpr$=P.changes$("initialExpr"),P}return(0,e.ZT)(b,I),b.prototype.ngOnInit=function(){var P=this;this.outputArgs={onExprChange:function(u){return P.onExprChange.emit(u)},onCrossPickerDrop:function(u){return P.onCrossPickerDrop.emit(u)}},this.onChanges$.subscribe(function(){P.inputArgs={initialExpr:P.initialExpr$,validators:P.validators,allowMultipleValues:P.allowMultipleValues,allowReorderItems:P.allowReorderItems,disallowReplaceItems:P.disallowReplaceItems,allowEntityField:P.allowEntityField,disableDropZoneIndicator:P.disableDropZoneIndicator,label:P.label,addDataLabelKey:P.addDataLabelKey,addDataAriaLabelKey:P.addDataAriaLabelKey,ariaLabelledby:P.ariaLabelledby,ariaDescribedby:P.ariaDescribedby,disabled:P.disabled,withFieldList:P.withFieldList,getDropExprStrategy:P.getDropExprStrategy,menuStrategy:P.menuStrategy,displayNameStrategy:P.displayNameStrategy,flyoutFieldsStrategy:P.flyoutFieldsStrategy,visualCalcFieldsStrategy:P.visualCalcFieldsStrategy,promotedActionStrategy:P.promotedActionStrategy,enterExitFieldRename$:P.enterExitFieldRename$,externalCrossPickerDragDropMonitor:P.externalCrossPickerDragDropMonitor,perspectiveDisplayName:P.perspectiveDisplayName,tooltipPosition:P.tooltipPosition,tooltipMaxWidth:P.tooltipMaxWidth,disableAutoScroll:P.disableAutoScroll}})},b.\u0275fac=function(){var P;return function(u){return(P||(P=n.\u0275\u0275getInheritedFactory(b)))(u||b)}}(),b.\u0275cmp=n.\u0275\u0275defineComponent({type:b,selectors:[["field-picker-modern-lazy"]],inputs:{initialExpr:"initialExpr",allowMultipleValues:"allowMultipleValues",allowReorderItems:"allowReorderItems",disallowReplaceItems:"disallowReplaceItems",allowEntityField:"allowEntityField",disableDropZoneIndicator:"disableDropZoneIndicator",validators:"validators",label:"label",addDataLabelKey:"addDataLabelKey",addDataAriaLabelKey:"addDataAriaLabelKey",ariaLabelledby:"ariaLabelledby",ariaDescribedby:"ariaDescribedby",disabled:"disabled",withFieldList:"withFieldList",promotedActionStrategy:"promotedActionStrategy",getDropExprStrategy:"getDropExprStrategy",menuStrategy:"menuStrategy",displayNameStrategy:"displayNameStrategy",flyoutFieldsStrategy:"flyoutFieldsStrategy",visualCalcFieldsStrategy:"visualCalcFieldsStrategy",enterExitFieldRename$:"enterExitFieldRename$",externalCrossPickerDragDropMonitor:"externalCrossPickerDragDropMonitor",perspectiveDisplayName:"perspectiveDisplayName",tooltipPosition:"tooltipPosition",tooltipMaxWidth:"tooltipMaxWidth",disableAutoScroll:"disableAutoScroll"},outputs:{onExprChange:"onExprChange",onCrossPickerDrop:"onCrossPickerDrop"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"modulePath","componentId","inputArgs","outputArgs",4,"ngIf","ngIfElse"],["loading",""],[3,"modulePath","componentId","inputArgs","outputArgs"],[1,"pbi-spinner-medium"]],template:function(g,u){if(1&g&&(n.\u0275\u0275template(0,V,1,4,"pbi-lazy-load",0),n.\u0275\u0275template(1,h,1,0,"ng-template",null,1,n.\u0275\u0275templateRefExtractor)),2&g){var s=n.\u0275\u0275reference(2);n.\u0275\u0275property("ngIf",u.inputArgs)("ngIfElse",s)}},dependencies:[i.NgIf,O.R,T.k],encapsulation:2}),b}(f.w)},26632:function(Ve,se,t){t.d(se,{v:function(){return ve}});var e=t(7005),n=t(47013),f=t(29494),i=t(73637),O=t(59279),T=t(16660),V=t(18766),h=t(31701),M=t(23196),I=t(25991),b=t(99876),P=t(33892),g=t(74850),u=t(80242),s=t(70377),p=t(33714),C=t(18266),A=t(10378),S=t(28252),L=t(42),D=t(5801),m=t(56339),v=t(78186),l=t(35380),y=t(52181),d=t(68296),w=t(12665),x=t(79597),N=t(92275),X=t(20085),ne=t(45055),Ce=t(86917),he=powerbi.explore.services.ActionIdentifier,Fe=jsCommon.DropPosition,fe=powerbi.explore.services.events,ae=powerbi.explore.constants.ExploreCanvasConstants,pe=powerbi.explore.util.FilterPaneUtil,ge=powerbi.explore.FilterUtils,Me=powerbi.explore.SectionUtils,ce=powerbi.explore.services.selectionUtils,J=powerbi.explore.viewModels.ViewModelFactory,ie=function(o,a){return{"font-family":o,"font-size":a}};function G(r,o){if(1&r&&i.\u0275\u0275element(0,"span",10),2&r){var a=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(1,ie,a.headerFontFamily,a.headerFontSize))}}function j(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",20),i.\u0275\u0275listener("pbiMenuButtonClick",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(H.onMenuItemClicked(U,0))}),i.\u0275\u0275element(1,"span",21),i.\u0275\u0275elementEnd()}if(2&r){var c=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("menuMode",c.menuMode)("pbiMenu",c.getMenuItems)("pbiTooltip",c.getOptionsMenuLabel())("pbiTooltipProgramDisabled",!0),i.\u0275\u0275attribute("aria-label",c.getOptionsMenuLabel())}}function F(r,o){if(1&r&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275element(1,"h3",18),i.\u0275\u0275template(2,j,2,5,"button",19),i.\u0275\u0275elementEnd()),2&r){var a=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(3,ie,a.headerFontFamily,a.headerFontSize))("localize",a.filterPaneHeaderLocalization_Visual),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",a.isEditMode&&a.isInOutspacePane)}}function E(r,o){if(1&r&&i.\u0275\u0275element(0,"filter",23),2&r){var a=o.$implicit,c=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",a)("isInOutspacePane",c.isInOutspacePane)("filterCardStyleArguments",c.filterCardStyleArguments)("searchFiltersInput",c.searchFiltersInput)}}function k(r,o){if(1&r&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,E,1,4,"filter",22),i.\u0275\u0275elementContainerEnd()),2&r){var a=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",a.viewModel.visualFilters)}}function R(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"filter",25),i.\u0275\u0275listener("moveFilter",function(oe){i.\u0275\u0275restoreView(a);var te=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(te.moveFilter(oe.startIndex,oe.targetIndex,oe.filterScopeType))})("dropHandler",function(oe){var te=i.\u0275\u0275restoreView(a),_e=te.index,de=te.$implicit,Ee=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(Ee.dropFilterWithCustomOrder(oe.event,oe.ui,oe.dropAction,_e,de))})("drop",function(oe){var te=i.\u0275\u0275restoreView(a),_e=te.index,de=te.$implicit,Ee=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(Ee.getDropConfigForVisualFilters()&&Ee.dropFieldFilterWithCustomOrder(oe,_e,de))}),i.\u0275\u0275elementEnd()}if(2&r){var c=o.$implicit,B=o.index,U=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",c)("isInOutspacePane",U.isInOutspacePane)("filterCardStyleArguments",U.filterCardStyleArguments)("index",B)("lastIndex",U.getSortableFiltersLength(U.viewModel.visualFilters))("searchFiltersInput",U.searchFiltersInput)("drop",U.getDropConfigForVisualFilters())("dropWatchConfig",!0)("drag","filter")("dragDisabled",U.filterCustomSortDisabled(c))("getDragContext",U.getDragContext(c,B))("dropAction",U.getOutspaceFilterDropAction(U.dropPosition,c))}}function z(r,o){if(1&r&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,R,1,12,"filter",24),i.\u0275\u0275elementContainerEnd()),2&r){var a=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",a.viewModel.visualFilters)}}function Q(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",26),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.appendVisualFilters(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.appendFieldVisualFilters(U))}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&r){var c=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",c.shouldShowAddFilterLabelText(c.viewModel.visualFilters)?"dropzone":"end-dropzone")("ngStyle",i.\u0275\u0275pureFunction2(7,ie,c.headerFontFamily,c.headerFontSize))("title",c.shouldShowAddFilterLabelText(c.viewModel.visualFilters)?c.viewModel.addFilterLabel:"")("drop",c.dropZoneDropConfig)("dropAction",c.getDropAction),i.\u0275\u0275attribute("tabindex",-1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",c.shouldShowAddFilterLabelText(c.viewModel.visualFilters)?c.viewModel.addFilterLabel:""," ")}}var me=function(o){return{"bucket-padding":o}};function le(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"section",11),i.\u0275\u0275template(1,F,3,6,"div",12),i.\u0275\u0275elementStart(2,"div",13)(3,"div",14),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.dropVisualFilter(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.getFilterPaneDropConfig()&&H.dropFieldVisualFilter(U))}),i.\u0275\u0275template(4,k,2,1,"ng-container",15),i.\u0275\u0275template(5,z,2,1,"ng-container",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,Q,2,10,"div",16),i.\u0275\u0275elementEnd()()}if(2&r){var c=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(8,me,c.isSearchTextNullOrEmpty())),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isSearchTextNullOrEmpty()),i.\u0275\u0275advance(2),i.\u0275\u0275property("drop",c.getFilterPaneDropConfig())("dropWatchConfig",!0)("dropAction",c.getDropAction),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!c.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isEditMode()&&c.isSearchTextNullOrEmpty())}}function K(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",30),i.\u0275\u0275listener("pbiMenuButtonClick",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(H.onMenuItemClicked(U,1))}),i.\u0275\u0275element(1,"span",21),i.\u0275\u0275elementEnd()}if(2&r){var c=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("menuMode",c.menuMode)("pbiMenu",c.getMenuItems)("pbiTooltip",c.getOptionsMenuLabel())("pbiTooltipProgramDisabled",!0),i.\u0275\u0275attribute("aria-label",c.getOptionsMenuLabel())}}function q(r,o){if(1&r&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275element(1,"h3",28),i.\u0275\u0275template(2,K,2,5,"button",29),i.\u0275\u0275elementEnd()),2&r){var a=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(3,ie,a.headerFontFamily,a.headerFontSize))("localize",a.filterPaneHeaderLocalization_Page),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",a.isEditMode&&a.isInOutspacePane)}}function ye(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"filter",32),i.\u0275\u0275listener("moveFilter",function(oe){i.\u0275\u0275restoreView(a);var te=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(te.moveFilter(oe.startIndex,oe.targetIndex,oe.filterScopeType))})("dropHandler",function(oe){var te=i.\u0275\u0275restoreView(a),_e=te.index,de=te.$implicit,Ee=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(Ee.dropFilterWithCustomOrder(oe.event,oe.ui,oe.dropAction,_e,de))})("drop",function(oe){var te=i.\u0275\u0275restoreView(a),_e=te.index,de=te.$implicit,Ee=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(Ee.getFilterPaneDropConfig()&&Ee.dropFieldFilterWithCustomOrder(oe,_e,de))}),i.\u0275\u0275elementEnd()}if(2&r){var c=o.$implicit,B=o.index,U=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",c)("isInOutspacePane",U.isInOutspacePane)("filterCardStyleArguments",U.filterCardStyleArguments)("index",B)("lastIndex",U.getSortableFiltersLength(U.viewModel.pageFilters))("searchFiltersInput",U.searchFiltersInput)("drop",U.getFilterDropConfig())("dropWatchConfig",!0)("dropAction",U.getOutspaceFilterDropAction(U.dropPosition,c))("drag","filter")("dragDisabled",U.filterCustomSortDisabled(c))("getDragContext",U.getDragContext(c,B))}}function Le(r,o){if(1&r&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,ye,1,12,"filter",31),i.\u0275\u0275elementContainerEnd()),2&r){var a=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",a.viewModel.pageFilters)}}function Ne(r,o){if(1&r&&i.\u0275\u0275element(0,"filter",23),2&r){var a=o.$implicit,c=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",a)("isInOutspacePane",c.isInOutspacePane)("filterCardStyleArguments",c.filterCardStyleArguments)("searchFiltersInput",c.searchFiltersInput)}}function be(r,o){if(1&r&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ne,1,4,"filter",22),i.\u0275\u0275elementContainerEnd()),2&r){var a=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",a.viewModel.pageFilters)}}function Y(r,o){if(1&r&&i.\u0275\u0275element(0,"filter",23),2&r){var a=o.$implicit,c=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",a)("isInOutspacePane",c.isInOutspacePane)("filterCardStyleArguments",c.filterCardStyleArguments)("searchFiltersInput",c.searchFiltersInput)}}function ue(r,o){if(1&r&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Y,1,4,"filter",22),i.\u0275\u0275elementContainerEnd()),2&r){var a=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",a.viewModel.drillthroughFilters)}}function Pe(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",26),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.appendPageFilters(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.appendFieldPageFilters(U))}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&r){var c=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",c.shouldShowAddFilterLabelText(c.viewModel.pageFilters)?"dropzone":"end-dropzone")("ngStyle",i.\u0275\u0275pureFunction2(7,ie,c.headerFontFamily,c.headerFontSize))("title",c.shouldShowAddFilterLabelText(c.viewModel.pageFilters)?c.viewModel.addFilterLabel:"")("drop",c.dropZoneDropConfig)("dropAction",c.getDropAction),i.\u0275\u0275attribute("tabindex",-1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",c.shouldShowAddFilterLabelText(c.viewModel.pageFilters)?c.viewModel.addFilterLabel:""," ")}}function Ae(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"section",27),i.\u0275\u0275template(1,q,3,6,"div",12),i.\u0275\u0275elementStart(2,"div",13)(3,"div",14),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.dropPageFilter(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.dropFieldPageFilter(U))}),i.\u0275\u0275template(4,Le,2,1,"ng-container",15),i.\u0275\u0275template(5,be,2,1,"ng-container",15),i.\u0275\u0275template(6,ue,2,1,"ng-container",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,Pe,2,10,"div",16),i.\u0275\u0275elementEnd()()}if(2&r){var c=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(9,me,c.isSearchTextNullOrEmpty())),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isSearchTextNullOrEmpty()),i.\u0275\u0275advance(2),i.\u0275\u0275property("drop",c.getFilterPaneDropConfig())("dropWatchConfig",!0)("dropAction",c.getDropAction),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!c.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isInOutspacePane&&c.showDrillthroughInPageFiltersInOutspacePane()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isEditMode()&&c.isSearchTextNullOrEmpty())}}function Ze(r,o){if(1&r&&i.\u0275\u0275element(0,"filter",23),2&r){var a=o.$implicit,c=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("viewModel",a)("isInOutspacePane",c.isInOutspacePane)("filterCardStyleArguments",c.filterCardStyleArguments)("searchFiltersInput",c.searchFiltersInput)}}function ot(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",36),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.dropDrillthroughFilter(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.dropFieldDrillthroughFilter(U))}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&r){var c=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",0===c.viewModel.drillthroughFilters.length?"dropzone":"end-dropzone")("title",0===c.viewModel.drillthroughFilters.length?c.viewModel.addDrillthroughFilterLabel:"")("drop",c.dropZoneDropConfig)("dropAction",c.getDropAction),i.\u0275\u0275attribute("tabindex",-1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",0===c.viewModel.drillthroughFilters.length?c.viewModel.addDrillthroughFilterLabel:""," ")}}function lt(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"section",33)(1,"div",17),i.\u0275\u0275element(2,"h3",34),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",13)(4,"div",14),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.dropDrillthroughFilter(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.getFilterPaneDropConfig()&&H.dropFieldDrillthroughFilter(U))}),i.\u0275\u0275template(5,Ze,1,4,"filter",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,ot,2,6,"div",35),i.\u0275\u0275elementEnd()()}if(2&r){var c=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(6,ie,c.headerFontFamily,c.headerFontSize)),i.\u0275\u0275advance(2),i.\u0275\u0275property("drop",c.getFilterPaneDropConfig())("dropWatchConfig",!0)("dropAction",c.getDropAction),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",c.viewModel.drillthroughFilters),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.showDrillthroughDropZone())}}function yt(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",40),i.\u0275\u0275listener("pbiMenuButtonClick",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(H.onMenuItemClicked(U,2))}),i.\u0275\u0275element(1,"span",21),i.\u0275\u0275elementEnd()}if(2&r){var c=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("menuMode",c.menuMode)("pbiMenu",c.getMenuItems)("pbiTooltip",c.getOptionsMenuLabel())("pbiTooltipProgramDisabled",!0),i.\u0275\u0275attribute("aria-label",c.getOptionsMenuLabel())}}function De(r,o){if(1&r&&(i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275element(1,"h3",38),i.\u0275\u0275template(2,yt,2,5,"button",39),i.\u0275\u0275elementEnd()),2&r){var a=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(3,ie,a.headerFontFamily,a.headerFontSize))("localize",a.filterPaneHeaderLocalization_Report),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",a.isEditMode&&a.isInOutspacePane)}}function Ie(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"filter",32),i.\u0275\u0275listener("moveFilter",function(oe){i.\u0275\u0275restoreView(a);var te=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(te.moveFilter(oe.startIndex,oe.targetIndex,oe.filterScopeType))})("dropHandler",function(oe){var te=i.\u0275\u0275restoreView(a),_e=te.index,de=te.$implicit,Ee=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(Ee.dropFilterWithCustomOrder(oe.event,oe.ui,oe.dropAction,_e,de))})("drop",function(oe){var te=i.\u0275\u0275restoreView(a),_e=te.index,de=te.$implicit,Ee=i.\u0275\u0275nextContext(3);return i.\u0275\u0275resetView(Ee.getFilterDropConfig()&&Ee.dropFieldFilterWithCustomOrder(oe,_e,de))}),i.\u0275\u0275elementEnd()}if(2&r){var c=o.$implicit,B=o.index,U=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",c)("isInOutspacePane",U.isInOutspacePane)("filterCardStyleArguments",U.filterCardStyleArguments)("index",B)("lastIndex",U.getSortableFiltersLength(U.viewModel.reportFilters))("searchFiltersInput",U.searchFiltersInput)("drop",U.getFilterDropConfig())("dropWatchConfig",!0)("dropAction",U.getOutspaceFilterDropAction(U.dropPosition,c))("drag","filter")("dragDisabled",U.filterCustomSortDisabled(c))("getDragContext",U.getDragContext(c,B))}}function Oe(r,o){if(1&r&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Ie,1,12,"filter",31),i.\u0275\u0275elementContainerEnd()),2&r){var a=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",a.viewModel.reportFilters)}}function Be(r,o){if(1&r&&i.\u0275\u0275element(0,"filter",42),2&r){var a=o.$implicit,c=i.\u0275\u0275nextContext(3);i.\u0275\u0275property("viewModel",a)("filterCardStyleArguments",c.filterCardStyleArguments)("isInOutspacePane",c.isInOutspacePane)("searchFiltersInput",c.searchFiltersInput)}}function qe(r,o){if(1&r&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,Be,1,4,"filter",41),i.\u0275\u0275elementContainerEnd()),2&r){var a=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",a.viewModel.reportFilters)}}function je(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",26),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.appendReportFilters(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext(2);return i.\u0275\u0275resetView(H.appendFieldReportFilters(U))}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&r){var c=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",c.shouldShowAddFilterLabelText(c.viewModel.reportFilters)?"dropzone":"end-dropzone")("ngStyle",i.\u0275\u0275pureFunction2(7,ie,c.headerFontFamily,c.headerFontSize))("title",c.shouldShowAddFilterLabelText(c.viewModel.reportFilters)?c.viewModel.addFilterLabel:"")("drop",c.dropZoneDropConfig)("dropAction",c.getDropAction),i.\u0275\u0275attribute("tabindex",-1),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",c.shouldShowAddFilterLabelText(c.viewModel.reportFilters)?c.viewModel.addFilterLabel:""," ")}}function st(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"section",37),i.\u0275\u0275template(1,De,3,6,"div",12),i.\u0275\u0275elementStart(2,"div",13)(3,"div",14),i.\u0275\u0275listener("dropHandler",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.dropReportFilter(U.event,U.ui,U.dropAction))})("drop",function(U){i.\u0275\u0275restoreView(a);var H=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(H.dropFieldReportFilter(U))}),i.\u0275\u0275template(4,Oe,2,1,"ng-container",15),i.\u0275\u0275template(5,qe,2,1,"ng-container",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(6,je,2,10,"div",16),i.\u0275\u0275elementEnd()()}if(2&r){var c=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(8,me,c.isSearchTextNullOrEmpty())),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isSearchTextNullOrEmpty()),i.\u0275\u0275advance(2),i.\u0275\u0275property("drop",c.getFilterPaneDropConfig())("dropWatchConfig",!0)("dropAction",c.getDropAction),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!c.isInOutspacePane),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isEditMode()&&c.isSearchTextNullOrEmpty())}}function ht(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",43),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(a);var U=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(U.editVariablesOnClick())}),i.\u0275\u0275elementEnd()}if(2&r){var c=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(1,ie,c.headerFontFamily,c.headerFontSize))}}function Pt(r,o){if(1&r&&(i.\u0275\u0275elementStart(0,"div",47),i.\u0275\u0275element(1,"i",48)(2,"div",49),i.\u0275\u0275elementEnd()),2&r){var a=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("ngStyle",i.\u0275\u0275pureFunction2(1,ie,a.headerFontFamily,a.headerFontSize))}}var ze=function(o,a,c,B){return{"font-family":o,"font-size":a,"background-color":c,color:B}};function ke(r,o){if(1&r){var a=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",44),i.\u0275\u0275template(1,Pt,3,4,"div",45),i.\u0275\u0275elementStart(2,"button",46),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(a);var U=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(U.onApplyAllClicked())}),i.\u0275\u0275elementEnd()()}if(2&r){var c=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isApplyAllButtonInErrorState),i.\u0275\u0275advance(1),i.\u0275\u0275propertyInterpolate("localize",c.getApplyAllButtonTooltip()),i.\u0275\u0275propertyInterpolate("localizeTooltip",c.getApplyAllButtonTooltip()),i.\u0275\u0275property("disabled",!c.applyAllHasFiltersToApply()||c.isApplyAllButtonInErrorState)("ngStyle",i.\u0275\u0275pureFunction4(5,ze,c.headerFontFamily,c.headerFontSize,c.applyAllHasFiltersToApply()&&!c.isApplyAllButtonInErrorState?c.checkboxAndApplyColor:"",c.applyAllHasFiltersToApply()&&!c.isApplyAllButtonInErrorState?c.checkboxAndApplyForegroundColor:c.applyButtonDisabledForegroundColor))}}var We=function(){return{ignoreOverlay:!1,ignoreMobile:!1}},Ue=function(o){return{isInOutspacePane:o}},ve=function(){function r(o,a,c,B,U,H,oe,te,_e,de,Ee,we,Se,Re,$e,Ye,et,at,nt,pt){var ct=this;this.aggrOps=o,this.conceptualSchemaProxy=a,this.dataSources=c,this.displayNameService=B,this.dragDataService=U,this.eventBridge=H,this.explorationCapabilities=oe,this.explorationNavigation=te,this.featureSwitchService=_e,this.localizationService=de,this.ngZone=Ee,this.promiseFactory=we,this.screenReaderService=Se,this.scriptVisuals=Re,this.selection=$e,this.telemetryService=Ye,this.viewModeState=et,this.visualAuthoring=at,this.visualPlugin=nt,this.visualPluginOps=pt,this.menuMode=n.Kb.Compact,this.selectedSortType=1,this.getOptionsMenuLabel=function(){return ct.localizationService.get("Options_Menu")};var ft=this.explorationNavigation.getCurrentExploration();this.viewModel=J.createFilterPane(this.localizationService,null!=ft),this.filterPaneDropConfig={accept:"field",greedy:!1},this.filterDropConfig={accept:"".concat("filter"," ").concat("field"),greedy:!1},this.dropZoneDropConfig={accept:"field",greedy:!1},this.exploreUIShellConfig=powerbi.explore.modules.ExploreUIShellModule,this.invalidFilterChanges={},this.validFilterChanges={},this.filterPaneUtilServices={aggrOps:this.aggrOps,conceptualSchemaProxy:this.conceptualSchemaProxy,dataSources:this.dataSources,displayNameService:this.displayNameService,explorationCapabilities:this.explorationCapabilities,explorationNavigation:this.explorationNavigation,eventBridge:this.eventBridge,featureSwitchService:this.featureSwitchService,localizationService:this.localizationService,scriptVisuals:this.scriptVisuals,selection:this.selection,telemetryService:this.telemetryService,visualAuthoring:this.visualAuthoring,visualPlugin:this.visualPlugin},this.getDropAction=function(Mt){return ct.getDropActionInternal(Mt)}}return r.prototype.ngOnInit=function(){var o=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(fe.selectionChanged,function(){return o.updateSelection()}).subscribe(fe.visualTypeChanged,function(){return o.updateSelection()}).subscribe(fe.modelChanged,function(){return o.onModelChanged()}).subscribe(fe.canvasChanged,function(){return o.onCanvasChanged()}).subscribe(fe.explorationLoaded,function(){return o.onModelChanged()}).subscribe(fe.visualContainerChanged,function(a,c){return o.onVisualContainerChanged(c)}).subscribe(fe.explorationFiltersContainerChanged,function(a,c){return o.onExplorationFiltersContainerChanged(c)}).subscribe(fe.sectionFiltersContainerChanged,function(a,c){return o.onSectionFiltersContainerChanged(c)}).subscribe(fe.filterContainerChanged,function(a,c){return o.onFilterContainerChanged(c)}).subscribe(fe.applyAllBufferedFilterCardChanged,function(a,c){return o.onApplyAllFilterCardBufferedChanges(c)}).subscribe(fe.explorationSlowDataSourceSettingsLoaded,function(a,c){return o.ngZone.run(function(){c.isApplyAllButtonEnabledChanged&&(o.onApplyAllClicked(),o.isApplyAllEnabled=o.isApplyAllOnForThisFilter())})}).subscribe(fe.explorationSettingsLoaded,function(a,c){c.useDefaultAggregateDisplayNameChanged&&o.updateVisualFilters()}),this.filterPaneHeaderLocalization_Visual="FilterPane_Visual".concat(this.isInOutspacePane?"_OutspacePane":""),this.filterPaneHeaderLocalization_Page="FilterPane_Page".concat(this.isInOutspacePane?"_OutspacePane":""),this.filterPaneHeaderLocalization_Report="FilterPane_Report".concat(this.isInOutspacePane?"_OutspacePane":""),this.isApplyAllEnabled=this.isApplyAllOnForThisFilter(),this.updateSelection(),this.onModelChanged()},r.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},r.prototype.ngOnChanges=function(o){o.sectionObjects&&this.updateFormatting(o.sectionObjects.currentValue),this.searchFiltersInput&&o.searchFiltersInput&&this.announceTotalVisibleFilterCards()},r.prototype.getDragContext=function(o,a){return function(){return{filter:o,filterScopeType:o.getFilterContainerScope().scopeType,startIndex:a}}},r.prototype.getOutspaceFilterDropAction=function(o,a){var c=this;return function(){var B,U=c.dragDataService.getDragContext(),H=a.getFilterContainerScope().scopeType;return B=U?void 0!==U.filterScopeType&&H!==U.filterScopeType?0:Fe.isBelow(o)?3:2:0,c.promiseFactory.resolve(B)}},r.prototype.getFilterPaneDropConfig=function(){if(!this.isInOutspacePane||!this.customSortEnabled()&&this.isSearchTextNullOrEmpty())return this.filterPaneDropConfig},r.prototype.getDropConfigForVisualFilters=function(){if(!this.isInOutspacePane||this.customSortEnabled(0)&&this.isSearchTextNullOrEmpty())return this.filterDropConfig},r.prototype.getFilterDropConfig=function(){if(!this.isInOutspacePane||this.isSearchTextNullOrEmpty())return this.filterDropConfig},Object.defineProperty(r.prototype,"getMenuItems",{get:function(){return{items:[{id:1,type:n.iB.Button,text:this.localizationService.get("FilterPane_Filter_Sort_AZ"),checkable:!0,checked:1===this.selectedSortType,icon:{type:0,glyph:"glyphicon pbi-glyph-atoz glyph-small"}},{id:2,type:n.iB.Button,text:this.localizationService.get("FilterPane_Filter_Sort_ZA"),checkable:!0,checked:2===this.selectedSortType,icon:{type:0,glyph:"glyphicon pbi-glyph-ztoa glyph-small"}}]}},enumerable:!1,configurable:!0}),r.prototype.onMenuItemClicked=function(o,a){this.selectedSortType=o.id,this.onSortOrderMenuItemSelected(a,this.selectedSortType),this.announceSelectedItem(o)},r.prototype.announceSelectedItem=function(o){var a=this.localizationService.format("Selected",o.text);this.screenReaderService.alertPolite(a)},r.prototype.moveFilter=function(o,a,c){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(U){switch(U.label){case 0:return[4,this.visualAuthoring.moveFilter(this.dataSources.get(),c,a,o)];case 1:return U.sent()&&this.sortFiltersBySortType(c,3),[2]}})})},r.prototype.addFilterWithCustomOrder=function(o,a){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(c){switch(c.label){case 0:return[4,this.addFilterWithCustomOrderCore(o,a,this.getFieldFromDragContext())];case 1:return c.sent(),[2]}})})},r.prototype.addFilterWithCustomOrderCore=function(o,a,c){return(0,e.mG)(this,void 0,void 0,function(){var B;return(0,e.Jh)(this,function(H){switch(H.label){case 0:return B=ge.getFiltersContainer(a,this.selection,this.explorationNavigation),[4,this.visualAuthoring.setFilterSortType(this.dataSources.get(),a,3)];case 1:return H.sent()&&pe.addFilterToScopeFromDrop(a,B,!1,this.dataSources,c,this.visualAuthoring,o),[2]}})})},r.prototype.showEditVariablesLink=function(){var o=this.explorationNavigation.getCurrentSection();if(Me.isQuickExploreSection(o)||!this.isInOutspacePane)return!1;var a=this.conceptualSchemaProxy.getLatestCapabilities(this.dataSources.get(),void 0);if(!a||!a.supportsDataSourceVariables)return!1;var c=this.explorationCapabilities.getCapabilities();return!(!c||c.disableEditVariables)},r.prototype.editVariablesOnClick=function(){this.eventBridge.publishToChannel(fe.datasourceVariablesEditClicked)},r.prototype.onSortOrderMenuItemSelected=function(o,a){this.visualAuthoring.setFilterSortType(this.dataSources.get(),o,a),this.sortFiltersBySortType(o,a)},r.prototype.shouldShowAddFilterLabelText=function(o){return!(!this.isInOutspacePane&&!_.isEmpty(o))},r.prototype.customSortEnabled=function(o){return this.isEditMode()&&this.isInOutspacePane},r.prototype.filterCustomSortDisabled=function(o){if(!o)return!0;var a=o.getFilterContainerScope();return!(a?this.customSortEnabled(a.scopeType):this.customSortEnabled())||!o.canSortManually||!this.isSearchTextNullOrEmpty()},r.prototype.isSortable=function(o){return this.isInOutspacePane&&!this.filterCustomSortDisabled(o)},r.prototype.showDrillthroughDropZone=function(){return!this.isInOutspacePane&&(this.viewModeState.getConfig().alwaysPopulatePanes||this.isEditMode())},r.prototype.dropFieldFilterWithCustomOrder=function(o,a,c){var B=powerbi.explore.helpers.getModernFieldListExpr(o);this.dropFilterWithCustomOrderCore(this.getDropActionInternalCore(B),a,c,B,!1)},r.prototype.dropFilterWithCustomOrder=function(o,a,c,B,U){this.dropFilterWithCustomOrderCore(c,B,U,this.getFieldFromDragContext(),!0)},r.prototype.dropFilterWithCustomOrderCore=function(o,a,c,B,U){var H=c&&c.getFilterContainerScope(),oe=H&&H.scopeType;if(this.customSortEnabled(oe)){var te=this.dragDataService.getDragContext();if(te&&U){var _e=this.getTargetIndex(te.startIndex,a,3===o);if(void 0!==_e){var Ee=H.container.filters[te.startIndex];Ee&&(this.moveFilter(te.startIndex,_e,oe),this.eventBridge.publishToChannel(fe.filterContainerChanged,{filter:Ee,changeType:4,scope:H}))}}else this.addFilterWithCustomOrderCore(3===o?a+1:a,oe,B)}},r.prototype.dropFieldVisualFilter=function(o){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(a){return this.dropVisualFilterCore(powerbi.explore.helpers.getModernFieldListExpr(o)),[2]})})},r.prototype.dropVisualFilter=function(o,a,c){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(B){switch(B.label){case 0:return[4,this.dropVisualFilterCore(this.getFieldFromDragContext())];case 1:return B.sent(),[2]}})})},r.prototype.dropVisualFilterCore=function(o){return(0,e.mG)(this,void 0,void 0,function(){var a;return(0,e.Jh)(this,function(B){switch(B.label){case 0:return(a=this.getSelectedVisual())?this.customSortEnabled(0)?[4,this.visualAuthoring.setFilterSortType(this.dataSources.get(),0,3)]:[3,2]:[2];case 1:return B.sent()&&pe.addFilterToScopeFromDrop(0,a,!1,this.dataSources,o,this.visualAuthoring,this.viewModel.visualFilters.length),[3,3];case 2:this.appendVisualFiltersCore(o),B.label=3;case 3:return[2]}})})},r.prototype.appendFieldVisualFilters=function(o){this.appendVisualFiltersCore(powerbi.explore.helpers.getModernFieldListExpr(o))},r.prototype.appendVisualFilters=function(o,a,c){this.appendVisualFiltersCore(this.getFieldFromDragContext())},r.prototype.appendVisualFiltersCore=function(o){var a=this.getSelectedVisual();a&&pe.addFilterToScopeFromDrop(0,a,!1,this.dataSources,o,this.visualAuthoring,3===a.filterSortOrder?this.viewModel.visualFilters.length:void 0)},r.prototype.dropFieldPageFilter=function(o){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(a){switch(a.label){case 0:return[4,this.dropPageFilterCore(powerbi.explore.helpers.getModernFieldListExpr(o))];case 1:return a.sent(),[2]}})})},r.prototype.dropPageFilter=function(o,a,c){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(B){switch(B.label){case 0:return[4,this.dropPageFilterCore(this.getFieldFromDragContext())];case 1:return B.sent(),[2]}})})},r.prototype.dropPageFilterCore=function(o){return(0,e.mG)(this,void 0,void 0,function(){var a;return(0,e.Jh)(this,function(B){switch(B.label){case 0:return a=this.explorationNavigation.getCurrentSection(),this.customSortEnabled(1)?[4,this.visualAuthoring.setFilterSortType(this.dataSources.get(),1,3)]:[3,2];case 1:return B.sent()&&pe.addFilterToScopeFromDrop(1,a,!1,this.dataSources,o,this.visualAuthoring,this.getSortableFiltersLength(this.viewModel.pageFilters)),[3,3];case 2:this.appendPageFiltersCore(o),B.label=3;case 3:return[2]}})})},r.prototype.appendFieldPageFilters=function(o){o.stopPropagation(),o.preventDefault(),this.appendPageFiltersCore(powerbi.explore.helpers.getModernFieldListExpr(o))},r.prototype.appendPageFilters=function(o,a,c){this.appendPageFiltersCore(this.getFieldFromDragContext())},r.prototype.appendPageFiltersCore=function(o){var a=this.explorationNavigation.getCurrentSection(),c=3===a.filterSortOrder?this.getSortableFiltersLength(this.viewModel.pageFilters):void 0;pe.addFilterToScopeFromDrop(1,a,!1,this.dataSources,o,this.visualAuthoring,c)},r.prototype.dropFieldDrillthroughFilter=function(o){this.dropDrillthroughFilterCore(powerbi.explore.helpers.getModernFieldListExpr(o))},r.prototype.dropDrillthroughFilter=function(o,a,c){this.dropDrillthroughFilterCore(this.getFieldFromDragContext())},r.prototype.dropDrillthroughFilterCore=function(o){var a=this.explorationNavigation.getCurrentSection();pe.addFilterToScopeFromDrop(1,a,!0,this.dataSources,o,this.visualAuthoring)},r.prototype.dropFieldReportFilter=function(o){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(a){switch(a.label){case 0:return[4,this.dropReportFilterCore(powerbi.explore.helpers.getModernFieldListExpr(o))];case 1:return a.sent(),[2]}})})},r.prototype.dropReportFilter=function(o,a,c){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(B){switch(B.label){case 0:return[4,this.dropReportFilterCore(this.getFieldFromDragContext())];case 1:return B.sent(),[2]}})})},r.prototype.dropReportFilterCore=function(o){return(0,e.mG)(this,void 0,void 0,function(){var a;return(0,e.Jh)(this,function(B){switch(B.label){case 0:return a=this.explorationNavigation.getCurrentExploration(),this.customSortEnabled(2)?[4,this.visualAuthoring.setFilterSortType(this.dataSources.get(),2,3)]:[3,2];case 1:return B.sent()&&pe.addFilterToScopeFromDrop(2,a,!1,this.dataSources,o,this.visualAuthoring,this.getSortableFiltersLength(this.viewModel.reportFilters)),[3,3];case 2:this.appendReportFiltersCore(o),B.label=3;case 3:return[2]}})})},r.prototype.appendFieldReportFilters=function(o){this.appendReportFiltersCore(powerbi.explore.helpers.getModernFieldListExpr(o))},r.prototype.appendReportFilters=function(o,a,c){this.appendReportFiltersCore(this.getFieldFromDragContext())},r.prototype.appendReportFiltersCore=function(o){var a=this.explorationNavigation.getCurrentExploration(),c=3===a.filterSortOrder?this.getSortableFiltersLength(this.viewModel.reportFilters):void 0;pe.addFilterToScopeFromDrop(2,a,!1,this.dataSources,o,this.visualAuthoring,c)},r.prototype.getSortableFiltersLength=function(o){var a=_.findIndex(o,function(B){return!B.canSortManually});return-1===a?o.length:a},r.prototype.isVisualFiltersVisible=function(){var o=this.viewModeState.getMode(),a=1===o,c=0===o;if(this.isEditMode()&&this.isInOutspacePane&&this.viewModel.isVisualVisible)return!0;if(this.isInOutspacePane){var B=_.filter(this.viewModel.visualFilters,function(U){return!0!==U.contract.isHiddenInViewMode});return this.viewModel.isVisualVisible&&!_.isEmpty(B)}return!!(a&&this.viewModel.isVisualVisible||c&&!_.isEmpty(this.viewModel.visualFilters))},r.prototype.isPageFiltersVisible=function(){var o=this.viewModel.pageFilters;return this.isReadingMode()&&this.isInOutspacePane&&(o=o.concat(this.viewModel.drillthroughFilters)),this.isPageOrReportScopeFiltersVisible(o)},r.prototype.showDrillthroughInPageFiltersInOutspacePane=function(){return!!this.featureSwitchService.featureSwitches.onObject||this.isReadingMode()},r.prototype.isDrillthroughFiltersVisible=function(){if(!this.viewModeState.getConfig().displayOptions.showDrillthroughFilters)return!1;var a=this.explorationNavigation.getCurrentSection();return!(!a||null!=a.type&&0!==a.type&&2!==a.type)&&this.isPageOrReportScopeFiltersVisible(this.viewModel.drillthroughFilters)},r.prototype.isReportFiltersVisible=function(){return this.isPageOrReportScopeFiltersVisible(this.viewModel.reportFilters)},r.prototype.showNoFiltersHeader=function(){return this.isInOutspacePane&&!this.isVisualFiltersVisible()&&!this.isPageFiltersVisible()&&!this.isDrillthroughFiltersVisible()&&!this.isReportFiltersVisible()},r.prototype.getApplyAllButtonTooltip=function(){return this.viewModeState.getConfig().displayOptions.enableMobileFilters?"Apply_All":"Apply"},r.prototype.isApplyAllOnForThisFilter=function(){var o=this.viewModeState.getConfig().displayOptions.enableMobileFilters;return ge.isApplyAllEnabled(this.isInOutspacePane||o,this.explorationNavigation)},r.prototype.applyAllHasFiltersToApply=function(){return Object.keys(this.validFilterChanges).length+Object.keys(this.invalidFilterChanges).length>0},r.prototype.onApplyAllFilterCardBufferedChanges=function(o){o.wasDeleted?(delete this.validFilterChanges[o.id],delete this.invalidFilterChanges[o.id]):o.canApply?(this.validFilterChanges[o.id]={filterType:o.filterType,filterScope:o.filterScopeType},delete this.invalidFilterChanges[o.id]):(this.invalidFilterChanges[o.id]={filterType:o.filterType,filterScope:o.filterScopeType},delete this.validFilterChanges[o.id]),this.updateIsApplyAllInErrorState()},r.prototype.updateIsApplyAllInErrorState=function(){this.isApplyAllButtonInErrorState=Object.keys(this.invalidFilterChanges).length>0&&this.isApplyAllButtonInErrorState},r.prototype.getFieldFromDragContext=function(){var o=this.dragDataService.getDragContext();return null==o?void 0:o.field},r.prototype.getDropActionInternal=function(o,a){var c=this.promiseFactory.defer();return c.resolve(this.getDropActionInternalCore(this.getFieldFromDragContext())),c.promise},r.prototype.getDropActionInternalCore=function(o){return o?3:0},r.prototype.onApplyAllClicked=function(){this.telemetryService.logEvent(powerbi.telemetry.EXApplyAllClicked,{numValidFilters:Object.keys(this.validFilterChanges).length,numInvalidFilters:Object.keys(this.invalidFilterChanges).length});var o={};Object.keys(this.invalidFilterChanges).length>0?(this.isApplyAllButtonInErrorState=!0,o.idsInError=Object.keys(this.invalidFilterChanges)):(this.validFilterChanges={},this.invalidFilterChanges={},o.undoRedoActionId=new he((new Date).toTimeString(),"Apply All")),this.eventBridge.publishToChannel(fe.applyAllClicked,o)},r.prototype.updateFormatting=function(o){var a,c,B=null==o?void 0:o.outspacePane;if(this.checkboxAndApplyColor=ge.getCheckboxAndApplyColor(B,null===(c=null===(a=this.filterCardStyleArguments)||void 0===a?void 0:a.defaultStyleOverride)||void 0===c?void 0:c.checkboxAndApplyColor),this.isInOutspacePane){this.checkboxAndApplyForegroundColor=ge.getColor(B,"foregroundColor",ae.DefaultOutspacePaneCheckboxAndApplyForegroundColor),this.applyButtonDisabledForegroundColor=ge.getColor(B,"foregroundColor",ae.DefaultOutspacePaneApplyButtonDisabledForegroundColor);var U=powerbi.DataViewObject.getValue(B,"fontFamily",ae.DefaultOutspacePaneFontFamily);this.headerFontFamily=U;var H=powerbi.DataViewObject.getValue(B,"headerSize",ae.DefaultOutspacePaneHeaderSizePt);this.headerFontSize="".concat(H,"pt")}},r.prototype.getFiltersByScopeType=function(o,a){var c;switch(o){case 0:c=this.viewModel.visualFilters;break;case 1:c=a&&5===a?this.viewModel.drillthroughFilters:this.viewModel.pageFilters;break;case 2:c=this.viewModel.reportFilters}return c},r.prototype.setFiltersByScopeType=function(o,a,c){switch(o){case 0:this.viewModel.visualFilters=a;break;case 1:5===c?this.viewModel.drillthroughFilters=a:this.viewModel.pageFilters=a;break;case 2:this.viewModel.reportFilters=a}},r.prototype.sortFiltersBySortType=function(o,a){var c=this;void 0===a&&(a=1);var B=this.getFiltersByScopeType(o),U=this.viewModeState.getConfig().displayOptions.enableMobileFilters,H=B.filter(function(te){return(c.isInOutspacePane||U)&&te.canSortManually}),oe=B.filter(function(te){return!c.isInOutspacePane&&!U||!te.canSortManually});if(B.length>0){switch(a){case 1:H.sort(J.sortFilterByDisplayName),oe.sort(J.sortFilterByDisplayName);break;case 2:H.sort(J.sortFilterByDisplayName).reverse(),oe.sort(J.sortFilterByDisplayName).reverse();break;case 3:H.sort(J.sortFilterByOrdinal)}this.setFiltersByScopeType(o,H.concat(oe))}},r.prototype.onModelChanged=function(){this.createReportFilters(),this.createPageScopeFilters()},r.prototype.isEditMode=function(){return 1===this.viewModeState.getMode()},r.prototype.isReadingMode=function(){return 0===this.viewModeState.getMode()},r.prototype.onExplorationFiltersContainerChanged=function(o){o.container===this.explorationNavigation.getCurrentExploration()&&(this.createReportFilters(),this.createPageScopeFilters())},r.prototype.onSectionFiltersContainerChanged=function(o){o.container===this.explorationNavigation.getCurrentSection()&&this.createPageScopeFilters()},r.prototype.onCanvasChanged=function(){this.createPageScopeFilters(),this.isApplyAllEnabled&&(this.validFilterChanges=this.removeBufferedFilterChangesByFilterScope(this.validFilterChanges,[0,1]),this.invalidFilterChanges=this.removeBufferedFilterChangesByFilterScope(this.invalidFilterChanges,[0,1]),this.updateIsApplyAllInErrorState())},r.prototype.getTargetIndex=function(o,a,c){if(c&&(a+=1),a!==o)return a},r.prototype.isPageOrReportScopeFiltersVisible=function(o){if(this.isInOutspacePane){if(this.isEditMode())return!0;o=_.reduce(o,function(c,B){return B.contract.isHiddenInViewMode||c.push(B),c},[])}else if(this.viewModeState.getConfig().alwaysPopulatePanes||this.isEditMode())return!0;return!_.isEmpty(o)},r.prototype.updateSelection=function(){this.isApplyAllEnabled&&(this.validFilterChanges=this.removeBufferedFilterChangesByFilterScope(this.validFilterChanges,[0]),this.invalidFilterChanges=this.removeBufferedFilterChangesByFilterScope(this.invalidFilterChanges,[0]),this.updateIsApplyAllInErrorState());var o=this.viewModel,a=this.getSelectedVisual();o.visualFilters.length=0,a&&this.visualPluginOps.isQueryVisual(a.config.singleVisual.visualType)?(o.isVisualVisible=!0,this.updateVisualFilters()):this.viewModel.isVisualVisible=!1},r.prototype.onVisualContainerChanged=function(o){if(o){var a=this.getSelectedVisual();a&&o.affectContainer(a)&&"UserAction_Sorting"!==o.sourceLabelKey&&this.updateVisualFilters()}},r.prototype.onFilterContainerChanged=function(o){return(0,e.mG)(this,void 0,void 0,function(){var a,c,B,U,H,oe,te;return(0,e.Jh)(this,function(_e){switch(_e.label){case 0:return o.filter?[4,pe.getConceptualSchema(this.filterPaneUtilServices.dataSources,this.filterPaneUtilServices.conceptualSchemaProxy)]:[2];case 1:return a=_e.sent(),c=5===o.filter.howCreated&&!this.viewModeState.getConfig().displayOptions.showDrillthroughFilters,pe.updateCategoricalFiltersIfNeeded(this.filterPaneUtilServices,0,this.viewModel.visualFilters,o),pe.updateCategoricalFiltersIfNeeded(this.filterPaneUtilServices,1,this.viewModel.pageFilters,o),pe.updateCategoricalFiltersIfNeeded(this.filterPaneUtilServices,2,this.viewModel.reportFilters,o),c||pe.updateCategoricalFiltersIfNeeded(this.filterPaneUtilServices,1,this.viewModel.drillthroughFilters,o),c&&!this.isInOutspacePane||(B=this.explorationNavigation.getCurrentExploration(),U=this.getSelectedVisual(),H=ge.getFiltersContainer(o.scope.scopeType,this.selection,this.explorationNavigation),te=H?H.filterSortOrder:void 0,oe=this.getFiltersByScopeType(o.scope.scopeType,o.filter.howCreated),pe.onFilterContainerChanged(o,oe,B,this.filterPaneUtilServices,a,U),(1===o.changeType||256===o.changeType)&&this.sortFiltersBySortType(o.scope.scopeType,te)),[2]}})})},r.prototype.getSelectedVisual=function(){return ce.getSelectedVisual(this.selection)},r.prototype.createPageScopeFilters=function(){return(0,e.mG)(this,void 0,void 0,function(){var o,a,c,B,U;return(0,e.Jh)(this,function(H){switch(H.label){case 0:return(o=this.explorationNavigation.getCurrentSection())?[4,pe.getPageScopeFilters(this.filterPaneUtilServices)]:[2];case 1:for(a=H.sent(),this.viewModel.pageFilters=[],this.viewModel.drillthroughFilters=[],c=0,B=a;c<B.length;c++)5!==(U=B[c]).howCreated?this.viewModel.pageFilters.push(U):this.viewModel.drillthroughFilters.push(U);return this.sortFiltersBySortType(1,o.filterSortOrder),[2]}})})},r.prototype.createReportFilters=function(){return(0,e.mG)(this,void 0,void 0,function(){var o,a;return(0,e.Jh)(this,function(c){switch(c.label){case 0:return(o=this.explorationNavigation.getCurrentExploration())?[4,pe.getConceptualSchema(this.dataSources,this.conceptualSchemaProxy)]:(this.viewModel.reportFilters=null,[2]);case 1:return a=c.sent(),this.viewModel.reportFilters=J.createFilters({scopeType:2,container:o},a,this.displayNameService,this.visualPlugin,this.aggrOps,this.localizationService,null),pe.addConfigToFilters(this.viewModel.reportFilters,a,this.dataSources,this.visualAuthoring,!1),this.sortFiltersBySortType(2,this.explorationNavigation.getCurrentExploration().filterSortOrder),[2]}})})},r.prototype.updateVisualFilters=function(){return(0,e.mG)(this,void 0,void 0,function(){var o,a,c;return(0,e.Jh)(this,function(B){switch(B.label){case 0:return[4,pe.getConceptualSchema(this.dataSources,this.conceptualSchemaProxy)];case 1:return o=B.sent(),a=this.explorationNavigation.getCurrentSection(),(c=this.getSelectedVisual())?(this.viewModel.visualFilters=this.visualAuthoring.createVisualFilters(a,c,this.dataSources.get(),o),this.sortFiltersBySortType(0,this.getSelectedVisual().filterSortOrder),[2]):[2]}})})},r.prototype.isSearchTextNullOrEmpty=function(){return!(this.searchFiltersInput&&!/^\s*$/.test(this.searchFiltersInput))},r.prototype.removeBufferedFilterChangesByFilterScope=function(o,a){return _.omitBy(o,function(c){return a.some(function(B){return c.filterScope===B})})},r.prototype.announceTotalVisibleFilterCards=function(){var H,o=this,U=this.viewModel.visualFilters.filter(function(oe){return!pe.shouldHideFilterBySearchInput(oe,o.searchFiltersInput,o.featureSwitchService)}).length+this.viewModel.pageFilters.filter(function(oe){return!pe.shouldHideFilterBySearchInput(oe,o.searchFiltersInput,o.featureSwitchService)}).length+this.viewModel.reportFilters.filter(function(oe){return!pe.shouldHideFilterBySearchInput(oe,o.searchFiltersInput,o.featureSwitchService)}).length;H=0===U?this.localizationService.get("ContentList_EmptySearchResults"):1===U?this.localizationService.get("Count_SearchBox_Result_One"):this.localizationService.format("Count_SearchBox_Results",[U]),this.screenReaderService.alert(H)},r.\u0275fac=function(a){return new(a||r)(i.\u0275\u0275directiveInject(O.C),i.\u0275\u0275directiveInject(T.i),i.\u0275\u0275directiveInject(V.D),i.\u0275\u0275directiveInject(h.O),i.\u0275\u0275directiveInject(u.x),i.\u0275\u0275directiveInject(M.J),i.\u0275\u0275directiveInject(s.U),i.\u0275\u0275directiveInject(I.z),i.\u0275\u0275directiveInject(p.vZ),i.\u0275\u0275directiveInject(C.o),i.\u0275\u0275directiveInject(i.NgZone),i.\u0275\u0275directiveInject(f.t),i.\u0275\u0275directiveInject(A.g),i.\u0275\u0275directiveInject(b.k),i.\u0275\u0275directiveInject(P.z),i.\u0275\u0275directiveInject(S.y0),i.\u0275\u0275directiveInject(L.kc),i.\u0275\u0275directiveInject(D.$),i.\u0275\u0275directiveInject(m.D),i.\u0275\u0275directiveInject(g.f))},r.\u0275cmp=i.\u0275\u0275defineComponent({type:r,selectors:[["filter-pane-modern"]],inputs:{isInOutspacePane:"isInOutspacePane",sectionObjects:"sectionObjects",searchFiltersInput:"searchFiltersInput",filterCardStyleArguments:"filterCardStyleArguments"},features:[i.\u0275\u0275NgOnChangesFeature],decls:10,vars:12,consts:[[1,"filterPane-FlexWrapper"],["dragScroll","",1,"filterPaneScrollWrapper",3,"pbiScrollbar"],["data-automation-type","filterPane",1,"filterPaneModern",3,"ngClass"],["id","noFiltersHeader","class","header caption mediumFontSize","localize","No_Filter_For_Visual_FilterPane",3,"ngStyle",4,"ngIf"],["id","visualFilterContainer","class","bucket","role","group","aria-describedby","filterPaneVisualHeader",3,"ngClass",4,"ngIf"],["id","pageFilterContainer","class","bucket","role","group","aria-describedby","filterPanePageHeader",3,"ngClass",4,"ngIf"],["id","drillthroughFilterContainer","class","bucket","role","group","aria-describedby","filterPaneDrillThroughHeader",4,"ngIf"],["id","exploreFilterContainer","class","bucket","role","group","aria-describedby","filterPaneReportHeader",3,"ngClass",4,"ngIf"],["class","editVariablesButton trimmedTextWithEllipsis","localize","EditVariables_OutspacePane","localizeTooltip","EditVariables_OutspacePane_Tooltip",3,"ngStyle","click",4,"ngIf"],["id","paneApplyAll",4,"ngIf"],["id","noFiltersHeader","localize","No_Filter_For_Visual_FilterPane",1,"header","caption","mediumFontSize",3,"ngStyle"],["id","visualFilterContainer","role","group","aria-describedby","filterPaneVisualHeader",1,"bucket",3,"ngClass"],["class","header",4,"ngIf"],[1,"cards"],[3,"drop","dropWatchConfig","dropAction","dropHandler"],[4,"ngIf"],["class","unselectable trimmedTextWithEllipsis",3,"ngClass","ngStyle","title","drop","dropAction","dropHandler",4,"ngIf"],[1,"header"],["localizeTooltip","FilterPane_VisualDescription","id","filterPaneVisualHeader",1,"caption","trimmedTextWithEllipsis",3,"ngStyle","localize"],["class","optionsMenu","aria-describedby","filterPaneVisualHeader",3,"menuMode","pbiMenu","pbiTooltip","pbiTooltipProgramDisabled","pbiMenuButtonClick",4,"ngIf"],["aria-describedby","filterPaneVisualHeader",1,"optionsMenu",3,"menuMode","pbiMenu","pbiTooltip","pbiTooltipProgramDisabled","pbiMenuButtonClick"],[1,"glyphicon","pbi-glyph-more","glyph-mini"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","searchFiltersInput",4,"ngFor","ngForOf"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","searchFiltersInput"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","index","lastIndex","searchFiltersInput","drop","dropWatchConfig","drag","dragDisabled","getDragContext","dropAction","moveFilter","dropHandler",4,"ngFor","ngForOf"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","index","lastIndex","searchFiltersInput","drop","dropWatchConfig","drag","dragDisabled","getDragContext","dropAction","moveFilter","dropHandler"],[1,"unselectable","trimmedTextWithEllipsis",3,"ngClass","ngStyle","title","drop","dropAction","dropHandler"],["id","pageFilterContainer","role","group","aria-describedby","filterPanePageHeader",1,"bucket",3,"ngClass"],["localizeTooltip","FilterPane_VisualDescription","id","filterPanePageHeader",1,"caption","trimmedTextWithEllipsis",3,"ngStyle","localize"],["class","optionsMenu","aria-describedby","filterPanePageHeader",3,"menuMode","pbiMenu","pbiTooltip","pbiTooltipProgramDisabled","pbiMenuButtonClick",4,"ngIf"],["aria-describedby","filterPanePageHeader",1,"optionsMenu",3,"menuMode","pbiMenu","pbiTooltip","pbiTooltipProgramDisabled","pbiMenuButtonClick"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","index","lastIndex","searchFiltersInput","drop","dropWatchConfig","dropAction","drag","dragDisabled","getDragContext","moveFilter","dropHandler",4,"ngFor","ngForOf"],["data-automation-type","filterCard",3,"viewModel","isInOutspacePane","filterCardStyleArguments","index","lastIndex","searchFiltersInput","drop","dropWatchConfig","dropAction","drag","dragDisabled","getDragContext","moveFilter","dropHandler"],["id","drillthroughFilterContainer","role","group","aria-describedby","filterPaneDrillThroughHeader",1,"bucket"],["localize","FilterPane_Drillthrough","localizeTooltip","FilterPane_DrillthroughDescription","id","filterPaneDrillThroughHeader",1,"caption","trimmedTextWithEllipsis",3,"ngStyle"],["class","unselectable trimmedTextWithEllipsis",3,"ngClass","title","drop","dropAction","dropHandler",4,"ngIf"],[1,"unselectable","trimmedTextWithEllipsis",3,"ngClass","title","drop","dropAction","dropHandler"],["id","exploreFilterContainer","role","group","aria-describedby","filterPaneReportHeader",1,"bucket",3,"ngClass"],["localizeTooltip","FilterPane_VisualDescription","id","filterPaneReportHeader",1,"caption","trimmedTextWithEllipsis",3,"ngStyle","localize"],["class","optionsMenu","aria-describedby","filterPaneReportHeader",3,"menuMode","pbiMenu","pbiTooltip","pbiTooltipProgramDisabled","pbiMenuButtonClick",4,"ngIf"],["aria-describedby","filterPaneReportHeader",1,"optionsMenu",3,"menuMode","pbiMenu","pbiTooltip","pbiTooltipProgramDisabled","pbiMenuButtonClick"],["data-automation-type","filterCard",3,"viewModel","filterCardStyleArguments","isInOutspacePane","searchFiltersInput",4,"ngFor","ngForOf"],["data-automation-type","filterCard",3,"viewModel","filterCardStyleArguments","isInOutspacePane","searchFiltersInput"],["localize","EditVariables_OutspacePane","localizeTooltip","EditVariables_OutspacePane_Tooltip",1,"editVariablesButton","trimmedTextWithEllipsis",3,"ngStyle","click"],["id","paneApplyAll"],["class","applyAllErrorDialogue",4,"ngIf"],["ng-keyup","$event.keyCode == 13 && onApplyAllClicked()","id","buttonApplyAll",3,"disabled","ngStyle","localize","localizeTooltip","click"],[1,"applyAllErrorDialogue"],[1,"glyphicon","glyph-small","pbi-glyph-error"],["role","alert","localize","FilterPane_ApplyAllErrorDialogue",1,"applyAllErrorDialogueText",3,"ngStyle"]],template:function(a,c){1&a&&(i.\u0275\u0275elementStart(0,"section",0)(1,"div",1)(2,"div",2),i.\u0275\u0275template(3,G,1,4,"span",3),i.\u0275\u0275template(4,le,7,10,"section",4),i.\u0275\u0275template(5,Ae,8,11,"section",5),i.\u0275\u0275template(6,lt,7,9,"section",6),i.\u0275\u0275template(7,st,7,10,"section",7),i.\u0275\u0275template(8,ht,1,4,"button",8),i.\u0275\u0275elementEnd()(),i.\u0275\u0275template(9,ke,3,10,"div",9),i.\u0275\u0275elementEnd()),2&a&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("pbiScrollbar",i.\u0275\u0275pureFunction0(9,We)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(10,Ue,c.isInOutspacePane)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.showNoFiltersHeader()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isVisualFiltersVisible()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isPageFiltersVisible()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isDrillthroughFiltersVisible()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isReportFiltersVisible()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.showEditVariablesLink()),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",c.isApplyAllEnabled))},dependencies:[v.NgClass,v.NgForOf,v.NgIf,v.NgStyle,l.X,y.r,d.l8,w.r,x.V,N.w,X.W,ne.W,Ce.z],styles:['.isInOutspacePane[_ngcontent-%COMP%]{box-sizing:border-box;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;overflow:visible;padding:0 8px}html[data-focus-source=key][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]:focus, html[data-focus-source=key][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:focus,   html[data-focus-source=key] .isInOutspacePane:focus,   html[data-focus-source=key] .isInOutspacePane *:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:0px}html[data-focus-source=mouse][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]:focus, html[data-focus-source=mouse][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:focus, html[data-focus-source=program][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]:focus, html[data-focus-source=program][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:focus     html[data-focus-source=mouse] .isInOutspacePane:focus,   html[data-focus-source=mouse] .isInOutspacePane *:focus,   html[data-focus-source=program] .isInOutspacePane:focus,   html[data-focus-source=program] .isInOutspacePane *:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:inherit}.isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{border:none;background-color:inherit;width:100%;border-radius:4px;box-sizing:border-box}html:not([dir="rtl"])[_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{float:right}.isInOutspacePane[_ngcontent-%COMP%]   .cards.append[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811)}.isInOutspacePane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .dragover.dropzone[_ngcontent-%COMP%]{box-shadow:0 0 2px 2px}.isInOutspacePane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{padding:14px;border-radius:2px;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);color:inherit;text-align:center}.isInOutspacePane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   .end-dropzone[_ngcontent-%COMP%]{height:8px}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]{display:flex;flex-direction:column}.isInOutspacePane[_ngcontent-%COMP%]   .bucket.bucket-padding[_ngcontent-%COMP%]{padding:0 0 18px}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:inherit;display:flex;box-sizing:border-box;font-weight:inherit}html:not([dir="rtl"])[_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:0 4px 4px 0}html[dir="rtl"][_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:0 0 4px 4px}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-top:8px;font-size:14px;flex-grow:1}html:not([dir="rtl"])[_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-left:0}html[dir="rtl"][_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-right:0}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]{background-color:transparent;margin-top:8px;color:inherit}html[data-focus-source=key][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]:focus, html[data-focus-source=key][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:focus,   html[data-focus-source=key] .isInOutspacePane .bucket .header .optionsMenu:focus,   html[data-focus-source=key] .isInOutspacePane .bucket .header .optionsMenu *:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:0px}html[data-focus-source=mouse][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]:focus, html[data-focus-source=mouse][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:focus, html[data-focus-source=program][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]:focus, html[data-focus-source=program][_ngcontent-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .optionsMenu[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:focus     html[data-focus-source=mouse] .isInOutspacePane .bucket .header .optionsMenu:focus,   html[data-focus-source=mouse] .isInOutspacePane .bucket .header .optionsMenu *:focus,   html[data-focus-source=program] .isInOutspacePane .bucket .header .optionsMenu:focus,   html[data-focus-source=program] .isInOutspacePane .bucket .header .optionsMenu *:focus{outline:none}.isInOutspacePane[_ngcontent-%COMP%]   filter[_ngcontent-%COMP%]{display:flex;touch-action:auto}.isInOutspacePane[_ngcontent-%COMP%]   filter.append[_ngcontent-%COMP%]{box-shadow:0 3px}.isInOutspacePane[_ngcontent-%COMP%]   filter.prepend[_ngcontent-%COMP%]{box-shadow:0 -3px}.isInOutspacePane[_ngcontent-%COMP%]   .hasRestateHighlight[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1)}.isInOutspacePane[_ngcontent-%COMP%]   .editVariablesButton[_ngcontent-%COMP%]{padding:6px 0 18px;max-width:100%;color:var(--fluent-theme-link-color, #0078D4)}.isInOutspacePane[_ngcontent-%COMP%]   .editVariablesButton[_ngcontent-%COMP%], .isInOutspacePane[_ngcontent-%COMP%]   .editVariablesButton[_ngcontent-%COMP%]:hover{background:transparent}.isInOutspacePane[_ngcontent-%COMP%]   .editVariablesButton[_ngcontent-%COMP%]:hover{color:var(--fluent-theme-link-alt-color, #004578);text-decoration:underline}.isInOutspacePane[_ngcontent-%COMP%]   #noFiltersHeader[_ngcontent-%COMP%]{padding:6px 0 18px;display:block}.isInOutspacePane[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{position:sticky;bottom:0px;z-index:1}.isInOutspacePane[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]{margin:0 auto;display:block;border-radius:2px;width:100%;height:40px;border-color:var(--neutral-secondary-color, #666666)}.isInOutspacePane[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:enabled{background:var(--theme-primary-color, #F2C811)}.isInOutspacePane[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll.errorState[_ngcontent-%COMP%]{background:var(--warning-color, #A4262C)}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){width:100%;box-sizing:border-box;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;overflow:visible}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){float:left}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){padding:0 6px 4px 4px}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){padding:0 4px 4px 6px}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]:focus{outline:none}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:var(--white-color, #FFF);display:flex;box-sizing:border-box;font-weight:inherit}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:6px 5px 6px 0}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin:6px 0 6px 5px}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{font-size:12px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-left:12px}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-right:12px}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]:focus{outline:none}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color-alt2, #4a4a4a);width:100%;border:1px dashed var(--neutral-secondary-color, #666666);border-radius:4px;box-sizing:border-box}html:not([dir="rtl"])[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%]{float:right}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards.append[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811)}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .dropzone[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8);padding:4px 8px}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .dropzone[_ngcontent-%COMP%]:focus{outline:none}.filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .end-dropzone[_ngcontent-%COMP%]{height:8px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .header[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .header[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4);border-radius:2px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards.append[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .cards.append[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .dropzone[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane)   .dropzone[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.filterPane-FlexWrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;border-color:inherit}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{border-top:1px solid;border-color:inherit;display:flex;flex-direction:column;box-sizing:border-box;padding-top:8px}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]{margin:8px 8px 16px auto;border-radius:2px;border:1px transparent solid;width:80px;height:32px}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]   html[data-focus-source=key][_ngcontent-%COMP%], .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]{margin:0 8px;padding:7px;display:flex;background:var(--fluent-theme-error-background-color, #FDE7E9)}.filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{color:var(--fluent-theme-error-dark-color, #A80000);padding-right:6px}',".exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .cards[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .cards[_ngcontent-%COMP%]{font-size:12px;border:0;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{border-top:0;min-height:50px;margin-bottom:unset;padding-top:2px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]{min-height:32px;font-weight:500;margin:5px 18px 16px auto;border-radius:4px;font-size:14px;letter-spacing:normal;background-color:var(--fluentThemeWhiteToNightColor);border:2px solid var(--fluentThemeNeutralTertiaColor);font-weight:700;width:100px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:not(:enabled), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:not(:enabled){color:var(--fluentThemeNeutralTertiaColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:enabled, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:enabled{background-color:inherit;border:2px solid var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child{position:relative;top:0px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:hover, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:hover{color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]{background-color:var(--fluentThemeErrorBackgroundColor);color:var(--fluentThemeErrorDarkColor);margin:auto 18px;min-height:24px;padding:5px;font-size:14px;border-radius:4px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%]{padding-top:2px;margin:unset}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{padding-right:10px;padding-top:2px;font-size:20px;color:var(--fluentThemeErrorDarkColor);margin:unset}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPaneModern[_ngcontent-%COMP%]:not(.isInOutspacePane){padding:0 17px}.exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{min-height:calc(50px + env(safe-area-inset-bottom))}.exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child, .exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child{position:relative;top:0}@media (orientation: landscape){.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{flex-direction:row;min-height:50px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]{margin-top:0;margin-bottom:auto;position:unset}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%]{padding-right:10px}.exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{min-height:calc(30px + env(safe-area-inset-bottom))}.exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child, .exploreHost.landingController.coverNativeNotch   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]:only-child{position:unset}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%]{padding-left:10px}}.exploreHost.landingController[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogueText[_ngcontent-%COMP%]{margin-bottom:8px}.exploreHost.landingController[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:auto}.exploreHost.landingController.tabletPortraitLayout[_nghost-%COMP%]   #paneApplyAll[_ngcontent-%COMP%], .exploreHost.landingController.tabletPortraitLayout   [_nghost-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]{margin-bottom:44px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   #buttonApplyAll[_ngcontent-%COMP%]{margin:5px auto 16px 24px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filterPane-FlexWrapper[_ngcontent-%COMP%]   #paneApplyAll[_ngcontent-%COMP%]   .applyAllErrorDialogue[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{padding-left:10px}"]}),r}()},21923:function(Ve,se,t){t.d(se,{F:function(){return h}});var e=t(73637),n=t(25991),f=t(22584),i=t(78186),O=powerbi.explore.FilterUtils;function T(M,I){if(1&M&&(e.\u0275\u0275elementStart(0,"li",1),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&M){var b=I.$implicit;e.\u0275\u0275propertyInterpolate("title",b),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",b," ")}}var V=function(I,b,P,g,u){return{backgroundColor:I,"border-color":b,color:P,"font-family":g,"font-size":u}},h=function(){function M(I,b){this.explorationNavigation=I,this.themeService=b}return M.prototype.ngOnInit=function(){var I=this.explorationNavigation.getCurrentExploration(),b=this.themeService.getVisualStyle(I.themeCollection),P=O.getFilterCardStyle(this.sectionObjects,!0,b);this.backgroundColor=P.backgroundColor,this.borderColor=P.borderColor,this.color=P.foregroundColor,this.fontFamily=P.fontFamily,this.fontSize=P.fontSize},M.prototype.getAriaLabelForRestatementItem=function(){var I=this.filterRestatement&&this.filterRestatement.fieldName,b=this.filterRestatement&&this.filterRestatement.restatements,P=_.isEmpty(b)?"":b.join();return"".concat(I," ").concat(P)},M.\u0275fac=function(b){return new(b||M)(e.\u0275\u0275directiveInject(n.z),e.\u0275\u0275directiveInject(f.f))},M.\u0275cmp=e.\u0275\u0275defineComponent({type:M,selectors:[["filter-restatement-card"]],inputs:{filterRestatement:"filterRestatement",sectionObjects:"sectionObjects"},decls:5,vars:11,consts:[[1,"filterRestatementCard",3,"ngStyle"],[3,"title"],[3,"title",4,"ngFor","ngForOf"]],template:function(b,P){1&b&&(e.\u0275\u0275elementStart(0,"div",0)(1,"strong",1),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(3,"ul"),e.\u0275\u0275template(4,T,2,2,"li",2),e.\u0275\u0275elementEnd()()),2&b&&(e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction5(5,V,P.backgroundColor,P.borderColor,P.color,P.fontFamily,P.fontSize)),e.\u0275\u0275attribute("aria-label",P.getAriaLabelForRestatementItem()),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("title",P.filterRestatement.fieldNameToolTip),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(P.filterRestatement.fieldName),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",P.filterRestatement.restatements))},dependencies:[i.NgForOf,i.NgStyle],styles:[".filterRestatementCard[_ngcontent-%COMP%]{border:1px solid;margin-top:6px;padding:8px 12px;font-size:14px;word-wrap:break-word;border-radius:2px}.filterRestatementCard[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;margin:0}"]}),M}()},13734:function(Ve,se,t){t.d(se,{k:function(){return i}});var e=t(67617),n=t(73637),f=t(23041),i=function(){function O(T){this.filterRestatementData=T,this.visual=T.visual,this.isSticky=!!T.isSticky}return O.\u0275fac=function(V){return new(V||O)(n.\u0275\u0275directiveInject(e.M))},O.\u0275cmp=n.\u0275\u0275defineComponent({type:O,selectors:[["filter-restatement-overlay"]],decls:2,vars:2,consts:[[1,"pbi-depth-2"],[3,"visual","isSticky"]],template:function(V,h){1&V&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"filter-restatement",1),n.\u0275\u0275elementEnd()),2&V&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("visual",h.visual)("isSticky",h.isSticky))},dependencies:[f.W],encapsulation:2,changeDetection:0}),O}()},23041:function(Ve,se,t){t.d(se,{W:function(){return v}});var e=t(7005),n=t(73637),f=t(16660),i=t(18766),O=t(25991),T=t(18179),V=t(18266),h=t(28252),M=t(22584),I=t(42),b=t(78186),P=t(35380),g=t(21923),u=powerbi.common.utils.ColorUtility,s=powerbi.visuals.ColorHelper,p=powerbi.DataViewObject,C=powerbi.explore.constants.ExploreCanvasConstants,A=powerbi.explore.util;function S(l,y){if(1&l&&(n.\u0275\u0275elementStart(0,"li"),n.\u0275\u0275element(1,"filter-restatement-card",7),n.\u0275\u0275elementEnd()),2&l){var d=y.$implicit,w=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("filterRestatement",d)("sectionObjects",w.section.evaluatedObjects)}}function L(l,y){1&l&&n.\u0275\u0275element(0,"li",8)}function D(l,y){if(1&l&&(n.\u0275\u0275elementStart(0,"ul"),n.\u0275\u0275template(1,S,2,2,"li",5),n.\u0275\u0275template(2,L,1,0,"li",6),n.\u0275\u0275elementEnd()),2&l){var d=y.ngIf;n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",d),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!(null!=d&&d.length))}}var m=function(y,d,w,x){return{backgroundColor:y,color:d,"font-family":w,"font-size":x}},v=function(){function l(y,d,w,x,N,X,ne,Ce){this.conceptualSchemaProxy=y,this.dataSources=d,this.explorationNavigation=w,this.filterRestatementService=x,this.localizationService=N,this.telemetryService=X,this.themeService=ne,this.viewModeState=Ce,this.filters$=Promise.resolve([]),this.backgroundColorSelector={objectName:"outspacePane",propertyName:"backgroundColor"},this.foregroundColorSelector={objectName:"outspacePane",propertyName:"foregroundColor"}}return l.prototype.ngOnInit=function(){var y=this.explorationNavigation.getCurrentExploration();this.section=this.explorationNavigation.getCurrentSection();var w=this.themeService.getVisualStyle(y.themeCollection),x=s.create(w),N=this.section&&this.section.evaluatedObjects;this.setBackground(N,x),this.setColor(N,x),this.setText(N)},l.prototype.ngOnChanges=function(y){(y.supportsValueLevelFilters||y.visual)&&this.update()},l.prototype.update=function(){var y=this;this.ariaLabelString=this.localizationService.get(this.supportsValueLevelFilters?"FilterRestatementVisual_ToolTip_Dialogue_Description_Value":"FilterRestatementVisual_ToolTip_Dialogue_Description"),this.filters$=this.getVisualFilters().then(function(w){return y.telemetryService.logEvent(powerbi.telemetry.EXImprovedFilterExperienceShowRestatement,{numOfFiltersShown:w.length,viewMode:A.getTelemetryViewMode(y.viewModeState.getMode())}),w||[]}).catch(function(w){return[]})},l.prototype.getVisualFilters=function(){return(0,e.mG)(this,void 0,void 0,function(){var y,d;return(0,e.Jh)(this,function(w){switch(w.label){case 0:return y=this.explorationNavigation.getCurrentExploration(),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return d=w.sent(),this.supportsValueLevelFilters?[2,this.filterRestatementService.getContextualFilterRestatements(d,this.visual)]:[2,this.filterRestatementService.getVisualFilterRestatements(y,this.section,d,this.visual)]}})})},l.prototype.setBackground=function(y,d){var w=d.getColorForProperty(y,this.backgroundColorSelector,"background"),N=u.convertTransparencyToOpacity(p.getValue(this.section.evaluatedObjects&&this.section.evaluatedObjects.outspacePane,"transparency",C.DefaultOutspacePaneTransparency));this.backgroundColor=u.hexToRGBString(w,N)},l.prototype.setColor=function(y,d){var w=d.getColorForProperty(y,this.foregroundColorSelector,"foreground");this.color=u.hexToRGBString(w)},l.prototype.setText=function(y){var d=y&&y.outspacePane;this.fontFamily=p.getValue(d,"fontFamily",C.DefaultOutspacePaneFontFamily);var w=p.getValue(d,"headerSize",C.DefaultOutspacePaneHeaderSizePt);this.fontSize="".concat(w,"pt")},l.\u0275fac=function(d){return new(d||l)(n.\u0275\u0275directiveInject(f.i),n.\u0275\u0275directiveInject(i.D),n.\u0275\u0275directiveInject(O.z),n.\u0275\u0275directiveInject(T.I),n.\u0275\u0275directiveInject(V.o),n.\u0275\u0275directiveInject(h.y0),n.\u0275\u0275directiveInject(M.f),n.\u0275\u0275directiveInject(I.kc))},l.\u0275cmp=n.\u0275\u0275defineComponent({type:l,selectors:[["filter-restatement"]],inputs:{supportsValueLevelFilters:"supportsValueLevelFilters",visual:"visual",isSticky:"isSticky"},features:[n.\u0275\u0275NgOnChangesFeature],decls:7,vars:14,consts:[[1,"filter-restatement-container"],[1,"filterRestatement","themeableElement",3,"ngStyle"],["aria-hidden","true",1,"glyphicon","pbi-glyph-filter"],["aria-hidden","true",1,"title"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","noFilter","localize","No_Filter_For_Visual",4,"ngIf"],[3,"filterRestatement","sectionObjects"],["localize","No_Filter_For_Visual",1,"noFilter"]],template:function(d,w){1&d&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1),n.\u0275\u0275element(2,"span",2),n.\u0275\u0275elementStart(3,"span",3),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,D,3,2,"ul",4),n.\u0275\u0275pipe(6,"async"),n.\u0275\u0275elementEnd()()),2&d&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction4(9,m,w.backgroundColor,w.color,w.fontFamily,w.fontSize)),n.\u0275\u0275attribute("autofocus",w.isSticky||null)("tabindex",w.isSticky?"0":null)("aria-label",w.ariaLabelString)("role",w.isSticky?"region":null),n.\u0275\u0275advance(3),n.\u0275\u0275textInterpolate(w.ariaLabelString),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(6,7,w.filters$)))},dependencies:[b.NgForOf,b.NgIf,b.NgStyle,P.X,g.F,b.AsyncPipe],styles:[".filterRestatement[_ngcontent-%COMP%]{font-size:14px;width:260px;max-height:374px;overflow-y:auto;padding:12px 16px;z-index:999}.filterRestatement[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle}.filterRestatement[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{vertical-align:middle;margin-bottom:4px;margin-inline-start:2px}.filterRestatement[_ngcontent-%COMP%]   .noFilter[_ngcontent-%COMP%]{padding:5px}.filterRestatement[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:0}.filterRestatement[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;margin:0}.filter-restatement-container[_ngcontent-%COMP%]{background-color:#fff}"],changeDetection:0}),l}()},55176:function(Ve,se,t){t.d(se,{A:function(){return Ne}});var e=t(7005),n=t(73637),f=t(29494),i=t(59279),O=t(16660),T=t(83406),V=t(93171),h=t(18766),M=t(31701),I=t(23196),b=t(26076),P=t(25991),g=t(32130),u=t(9161),s=t(59897),p=t(33714),C=t(33874),A=t(26092),S=t(18266),L=t(15338),D=t(28252),m=t(42),v=t(5801),l=t(14096),y=t(56339),d=t(10378),w=t(78186),x=t(30411),N=t(35380),X=t(52181),ne=t(8126),Ce=t(27826),he=t(40252),Fe=t(8178),fe=t(40166),ae=powerbi.data.DataViewObjectDefinitions,pe=jsCommon.EnumExtensions,ge=powerbi.explore.services.events,Me=powerbi.explore.services,ce=powerbi.explore.FilterUtils,J=powerbi.explore.viewModels.FilterViewModel,ie=powerbi.explore.PodUtils,G=powerbi.data.RestatementHelper,j=powerbi.data.SemanticFilter,F=powerbi.data.SQExpr,E=powerbi.data.SQExprBuilder,k=powerbi.explore.services.toFilterData,R=powerbi.explore.util.VisualContainerUtils,z=powerbi.explore.util.VisualHostServicesUtil;function Q(be,Y){if(1&be&&n.\u0275\u0275element(0,"visual-modern",6),2&be){var ue=n.\u0275\u0275nextContext();n.\u0275\u0275property("viewModel",ue.viewModel.readOnlyState.visual)("currentZone",ue.currentZone)("supportsScreenReader",!0)}}function me(be,Y){1&be&&(n.\u0275\u0275elementStart(0,"div",7),n.\u0275\u0275element(1,"spinner")(2,"span",8),n.\u0275\u0275elementEnd())}function le(be,Y){1&be&&(n.\u0275\u0275elementStart(0,"div",9)(1,"i",10),n.\u0275\u0275element(2,"svg-use-symbol",11),n.\u0275\u0275elementEnd(),n.\u0275\u0275element(3,"span",12),n.\u0275\u0275elementEnd())}function K(be,Y){if(1&be){var ue=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",13),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(ue);var Ze=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(Ze.onApplyButtonClicked())}),n.\u0275\u0275elementEnd()}if(2&be){var Pe=n.\u0275\u0275nextContext();n.\u0275\u0275property("disabled",!Pe.isApplyButtonEnabled())}}var q=function(Y){return{"border-color":Y}};function ye(be,Y){if(1&be){var ue=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"div",14)(1,"mat-checkbox",15),n.\u0275\u0275listener("change",function(){n.\u0275\u0275restoreView(ue);var Ze=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(Ze.updateRequiredState())})("ngModelChange",function(Ze){n.\u0275\u0275restoreView(ue);var ot=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(ot.viewModel.isSingleSelectionRequired=Ze)}),n.\u0275\u0275element(2,"span",16),n.\u0275\u0275elementEnd()()}if(2&be){var Pe=n.\u0275\u0275nextContext();n.\u0275\u0275classProp("disabled",Pe.viewModel.isSingleSelectDisabled()),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(10,q,Pe.viewModel.borderColor))("ngClass",Pe.isInOutspacePane?"filterOutspace":"filterClassic"),n.\u0275\u0275advance(1),n.\u0275\u0275property("matCheckBoxColor",Pe.viewModel.checkboxAndApplyColor)("matCheckBoxColorIsChecked",Pe.viewModel.isSingleSelectionRequired)("disabled",Pe.viewModel.isSingleSelectDisabled())("ngModel",Pe.viewModel.isSingleSelectionRequired)("aria-label",Pe.requireSingleSelectLabel)("localizeTooltip",Pe.getToolTipForSingleSelect())}}var Le={objectName:"general",propertyName:"isInvertedSelectionMode"},Ne=function(){function be(Y,ue,Pe,Ae,Ze,ot,lt,yt,De,Ie,Oe,Be,qe,je,st,ht,Pt,ze,ke,We,Ue,ve,r,o,a){this.aggrOps=Y,this.contextActivityService=ue,this.conceptualSchemaProxy=Pe,this.dataSources=Ae,this.displayNameService=Ze,this.eventBridge=ot,this.explorationActivity=lt,this.explorationNavigation=yt,this.featureSwitchService=De,this.filterGenerator=Ie,this.geocoder=Oe,this.geolocationService=Be,this.localizationService=qe,this.moduleLoader=je,this.ngZone=st,this.promiseFactory=ht,this.singleExecutableDataProxyFactory=Pt,this.telemetryService=ze,this.undoRedo=ke,this.viewModeState=We,this.visualAuthoring=Ue,this.visualHostTooltipServiceFactory=ve,this.visualPlugin=r,this.visualQueryGenerator=o,this.screenReaderService=a}return be.prototype.ngOnInit=function(){var Y=this;this.runInAngularZone(function(){return Y.onInitImpl()})},be.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.viewModel.setServices(void 0,this.visualPlugin,this.viewModeState),this.viewModel.readOnlyState.visual=void 0},be.prototype.ngOnChanges=function(Y){var ue=this;this.runInAngularZone(function(){return ue.onChangesImpl(Y)})},be.prototype.onInitImpl=function(){var Y=this,ue=this.singleExecutableDataProxyFactory.create();if(this.visualDataProxyService=Me.createExploreVisualDataProxyService(ue,this.filterGenerator,this.promiseFactory,this.visualPlugin),this.crossFilteringHostService=this.createFilteringHostService(),this.requireSingleSelectLabel=this.localizationService.get("PageFilter_SingleSelectionRequired"),ie.isPodEnabled(this.viewModel.contract,this.viewModel.getFilterContainerScope())&&this.isPodParameter())this.viewModel.isSingleSelectionRequired=!0;else if(this.viewModel.contract.objects){var Pe=ae.getValue(this.viewModel.contract.objects,{objectName:"general",propertyName:"requireSingleSelect"},void 0);Pe&&Pe.value&&(this.viewModel.isSingleSelectionRequired=powerbi.data.SQConstantExpr.getBooleanValue(Pe))}this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(ge.filterContainerChanged,function(Ae,Ze){return Y.onFilterContainerChanged(Ze)}).subscribe(ge.explorationLoaded,function(){return Y.runInAngularZone(function(){return Y.updateSlowDataApplyEnabled()})}).subscribe(ge.sectionObjectsEvaluated,function(Ae,Ze){return Y.runInAngularZone(function(){Y.viewModel.isFilterExpanded()&&Y.loadData(!1)})}).subscribe(ge.explorationUnloaded,function(){return Y.runInAngularZone(function(){return Y.updateSlowDataApplyEnabled()})}).subscribe(ge.applyAllClicked,function(Ae,Ze){return Y.onApplyAllClicked(Ze)}).subscribe(ge.explorationSlowDataSourceSettingsLoaded,function(Ae,Ze){return Y.runInAngularZone(function(){(Ze.isFilterSelectionsButtonEnabledChanged||Ze.isApplyAllButtonEnabledChanged)&&(Y.applyBufferedFilter(),Y.updateSlowDataApplyEnabled())})}),this.updateSlowDataApplyEnabled(),this.init(this.viewModel)},be.prototype.onChangesImpl=function(Y){!this.isInitialized&&!0===Y.expanded.currentValue&&(this.init(this.viewModel),this.isInitialized=!0)},be.prototype.init=function(Y){var ue=this;this.viewModel=Y,this.viewModel.setServices(powerbi.Prototype.inherit(powerbi.explore.services.createVisualHostServices({geocoder:this.geocoder,geolocation:this.geolocationService,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.create(),screenReaderService:this.screenReaderService}),function(Pe){Pe.persistProperties=function(Ae,Ze){return ue.persistProperties(Ae)},Pe.loadMoreData=function(){return ue.loadMoreData()},Pe.promiseFactory=function(){return ue.promiseFactory},Pe.canSelect=function(Ae){return!0},Pe.getFilterExpressionMetadata=function(){return ue.getFilterExpressionMetadata()},Pe.setFilterExpressionMetadata=function(Ae){return ue.setFilterExpressionMetadata(Ae)},Pe.ignoreDefaultFilter=function(){return ue.ignoreDefaultFilter()},Pe.dataMultiSelectMode=function(){return ue.getDataMultiSelectMode()}}),this.visualPlugin,this.viewModeState),this.getConceptualSchema().then(function(Pe){if(ue.viewModel.updateFilterProperties(Pe,ue.visualPlugin,ue.aggrOps),ue.viewModel.updateViewState(),ue.viewModel.isSingleSelectionRequired){var Ae=ue.viewModel.getFilterContainerScope();!ue.isPodParameter()&&1===Ae.scopeType||ue.viewModel.isMappedToMParameter()&&!ue.viewModel.supportsMultipleValues()?ue.updateRequiredState(!1):ue.updateVisualSelectAllState()}ue.viewModel.readOnlyState.expanded&&ue.loadData(!1),ue.loadRestatement()})},be.prototype.getToolTipForSingleSelect=function(){return this.viewModel.isMappedToMParameter()&&!this.viewModel.supportsMultipleValues()?"DQP_RequireSingleSelect_Tootltip":"PageFilter_SingleSelectionRequired_Tooltip"},be.prototype.isViewMode=function(){return 0===this.viewModeState.getMode()},be.prototype.isFooterVisible=function(){return this.viewModel.readOnlyState.canToggleSingleSelect&&(!this.isInOutspacePane||!this.isViewMode())},be.prototype.updateRequiredState=function(Y){void 0===Y&&(Y=!0);var ue=this.viewModel.isSingleSelectionRequired;this.visualAuthoring.setRequireSingleSelection(this.viewModel.contract,this.viewModel.getFilterContainerScope(),ue),this.updateVisualSelectAllState(),this.updateVisualProperties();var Pe=this.viewModel;if(Y&&ue&&(Pe.contract.filter||this.applyAllEnabled)){this.visualAuthoring.updateFilter(Pe.getFilterContainerScope(),Pe.contract,void 0);var Ae=void 0;this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Ae=ce.createChangeFilterActivity(this.contextActivityService,"Clear Filter"));var Ze={filter:Pe.contract,changeType:10,scope:Pe.getFilterContainerScope(),changeFilterActivity:Ae};ce.notifyFilterContainerChangedByUser(this.eventBridge,Ze),this.applyAllEnabled&&(this.bufferedFilter=void 0,this.applyBufferedFilter(),Pe.setRestatement(G.fromDataViewScopeIdentities([],!1,Pe.formatter)),ce.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,powerbi.explore.contracts.FilterType.Visual,this.viewModel.id,!0,!0)),Ae&&Ae.resolve()}else Y&&this.visualAuthoring.updateFilter(Pe.getFilterContainerScope(),Pe.contract,Pe.contract.filter)},be.prototype.isApplyButtonVisible=function(){return this.slowDataApplyEnabled&&!this.applyAllEnabled},be.prototype.isApplyButtonEnabled=function(){return this.haveBufferedFilter},be.prototype.onApplyAllClicked=function(Y){this.applyAllEnabled&&!Y.idsInError&&this.applyBufferedFilter(Y.undoRedoActionId)},be.prototype.onApplyButtonClicked=function(){this.slowDataApplyEnabled&&(document.activeElement.blur(),this.applyBufferedFilter())},be.prototype.runInAngularZone=function(Y){n.NgZone.isInAngularZone()?Y():this.ngZone.run(Y)},be.prototype.loadRestatement=function(){var Y=this,ue=this.viewModel.contract;ue.filter?this.getConceptualSchema().then(function(Pe){var Ae=powerbi.visuals.plugins.slicer.capabilities,Ze=k(ue.filter,void 0,ue),ot=Y.displayNameService.getFilterRestatementForOverlay(Ze,Pe,Ae);!_.isEmpty(ot)&&ot[0]&&ot[0].restatements?Y.viewModel.setRestatement(ot[0].restatements.join(Y.localizationService.get("ListJoin_Separator"))):Y.viewModel.setRestatement(void 0)}):this.viewModel.setRestatement(void 0)},be.prototype.ignoreDefaultFilter=function(){var Y=this.viewModel.contract;return 1!==Y.howCreated&&!j.isDefaultFilter(Y.filter)},be.prototype.persistProperties=function(Y){var ue=this,Pe=_.isArray(Y)?{merge:Y}:Y;!this.viewModel.readOnlyState.visual||(this.viewModel.contract.config.singleVisual.objects=this.viewModel.readOnlyState.visual.dataTransforms.objects,this.runInAngularZone(function(){ue.checkAndApplySelfFilterPropertyChanges(Pe),ue.checkAndApplyFilterPropertyChanges(Pe)}))},be.prototype.checkAndApplySelfFilterPropertyChanges=function(Y){var ue=powerbi.visuals.plugins.slicer.capabilities,Pe=this.filterGenerator.tryGetSelfFilterProperty(ue);!Y||void 0===this.getChangeProperty(Pe.propertyName,Y.merge)&&void 0===this.getChangeProperty(Pe.propertyName,Y.remove)||(powerbi.explore.services.applyPropertyChanges(Y,ue.objects,this.viewModel.contract.config.singleVisual.objects),this.loadData(!1))},be.prototype.checkAndApplyFilterPropertyChanges=function(Y){var ue,Pe;if(Y){var Ae=this.filterGenerator.tryGetFilterPropertyIdentifier(powerbi.visuals.plugins.slicer.capabilities),Ze=this.getChangeProperty(Ae.propertyName,Y.merge),ot=this.getChangeProperty(Le.propertyName,Y.merge);Ze&&(ue=Ze.properties[Ae.propertyName]),ot&&(Pe=ot.properties[Le.propertyName]);var lt=this.getChangeProperty(Ae.propertyName,Y.remove),yt=this.getChangeProperty(Le.propertyName,Y.remove);if(!(Ze||lt||ot||yt))return;this.bufferPropertyChanges(ue,Pe)||this.applyPropertyChanges(ue,Pe,void 0)}else this.bufferPropertyChanges(ue,Pe)||this.applyPropertyChanges(ue,Pe,void 0)},be.prototype.getChangeProperty=function(Y,ue){if(!_.isEmpty(ue))return _.find(ue,function(Pe){return _.has(Pe.properties,Y)})},be.prototype.applyPropertyChanges=function(Y,ue,Pe){var Ae=this,Ze=ae.getValue(this.viewModel.contract.objects,Le,void 0),ot=Ze&&Ze.value,lt=this.viewModel;if(lt.useDefaultFilter=!1,(!j.isSameFilter(lt.contract.filter,Y)||ot!==ue)&&(!j.isAnyFilter(lt.contract.filter)||Y||ot!==ue)){var yt=this.viewModel.readOnlyState.visual,De=(0,e.pi)({},yt.data);yt.data=De;var Ie=Y||ot||ue?2:10,Oe=lt.getFilterContainerScope();this.viewModel.contract.type=this.viewModel.readOnlyState.type;var Be=function(je){void 0===lt.contract.objects&&(lt.contract.objects={}),ue?ae.setValue(lt.contract.objects,Le,null,E.boolean(ue)):ae.deleteProperty(lt.contract.objects,Le.objectName,null,Le.propertyName);var st=lt.readOnlyState.visual;st.dataTransforms&&st.dataTransforms.objects&&Ae.setInvertedSelectionOnVisual(st.dataTransforms.objects),Ae.visualAuthoring.updateFilter(Oe,lt.contract,Y),ce.ensureFilterHasName(lt.contract,Oe);var Pt,ht={filter:lt.contract,changeType:Ie,scope:Oe,parentActivity:je};Ae.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Pt=ce.createChangeFilterActivity(Ae.contextActivityService,"Basic Filter"),ht.changeFilterActivity=Pt),ce.notifyFilterContainerChangedByUser(Ae.eventBridge,ht),Pt&&Pt.resolve(),Ae.loadRestatement()};this.undoRedo.register("UpdateFilter",function(){2===Ie?Ae.explorationActivity.doRootActivity(Be,function(){return Ae.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneBasicFilterChanged,{filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(Oe.scopeType),fieldKind:powerbi.explore.util.getTelemetryFieldKind(lt.contract.expression),viewMode:powerbi.explore.util.getTelemetryViewMode(Ae.viewModeState.getMode()),isInOutspacePane:Ae.viewModel.isInOutspacePane})}):Ae.explorationActivity.doActivity(Be,function(qe){return Ae.telemetryService.startChildActivity(Ae.currentActivity&&Ae.currentActivity.event||qe&&qe.event,powerbi.telemetry.EXFilterPaneBasicFilterChanged,{filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(Oe.scopeType),fieldKind:powerbi.explore.util.getTelemetryFieldKind(lt.contract.expression),viewMode:powerbi.explore.util.getTelemetryViewMode(Ae.viewModeState.getMode()),isInOutspacePane:Ae.viewModel.isInOutspacePane})})},Pe)}},be.prototype.isPodParameter=function(){var Y=this.explorationNavigation.getCurrentExploration(),ue=this.explorationNavigation.getCurrentSection(),Pe=this.viewModel.contract.name;return!!(Y&&ue&&Pe)&&ie.hasParameter(Y,ue.name,Pe)},be.prototype.createFilteringHostService=function(){var Y=this;return powerbi.Prototype.inherit(z.createQueryVisualHostServices(),function(ue){ue.getFilters=function(Pe,Ae){return Y.filterGenerator.calculateFilterContainerInputFilter(Y.explorationNavigation.getCurrentExploration(),Y.explorationNavigation.getCurrentSection(),Y.viewModel.contract,Ae,Y.viewModel.getFilterContainerScope())},ue.getDataSourceVariables=function(){var Pe=Y.explorationNavigation.getCurrentExploration();return void 0!==Pe?Pe.dataSourceVariables:void 0}})},be.prototype.loadMoreData=function(){this.visualDataProxyService.canLoadMore()&&this.loadData(!0)},be.prototype.loadData=function(Y){var ue=this;this.viewModel.isLoading=!0,this.hasQueryError=!1,this.getConceptualSchema().then(function(Pe){var Ae=ue.dataSources.get();return ue.visualDataProxyService.runQuery({dataSources:Ae,schema:Pe,config:ue.viewModel.contract.config.singleVisual,hostServices:ue.crossFilteringHostService,visualQueryGenerator:ue.visualQueryGenerator,executionType:Y?1:0}).then(function(ot){var lt=ue.visualDataProxyService.lastExecutedQuery();ue.hasQueryError=!1,ue.applyVisualStyling(lt.transforms),!0===Y?ue.onMergeMoreData(ot,Pe,lt.transforms):ue.onDataChanged(ot,Pe,lt.transforms)},function(ot){ot instanceof powerbi.QueryCancellationClientError&&ot.ignorable||(ue.hasQueryError=!0)}).finally(function(){ue.viewModel.isLoading=!1})})},be.prototype.onDataChanged=function(Y,ue,Pe){if(Y&&Y.dataReaderResult&&this.viewModel.readOnlyState.visual){var Ze={dataView:Y&&Y.dataReaderResult?Y.dataReaderResult.dataView:null,dataViewSource:Y&&Y.dataViewSource?Y.dataViewSource:null},ot=R.isSegment(Ze.dataView);ot&&(Ze.isFirstSegment=ot),this.viewModel.contract.filter||this.removeBufferedPropertyChanges(),this.updateVisualState(Pe,Ze),this.viewModel.updateViewState(),this.dataLoaded=!0}},be.prototype.onMergeMoreData=function(Y,ue,Pe){var Ae=this.viewModel.readOnlyState.visual;if(Y&&Y.dataReaderResult&&Ae){var Ze=Y.dataReaderResult.dataView;if(Ze){var ot=Ae.data.dataView;powerbi.data.segmentation.DataViewMerger.mergeDataViews(ot,Ze),this.updateVisualState(Pe,{dataView:ot,dataViewSource:Y&&Y.dataViewSource,isFirstSegment:!1})}}},be.prototype.updateVisualState=function(Y,ue){var Pe=this.viewModel.readOnlyState.visual;Pe.data=ue,Pe.dataTransforms=Y,Y&&(this.viewModel.contract.config.singleVisual.objects=Y.objects)},be.prototype.setFilterPropertyByIdAndValue=function(Y,ue){ae.setValue(this.viewModel.readOnlyState.visual.dataTransforms.objects,Y,null,ue)},be.prototype.deleteFilterPropertyByNames=function(Y){ae.deleteProperty(this.viewModel.readOnlyState.visual.dataTransforms.objects,Y.objectName,null,Y.propertyName)},be.prototype.onFilterContainerChanged=function(Y){var ue=this,Pe=this.viewModel,Ae=Pe.readOnlyState.visual;if(Y.filter===Pe.contract){if(Y.parentActivity&&(this.currentActivity=Y.parentActivity),pe.hasFlag(Y.changeType,2))this.runInAngularZone(function(){ue.onFilterUpdate(Y,Pe,Ae)});else if(this.dataLoaded&&pe.hasFlag(Y.changeType,4))this.runInAngularZone(function(){ue.loadData(!1)});else if(pe.hasFlag(Y.changeType,16))Ae&&Ae.visual&&Ae.visual.update({viewport:J.DefaultVisualViewPort,type:powerbi.VisualUpdateType.Resize,dataViews:null});else if(pe.hasFlag(Y.changeType,32)){var Ze=this.viewModel;Ze.cardType.type!==Y.filter.type&&this.runInAngularZone(function(){Ze.cardType.type=Y.filter.type})}this.currentActivity=void 0}},be.prototype.onFilterUpdate=function(Y,ue,Pe){10===Y.changeType?this.onFilterClear(ue,Pe):this.setInvertedSelectionOnVisual(Pe.dataTransforms.objects),j.isSameFilter(ue.contract.filter,Y.filter.filter)||(ue.readOnlyState.visual.dataTransforms&&(ue.contract.config.singleVisual.objects=ue.readOnlyState.visual.dataTransforms.objects),this.applyAllEnabled||this.visualAuthoring.updateFilter(ue.getFilterContainerScope(),ue.contract,Y.filter.filter),null!=Y.filter.filter&&this.loadData(!1));var Ae=this.visualDataProxyService.lastExecutedQuery();Ae&&(this.applyVisualStyling(Ae.transforms),this.updateVisualProperties()),this.applyAllEnabled||this.loadRestatement()},be.prototype.onFilterClear=function(Y,ue){if(ue&&(ue.visual&&ue.visual.onClearSelection(),ue.dataTransforms)){var Pe=powerbi.visuals.slicerProps.general.filter,Ae=Y.contract.expression;if(Ae&&Y.hasDefaultValue){var Ze=j.getDefaultAnyValueFilter([],[Ae]);this.setFilterPropertyByIdAndValue(Pe,Ze)}else this.deleteFilterPropertyByNames(Pe);this.deleteFilterPropertyByNames(powerbi.visuals.slicerProps.data.isInvertedSelectionMode)}this.applyAllEnabled?(this.updateVisualProperties(),this.haveBufferedFilter=!0):((!Y.contract.filter||j.isAnyFilter(Y.contract.filter))&&Y.setRestatement(G.fromDataViewScopeIdentities([],!1,Y.formatter)),j.isDefaultFilter(Y.contract.filter)&&Y.setRestatement(G.fromDefault(Y.defaultValue.value)))},be.prototype.setInvertedSelectionOnVisual=function(Y){var ue=powerbi.visuals.slicerProps.data.isInvertedSelectionMode,Pe=ae.getValue(this.viewModel.contract.objects,Le,void 0),Ae=Pe&&Pe.value;Ae?ae.setValue(Y,ue,null,E.boolean(Ae)):ae.deleteProperty(Y,ue.objectName,null,ue.propertyName)},be.prototype.updateVisualSelectAllState=function(){var Y=this.viewModel.readOnlyState.visual;if(Y){var ue=this.viewModel.isSingleSelectionRequired,Pe=Y.dataTransforms.objects,Ae=powerbi.visuals.slicerProps.selection.selectAllCheckboxEnabled,Ze=powerbi.visuals.slicerProps.selection.singleSelect;Pe||(Pe={}),ae.setValue(Pe,Ae,null,E.boolean(!ue)),ae.setValue(Pe,Ze,null,E.boolean(ue))}},be.prototype.updateVisualProperties=function(){var Y=this.viewModel.readOnlyState.visual;Y&&Y.data&&(Y.data={dataView:Y.data.dataView,dataViewSource:Y.data.dataViewSource,isFirstSegment:Y.data.isFirstSegment})},be.prototype.setFilterExpressionMetadata=function(Y){var Pe,ue=this.viewModel.contract;if(Y&&!_.isEmpty(Y.expressions)&&!_.isEmpty(Y.cachedValueItems)){var Ae=powerbi.data.ScopeIdentityExtractor.getKeys(Y.cachedValueItems[0].identities[0].expr);(Ae.length>1||!F.equals(ue.expression,Ae[0]))&&(Pe=Y)}ue.cachedValueItems=powerbi.explore.FilterExpressionMetadataUtils.tryGetDisplayNameIdentityPairs(Pe)},be.prototype.getFilterExpressionMetadata=function(){var ue,Y=this.viewModel.contract;return _.isEmpty(Y.cachedValueItems)||(ue=powerbi.explore.FilterExpressionMetadataUtils.convertCacheToFilterExpressionMetadata(Y.expression,Y.cachedValueItems)),ue},be.prototype.getDataMultiSelectMode=function(){return this.viewModeState.getConfig().touchOptions.dataMultiSelectMode},be.prototype.getConceptualSchema=function(){var Y=this.dataSources.get();return Y&&this.viewModel.contract.config&&this.viewModel.contract.config.singleVisual?this.conceptualSchemaProxy.get(Y):this.promiseFactory.reject()},be.prototype.updateSlowDataApplyEnabled=function(){this.slowDataApplyEnabled=!1;var Y=this.explorationNavigation.getCurrentExploration();if(Y&&Y.slowDataSourceSettings){var ue=this.viewModeState.getConfig().displayOptions.enableMobileFilters;this.applyAllEnabled=ce.isApplyAllEnabled(this.isInOutspacePane||ue,this.explorationNavigation),this.slowDataApplyEnabled=Y.slowDataSourceSettings.isFilterSelectionsButtonEnabled||this.applyAllEnabled}},be.prototype.applyBufferedFilter=function(Y){if(this.haveBufferedFilter){var ue=this.bufferedFilter,Pe=this.bufferedInvertedSelectionChange;this.haveBufferedFilter=!1,this.bufferedFilter=void 0,this.bufferedInvertedSelectionChange=void 0,this.applyPropertyChanges(ue,Pe,Y)}},be.prototype.bufferPropertyChanges=function(Y,ue){if(!this.slowDataApplyEnabled||!this.haveBufferedFilter&&j.isSameFilter(this.viewModel.contract.filter,Y))return!1;var Pe=powerbi.visuals.slicerProps.general.filter;return this.setFilterPropertyByIdAndValue(Pe,Y),this.updateVisualProperties(),this.haveBufferedFilter=!0,this.bufferedFilter=Y,this.bufferedInvertedSelectionChange=ue,this.applyAllEnabled&&ce.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,powerbi.explore.contracts.FilterType.Visual,this.viewModel.id,!0),!0},be.prototype.removeBufferedPropertyChanges=function(){if(this.slowDataApplyEnabled||this.applyAllEnabled){var Y=powerbi.visuals.slicerProps.general.filter;this.deleteFilterPropertyByNames(Y)}},be.prototype.applyVisualStyling=function(Y){if(Y){var ue={},Pe=powerbi.visuals.slicerProps.searchBox,Ae=powerbi.visuals.slicerProps.general,Ze=powerbi.visuals.slicerProps.items,ot={solid:{color:E.text(this.viewModel.inputBoxBackgroundColor)}},lt={solid:{color:E.text(this.viewModel.inputBoxBorderColor)}},yt={solid:{color:E.text(this.viewModel.foregroundColor)}},De=_.toInteger(_.replace(this.viewModel.fontSize,"pt","")),Ie=E.integer(De),Oe=E.text(this.viewModel.fontFamily);ae.setValue(ue,Pe.background,null,ot),ae.setValue(ue,Pe.borderColor,null,lt),ae.setValue(ue,Ze.fontColor,null,yt),this.viewModel.isInOutspacePane?(ae.setValue(ue,Ze.textSize,null,Ie),ae.setValue(ue,Ze.fontFamily,null,Oe)):ae.setValue(ue,Ae.outlineColor,null,yt),ae.extend(ue,Y.objects),Y.objects=ue}},be.\u0275fac=function(ue){return new(ue||be)(n.\u0275\u0275directiveInject(i.C),n.\u0275\u0275directiveInject(V.r),n.\u0275\u0275directiveInject(O.i),n.\u0275\u0275directiveInject(h.D),n.\u0275\u0275directiveInject(M.O),n.\u0275\u0275directiveInject(I.J),n.\u0275\u0275directiveInject(b.Z),n.\u0275\u0275directiveInject(P.z),n.\u0275\u0275directiveInject(p.vZ),n.\u0275\u0275directiveInject(g.r),n.\u0275\u0275directiveInject(C.iS),n.\u0275\u0275directiveInject(A._1),n.\u0275\u0275directiveInject(S.o),n.\u0275\u0275directiveInject(L.m),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(f.t),n.\u0275\u0275directiveInject(T.U),n.\u0275\u0275directiveInject(D.y0),n.\u0275\u0275directiveInject(u.z),n.\u0275\u0275directiveInject(m.kc),n.\u0275\u0275directiveInject(v.$),n.\u0275\u0275directiveInject(l.q),n.\u0275\u0275directiveInject(y.D),n.\u0275\u0275directiveInject(s.S),n.\u0275\u0275directiveInject(d.g))},be.\u0275cmp=n.\u0275\u0275defineComponent({type:be,selectors:[["filter-visual"]],inputs:{viewModel:"viewModel",isInOutspacePane:"isInOutspacePane",expanded:"expanded"},features:[n.\u0275\u0275NgOnChangesFeature],decls:6,vars:6,consts:[[1,"filterVisualModern",3,"ngClass"],[3,"viewModel","currentZone","supportsScreenReader",4,"ngIf"],["class","filterSpinner",4,"ngIf"],["class","filterError",4,"ngIf"],["class","applyFilter smallFontSize","localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",3,"disabled","click",4,"ngIf"],["class","cardFooter",3,"ngStyle","ngClass","disabled",4,"ngIf"],[3,"viewModel","currentZone","supportsScreenReader"],[1,"filterSpinner"],["localize","FilterCard_Loading",1,"message"],[1,"filterError"],[1,"icon","filterPaneIcon","error"],["sheet","filterPaneIcons","symbolId","fieldListError"],["localize","FilterCard_ErrorMessage",1,"message"],["localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",1,"applyFilter","smallFontSize",3,"disabled","click"],[1,"cardFooter",3,"ngStyle","ngClass"],["label","PageFilter_SingleSelectionRequired",1,"required","flex","vertiPad","pbi-checkbox",3,"matCheckBoxColor","matCheckBoxColorIsChecked","disabled","ngModel","aria-label","localizeTooltip","change","ngModelChange"],["localize","PageFilter_SingleSelectionRequired"]],template:function(ue,Pe){1&ue&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275template(1,Q,1,3,"visual-modern",1),n.\u0275\u0275template(2,me,3,0,"div",2),n.\u0275\u0275template(3,le,4,0,"div",3),n.\u0275\u0275template(4,K,1,1,"button",4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,ye,3,12,"div",5)),2&ue&&(n.\u0275\u0275property("ngClass",Pe.isInOutspacePane?"filterOutspace":"filterClassic"),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Pe.dataLoaded),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Pe.viewModel.isLoading&&!Pe.dataLoaded),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Pe.hasQueryError),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Pe.isApplyButtonVisible()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Pe.isFooterVisible()))},dependencies:[w.NgClass,w.NgIf,w.NgStyle,x.JJ,x.On,N.X,X.r,ne.N,Ce.oG,he.O,Fe.k,fe.y],styles:['.filterVisualModern.filterOutspace[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .filterError[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:14px;width:14px;display:inline-block;padding:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-left:5px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-right:5px}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter{margin-top:6px;margin-bottom:6px;color:inherit;font-size:inherit;font-family:inherit;background-color:transparent;opacity:.5;position:relative}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter{float:right}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter{float:left}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter:hover{background-color:transparent}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .applyFilter:enabled{color:inherit;opacity:1}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerHeader{margin:0}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerHeader input{background-color:transparent;color:inherit}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerHeader button{background-color:transparent}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .searchHeader.show{margin:4px 0;min-height:22px;height:initial}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .searchHeader.show input.searchInput{box-sizing:border-box;outline:0;padding:0!important}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .searchHeader.show input.searchInput::placeholder{color:inherit}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody{width:auto!important}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y{right:0}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y{left:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y{left:unset}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerBody .scroll-wrapper.scrollbar-inner .scroll-element.scroll-y{right:unset}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{color:var(--white-color, #FFF);text-overflow:ellipsis;overflow:hidden;white-space:nowrap}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{padding-left:4px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{padding-right:4px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{margin-right:8px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{margin-left:8px}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{padding:4px 0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{margin-left:0}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{margin-right:0}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox span.checkbox{color:inherit!important}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox.partiallySelected span.checkbox:before{color:currentColor}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox.selected:not(.partiallySeelcted) span.checkbox:before{content:"\\e73a";background-color:transparent}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .scroll-content{width:inherit!important;height:inherit!important;scrollbar-width:none}.filterVisualModern.filterOutspace[_ngcontent-%COMP%]     .slicerItemContainer .scroll-content::-webkit-scrollbar{display:none!important}.cardFooter.filterOutspace[_ngcontent-%COMP%]{width:100%;margin-top:4px;padding-top:4px;border-top:1px solid var(--neutral-dark-color, #212121);cursor:pointer}.cardFooter.filterOutspace.disabled[_ngcontent-%COMP%]{opacity:.5}html:not([dir="rtl"])[_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType, html:not([dir="rtl"])   [_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType{float:right}html[dir="rtl"][_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType, html[dir="rtl"]   [_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType{float:left}html:not([dir="rtl"])[_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType, html:not([dir="rtl"])   [_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType, html[dir="rtl"]   [_nghost-%COMP%]   .cardFooter.filterOutspace[_ngcontent-%COMP%]     .switchType{margin-right:4px}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox{margin-bottom:0}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox.mat-checkbox-checked .mat-checkbox-inner-container{width:12px;height:12px;top:0px;border-style:solid;border-width:1px;margin-left:1px}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox.mat-checkbox-checked .mat-checkbox-inner-container .mat-checkbox-ripple{display:none}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox.mat-checkbox-checked .mat-checkbox-inner-container .mat-checkbox-background, .cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox.mat-checkbox-checked .mat-checkbox-inner-container .mat-checkbox-frame{border:none!important;border-radius:0}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox input{cursor:pointer}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox span{cursor:pointer;font-family:inherit;color:inherit;font-size:var(--sm-font-size, 12px)}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-inner-container{width:12px;height:12px;top:0px;border:none!important}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-inner-container .mat-checkbox-ripple{display:none}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-inner-container .mat-checkbox-background, .cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-inner-container .mat-checkbox-frame{border-color:inherit!important;border-style:solid;border-width:1px;border-radius:0}.cardFooter.filterOutspace[_ngcontent-%COMP%]     mat-checkbox .mat-checkbox-frame{border-style:none}','.filterVisualModern.filterClassic[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.filterVisualModern.filterClassic[_ngcontent-%COMP%]   .filterError[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{height:14px;width:14px;display:inline-block;padding:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-left:5px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{padding-right:5px}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter{color:var(--neutral-tertiary-alt-color, #C8C8C8);background-color:transparent;position:relative;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter{float:right}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter{float:left}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter:hover{background-color:transparent}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .applyFilter:enabled{color:var(--theme-primary-color, #F2C811)}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerHeader{margin:0}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerHeader input{background-color:transparent;color:var(--white-color, #FFF)}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerHeader button{background-color:transparent}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerBody{width:auto!important}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer:hover .slicerCheckbox span.checkbox{color:inherit!important}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer:hover .slicerCheckbox.partiallySelected span.checkbox:before{color:inherit!important}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{margin-left:0}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox{margin-right:0}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCheckbox.selected:not(.partiallySeelcted) span.checkbox:before{content:"\\e73a";background-color:transparent}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .scroll-content{width:inherit!important;height:inherit!important}.filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{color:var(--white-color, #FFF);text-overflow:ellipsis;overflow:hidden;white-space:nowrap}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{padding-left:4px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerText, html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{padding-right:4px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html:not([dir="rtl"])   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{margin-right:8px}html[dir="rtl"][_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText, html[dir="rtl"]   [_nghost-%COMP%]   .filterVisualModern.filterClassic[_ngcontent-%COMP%]     .slicerItemContainer .slicerCountText{margin-left:8px}.cardFooter.filterClassic[_ngcontent-%COMP%]{width:100%;margin-top:4px;padding-top:4px;border-top:1px solid var(--neutral-dark-color, #212121);cursor:pointer}.cardFooter.filterClassic.disabled[_ngcontent-%COMP%]{opacity:.5}html:not([dir="rtl"])[_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%]{float:right}html[dir="rtl"][_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%]{float:left}html:not([dir="rtl"])[_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%]{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .cardFooter.filterClassic[_ngcontent-%COMP%]   .switchType[_ngcontent-%COMP%]{margin-right:4px}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-bottom:0}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     input{cursor:pointer}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     span{position:relative;cursor:pointer;font-family:inherit;color:inherit}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-inner-container{width:12px;height:12px;top:0px;background-color:var(--white-color, #FFF);border-style:none}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-inner-container .mat-checkbox-ripple{display:none}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-frame{border-style:none}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-input{display:none}.cardFooter.filterClassic[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-background{width:12px;height:12px;border-radius:0;border-style:solid;border-width:1px;border-color:var(--neutral-secondary-color, #666666)}']}),be}()},86917:function(Ve,se,t){t.d(se,{z:function(){return ln}});var e=t(73637),n=t(47013),f=t(68296),i=t(93171),O=t(16660),T=t(18766),V=t(31701),h=t(23196),M=t(26076),I=t(25991),b=t(22898),P=t(70377),g=t(33714),u=t(58168),s=t(24267),p=t(10378),C=t(18266),A=t(26092),S=t(28252),L=t(22584),D=t(42),m=t(5801),v=t(78186),l=t(30411),y=t(35380),d=t(52181),w=t(18601),x=t(58622),N=t(79597),X=t(52864),ne=t(37247),Ce=t(21099),he=t(55176),Fe=t(47414),fe=t(8178),ae=t(6762),pe=t(7005),ge=t(59279),Me=t(9161),ce=t(73109),J=t(48413),ie=t(56339),G=t(94168),j=t(77582),F=t(62740),E=t(70946),k=function(){function re(W){this.localizationService=W}return re.prototype.transform=function(W,Z){return this.localizationService.get(0===W?"ShowItemsWhenValue":1===Z?"AdvancedFilter_Description_Or":"AdvancedFilter_Description_And")},re.\u0275fac=function(Z){return new(Z||re)(e.\u0275\u0275directiveInject(C.o,16))},re.\u0275pipe=e.\u0275\u0275definePipe({name:"computeAriaLabelForConditionalComboBox",type:re,pure:!0}),re}(),R=function(){function re(W){this.localizationService=W}return re.prototype.transform=function(W,Z,ee,Te){switch(W){case 1:return this.localizationService.get(0===Z?ee?"AdvancedFilter_Aria_DateTime_LessThan":"AdvancedFilter_Aria_LessThan":1===Te?ee?"AdvancedFilter_Aria_Or_DateTime_LessThan":"AdvancedFilter_Aria_Or_LessThan":ee?"AdvancedFilter_Aria_And_DateTime_LessThan":"AdvancedFilter_Aria_And_LessThan");case 2:return this.localizationService.get(0===Z?ee?"AdvancedFilter_Aria_DateTime_LessThanOrEqual":"AdvancedFilter_Aria_LessThanOrEqual":1===Te?ee?"AdvancedFilter_Aria_Or_DateTime_LessThanOrEqual":"AdvancedFilter_Aria_Or_LessThanOrEqual":ee?"AdvancedFilter_Aria_And_DateTime_LessThanOrEqual":"AdvancedFilter_Aria_And_LessThanOrEqual");case 3:return this.localizationService.get(0===Z?ee?"AdvancedFilter_Aria_DateTime_GreaterThan":"AdvancedFilter_Aria_GreaterThan":1===Te?ee?"AdvancedFilter_Aria_Or_DateTime_GreaterThan":"AdvancedFilter_Aria_Or_GreaterThan":ee?"AdvancedFilter_Aria_And_DateTime_GreaterThan":"AdvancedFilter_Aria_And_GreaterThan");case 4:return this.localizationService.get(0===Z?ee?"AdvancedFilter_Aria_DateTime_GreaterThanOrEqual":"AdvancedFilter_Aria_GreaterThanOrEqual":1===Te?ee?"AdvancedFilter_Aria_Or_DateTime_GreaterThanOrEqual":"AdvancedFilter_Aria_Or_GreaterThanOrEqual":ee?"AdvancedFilter_Aria_And_DateTime_GreaterThanOrEqual":"AdvancedFilter_Aria_And_GreaterThanOrEqual");case 5:return this.localizationService.get(0===Z?"AdvancedFilter_Aria_Contains":1===Te?"AdvancedFilter_Aria_Or_Contains":"AdvancedFilter_Aria_And_Contains");case 6:return this.localizationService.get(0===Z?"AdvancedFilter_Aria_DoesNotContains":1===Te?"AdvancedFilter_Aria_Or_DoesNotContains":"AdvancedFilter_Aria_And_DoesNotContains");case 7:return this.localizationService.get(0===Z?"AdvancedFilter_Aria_StartWith":1===Te?"AdvancedFilter_Aria_Or_StartWith":"AdvancedFilter_Aria_And_StartWith");case 8:return this.localizationService.get(0===Z?"AdvancedFilter_Aria_DoesNotStartWith":1===Te?"AdvancedFilter_Aria_Or_DoesNotStartWith":"AdvancedFilter_Aria_And_DoesNotStartWith");case 9:return this.localizationService.get(0===Z?"AdvancedFilter_Aria_Is":1===Te?"AdvancedFilter_Aria_Or_Is":"AdvancedFilter_Aria_And_Is");case 10:return this.localizationService.get(0===Z?"AdvancedFilter_Aria_IsNot":1===Te?"AdvancedFilter_Aria_Or_IsNot":"AdvancedFilter_Aria_And_IsNot");default:return""}},re.\u0275fac=function(Z){return new(Z||re)(e.\u0275\u0275directiveInject(C.o,16))},re.\u0275pipe=e.\u0275\u0275definePipe({name:"computeAriaLabelForInputBox",type:re,pure:!0}),re}(),z=powerbi.explore.services.events,Q=powerbi.explore.contracts.FilterType,me=powerbi.explore.FilterUtils,le=powerbi.explore.viewModels.FilterViewModelFactory,K=powerbi.common.utils.IdUtility,q=powerbi.data.SemanticFilter;function ye(re,W){if(1&re&&(e.\u0275\u0275elementStart(0,"mat-option",10),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&re){var Z=W.$implicit,ee=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",Z.value)("ngStyle",ee.filterCardStyle)("title",Z.tooltip),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",Z.label," ")}}function Le(re,W){if(1&re&&(e.\u0275\u0275elementStart(0,"span",15),e.\u0275\u0275element(1,"svg-use-symbol",16),e.\u0275\u0275elementEnd()),2&re){var Z=e.\u0275\u0275nextContext(2).$implicit,ee=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("pbiTooltip",ee.invalidTooltipLabel)("pbiTooltipDisabled",!ee.shouldShowErrorFilterPaneIcon(Z))}}var Ne=function(W){return{"border-color":W}},be=function(W,Z){return{"background-color":W,color:Z}};function Y(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"mat-form-field",11)(1,"div",12)(2,"input",13),e.\u0275\u0275listener("ngModelChange",function(gt){e.\u0275\u0275restoreView(Z);var _t=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275resetView(_t.value&&(_t.value.stringValue=gt))})("blur",function(){e.\u0275\u0275restoreView(Z);var gt=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(gt.handleInputBlur())})("ngModelChange",function(){e.\u0275\u0275restoreView(Z);var gt=e.\u0275\u0275nextContext().$implicit,_t=e.\u0275\u0275nextContext(2);return _t.validateFilterInput(gt),e.\u0275\u0275resetView(_t.markDirty())}),e.\u0275\u0275pipe(3,"computeAriaLabelForInputBox"),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Le,2,2,"span",14),e.\u0275\u0275elementEnd()()}if(2&re){var ee=e.\u0275\u0275nextContext(),Te=ee.$implicit,Ke=ee.index,Xe=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275classProp("filterInputWarningBorder",Xe.showInputWarning&&Te.isInvalid),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(15,Ne,Xe.viewModel.inputBoxBorderColor))("hidden",!Te.valueRequired),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("placeholder",Xe.viewModel.getInputPlaceholder()),e.\u0275\u0275property("ngModel",Te.value&&Te.value.stringValue)("ngStyle",e.\u0275\u0275pureFunction2(17,be,Xe.viewModel.inputBoxBackgroundColor,Xe.viewModel.inputBoxForegroundColor))("disabled",Xe.viewModel.readOnlyState.disabled),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind4(3,10,Te.operator,Ke,Xe.advFilterCard.isDateTime,Xe.advFilterCard.logicalOperator)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",Xe.shouldShowErrorFilterPaneIcon(Te))}}var ue=function(W,Z,ee){return{"background-color":W,color:Z,"border-color":ee}};function Pe(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",17)(1,"div",18)(2,"pbi-date-picker",19),e.\u0275\u0275listener("ngModelChange",function(gt){e.\u0275\u0275restoreView(Z);var _t=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275resetView(_t.value&&(_t.value.dateValue=gt))})("ngModelChange",function(){e.\u0275\u0275restoreView(Z);var gt=e.\u0275\u0275nextContext().$implicit,_t=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_t.dateTimeSelected(gt))}),e.\u0275\u0275pipe(3,"computeAriaLabelForInputBox"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(4,"pbi-time-picker",20),e.\u0275\u0275listener("ngModelChange",function(gt){e.\u0275\u0275restoreView(Z);var _t=e.\u0275\u0275nextContext().$implicit;return e.\u0275\u0275resetView(_t.value&&(_t.value.timeValue=gt))})("ngModelChange",function(){e.\u0275\u0275restoreView(Z);var gt=e.\u0275\u0275nextContext().$implicit,_t=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(_t.dateTimeSelected(gt))}),e.\u0275\u0275elementEnd()()}if(2&re){var ee=e.\u0275\u0275nextContext(),Te=ee.$implicit,Ke=ee.index,Xe=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",Xe.viewModel.isInOutspacePane?"datetimePickerOutspace":"datetimePickerClassic"),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("light-theme",!Xe.viewModel.isInOutspacePane)("filterInputWarningBorder",Xe.showInputWarning&&!Xe.isValidDate(Te.value.dateValue)),e.\u0275\u0275propertyInterpolate("ariaLabelForInput",e.\u0275\u0275pipeBind4(3,14,Te.operator,Ke,Xe.advFilterCard.isDateTime,Xe.advFilterCard.logicalOperator)),e.\u0275\u0275property("id",Xe.getMenuId(Ke))("ngModel",Te.value&&Te.value.dateValue)("ngStyle",e.\u0275\u0275pureFunction3(19,ue,Xe.viewModel.inputBoxBackgroundColor,Xe.viewModel.inputBoxForegroundColor,Xe.viewModel.inputBoxBorderColor))("placeholder",Xe.getLocalizedPlaceholder())("disabled",!Te.valueRequired||Xe.viewModel.readOnlyState.disabled),e.\u0275\u0275advance(2),e.\u0275\u0275styleMap(Xe.filterCardStyle),e.\u0275\u0275property("ngModel",Te.value&&Te.value.timeValue)}}function Ae(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"section",21),e.\u0275\u0275listener("keydown",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.changeOperator(Ke))}),e.\u0275\u0275elementStart(1,"label",22)(2,"input",23),e.\u0275\u0275listener("ngModelChange",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.advFilterCard.logicalOperator=Ke)})("ngModelChange",function(){e.\u0275\u0275restoreView(Z);var Ke=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Ke.markDirty())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(3,"span",24)(4,"span",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"label",22)(6,"input",23),e.\u0275\u0275listener("ngModelChange",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.advFilterCard.logicalOperator=Ke)})("ngModelChange",function(){e.\u0275\u0275restoreView(Z);var Ke=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Ke.markDirty())}),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(7,"span",24)(8,"span",26),e.\u0275\u0275elementEnd()()}if(2&re){var ee=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(1),e.\u0275\u0275classProp("disabledOperator",ee.isAndOperatorDisabled()),e.\u0275\u0275property("title",ee.getDisabledToolTipForAndOperator()),e.\u0275\u0275attribute("tabindex",ee.advFilterCard.logicalOperator===ee.advFilterCard.logicalAndOperator?0:-1)("aria-checked",ee.advFilterCard.logicalOperator===ee.advFilterCard.logicalAndOperator?"true":"false"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",ee.advFilterCard.logicalOperator)("value",ee.advFilterCard.logicalAndOperator)("disabled",ee.isAndOperatorDisabled())("checked",ee.advFilterCard.logicalOperator===ee.advFilterCard.logicalAndOperator),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",ee.advFilterCard.logicalOperator===ee.advFilterCard.logicalAndOperator?"pbi-glyph-radiobtnon":"pbi-glyph-radiobtnoff"),e.\u0275\u0275advance(2),e.\u0275\u0275classProp("disabledOperator",ee.isOrOperatorDisabled()),e.\u0275\u0275property("title",ee.getDisabledToolTipForOrOperator()),e.\u0275\u0275attribute("tabindex",ee.advFilterCard.logicalOperator===ee.advFilterCard.logicalOrOperator?0:-1)("aria-checked",ee.advFilterCard.logicalOperator===ee.advFilterCard.logicalOrOperator?"true":"false"),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",ee.advFilterCard.logicalOperator)("value",ee.advFilterCard.logicalOrOperator)("disabled",ee.isOrOperatorDisabled())("checked",ee.advFilterCard.logicalOperator===ee.advFilterCard.logicalOrOperator),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",ee.advFilterCard.logicalOperator!==ee.advFilterCard.logicalAndOperator?"pbi-glyph-radiobtnon":"pbi-glyph-radiobtnoff")}}function Ze(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"mat-select",5),e.\u0275\u0275listener("ngModelChange",function(vt){var gt=e.\u0275\u0275restoreView(Z);return e.\u0275\u0275resetView(gt.$implicit.operator=vt)})("ngModelChange",function(){e.\u0275\u0275restoreView(Z);var vt=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(vt.markDirty())}),e.\u0275\u0275pipe(2,"computeAriaLabelForConditionalComboBox"),e.\u0275\u0275template(3,ye,2,4,"mat-option",6),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,Y,5,20,"mat-form-field",7),e.\u0275\u0275template(5,Pe,5,23,"section",8),e.\u0275\u0275template(6,Ae,9,20,"section",9),e.\u0275\u0275elementContainerEnd()}if(2&re){var ee=W.$implicit,Te=W.index,Ke=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("aria-label",e.\u0275\u0275pipeBind2(2,9,Te,Ke.advFilterCard.logicalOperator)),e.\u0275\u0275property("ngModel",ee.operator)("ngStyle",e.\u0275\u0275pureFunction3(12,ue,Ke.viewModel.inputBoxBackgroundColor,Ke.viewModel.inputBoxForegroundColor,Ke.viewModel.inputBoxBorderColor))("disabled",Ke.viewModel.readOnlyState.disabled)("compareWith",Ke.compareOperator),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",Ke.advFilterCard.operators),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!Ke.advFilterCard.isDateTime&&ee.valueRequired),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Ke.advFilterCard.isDateTime&&ee.valueRequired),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",Ke.showLogicOperators(Te))}}function ot(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",27),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(Z);var Ke=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Ke.applyFilter())}),e.\u0275\u0275elementEnd()}if(2&re){var ee=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",!ee.canApplyFilter())}}var lt=function(W){return{"font-size":W}};function yt(re,W){if(1&re&&(e.\u0275\u0275elementStart(0,"div",1),e.\u0275\u0275element(1,"h3",2),e.\u0275\u0275template(2,Ze,7,16,"ng-container",3),e.\u0275\u0275template(3,ot,1,1,"button",4),e.\u0275\u0275elementEnd()),2&re){var Z=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(3,lt,Z.viewModel.fontSize)),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",Z.advFilterCard.conditions),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!Z.isApplyAllOnForThisFilter())}}var De=function(){function re(W,Z,ee,Te,Ke,Xe,vt,gt,_t,Wt,$t,Zt,Jt,en,tn,Xt,nn,on,rn){this.aggrOps=W,this.conceptualSchemaProxy=Z,this.contextActivityService=ee,this.dataSources=Te,this.eventBridge=Ke,this.explorationActivity=Xe,this.explorationNavigation=vt,this.featureSwitchService=gt,this.highContrastCssGenerationService=_t,this.localizationService=Wt,this.ngZone=$t,this.overlayService=Zt,this.screenReaderService=Jt,this.telemetryService=en,this.tooltipService=tn,this.undoRedo=Xt,this.viewModeState=nn,this.visualAuthoring=on,this.visualPlugin=rn,this.onFilterChanged=new e.EventEmitter,this.moduleConfig={name:"ui.bootstrap",dependency:{javascript:"angular-ui-datetimepicker"}},this.invalidTooltipLabel=this.localizationService.get("AdvancedFilter_InvalidTooltip_Number"),this.menuIds={},this.isDirty=!1,this.destroyed=!1}return re.prototype.ngOnInit=function(){var W=this;this.ngZone.run(function(){return W.onInitImpl()})},re.prototype.ngOnDestroy=function(){var W;this.destroyed=!0,null===(W=this.subscriptionManager)||void 0===W||W.unsubscribeAll()},re.prototype.compareOperator=function(W,Z){return W===Z},Object.defineProperty(re.prototype,"filterCardStyle",{get:function(){return{"background-color":this.viewModel.inputBoxBackgroundColor,color:this.viewModel.inputBoxForegroundColor,"border-color":this.viewModel.inputBoxBorderColor,"font-family":this.viewModel.fontFamily}},enumerable:!1,configurable:!0}),re.prototype.markDirty=function(){this.isDirty=!0,this.sendBufferedFilterChanges(),this.updateConditionsValid()},re.prototype.clearDirty=function(){this.isDirty=!1},re.prototype.getMenuId=function(W){return this.menuIds[W]||(this.menuIds[W]=K.generateId()),this.menuIds[W]},re.prototype.applyFilter=function(W){var Z=this,ee=this.viewModel;ee.contract.type=Q.Advanced,document.activeElement.blur(),this.getConceptualSchema().then(function(Te){Z.updateConditionsValid(Te),Z.canApplyFilter()&&Z.explorationActivity.doRootActivity(function(Ke){Z.undoRedo.register("ApplyAdvancedFilter",function(){var gt,_t,Xe=Z.advFilterCard.toSQExpr(Te),vt=Z.viewModel;Xe?(Z.visualAuthoring.updateFilter(vt.getFilterContainerScope(),vt.contract,q.fromSQExpr(Xe)),gt=2):(Z.visualAuthoring.updateFilter(vt.getFilterContainerScope(),vt.contract,void 0),gt=10),Z.clearDirty(),vt.useDefaultFilter=!1,Z.updateRestatement(),Z.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(_t=me.createChangeFilterActivity(Z.contextActivityService,"Advanced Filter"));var Wt={filter:Z.viewModel.contract,changeType:gt,scope:Z.viewModel.getFilterContainerScope(),parentActivity:Ke,changeFilterActivity:_t};Z.onFilterChanged.emit(Wt),_t&&_t.resolve(),Z.formatDate(Z.advFilterCard)},W)},function(){return Z.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneAdvancedFilterApplied,{filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(Z.viewModel.getFilterContainerScope().scopeType),viewMode:powerbi.explore.util.getTelemetryViewMode(Z.viewModeState.getMode()),isInOutspacePane:ee.isInOutspacePane,isDateTime:Z.advFilterCard&&Z.advFilterCard.isDateTime})})})},re.prototype.validateFilterInput=function(W){var Z=this;this.getConceptualSchema().then(function(ee){W.value&&W.value.stringValue&&!Z.advFilterCard.isConditionValid(ee,W)?(W.isInvalid=!0,Z.shouldShowErrorFilterPaneIcon(W)&&Z.screenReaderService.alert(Z.localizationService.get(Z.invalidTooltipLabel))):(W.isInvalid=!1,Z.tooltipService.hideTooltip()),Z.updateConditionsValid(ee).then(function(){return Z.sendBufferedFilterChanges()})})},re.prototype.handleFocusedInputChanged=function(W,Z){this.validateFilterInput(Z)},re.prototype.handleInputBlur=function(){this.tooltipService.hideTooltip()},re.prototype.changeOperator=function(W){this.viewModel.isMappedToMParameter()||(39===W.keyCode||37===W.keyCode||38===W.keyCode||40===W.keyCode)&&(this.advFilterCard.logicalOperator=0===this.advFilterCard.logicalOperator?1:0,$(W.target).siblings().attr("tabindex","0").focus(),W.stopPropagation(),this.markDirty())},re.prototype.dateTimeSelected=function(W){var Z=this;if(this.overlayService.hideAllDropdowns(),W.value.dateValue){var ee=W.value.timeValue.getHours(),Te=W.value.timeValue.getMinutes(),Ke=W.value.dateValue.setHours(ee,Te,0,0);W.value.dateValue=new Date(Ke),Ie(W),this.updateConditionsValid().then(function(){return Z.markDirty()})}else this.clearDirty()},re.prototype.isValidDate=function(W){return W&&!isNaN(W.getTime())},re.prototype.updateConditionsValid=function(W){return(0,pe.mG)(this,void 0,void 0,function(){var Z,ee=this;return(0,pe.Jh)(this,function(Te){switch(Te.label){case 0:return Z=this.isApplyAllOnForThisFilter(),null==W?[3,1]:(this.conditionsValid=this.advFilterCard.areConditionsValid(Z,W),[3,3]);case 1:return[4,this.getConceptualSchema().then(function(Ke){ee.conditionsValid=ee.advFilterCard.areConditionsValid(Z,Ke)})];case 2:Te.sent(),Te.label=3;case 3:return this.showInputWarning=this.showInputWarning&&!this.conditionsValid,[2]}})})},re.prototype.canApplyFilter=function(){return this.isDirty&&!this.viewModel.readOnlyState.disabled&&this.conditionsValid},re.prototype.onKeyUp=function(W){W.preventDefault();var Z=W.keyCode||W.which;!this.isApplyAllOnForThisFilter()&&13===Z&&this.applyFilter()},re.prototype.getLocalizedPlaceholder=function(){return powerbi.formattingService.getCurrentCulture().calendar.patterns.d},re.prototype.isApplyAllOnForThisFilter=function(){var W=this.viewModeState.getConfig().displayOptions.enableMobileFilters;return me.isApplyAllEnabled(this.viewModel.isInOutspacePane||W,this.explorationNavigation)},re.prototype.onApplyAllClicked=function(W){this.isApplyAllOnForThisFilter()&&(W.idsInError?this.showInputWarning=-1!==W.idsInError.indexOf(this.viewModel.id.toString()):this.applyFilter(W.undoRedoActionId))},re.prototype.sendBufferedFilterChanges=function(){this.isApplyAllOnForThisFilter()&&me.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,Q.Advanced,this.viewModel.id,this.canApplyFilter(),!1)},re.prototype.isAndOperatorDisabled=function(){return this.viewModel.isMappedToMParameter()||this.viewModel.readOnlyState.disabled},re.prototype.getDisabledToolTipForAndOperator=function(){return this.viewModel.isMappedToMParameter()?this.localizationService.get("DQP_Disabled_Operator"):""},re.prototype.isOrOperatorDisabled=function(){return this.viewModel.isMappedToMParameter()&&!this.viewModel.supportsMultipleValues()||this.viewModel.readOnlyState.disabled},re.prototype.getDisabledToolTipForOrOperator=function(){return this.viewModel.isMappedToMParameter()&&!this.viewModel.supportsMultipleValues()?this.localizationService.get("DQP_Disabled_Operator"):""},re.prototype.showLogicOperators=function(W){var Z=W<this.advFilterCard.conditions.length-1;return!Z&&this.viewModel.isMappedToMParameter()?!this.viewModel.supportsMultipleValues():Z},re.prototype.shouldShowErrorFilterPaneIcon=function(W){return W.isInvalid&&!this.isApplyAllOnForThisFilter()},re.prototype.onInitImpl=function(){this.destroyed||(this.initialize(),this.initializeHighContrastRules(),this.viewModel.setServices(void 0,void 0,this.viewModeState))},re.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".themeableElement .advancedControl.conditionValue","{ border-color: @buttonForegroundColor !important; }")},re.prototype.initialize=function(){var W=this;this.getConceptualSchema().then(function(Z){W.destroyed||(W.advFilterCard=le.extractAdvFilterCard(W.viewModel.contract),W.updateRestatement(),W.updateModel(Z),W.formatDate(W.advFilterCard),W.formatNumber(W.advFilterCard),W.subscriptionManager=W.eventBridge.createChannelSubscriptionManager().subscribe(z.applyAllClicked,function(ee,Te){return W.onApplyAllClicked(Te)}).subscribe(z.filterContainerChanged,function(ee,Te){return W.onFilterContainerChanged(Te)}).subscribe(powerbi.explore.services.events.explorationSlowDataSourceSettingsLoaded,function(ee,Te){return W.ngZone.run(function(){Te.isApplyAllButtonEnabledChanged&&(W.showInputWarning=!1)})}))}).catch(function(){return W.telemetryService.logEvent(powerbi.telemetry.EXLoadFilterError,{message:"Conceptual schema could not be found."})}),this.showInputWarning=!1},re.prototype.getConceptualSchema=function(){var W=this.dataSources.get();return this.conceptualSchemaProxy.get(W)},re.prototype.updateModel=function(W){if(this.advFilterCard.loadOperators(W,this.aggrOps,this.viewModel.isMappedToMParameter()),this.advFilterCard.operators){var ee=this.advFilterCard.field.getMetadata(W);ee&&(this.advFilterCard.isDateTime=!!ee.type.dateTime),this.advFilterCard.ensureConditions(this.viewModel.isMappedToMParameter(),this.viewModel.supportsMultipleValues());var Te=this.advFilterCard.conditions;this.viewModel.updateFilterProperties(W,this.visualPlugin,this.aggrOps);for(var Ke=0,Xe=Te;Ke<Xe.length;Ke++){var vt=Xe[Ke];vt&&vt.value&&(vt.value.formatter=this.viewModel.formatter)}this.updateConditionsValid(W),this.viewModel.updateViewState()}else this.telemetryService.logEvent(powerbi.telemetry.EXLoadFilterError,{message:"Filter operators failed to load."})},re.prototype.formatDate=function(W){if(W.isDateTime)for(var Z=0,ee=W.conditions;Z<ee.length;Z++)Ie(ee[Z])},re.prototype.formatNumber=function(W){if(this.viewModel.formatter&&!W.isDateTime)for(var Z=0,ee=W.conditions;Z<ee.length;Z++){var Te=ee[Z];null!=Te.value.value&&(Te.value.stringValue=this.viewModel.formatter.format(Te.value.value))}},re.prototype.updateRestatement=function(){var W=this.viewModel;W.useDefaultFilter||W.contract.type!==Q.Advanced||W.setRestatement(this.advFilterCard.getRestatement(W.formatter))},re.prototype.onFilterContainerChanged=function(W){var Z=this,ee=this.viewModel;if(W.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(W.changeType,10)&&this.isApplyAllOnForThisFilter())this.showInputWarning=!1,this.advFilterCard.conditions.map(function(gt){var _t;gt.operator&&!gt.valueRequired&&(gt.operator=9,Z.markDirty()),null!==(_t=gt.value)&&void 0!==_t&&_t.stringValue&&(gt.value=new powerbi.data.ConditionValue("",gt.value.formatter),Z.markDirty())});else if(W.filter===ee.contract&&jsCommon.EnumExtensions.hasFlag(W.changeType,2)){var Te=le.extractAdvFilterCard(W.filter);if(this.advFilterCard.conditions=Te.conditions,this.advFilterCard.logicalOperator=Te.logicalOperator,this.viewModel.formatter)for(var Ke=0,Xe=this.advFilterCard.conditions;Ke<Xe.length;Ke++){var vt=Xe[Ke];null!=vt.value.value&&(vt.value.stringValue=this.viewModel.formatter.format(vt.value.value))}this.updateRestatement(),this.advFilterCard.ensureConditions(this.viewModel.isMappedToMParameter(),this.viewModel.supportsMultipleValues())}},re.\u0275fac=function(Z){return new(Z||re)(e.\u0275\u0275directiveInject(ge.C),e.\u0275\u0275directiveInject(O.i),e.\u0275\u0275directiveInject(i.r),e.\u0275\u0275directiveInject(T.D),e.\u0275\u0275directiveInject(h.J),e.\u0275\u0275directiveInject(M.Z),e.\u0275\u0275directiveInject(I.z),e.\u0275\u0275directiveInject(g.vZ),e.\u0275\u0275directiveInject(s.g),e.\u0275\u0275directiveInject(C.o),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(ce.F),e.\u0275\u0275directiveInject(p.g),e.\u0275\u0275directiveInject(S.y0),e.\u0275\u0275directiveInject(J.a),e.\u0275\u0275directiveInject(Me.z),e.\u0275\u0275directiveInject(D.kc),e.\u0275\u0275directiveInject(m.$),e.\u0275\u0275directiveInject(ie.D))},re.\u0275cmp=e.\u0275\u0275defineComponent({type:re,selectors:[["advanced-filter"]],inputs:{viewModel:"viewModel"},outputs:{onFilterChanged:"onFilterChanged"},decls:1,vars:1,consts:[["class","advanced",3,"ngStyle",4,"ngIf"],[1,"advanced",3,"ngStyle"],["localize","ShowItemsWhenValue","localizeTooltip","ShowItemsWhenValue",1,"description"],[4,"ngFor","ngForOf"],["class","applyFilter smallFontSize","localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",3,"disabled","click",4,"ngIf"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","panelClass","pbi-modern-select-panel themeableElement","disableOptionCentering","true",1,"comparisonOperator","advancedControl","pbi-modern-select",3,"aria-label","ngModel","ngStyle","disabled","compareWith","ngModelChange"],[3,"value","ngStyle","title",4,"ngFor","ngForOf"],["floatLabel","never","class","pbi-form-field",4,"ngIf"],["class","datetime datetimePicker","pbiLazyLoadContents","moduleConfig",3,"ngClass",4,"ngIf"],["role","radiogroup","class","logicalOperator advancedControl",3,"keydown",4,"ngIf"],[3,"value","ngStyle","title"],["floatLabel","never",1,"pbi-form-field"],["id","inputTheme",1,"advancedControl","conditionValue","flex","themeableElement",3,"ngStyle","hidden"],["matInput","","autocomplete","off","type","text","spellcheck","false",1,"item-fill","themeableElement",3,"ngModel","ngStyle","disabled","placeholder","ngModelChange","blur"],["class","errorIcon item-auto",3,"pbiTooltip","pbiTooltipDisabled",4,"ngIf"],[1,"errorIcon","item-auto",3,"pbiTooltip","pbiTooltipDisabled"],["sheet","filterPaneIcons","symbolId","alert"],["pbiLazyLoadContents","moduleConfig",1,"datetime","datetimePicker",3,"ngClass"],[1,"datePicker","flex"],[1,"datePickerSelector",3,"ariaLabelForInput","id","ngModel","ngStyle","placeholder","disabled","ngModelChange"],[3,"ngModel","ngModelChange"],["role","radiogroup",1,"logicalOperator","advancedControl",3,"keydown"],["role","radio",1,"logicalOperatorField",3,"title"],["type","radio",3,"ngModel","value","disabled","checked","ngModelChange"],[1,"glyphicon","glyph-mini",3,"ngClass"],["localize","Logical_And_Operator",1,"operatorText"],["localize","Logical_Or_Operator",1,"operatorText"],["localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",1,"applyFilter","smallFontSize",3,"disabled","click"]],template:function(Z,ee){1&Z&&e.\u0275\u0275template(0,yt,4,5,"div",0),2&Z&&e.\u0275\u0275property("ngIf",ee.advFilterCard)},dependencies:[v.NgClass,v.NgForOf,v.NgIf,v.NgStyle,l.Fj,l._,l.JJ,l.On,y.X,d.r,G.KE,j.Nt,w.gD,x.ey,N.V,F.N,Ce.x,E.l,fe.k,k,R],styles:['.advanced[_ngcontent-%COMP%]{padding-top:4px}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   .datetimePickerOutspace[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%], .filterOutspaceModern.card   [_nghost-%COMP%]   .datetimePickerOutspace[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{background-color:inherit}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-underline, .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix, .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix{padding-bottom:0}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after{color:inherit;border-left-width:3px;border-right-width:3px;border-top-width:6px;right:4px}html:not([dir="rtl"]).filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html:not([dir="rtl"]).filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html:not([dir="rtl"])   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html:not([dir="rtl"])   .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   html:not([dir="rtl"])[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   html:not([dir="rtl"])   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after{margin-right:2px}html[dir="rtl"].filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html[dir="rtl"].filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html[dir="rtl"]   .filterOutspaceModern.card[_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, html[dir="rtl"]   .filterOutspaceModern.card   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   html[dir="rtl"][_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after, .filterOutspaceModern.card   html[dir="rtl"]   [_nghost-%COMP%]   .mat-form-field-type-mat-native-select[_ngcontent-%COMP%]     .mat-form-field-infix:after{margin-left:2px}.advanced   .filterOutspaceModern.card[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%], .filterOutspaceModern.card   [_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{background-color:inherit;color:inherit;font-family:inherit}.advanced[_ngcontent-%COMP%]   .datePicker[_ngcontent-%COMP%]   .datePickerSelector[_ngcontent-%COMP%]{margin:2px 0;width:100%}.advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{min-height:24px;padding:2px 6px}.advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:4px 0 6px}.advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%]{background-color:inherit;display:block;width:100%;box-sizing:border-box;margin:2px 0;outline:0;padding:0;min-height:24px}.advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{padding:8px 0}.advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField.disabledOperator[_ngcontent-%COMP%]{color:var(--gray-80, #B3B0AD)}.advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]   .operatorText[_ngcontent-%COMP%]{vertical-align:middle;margin-right:8px}.advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]{color:inherit;background:transparent;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);border-radius:2px;box-sizing:border-box;display:flex}.advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background-color:var(--white-color, #FFF)}.advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;margin:7px 3px}.advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%]{display:inline-block;border-color:var(--gray-60, #C8C6C4);background-color:var(--white-color, #FFF);border-radius:2px;padding-left:3px;position:initial;font-family:inherit}.advanced   .newPaneColors   .filterPaneOutspaceModern[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%], .newPaneColors   .filterPaneOutspaceModern   [_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{min-height:24px;color:var(--black-color, #000);background-color:var(--white-color, #FFF);padding:2px 6px}','.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]{padding:4px 0 28px;border-radius:2px;margin:4px 0}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{color:var(--white-color, #FFF);height:24px;border:1px solid var(--black-color, #000);border-radius:0;padding:0 6px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{width:100%}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:4px 0 6px}html:not([dir="rtl"]).filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html:not([dir="rtl"]).filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html:not([dir="rtl"])   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html:not([dir="rtl"])   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   html:not([dir="rtl"])[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   html:not([dir="rtl"])   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{float:left}html[dir="rtl"].filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html[dir="rtl"].filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html[dir="rtl"]   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], html[dir="rtl"]   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   html[dir="rtl"][_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   html[dir="rtl"]   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{float:right}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color-alt, #444444);display:block;width:100%;height:24px;box-sizing:border-box;margin:2px 0;outline:0;padding:0}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-underline, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-underline{display:none}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper{border:0px;padding:0!important}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper .mat-form-field-infix, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-wrapper .mat-form-field-infix{padding:0!important;border:0px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after{color:currentColor!important;border-left-width:3px;border-right-width:3px;border-top-width:6px;right:4px}html:not([dir="rtl"]).filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html:not([dir="rtl"]).filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html:not([dir="rtl"])   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html:not([dir="rtl"])   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   html:not([dir="rtl"])[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   html:not([dir="rtl"])   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after{margin-right:2px}html[dir="rtl"].filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html[dir="rtl"].filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html[dir="rtl"]   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, html[dir="rtl"]   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   html[dir="rtl"][_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after, .filterPaneModern:not(.isInOutspacePane)   html[dir="rtl"]   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]  .mat-form-field-infix:after{margin-left:2px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     label .mat-radio-outer-circle, .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     label .mat-radio-outer-circle{border-width:1px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{padding:4px 0}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%]{margin-right:8px}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]{color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);box-sizing:border-box;display:flex}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;background-color:var(--neutral-primary-color-alt, #444444)}.filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%], .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%]{display:inline-block;border:1px solid var(--black-color, #000);border-radius:1px;padding-left:5px;position:initial}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]{color:var(--gray-180, #252423);border-color:var(--gray-60, #C8C6C4);border-radius:2px;background-color:var(--white-color, #FFF)}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF)}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .advancedControl[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-radius:2px}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .comparisonOperator[_ngcontent-%COMP%]{border-color:var(--gray-60, #C8C6C4)}.newPaneColors   .filterPaneModern:not(.isInOutspacePane)[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%], .newPaneColors   .filterPaneModern:not(.isInOutspacePane)   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{background-color:transparent}',".exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{line-height:32px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]{height:32px;background:var(--fluentThemeWhiteColor);border:0;border-bottom:1px solid var(--fluentThemeNeutralTertiaryColor);margin:0 0 15px;border-radius:2px;color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:inherit;color:var(--fluentThemeNeutralDarkColor);height:100%}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-empty.mat-form-field-label, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advancedControl.conditionValue[_ngcontent-%COMP%]     .mat-form-field-label-wrapper .mat-form-field-empty.mat-form-field-label{color:var(--fluentThemeNeutralTertiaColor)!important;padding-left:10px;padding-right:10px;height:32px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{float:none!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{margin:15px 0;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]{margin-right:80px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%]{margin-right:30px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{color:var(--fluentThemeNeutralSecondaryAltColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{border-radius:4px;border:2px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%]{position:absolute;right:0;bottom:20px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-label, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]     .mat-form-field-appearance-legacy .mat-form-field-label{width:auto}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]{text-align:right}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .logicalOperatorField[_ngcontent-%COMP%]{margin-left:80px;margin-right:initial}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .logicalOperator[_ngcontent-%COMP%]   .pbi-radio-button[_ngcontent-%COMP%]{margin-left:30px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .advanced[_ngcontent-%COMP%]   .errorIcon[_ngcontent-%COMP%]{left:0}*[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}"]}),re}();function Ie(re){re.value.value=powerbi.formattingService.formatValue(re.value.dateValue,"d")}var Oe=t(12665),Be=jsCommon.EnumExtensions,qe=powerbi.explore.services.events,je=powerbi.explore.FilterUtils;function st(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",8),e.\u0275\u0275listener("click",function(Te){e.\u0275\u0275restoreView(Z);var Ke=e.\u0275\u0275nextContext().index,Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.delete(Te,Ke))}),e.\u0275\u0275elementEnd()}}var ht=function(W){return{includeExcludeFilterOutspace:W}},Pt=function(W){return{"font-size":W}};function ze(re,W){if(1&re&&(e.\u0275\u0275elementStart(0,"li",5)(1,"div",6),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(3,st,1,0,"button",7),e.\u0275\u0275elementEnd()),2&re){var Z=W.$implicit,ee=W.index,Te=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(8,ht,Te.filterViewModel.isInOutspacePane)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(10,Pt,Te.filterViewModel.fontSize)),e.\u0275\u0275attribute("aria-label",Z.text)("ariaSetsize",Te.viewModel.points.length)("ariaPosinset",ee+1)("ariaSelected",!0),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1("",Z.text," "),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!Te.filterViewModel.isFilterLocked())}}function ke(re,W){if(1&re&&(e.\u0275\u0275elementStart(0,"div",1)(1,"div",2)(2,"ul",3),e.\u0275\u0275template(3,ze,4,12,"li",4),e.\u0275\u0275elementEnd()()()),2&re){var Z=e.\u0275\u0275nextContext();e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiScrollbar",Z.scrollbarsConfig),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",Z.viewModel.points)}}var We=function(){function re(W,Z,ee,Te,Ke,Xe,vt,gt,_t,Wt){var $t=this;this.conceptualSchemaProxy=W,this.contextActivityService=Z,this.dataSources=ee,this.displayNameService=Te,this.eventBridge=Ke,this.explorationNavigation=Xe,this.featureSwitchService=vt,this.includeExcludeService=gt,this.ngZone=_t,this.visualAuthoring=Wt,this.isExpanded=!1,this.currentZone=this.explorationNavigation.getCurrentZone(),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(qe.filterContainerChanged,function(Zt,Jt){return $t.onFilterContainerChanged(Jt)}),this.scrollbarsConfig={ignoreOverlay:!1,ignoreMobile:!1}}return re.prototype.ngOnInit=function(){var W=this;this.ngZone.run(function(){return W.onInitImpl()})},re.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},re.prototype.toggleExpand=function(){this.isExpanded=!this.isExpanded},re.prototype.deleteFilter=function(W){var ee,Z=this.filterViewModel.getFilterContainerScope();this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(ee=je.createChangeFilterActivity(this.contextActivityService,"Remove Filter")),this.visualAuthoring.removeFilter(this.filterViewModel.contract,Z,void 0,ee),ee&&ee.resolve(),W.stopPropagation()},re.prototype.delete=function(W,Z){if(1!==this.viewModel.points.length){var ee=this.filterViewModel.contract;if(ee.filterExpressionMetadata&&!_.isEmpty(ee.filterExpressionMetadata.cachedValueItems)){var Te=this.viewModel.points[Z];je.removeEntryFromFilterCache(Te.columns,Te.values,ee.filterExpressionMetadata)}this.viewModel.points.splice(Z,1),this.includeExcludeService.updateFilterContainer(this.filterViewModel,this.viewModel),W.stopPropagation()}else this.deleteFilter(W)},re.prototype.onInitImpl=function(){this.updateViewModel()},re.prototype.updateViewModel=function(){var W=this,Z=this.dataSources.get();this.conceptualSchemaProxy.get(Z).then(function(ee){var Te=W.filterViewModel.contract;W.viewModel=W.includeExcludeService.buildViewModel(Te.filter,Te.type,ee,W.displayNameService,Te.filterExpressionMetadata)})},re.prototype.getFilterLockTooltip=function(){return this.filterViewModel.isFilterLocked()?"FilterPane_FilterLocked":this.filterViewModel.contract.isLockedInViewMode?"FilterPane_UnlockFilter":"FilterPane_LockFilter"},re.prototype.onFilterContainerChanged=function(W){W.filter===this.filterViewModel.contract&&Be.hasFlag(W.changeType,2)&&this.updateViewModel()},re.prototype.toggleFilterVisibility=function(W,Z){W.stopPropagation();var ee=this.filterViewModel;this.visualAuthoring.toggleFilterVisibility(ee.getFilterContainerScope(),ee.contract)},re.prototype.toggleFilterLockState=function(W,Z){W.stopPropagation();var Te,ee=this.filterViewModel;this.visualAuthoring.toggleFilterLock(ee.getFilterContainerScope(),ee.contract),this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Te=je.createChangeFilterActivity(this.contextActivityService,"Include Exclude Filter"));var Ke={filter:ee.contract,changeType:2,scope:ee.getFilterContainerScope(),changeFilterActivity:Te};je.notifyFilterContainerChangedByUser(this.eventBridge,Ke),Te&&Te.resolve()},re.\u0275fac=function(Z){return new(Z||re)(e.\u0275\u0275directiveInject(O.i),e.\u0275\u0275directiveInject(i.r),e.\u0275\u0275directiveInject(T.D),e.\u0275\u0275directiveInject(V.O),e.\u0275\u0275directiveInject(h.J),e.\u0275\u0275directiveInject(I.z),e.\u0275\u0275directiveInject(g.vZ),e.\u0275\u0275directiveInject(u.Y),e.\u0275\u0275directiveInject(e.NgZone),e.\u0275\u0275directiveInject(m.$))},re.\u0275cmp=e.\u0275\u0275defineComponent({type:re,selectors:[["include-exclude-filter"]],inputs:{filterViewModel:"filterViewModel"},decls:1,vars:1,consts:[["class","include-exclude-modern-filter-items",4,"ngIf"],[1,"include-exclude-modern-filter-items"],[3,"pbiScrollbar"],["role","listbox"],["class","include-exclude-modern-filter-item flex",3,"ngClass",4,"ngFor","ngForOf"],[1,"include-exclude-modern-filter-item","flex",3,"ngClass"],["tabindex","0","role","option",1,"caption","smallFontSize","trimmedTextWithEllipsis","unselectable","item-fill",3,"ngStyle"],["type","button","class","delete glyphicon pbi-glyph-close glyph-micro","localizeTooltip","Delete",3,"click",4,"ngIf"],["type","button","localizeTooltip","Delete",1,"delete","glyphicon","pbi-glyph-close","glyph-micro",3,"click"]],template:function(Z,ee){1&Z&&e.\u0275\u0275template(0,ke,4,2,"div",0),2&Z&&e.\u0275\u0275property("ngIf",ee.viewModel)},dependencies:[v.NgClass,v.NgForOf,v.NgIf,v.NgStyle,d.r,Oe.r],styles:[".include-exclude-modern-filter-items[_ngcontent-%COMP%]{max-height:150px;display:flex;flex-direction:column;margin-top:8px}.include-exclude-modern-filter-items[_ngcontent-%COMP%]   .include-exclude-modern-filter-item[_ngcontent-%COMP%]{box-sizing:border-box;padding-right:4px;padding-bottom:4px}.include-exclude-modern-filter-items[_ngcontent-%COMP%]   .includeExcludeFilterOutspace[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .include-exclude-modern-filter-items[_ngcontent-%COMP%]   .includeExcludeFilterOutspace[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .include-exclude-modern-filter-items[_ngcontent-%COMP%]   .includeExcludeFilterOutspace[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:inherit}.include-exclude-modern-filter-items[_ngcontent-%COMP%]   .scroll-element.scroll-y[_ngcontent-%COMP%]{width:4px!important}.include-exclude-modern-filter-items[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .include-exclude-modern-filter-items[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .include-exclude-modern-filter-items[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:transparent;color:var(--neutral-tertiary-alt-color, #C8C8C8)}"]}),re}(),Ue=t(85385),ve=powerbi.explore.services.events,r=powerbi.explore.util.FilterPaneUtil,o=powerbi.explore.services.filterRestatementUtil,a=powerbi.explore.contracts.FilterType,c=powerbi.explore.FilterUtils,B=jsCommon.FocusManager,U=jsCommon.FocusGroupNavigation,H=powerbi.data.RestatementHelper,oe=powerbi.data.SemanticFilter;function te(re,W){1&re&&(e.\u0275\u0275elementStart(0,"i",24),e.\u0275\u0275element(1,"svg-use-symbol",25),e.\u0275\u0275elementEnd())}function _e(re,W){1&re&&e.\u0275\u0275element(0,"i",26)}function de(re,W){if(1&re&&(e.\u0275\u0275elementStart(0,"i"),e.\u0275\u0275element(1,"svg-use-symbol",27),e.\u0275\u0275elementEnd()),2&re){var Z=e.\u0275\u0275nextContext(2);e.\u0275\u0275classMapInterpolate1("filterPaneIcon ",Z.getIconClassName(),""),e.\u0275\u0275advance(1),e.\u0275\u0275property("symbolId",Z.getIconClassName())}}function Ee(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"input",28),e.\u0275\u0275listener("ngModelChange",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.editablelabelInputName=Ke)})("blur",function(){e.\u0275\u0275restoreView(Z);var Ke=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Ke.rename())}),e.\u0275\u0275elementEnd()}if(2&re){var ee=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngModel",ee.editableLabelName)}}var we=function(W){return{visibility:W}};function Se(re,W){if(1&re&&e.\u0275\u0275element(0,"button",29),2&re){var Z=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(5,we,Z.isEditMode?"":"visible"))("ngClass",Z.isFilterExpanded()?"expand":"collapse")("pbiTooltip",Z.viewModel.chevronExpandCollapseDescription),e.\u0275\u0275attribute("aria-expanded",Z.isFilterExpanded())("aria-label",Z.editableLabelName+" "+Z.viewModel.chevronExpandCollapseDescription)}}function Re(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",30),e.\u0275\u0275listener("click",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.deleteFilter(Ke))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&re){var ee=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(7,we,ee.isEditMode?"":"visible"))("pbiTooltip",e.\u0275\u0275pipeBind1(2,5,"FilterPane_DeleteFilter")),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,3,"FilterPane_DeleteFilter"))}}var $e=function(W){return{color:W}};function Ye(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",31),e.\u0275\u0275listener("click",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.clearFilter(Ke))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&re){var ee=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",!ee.viewModel.hasRestatement)("ngStyle",e.\u0275\u0275pureFunction1(9,$e,ee.viewModel.foregroundColor))("pbiTooltip",e.\u0275\u0275pipeBind1(2,7,ee.clearFilterTooltip)),e.\u0275\u0275attribute("aria-disabled",!ee.viewModel.hasRestatement)("aria-label",e.\u0275\u0275pipeBind1(1,5,ee.clearFilterTooltip))}}var et=function(W,Z){return{"pbi-glyph-lock":W,"pbi-glyph-unlock":Z}},at=function(W){return{visibility:W}};function nt(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",32),e.\u0275\u0275listener("click",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.toggleFilterLockState(Ke))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&re){var ee=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(9,et,ee.viewModel.isFilterLocked(),!ee.viewModel.isFilterLocked()))("disabled",!ee.isEditMode)("ngStyle",e.\u0275\u0275pureFunction1(12,at,ee.viewModel.isFilterLocked()?"visible":""))("pbiTooltip",e.\u0275\u0275pipeBind1(2,7,ee.getFilterLockTooltip())),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,5,ee.getFilterLockTooltip()))}}function pt(re,W){1&re&&e.\u0275\u0275element(0,"button",33)}function ct(re,W){1&re&&e.\u0275\u0275element(0,"button",34)}function ft(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",31),e.\u0275\u0275listener("click",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.clearFilter(Ke))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&re){var ee=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("disabled",!ee.viewModel.hasRestatement)("ngStyle",e.\u0275\u0275pureFunction1(8,$e,ee.viewModel.foregroundColor))("pbiTooltip",e.\u0275\u0275pipeBind1(2,6,ee.clearFilterTooltip)),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,4,ee.clearFilterTooltip))}}var Mt=function(W,Z){return{"pbi-glyph-view":W,"pbi-glyph-hide3":Z}};function bt(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"button",35),e.\u0275\u0275listener("click",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.toggleFilterVisibility(Ke))}),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275elementEnd()}if(2&re){var ee=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(8,Mt,!ee.viewModel.contract.isHiddenInViewMode,ee.viewModel.contract.isHiddenInViewMode))("ngStyle",e.\u0275\u0275pureFunction1(11,we,ee.isEditMode&&ee.viewModel.isFilterHidden()?"visible":""))("pbiTooltip",e.\u0275\u0275pipeBind1(2,6,ee.getFilterHiddenTooltip())),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,4,ee.getFilterHiddenTooltip()))}}function tt(re,W){if(1&re&&(e.\u0275\u0275elementStart(0,"option",40),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&re){var Z=W.$implicit,ee=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("ngValue",Z),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",ee.getLabelForAsAggregationOption(!!Z),"")}}var Et=function(){return[!0,!1]};function Ft(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",36),e.\u0275\u0275element(1,"span",37),e.\u0275\u0275elementStart(2,"select",38),e.\u0275\u0275listener("ngModelChange",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.viewModel.isLinkedAsAggregation=Ke)})("change",function(){e.\u0275\u0275restoreView(Z);var Ke=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Ke.updateLinkAsAggregation())}),e.\u0275\u0275template(3,tt,2,2,"option",39),e.\u0275\u0275elementEnd()()}if(2&re){var ee=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("localize",ee.getResourceIdForAsAggregationDropdown()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",ee.viewModel.isLinkedAsAggregation)("disabled",ee.viewModel.discourageAggregation),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pureFunction0(4,Et))}}function Tt(re,W){if(1&re&&(e.\u0275\u0275element(0,"label",47),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275pipe(2,"localize")),2&re){var Z=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(2,4,Z.getFilterTypeTooltip())),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,2,Z.getFilterTypeTooltip()))}}var Bt=function(W,Z,ee,Te){return{"background-color":W,color:Z,"border-color":ee,"font-family":Te}};function Ut(re,W){if(1&re&&(e.\u0275\u0275elementStart(0,"mat-option",48),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&re){var Z=W.$implicit,ee=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("value",Z)("ngStyle",e.\u0275\u0275pureFunction4(4,Bt,ee.viewModel.inputBoxBackgroundColor,ee.viewModel.inputBoxForegroundColor,ee.viewModel.inputBoxBorderColor,ee.viewModel.fontFamily))("disabled",!ee.isEditMode&&5===Z.type),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",Z.label,"")}}var Rt=function(W){return{"font-size":W}},Gt=function(W){return{invalidType:W}},Qt=function(W,Z,ee){return{"background-color":W,color:Z,"border-color":ee}};function Nt(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",41)(1,"div",42),e.\u0275\u0275element(2,"span",43),e.\u0275\u0275template(3,Tt,3,6,"label",44),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"mat-select",45),e.\u0275\u0275listener("ngModelChange",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Xe.viewModel.cardType=Ke)})("selectionChange",function(){e.\u0275\u0275restoreView(Z);var Ke=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(Ke.switchCardType(Ke.cardType))}),e.\u0275\u0275template(5,Ut,2,9,"mat-option",46),e.\u0275\u0275elementEnd()()}if(2&re){var ee=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(2),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(8,Rt,ee.viewModel.fontSize)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ee.isEditMode&&ee.isInOutspacePane),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("aria-label",ee.ariaLabelFilterType),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(10,Gt,ee.viewModel.isInvalidCardType()))("ngModel",ee.viewModel.cardType)("compareWith",ee.compareCardType)("ngStyle",e.\u0275\u0275pureFunction3(12,Qt,ee.viewModel.inputBoxBackgroundColor,ee.viewModel.inputBoxForegroundColor,ee.viewModel.inputBoxBorderColor)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",ee.viewModel.availableTypes)}}function Yt(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"advanced-filter",52),e.\u0275\u0275listener("onFilterChanged",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.onFilterChanged(Ke))}),e.\u0275\u0275elementEnd()}if(2&re){var ee=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",ee.viewModel)}}function dn(re,W){if(1&re&&e.\u0275\u0275element(0,"filter-visual",53),2&re){var Z=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",Z.viewModel)("isInOutspacePane",Z.isInOutspacePane)("expanded",Z.viewModel.readOnlyState.expanded)}}function hn(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"top-n-filter",52),e.\u0275\u0275listener("onFilterChanged",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.onFilterChanged(Ke))}),e.\u0275\u0275elementEnd()}if(2&re){var ee=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",ee.viewModel)}}function gn(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"relative-filter",54),e.\u0275\u0275listener("onFilterChanged",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.onFilterChanged(Ke.args))}),e.\u0275\u0275elementEnd()}if(2&re){var ee=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",ee.viewModel)("filterType",ee.viewModel.cardType.type)}}function vn(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"relative-filter",54),e.\u0275\u0275listener("onFilterChanged",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext(3);return e.\u0275\u0275resetView(Xe.onFilterChanged(Ke.args))}),e.\u0275\u0275elementEnd()}if(2&re){var ee=e.\u0275\u0275nextContext(3);e.\u0275\u0275property("viewModel",ee.viewModel)("filterType",ee.viewModel.cardType.type)}}function fn(re,W){if(1&re&&(e.\u0275\u0275elementStart(0,"div"),e.\u0275\u0275template(1,Yt,1,1,"advanced-filter",49),e.\u0275\u0275template(2,dn,1,3,"filter-visual",50),e.\u0275\u0275template(3,hn,1,1,"top-n-filter",49),e.\u0275\u0275template(4,gn,1,2,"relative-filter",51),e.\u0275\u0275template(5,vn,1,2,"relative-filter",51),e.\u0275\u0275elementEnd()),2&re){var Z=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",2===Z.viewModel.cardType.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",0===Z.viewModel.cardType.type||4===Z.viewModel.cardType.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",5===Z.viewModel.cardType.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",8===Z.viewModel.cardType.type),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",10===Z.viewModel.cardType.type)}}function mn(re,W){if(1&re&&e.\u0275\u0275element(0,"include-exclude-filter",55),2&re){var Z=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("filterViewModel",Z.viewModel)}}var Cn=function(W,Z,ee,Te,Ke){return{"background-color":W,"border-color":Z,color:ee,"font-family":Te,"font-size":Ke}},_n=function(W,Z){return{hasRestateHighlight:W,withMobileInvalidIcon:Z}},yn=function(W){return{cardExpanded:W}};function Pn(re,W){if(1&re){var Z=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",1)(1,"div",2),e.\u0275\u0275listener("singleClickAction",function(){e.\u0275\u0275restoreView(Z);var Ke=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ke.toggle())}),e.\u0275\u0275elementStart(2,"div",3),e.\u0275\u0275pipe(3,"localize"),e.\u0275\u0275elementStart(4,"div",4,5),e.\u0275\u0275listener("pbiMenuButtonClick",function(Ke){e.\u0275\u0275restoreView(Z);var Xe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Xe.onMenuItemClicked(Ke))}),e.\u0275\u0275template(6,te,2,0,"i",6),e.\u0275\u0275template(7,_e,1,0,"i",7),e.\u0275\u0275template(8,de,2,4,"i",8),e.\u0275\u0275template(9,Ee,1,1,"input",9),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(10,Se,1,7,"button",10),e.\u0275\u0275template(11,Re,3,9,"button",11),e.\u0275\u0275template(12,Ye,3,11,"button",12),e.\u0275\u0275template(13,nt,3,14,"button",13),e.\u0275\u0275template(14,pt,1,0,"button",14),e.\u0275\u0275template(15,ct,1,0,"button",15),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",16)(17,"span",1),e.\u0275\u0275text(18),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(19,"div",17),e.\u0275\u0275template(20,ft,3,10,"button",12),e.\u0275\u0275template(21,bt,3,13,"button",18),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275template(22,Ft,4,5,"div",19),e.\u0275\u0275elementStart(23,"div",20),e.\u0275\u0275template(24,Nt,6,16,"div",21),e.\u0275\u0275template(25,fn,6,5,"div",22),e.\u0275\u0275template(26,mn,1,1,"include-exclude-filter",23),e.\u0275\u0275elementEnd()()}if(2&re){var ee=e.\u0275\u0275nextContext();e.\u0275\u0275classMapInterpolate1("card ",ee.getFilterClass(),""),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction5(47,Cn,ee.viewModel.backgroundColor,ee.viewModel.borderColor,ee.viewModel.foregroundColor,ee.viewModel.fontFamily,ee.viewModel.fontSize)),e.\u0275\u0275advance(1),e.\u0275\u0275property("singleClickDisabled",ee.viewModel.isEditingLabel)("singleClickTimeout",ee.isEditMode?300:0),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",e.\u0275\u0275pipeBind1(3,45,"Invalid_Filter_Tooltip"))("pbiTooltipDisabled",ee.isValid),e.\u0275\u0275attribute("tooltip",ee.viewModel.readOnlyState.invalid),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(53,_n,ee.isFilterApplied(),ee.showMobileInvalidIcon))("ngStyle",e.\u0275\u0275pureFunction1(56,Rt,ee.viewModel.fontSize))("pbiMenu",ee.menuItems)("menuMode",ee.menuMode)("disabled",!(ee.isEditMode&&ee.isInOutspacePane)),e.\u0275\u0275attribute("aria-label",ee.getAriaLabelString())("title",ee.getTooltip())("tabindex",ee.isEditMode?0:null),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",ee.viewModel.readOnlyState.invalid),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ee.showInputWarningIcon&&!ee.isMobileFilter()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",null!=ee.getIconClassName()),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiEditableLabel",ee.pbiEditableLabelOptions)("pbiEditableLabelValue",ee.editableLabelName)("pbiEditableLabelMode",ee.isEditMode)("pbiEditableLabelEditable",!!ee.isInOutspacePane&&!!ee.viewModel.isEditingLabel)("pbiEditableLabelSearchString",ee.searchFiltersInput),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ee.canExpand&&!ee.disableToggling&&!ee.shouldHideExpandForEmptyContent()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ee.showDeleteIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ee.showTopRowClearIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ee.showLockIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ee.showMobileInvalidIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ee.showMobileEditIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction1(58,yn,ee.isFilterExpanded())),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("restatement ",ee.restatementLineStyleRule,""),e.\u0275\u0275property("ngStyle",e.\u0275\u0275pureFunction1(60,Rt,ee.viewModel.fontSize)),e.\u0275\u0275attribute("title",ee.getRestatement()),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(ee.getRestatement()),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",ee.showBottomRowClearIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ee.showVisibilityIcon),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ee.showLinkFieldOptions()),e.\u0275\u0275advance(1),e.\u0275\u0275property("hidden",ee.shouldHideFilterContent()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ee.showFilterTypeSelection()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ee.viewModel.cardType),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ee.viewModel.readOnlyState&&(ee.viewModel.readOnlyState.type===ee.FilterType.Include||ee.viewModel.readOnlyState.type===ee.FilterType.Exclude)&&ee.isFilterExpanded())}}var ln=function(){function re(W,Z,ee,Te,Ke,Xe,vt,gt,_t,Wt,$t,Zt,Jt,en,tn,Xt,nn,on,rn){this.contextActivityService=W,this.conceptualSchemaProxy=Z,this.dataSources=ee,this.displayNameService=Te,this.eventBridge=Ke,this.explorationActivity=Xe,this.explorationCapabilities=vt,this.explorationNavigation=gt,this.featureSwitchService=_t,this.includeExcludeService=Wt,this.highContrastCssGenerationService=$t,this.localizationService=Zt,this.networkAvailabilityService=Jt,this.telemetryService=en,this.themeService=tn,this.screenReaderService=Xt,this.viewModeState=nn,this.visualAuthoring=on,this.visualTimeSynchronizationService=rn,this.moveFilter=new e.EventEmitter,this.FilterType=a,this.menuMode=n.Kb.Compact,this.ariaLabelFilterType=this.localizationService.get("FilterCardTypeSwitchLabel"),this.allowChangeFilterTypes=!0,this.showInputWarningIconInternal=!1,this.showInputEditIconInternal=!1,this.initializeHighContrastRules()}return Object.defineProperty(re.prototype,"editableLabelName",{get:function(){return this.getDisplayName()},enumerable:!1,configurable:!0}),re.prototype.ngOnInit=function(){var W=this,Z=this.viewModel;Z.updateViewState(),Z.updateAvailableTypes(this.featureSwitchService.featureSwitches),Z.isInOutspacePane=this.isInOutspacePane,Z.filterCardStyleArguments=this.filterCardStyleArguments,this.isValid=!Z.readOnlyState.invalid,Z.chevronExpandCollapseDescription=this.localizationService.get("FilterCard_ExpandCollapse"),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(ve.filterContainerChanged,function(ee,Te){return W.onFilterContainerChanged(Te)}).subscribe(ve.sectionObjectsEvaluated,function(ee,Te){return W.updateFilterCardStyle()}).subscribe(powerbi.events.visualThemeChanged,function(){return W.updateFilterCardStyle()}).subscribe(ve.podParameterChanged,function(ee,Te){return W.onPodParameterChanged(Te)}).subscribe(ve.explorationSettingsLoaded,function(ee,Te){Te.allowChangeFilterTypesChanged&&W.updateAllowChangeFilterTypeSettings(W.explorationNavigation.getCurrentExploration())}).subscribe(ve.applyAllClicked,function(ee,Te){return W.onApplyAllClicked(Te)}).subscribe(ve.applyAllBufferedFilterCardChanged,function(ee,Te){return W.onApplyAllFilterCardBufferedChanges(Te)}).subscribe(ve.explorationSlowDataSourceSettingsLoaded,function(ee,Te){return function(){Te.isApplyAllButtonEnabledChanged&&(W.showInputWarningIconInternal=!1,W.showInputEditIconInternal=!1)}}),this.updateAllowChangeFilterTypeSettings(this.explorationNavigation.getCurrentExploration()),this.initializeDefaultValue(),this.updateRestatement(),this.updateFilterCardStyle(),this.isInOutspacePane&&5===this.viewModel.contract.howCreated&&r.setDrillthroughMetadata(this.viewModel,this.explorationNavigation),this.pbiEditableLabelOptions={disableClick:!0,customTooltip:!0,inputMatchLabelWidth:!1,onEdit:function(){return W.editLabelModern()},onBlur:function(){W.blurLabel(),W.rename()}}},re.prototype.rename=function(){if(!jsCommon.StringExtensions.isNullOrUndefinedOrWhiteSpaceString(this.editablelabelInputName)){this.viewModel.contract.displayName=this.editablelabelInputName;var W=this.viewModel;this.visualAuthoring.renameFilter(W.getFilterContainerScope(),W.contract,this.editablelabelInputName),this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Rename",isInOutspacePane:this.isInOutspacePane})}},re.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},re.prototype.ngOnChanges=function(W){W.searchFiltersInput&&(this.hiddenBySearchInput=r.shouldHideFilterBySearchInput(this.viewModel,this.searchFiltersInput,this.featureSwitchService))},re.prototype.compareCardType=function(W,Z){return W.type===Z.type},re.prototype.updateLinkAsAggregation=function(){var W=this.viewModel;this.visualAuthoring.setLinkFieldAsAggregation(W.contract,W.getFilterContainerScope(),W.isLinkedAsAggregation),this.updateLinkAsAggregationOnViewModel()},re.prototype.getLabelForAsAggregationOption=function(W){return this.localizationService.get(W?"LinkField_AsAggregationEnabledText":"LinkField_AsAggregationDisabledText")},re.prototype.getResourceIdForAsAggregationDropdown=function(){return 1===this.explorationNavigation.getCurrentSection().type?"LinkField_AsAggregationForTooltip":"LinkField_AsAggregationForDrillthrough"},re.prototype.isIncludeExclude=function(){return this.viewModel.contract.type===a.Include||this.viewModel.contract.type===a.Exclude},re.prototype.getDisplayName=function(){return this.viewModel.contract.displayName?this.viewModel.contract.displayName:this.viewModel.displayName},re.prototype.getRestatement=function(){var W;return this.viewModel.contract.type===a.Passthrough?W="":(W=this.viewModel.getRestatement())||(W=this.localizationService.get("FilterRestatement_IsAll")),W},re.prototype.isFilterApplied=function(){return this.viewModel.hasRestatement},Object.defineProperty(re.prototype,"isFilterHidden",{get:function(){return this.isEditMode?this.hiddenBySearchInput:this.viewModel.isFilterHidden()||this.hiddenBySearchInput},enumerable:!1,configurable:!0}),re.prototype.getTooltip=function(){return this.viewModel.isInvalidForMappedColumn?this.localizationService.get("DQP_Invalid_FilterCard_Tooltip"):this.isIncludeExclude()||this.viewModel.contract.type===a.Passthrough?this.getDisplayName():this.viewModel.tooltip},re.prototype.getIconClassName=function(){var W=this.viewModel;if(5===W.howCreated&&W.contract&&!W.contract.isTransient){if(W.isMeasure)return"fieldListMeasure";if(W.isLinkedAsAggregation)return"fieldListNumeric"}},Object.defineProperty(re.prototype,"canExpand",{get:function(){return this.isEditMode?this.viewModel.canExpandManually:this.viewModel.canExpandManually&&!this.viewModel.isFilterLocked()},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"showDeleteIcon",{get:function(){return!(!this.isEditMode&&!this.isIncludeExclude()&&this.viewModel.contract.type!==a.Passthrough)&&(this.featureSwitchService.featureSwitches.onObject&&5===this.viewModel.howCreated?this.viewModel.contract.isTransient:this.viewModel.canDeleteManually)},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"showVisibilityIcon",{get:function(){return!this.useMobileFilterConfig()&&this.viewModel.canHideManually&&(this.isEditMode||this.viewModel.isFilterHidden())},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"showLockIcon",{get:function(){return this.viewModel.canLockManually&&(this.isEditMode||this.viewModel.isFilterLocked())},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"showMobileInvalidIcon",{get:function(){return!!this.isMobileFilter()&&this.showInputWarningIcon},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"showMobileEditIcon",{get:function(){return!!this.isMobileFilter()&&this.showInputEditIconInternal},enumerable:!1,configurable:!0}),re.prototype.isFilterExpanded=function(){return!(this.viewModel.isFilterLocked()&&!this.isEditMode)&&this.viewModel.isFilterExpanded()},re.prototype.showFilterTypeSelection=function(){return(this.allowChangeFilterTypes||this.isEditMode)&&this.viewModel.availableTypes&&this.viewModel.availableTypes.length>1&&(!this.viewModel.isSingleSelectionRequired||this.viewModel.isMappedToMParameter()&&!this.viewModel.supportsMultipleValues())&&!this.viewModel.isInvalid()&&!this.isIncludeExclude()},re.prototype.getFilterLockTooltip=function(){return this.viewModel.isFilterLocked()?"FilterPane_FilterLocked":this.viewModel.isFilterLocked()?"FilterPane_UnlockFilter":"FilterPane_LockFilter"},re.prototype.getFilterHiddenTooltip=function(){return this.viewModel.contract.isHiddenInViewMode?"FilterPane_ShowFilter":"FilterPane_HideFilter"},re.prototype.getFilterTypeTooltip=function(){return this.allowChangeFilterTypes?"FilterPane_FilterType_Shown":"FilterPane_FilterType_Hidden"},re.prototype.getAriaLabelString=function(){var W=this.getDisplayName(),Z=this.getRestatement();return Z&&(W=W+" "+Z),W},re.prototype.onFilterChanged=function(W){this.viewModel.useDefaultFilter&&(W.filter.filter=oe.getDefaultValueFilter(this.viewModel.contract.expression)),c.notifyFilterContainerChangedByUser(this.eventBridge,W),this.updateRestatement(),this.updateFilterCardStyle()},re.prototype.toggle=function(W){if(void 0===W&&(W=!0),this.canExpand&&!this.shouldHideExpandForEmptyContent()){var Z=this.visualTimeSynchronizationService?this.visualTimeSynchronizationService.getAnchorTime():void 0;o.updateRelativeTimeRestatementOnToggle(this.dataSources.get(),this.conceptualSchemaProxy,this.localizationService,this.viewModel,Z,this.networkAvailabilityService.isNetworkAvailable());var ee=this.viewModel.contract;if(ee.expanded=!ee.expanded,this.telemetryService.logEvent(powerbi.telemetry.EXToggleFilterCardExpanded,{filterType:powerbi.explore.util.getTelemetryFilterType(ee.type),filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(this.viewModel.getFilterContainerScope().scopeType),fieldKind:powerbi.explore.util.getTelemetryFieldKind(ee.expression),expanded:ee.expanded,viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode()),isInOutspacePane:this.isInOutspacePane}),this.viewModel.updateViewState(),W){var Te=this.viewModel,Ke={filter:Te.contract,changeType:16,scope:Te.getFilterContainerScope()};this.eventBridge.publishToChannel(ve.filterContainerChanged,Ke)}}},re.prototype.clearFilter=function(W){var Z=this;if(W&&W.stopPropagation(),this.viewModel.clearDQPWarning(),this.viewModel.hasDefaultValue)this.restoreDefaultFilter();else if(this.viewModel.contract.filter){var ee={filter:this.viewModel.contract,changeType:10,scope:this.viewModel.getFilterContainerScope()};if(this.isApplyAllOnForThisFilter())c.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.cardType.type,this.viewModel.id,!0,!1),c.notifyFilterContainerChangedByUser(this.eventBridge,ee);else if(this.explorationActivity.tryDoRootActivity(function(Xe){var gt,vt=Z.viewModel;ee.parentActivity=Xe,vt.clearRestatement(),Z.visualAuthoring.clearFilter(vt.getFilterContainerScope(),vt.contract,Xe),Z.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(gt=c.createChangeFilterActivity(Z.contextActivityService,"Clear Filter"),ee.changeFilterActivity=gt),c.notifyFilterContainerChangedByUser(Z.eventBridge,ee),gt&&gt.resolve()},function(){return Z.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneFilterCleared)})&&(this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Clear",isInOutspacePane:this.isInOutspacePane,viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode())}),W)){var Ke=U.getFocusNextElement(!0,W.target);B.focus(Ke,!0)}}},Object.defineProperty(re.prototype,"showInputWarningIcon",{get:function(){return this.showInputWarningIconInternal},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"clearFilterTooltip",{get:function(){return this.viewModel.hasDefaultValue?"FilterPane_ResetDefaultFilter":"FilterPane_ClearFilter"},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"showTopRowClearIcon",{get:function(){return this.viewModel.canClearManually&&!this.viewModel.isFilterLocked()&&!this.isEditMode},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"showBottomRowClearIcon",{get:function(){return this.viewModel.canClearManually&&this.isEditMode&&this.viewModel.hasRestatement},enumerable:!1,configurable:!0}),re.prototype.toggleFilterVisibility=function(W){if(W&&W.stopPropagation(),this.isEditMode){var Z=this.viewModel;this.visualAuthoring.toggleFilterVisibility(Z.getFilterContainerScope(),Z.contract),this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Visibility",isInOutspacePane:this.isInOutspacePane})}},re.prototype.toggleFilterLockState=function(W){if(W&&W.stopPropagation(),this.isEditMode){var Z=this.viewModel;this.visualAuthoring.toggleFilterLock(Z.getFilterContainerScope(),Z.contract),this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Lock",isInOutspacePane:this.isInOutspacePane})}},re.prototype.deleteFilter=function(W){var Z=this;W&&W.stopPropagation(),this.isApplyAllOnForThisFilter()&&c.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.cardType?this.viewModel.cardType.type:null,this.viewModel.id,!1,!0),this.explorationActivity.doRootActivity(function(Te){var Ke;Z.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Ke=c.createChangeFilterActivity(Z.contextActivityService,"Remove Filter"));var Xe=Z.viewModel.getFilterContainerScope();Z.visualAuthoring.removeFilter(Z.viewModel.contract,Xe,Te,Ke),Ke&&Ke.resolve()},function(){return Z.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneFilterDeleted)}),this.telemetryService.logEvent(powerbi.telemetry.EXFilterPaneInteraction,{filterInteractionKind:"Delete",isInOutspacePane:this.isInOutspacePane,viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode())});var ee=this.localizationService.get("FilterPane_DeleteFilterDeleted");this.screenReaderService.alertPolite(ee)},re.prototype.switchCardType=function(W){switch(void 0===W&&(W=this.viewModel.cardType),this.viewModel.cardType=W,this.viewModel.contract.type=W.type,this.viewModel.cardType.type){case a.Advanced:case a.Categorical:case a.TopN:case a.RelativeTime:case a.RelativeDate:this.viewModel.switchType(this.viewModel.cardType.type),this.viewModel.updateViewState()}var ee,Z={filter:this.viewModel.contract,changeType:32,scope:this.viewModel.getFilterContainerScope()};this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(ee=c.createChangeFilterActivity(this.contextActivityService,"Switch Filter Type"),Z.changeFilterActivity=ee),c.notifyFilterContainerChangedByUser(this.eventBridge,Z),ee&&ee.resolve(),this.isApplyAllOnForThisFilter()&&c.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.cardType.type,this.viewModel.id,!1,!0),this.toggle(!1),this.toggle(!1)},re.prototype.showLinkFieldOptions=function(){return this.hasNoLinkFieldOptions()&&this.viewModel.readOnlyState.expanded},re.prototype.shouldHideExpandForEmptyContent=function(){return!!this.featureSwitchService.featureSwitches.onObject&&!this.hasNoLinkFieldOptions()&&this.hasNoFilterContent()},re.prototype.shouldHideFilterContent=function(){return this.hasNoFilterContent()||!this.canExpand||!this.isFilterExpanded()},re.prototype.hasNoLinkFieldOptions=function(){return this.viewModel.canToggleLinkAsAggregation&&!this.isInOutspacePane&&!this.isMobileFilter()},re.prototype.hasNoFilterContent=function(){return this.viewModel.isLinkField&&this.viewModel.isLinkedAsAggregation},re.prototype.getFilterClass=function(){var W=[];if(W.push("unselectable"),this.viewModel.cardType)switch(this.viewModel.cardType.type){case a.Visual:W.push("visual");break;case a.Advanced:W.push("advanced");break;case a.Categorical:W.push("categorical");break;case a.TopN:W.push("topN");break;case a.RelativeDate:W.push("relativeDate");break;case a.RelativeTime:W.push("relativeTime")}return W.push(this.isInOutspacePane?"filterOutspaceModern":"filter"),this.isFilterApplied()&&W.push("hasRestateHighlight"),!this.viewModel.canSortManually&&this.isInOutspacePane&&W.push("italicized"),W.join(" ")},re.prototype.editLabel=function(){this.isEditMode&&this.viewModel.canRenameManually&&this.isInOutspacePane&&(this.viewModel.isEditingLabel=!0)},re.prototype.editLabelModern=function(){this.viewModel.canRenameManually&&this.isInOutspacePane&&(this.viewModel.isEditingLabel=!0)},re.prototype.blurLabel=function(){this.viewModel.isEditingLabel=!1},Object.defineProperty(re.prototype,"restatementLineStyleRule",{get:function(){return this.isFilterExpanded()||this.isEditMode?"trimmedTextWithEllipsis":"multiLineText"},enumerable:!1,configurable:!0}),re.prototype.onMenuItemClicked=function(W){var Z;this.onMenuItemSelected({action:W.id,moveDirection:null===(Z=W.data)||void 0===Z?void 0:Z.moveDirection})},Object.defineProperty(re.prototype,"menuItems",{get:function(){var Z=[{type:n.iB.Button,disabled:!this.viewModel.canDeleteManually,text:this.localizationService.get("FilterPane_DeleteFilter"),id:0},{type:n.iB.Button,disabled:!this.canExpand,text:this.viewModel.isFilterExpanded()?this.localizationService.get("Collapse"):this.localizationService.get("Expand"),id:this.viewModel.isFilterExpanded()?2:1}];return this.customSortEnabled&&Z.push({type:n.iB.SubMenu,disabled:!this.viewModel.canSortManually,text:this.localizationService.get("ItemAction_Move"),id:3,menu:{items:[{type:n.iB.Button,disabled:!this.viewModel.canSortManually||0===this.index,text:this.localizationService.get("ItemAction_Move_Up"),id:3,data:{moveDirection:0}},{type:n.iB.Button,disabled:!this.viewModel.canSortManually||this.index===this.lastIndex-1,text:this.localizationService.get("ItemAction_Move_Down"),id:3,data:{moveDirection:1}},{type:n.iB.Button,disabled:!this.viewModel.canSortManually||0===this.index,text:this.localizationService.get("ItemAction_Move_Top"),id:3,data:{moveDirection:2}},{type:n.iB.Button,disabled:!this.viewModel.canSortManually||this.index===this.lastIndex-1,text:this.localizationService.get("ItemAction_Move_Bottom"),id:3,data:{moveDirection:3}}]}}),Z.push({type:n.iB.Divider},{type:n.iB.Button,disabled:!this.viewModel.canRenameManually,text:this.localizationService.get("ItemAction_Rename"),id:4},{type:n.iB.Button,disabled:!this.viewModel.canLockManually,text:this.viewModel.isFilterLocked()?this.localizationService.get("FilterPane_UnlockFilter"):this.localizationService.get("FilterPane_LockFilter"),id:this.viewModel.isFilterLocked()?6:5},{type:n.iB.Button,disabled:!this.viewModel.canHideManually,text:this.viewModel.isFilterHidden()?this.localizationService.get("FilterPane_ShowFilter"):this.localizationService.get("FilterPane_HideFilter"),id:this.viewModel.isFilterHidden()?7:8},{type:n.iB.Button,disabled:!this.viewModel.canClearManually,text:this.localizationService.get("FilterPane_ClearFilter"),id:9}),{items:Z}},enumerable:!1,configurable:!0}),re.prototype.onMenuItemSelected=function(W){switch(W.action){case 0:this.deleteFilter();break;case 4:this.editLabel();break;case 3:this.customSortEnabled&&this.moveFilterInDirection(W.moveDirection);break;case 1:case 2:this.toggle();break;case 5:case 6:this.toggleFilterLockState();break;case 7:case 8:this.toggleFilterVisibility();break;case 9:this.clearFilter();break;default:return}},Object.defineProperty(re.prototype,"isEditMode",{get:function(){return 1===this.viewModeState.getMode()},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"isFluentDesignEnabled",{get:function(){return this.explorationCapabilities.getCapabilities().showFluentDesign&&0===this.viewModeState.getMode()},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"customSortEnabled",{get:function(){return this.viewModel.getFilterContainerScope(),this.isEditMode&&this.isInOutspacePane},enumerable:!1,configurable:!0}),re.prototype.isApplyAllOnForThisFilter=function(){var W=this.viewModel.isInOutspacePane||this.isMobileFilter();return c.isApplyAllEnabled(W,this.explorationNavigation)},re.prototype.updateFilterCardStyle=function(){var W=this.themeService.getVisualStyle(this.explorationNavigation.getCurrentExploration().themeCollection);this.viewModel.updateFilterCardStyle(this.explorationNavigation.getCurrentSection(),W)},re.prototype.isMobileFilter=function(){var W;return null===(W=this.viewModeState)||void 0===W?void 0:W.getConfig().displayOptions.enableMobileFilters},re.prototype.updateLinkAsAggregationOnViewModel=function(){var W=this.viewModel;if(W.isLinkedAsAggregation&&W.contract.filter){this.viewModel.clearRestatement(),this.visualAuthoring.updateFilter(W.getFilterContainerScope(),W.contract,void 0);var Z={filter:W.contract,changeType:10,scope:W.getFilterContainerScope()};this.eventBridge.publishToChannel(ve.filterContainerChanged,Z)}var ee={filter:W.contract,changeType:16,scope:W.getFilterContainerScope()};this.eventBridge.publishToChannel(ve.filterContainerChanged,ee)},re.prototype.useMobileFilterConfig=function(){return this.viewModeState.getConfig().displayOptions.useMobileExplorationFooter},re.prototype.initializeHighContrastRules=function(){this.highContrastCssGenerationService.addRule(".themeableElement .visual .slicer-container .slicer-content-wrapper .searchHeader","{ border-color: @buttonForegroundColor !important; }"),this.highContrastCssGenerationService.addRule(".themeableElement .cardHeader .title:focus .textLabel","{ color: @selectedForegroundColor !important; background-color: @selectedBackgroundColor !important; }"),this.highContrastCssGenerationService.addRule(".themeableElement .cardHeader button[aria-disabled=true].clear","{ opacity: 0.5 !important; }")},re.prototype.onFilterContainerChanged=function(W){var Z=this.viewModel;if(W.filter===Z.contract){if(jsCommon.EnumExtensions.hasFlag(W.changeType,2)&&(this.updateRestatement(),this.viewModel.updateViewState()),Z.cardType&&W.filter.type!==Z.cardType.type&&jsCommon.EnumExtensions.hasFlag(W.changeType,32)&&((W.filter.type===a.TopN&&Z.cardType.type!==a.TopN||W.filter.type!==a.TopN&&Z.cardType.type===a.TopN)&&this.viewModel.clearRestatement(),Z.updateCardType(W.filter.type)),jsCommon.EnumExtensions.hasFlag(W.changeType,10)){var ee=this.localizationService.get("FilterPane_ClearFilterCleared");this.screenReaderService.alertPolite(ee)}jsCommon.EnumExtensions.hasFlag(W.changeType,16)&&this.viewModel.updateViewState()}this.updateFilterCardStyle()},re.prototype.restoreDefaultFilter=function(){var W=this;this.explorationActivity.doRootActivity(function(Z){var ee=W.viewModel,Te=W.viewModel.contract.expression;W.visualAuthoring.updateFilter(ee.getFilterContainerScope(),ee.contract,oe.getDefaultValueFilter(Te));var Xe,Ke={filter:ee.contract,changeType:10,scope:ee.getFilterContainerScope(),parentActivity:Z};W.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Xe=c.createChangeFilterActivity(W.contextActivityService,"Restore Default Filter"),Ke.changeFilterActivity=Xe),c.notifyFilterContainerChangedByUser(W.eventBridge,Ke),Xe&&Xe.resolve(),ee.useDefaultFilter=!0,W.updateRestatement()},function(){return W.telemetryService.startChildActivity(void 0,powerbi.telemetry.EXFilterPaneFilterDefaultRestored)})},re.prototype.moveFilterInDirection=function(W){var Z=this.viewModel.getFilterContainerScope(),ee=Z.container.filters,Te={filterScopeType:Z.scopeType,startIndex:this.index,targetIndex:void 0};switch(W){case 0:Te.targetIndex=this.index-1;break;case 1:Te.targetIndex=this.index+2;break;case 2:Te.targetIndex=0;break;case 3:Te.targetIndex=ee.length}this.moveFilter.emit(Te)},re.prototype.updateRestatement=function(){var W=this,Z=this.viewModel;if(Z.useDefaultFilter)Z.setRestatement(H.fromDefault(Z.defaultValue.value));else if(Z.contract.type===a.Passthrough)Z.displayName=Z.getRestatement(),Z.updateViewState();else if(this.isIncludeExclude()){var ee=this.dataSources.get();this.conceptualSchemaProxy.get(ee).then(function(Te){var Ke=W.viewModel.contract,Xe=W.includeExcludeService.buildViewModel(Ke.filter,Ke.type,Te,W.displayNameService,Ke.filterExpressionMetadata);Z.setRestatement(Xe.restatement),Z.displayName=Xe.displayName,Z.updateViewState()})}},re.prototype.onPodParameterChanged=function(W){!W||W.filter!==this.viewModel.contract||2===W.type&&(this.viewModel.updateIsLinkedAsAggregation(W.asAggregation),this.updateLinkAsAggregationOnViewModel())},re.prototype.initializeDefaultValue=function(){var W=this.viewModel;(W.hasDefaultValue&&!W.contract.filter||oe.isDefaultFilter(W.contract.filter))&&(W.useDefaultFilter=!0,this.updateRestatement())},re.prototype.updateAllowChangeFilterTypeSettings=function(W){W&&W.settings&&(this.allowChangeFilterTypes=W.settings.allowChangeFilterTypes)},re.prototype.onApplyAllFilterCardBufferedChanges=function(W){this.viewModel.id===W.id&&(this.showInputWarningIconInternal=!W.wasDeleted&&!W.canApply&&(this.showInputWarningIcon||this.isMobileFilter()),this.showInputEditIconInternal=this.isMobileFilter()&&!this.showInputWarningIconInternal)},re.prototype.onApplyAllClicked=function(W){W.idsInError&&(this.showInputWarningIconInternal=-1!==W.idsInError.indexOf(this.viewModel.id.toString()))},re.\u0275fac=function(Z){return new(Z||re)(e.\u0275\u0275directiveInject(i.r),e.\u0275\u0275directiveInject(O.i),e.\u0275\u0275directiveInject(T.D),e.\u0275\u0275directiveInject(V.O),e.\u0275\u0275directiveInject(h.J),e.\u0275\u0275directiveInject(M.Z),e.\u0275\u0275directiveInject(P.U),e.\u0275\u0275directiveInject(I.z),e.\u0275\u0275directiveInject(g.vZ),e.\u0275\u0275directiveInject(u.Y),e.\u0275\u0275directiveInject(s.g),e.\u0275\u0275directiveInject(C.o),e.\u0275\u0275directiveInject(A.SW),e.\u0275\u0275directiveInject(S.y0),e.\u0275\u0275directiveInject(L.f),e.\u0275\u0275directiveInject(p.g),e.\u0275\u0275directiveInject(D.kc),e.\u0275\u0275directiveInject(m.$),e.\u0275\u0275directiveInject(b.a))},re.\u0275cmp=e.\u0275\u0275defineComponent({type:re,selectors:[["filter"]],viewQuery:function(Z,ee){var Te;(1&Z&&e.\u0275\u0275viewQuery(f.l8,5),2&Z)&&(e.\u0275\u0275queryRefresh(Te=e.\u0275\u0275loadQuery())&&(ee.menuElement=Te.first))},inputs:{viewModel:"viewModel",isInOutspacePane:"isInOutspacePane",index:"index",lastIndex:"lastIndex",searchFiltersInput:"searchFiltersInput",filterCardStyleArguments:"filterCardStyleArguments",disableToggling:"disableToggling"},outputs:{moveFilter:"moveFilter"},features:[e.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"ngStyle","class",4,"ngIf"],[3,"ngStyle"],["customClick","",1,"filterCardTitleSection",3,"singleClickDisabled","singleClickTimeout","singleClickAction"],[1,"cardHeader","flex",3,"pbiTooltip","pbiTooltipDisabled"],["pbiMenuActivation","contextmenu",1,"title","trimmedTextWithEllipsis","unselectable",3,"ngClass","ngStyle","pbiMenu","menuMode","disabled","pbiMenuButtonClick"],["menuElement",""],["class","filterPaneIcon error",4,"ngIf"],["localizeTooltip","Filter_CantBeApplied","class","filterPaneIcon glyphicon pbi-glyph-warning glyph-small no-bold",4,"ngIf"],[3,"class",4,"ngIf"],["class","editableLabel",3,"ngModel","ngModelChange","blur",4,"pbiEditableLabel","pbiEditableLabelValue","pbiEditableLabelMode","pbiEditableLabelEditable","pbiEditableLabelSearchString"],["class","glyphicon glyph-mini","type","button",3,"ngStyle","ngClass","pbiTooltip",4,"ngIf"],["class","delete glyphicon pbi-glyph-close glyph-micro",3,"ngStyle","pbiTooltip","click",4,"ngIf"],["class","filterPaneIcon clear glyphicon glyph-mini pbi-glyph-eraser",3,"disabled","ngStyle","pbiTooltip","click",4,"ngIf"],["class","filterPaneIcon lock glyphicon glyph-mini",3,"ngClass","disabled","ngStyle","pbiTooltip","click",4,"ngIf"],["use-tooltip-as-aria-label","","class","filterPaneIcon glyphicon glyph-mini pbi-glyph-error","localizeTooltip","Filter_CantBeApplied",4,"ngIf"],["use-tooltip-as-aria-label","","class","filterPaneIcon glyphicon glyph-mini pbi-glyph-edit","localizeTooltip","Filter_Edited",4,"ngIf"],[1,"controlPanel","flex",3,"ngClass"],[1,"controlIcons"],["class","filterPaneIcon hide glyphicon glyph-mini",3,"ngClass","ngStyle","pbiTooltip","click",4,"ngIf"],["class","linkFieldOptions",4,"ngIf"],[1,"filterContent",3,"hidden"],["class","filterTypeSelection",4,"ngIf"],[4,"ngIf"],[3,"filterViewModel",4,"ngIf"],[1,"filterPaneIcon","error"],["sheet","filterPaneIcons","symbolId","fieldListError"],["localizeTooltip","Filter_CantBeApplied",1,"filterPaneIcon","glyphicon","pbi-glyph-warning","glyph-small","no-bold"],["sheet","filterPaneIcons",3,"symbolId"],[1,"editableLabel",3,"ngModel","ngModelChange","blur"],["type","button",1,"glyphicon","glyph-mini",3,"ngStyle","ngClass","pbiTooltip"],[1,"delete","glyphicon","pbi-glyph-close","glyph-micro",3,"ngStyle","pbiTooltip","click"],[1,"filterPaneIcon","clear","glyphicon","glyph-mini","pbi-glyph-eraser",3,"disabled","ngStyle","pbiTooltip","click"],[1,"filterPaneIcon","lock","glyphicon","glyph-mini",3,"ngClass","disabled","ngStyle","pbiTooltip","click"],["use-tooltip-as-aria-label","","localizeTooltip","Filter_CantBeApplied",1,"filterPaneIcon","glyphicon","glyph-mini","pbi-glyph-error"],["use-tooltip-as-aria-label","","localizeTooltip","Filter_Edited",1,"filterPaneIcon","glyphicon","glyph-mini","pbi-glyph-edit"],[1,"filterPaneIcon","hide","glyphicon","glyph-mini",3,"ngClass","ngStyle","pbiTooltip","click"],[1,"linkFieldOptions"],[1,"asAggregationTitle","smallFontSize","trimmedTextWithEllipsis",3,"localize"],[1,"asAggregation",3,"ngModel","disabled","ngModelChange","change"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"filterTypeSelection"],[1,"flex"],["use-tooltip-as-aria-label","","localize","FilterCardTypeSwitchLabel","localizeTooltip","FilterCardTypeSwitchLabel",1,"typeSelectTitle","trimmedTextWithEllipsis","smallFontSize",3,"ngStyle"],["id","focusableLabelIcon","tabindex","0","class","filterPaneIcon pbi-glyph-info glyphicon glyph-mini",3,"pbiTooltip",4,"ngIf"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","panelClass","pbi-modern-select-panel themeableElement","disableOptionCentering","true",1,"typeSwitchOptions","pbi-modern-select",3,"aria-label","ngClass","ngModel","compareWith","ngStyle","ngModelChange","selectionChange"],[3,"value","ngStyle","disabled",4,"ngFor","ngForOf"],["id","focusableLabelIcon","tabindex","0",1,"filterPaneIcon","pbi-glyph-info","glyphicon","glyph-mini",3,"pbiTooltip"],[3,"value","ngStyle","disabled"],[3,"viewModel","onFilterChanged",4,"ngIf"],[3,"viewModel","isInOutspacePane","expanded",4,"ngIf"],[3,"viewModel","filterType","onFilterChanged",4,"ngIf"],[3,"viewModel","onFilterChanged"],[3,"viewModel","isInOutspacePane","expanded"],[3,"viewModel","filterType","onFilterChanged"],[3,"filterViewModel"]],template:function(Z,ee){1&Z&&e.\u0275\u0275template(0,Pn,27,62,"div",0),2&Z&&e.\u0275\u0275property("ngIf",ee.viewModel&&!ee.isFilterHidden)},dependencies:[v.NgClass,v.NgForOf,v.NgIf,v.NgStyle,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,y.X,d.r,w.gD,x.ey,f.l8,N.V,X.f,ne.D,Ce.x,he.A,Fe.E,fe.k,ae.z,De,We,Ue.F],styles:['.filter.card[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color, #333333);margin:2px;border:1px solid var(--neutral-dark-color, #212121);border-radius:4px;overflow:hidden}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]{padding:0 4px 4px 8px}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]{padding:0 8px 4px 4px}.filter.card[_ngcontent-%COMP%]:hover   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.filter.card[_ngcontent-%COMP%]:hover   .controlPanel[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%], .filter.card[_ngcontent-%COMP%]:hover   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%], .filter.card[_ngcontent-%COMP%]:hover   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{visibility:visible}.filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]{cursor:pointer}.filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8);background:transparent}.filter.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   .asAggregationTitle[_ngcontent-%COMP%]{display:inline-block;width:100%}.filter.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:var(--neutral-secondary-color, #666666);border:1px solid var(--black-color, #000);width:100%;margin:2px 0;padding:2px}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]{width:100%;line-height:21px;display:flex;flex-direction:row}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:pointer;font-weight:inherit;flex-grow:1;outline:none;font-size:12px;display:flex}html[data-focus-source=key][_ngcontent-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin:4px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin:4px 0 0 2px}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{margin:2px 0 0 2px}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{margin:2px 0 0 2px}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{width:16px;height:16px;display:inline-block;padding:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin:2px 0 0 2px}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .no-bold[_ngcontent-%COMP%]{font-weight:400}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{height:16px;width:16px;background:transparent;flex-grow:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{margin:1px 4px 3px 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{margin:1px 0 3px 4px}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]:before{content:"\\e70d"}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]:before{content:"\\e70e"}.filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{height:16px;width:16px;background:transparent;flex-grow:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{margin:1px 4px 3px 0}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{margin:1px 0 3px 4px}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .controlIcons[_ngcontent-%COMP%]{display:inline-flex}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .multiLineText[_ngcontent-%COMP%]{white-space:normal;display:block;display:-webkit-box;word-wrap:break-word;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{margin:0 4px;visibility:hidden}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{visibility:hidden}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{margin:0 0 0 4px}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{margin:0 4px 0 0}.filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{visibility:hidden}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:right}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:left}html:not([dir="rtl"])[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{margin:0 0 0 4px}html[dir="rtl"][_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{margin:0 4px 0 0}.filter.card[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{background-color:transparent;cursor:pointer;vertical-align:top}.filter.card[_ngcontent-%COMP%]   .typeSelectTitle[_ngcontent-%COMP%]{display:inline-block}.filter.card[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%]{background-color:var(--neutral-secondary-color, #666666);border:1px solid var(--neutral-dark-color, #212121);width:100%;margin:2px 0;padding:2px}.filter.card[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color-alt, #444444);border:1px solid var(--black-color, #000);height:24px;padding:2px}.filterOutspaceModern.card.hasRestateHighlight[_ngcontent-%COMP%]{box-shadow:0 0 2px rgba(0,0,0,.2)}.filterOutspaceModern.card[_ngcontent-%COMP%]{background-color:inherit;border-radius:2px;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);overflow:hidden;flex-grow:1;margin:0 0 6px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]{padding:4px 4px 4px 8px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]{padding:4px 8px 4px 4px}.filterOutspaceModern.card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{transition-duration:0s}.filterOutspaceModern.card.italicized[_ngcontent-%COMP%]{font-style:italic}.filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .expand[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .expand[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .collapse[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .collapse[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .delete[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .delete[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .lock[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .lock[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .clear[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .clear[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus-within   .hide[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:focus   .hide[_ngcontent-%COMP%]{visibility:visible!important}.filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .expand[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .collapse[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .delete[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .lock[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .clear[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]:hover   .hide[_ngcontent-%COMP%]{visibility:visible!important}.filterOutspaceModern.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   .asAggregationTitle[_ngcontent-%COMP%]{display:inline-block}.filterOutspaceModern.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);width:100%;margin:2px 0;padding:2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]{width:100%;cursor:pointer}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:4px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:4px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .filterCardTitle[_ngcontent-%COMP%]:focus{outline:none}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:inherit}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:4px;height:16px;width:16px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:2px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .controlIcons[_ngcontent-%COMP%]{display:inline-flex}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .multiLineText[_ngcontent-%COMP%]{white-space:normal;display:block;display:-webkit-box;word-wrap:break-word;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}.filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{visibility:hidden}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:2px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:pointer;font-weight:inherit;flex-grow:1;font-size:14px;display:flex}  html[data-focus-source=key] .filterOutspaceModern.card .cardHeader .title:focus,   html[data-focus-source=key] .filterOutspaceModern.card .cardHeader .title *:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px}  html[data-focus-source=mouse] .filterOutspaceModern.card .cardHeader .title:focus,   html[data-focus-source=mouse] .filterOutspaceModern.card .cardHeader .title *:focus,   html[data-focus-source=program] .filterOutspaceModern.card .cardHeader .title:focus,   html[data-focus-source=program] .filterOutspaceModern.card .cardHeader .title *:focus{outline:none}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterCardTitle[_ngcontent-%COMP%]{display:inline-block;background:var(--white-color, #FFF);width:100%;border:none}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterCardTitle[_ngcontent-%COMP%]::selection{background:var(--input-selection-color, #0078d7);color:var(--white-color, #FFF)}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin:4px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{margin:4px 0 0 2px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .measure[_ngcontent-%COMP%]{margin:2px 0 0 2px}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{float:right}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .numeric[_ngcontent-%COMP%]{margin:2px 0 0 2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{width:16px;height:16px;display:inline-block;padding:0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin:2px 2px 0 0}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin:2px 0 0 2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .no-bold[_ngcontent-%COMP%]{font-weight:400}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .editableLabel[_ngcontent-%COMP%]{width:100%;border:none}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]     pbi-text-label{width:100%}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[aria-disabled=true].clear[_ngcontent-%COMP%]{opacity:.5}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[aria-disabled=false].clear[_ngcontent-%COMP%]{opacity:1}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{opacity:.5;height:16px;width:16px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]:enabled{opacity:1}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]:before{content:"\\e70d"}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]:before{content:"\\e70e"}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{color:inherit;height:16px;width:16px;background:transparent;flex-grow:0;visibility:hidden;font-weight:inherit}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .hasRestateHighlight[_ngcontent-%COMP%]{background-color:transparent;font-weight:bolder}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{height:16px;width:16px;color:inherit;background:transparent;visibility:hidden}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:right}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:left}.filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{color:inherit;height:16px;width:16px;background:transparent;flex-grow:0;visibility:hidden}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{background-color:transparent;color:inherit;cursor:pointer;vertical-align:top}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]{margin-top:8px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSelectTitle[_ngcontent-%COMP%], .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{display:block}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin-left:4px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{margin-right:4px}.filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border:1px solid var(--neutral-dark-color, #212121);width:100%;margin:4px 0 0}html:not([dir="rtl"])[_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%]{padding-left:2px}html[dir="rtl"][_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .filterOutspaceModern.card[_ngcontent-%COMP%]   .filterTypeSelection[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%]{padding-right:2px}.filterOutspaceModern.card[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);min-height:24px}.newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]{background-color:var(--gray-30, #EDEBE9);border-color:var(--gray-60, #C8C6C4);border-radius:2px}.newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .linkFieldOptions[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4);border-radius:2px}.newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .typeSwitchOptions[_ngcontent-%COMP%], .newPaneColors[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .newPaneColors   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4);border-radius:2px}[_nghost-%COMP%]     .filterOutspaceModern.card select, [_nghost-%COMP%]     .filterOutspaceModern.card mat-select{background-color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);min-height:24px!important;box-sizing:border-box;font-family:inherit}[_nghost-%COMP%]     .filterOutspaceModern.card input[type=number]{background-color:var(--white-color, #FFF);border:1px solid var(--black-color, #000);min-height:24px;padding:2px 6px;text-align:left}[_nghost-%COMP%]     .filterOutspaceModern.card input[type=number].ng-invalid{border:1px solid var(--warning-color, #A4262C)!important}[_nghost-%COMP%]     .filterOutspaceModern.card input[type=number][type=number]::-webkit-outer-spin-button, [_nghost-%COMP%]     .filterOutspaceModern.card input[type=number][type=number]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}[_nghost-%COMP%]     .filterOutspaceModern.card .filterInputWarningBorder{border:1px solid var(--warning-color, #A4262C)!important}[_nghost-%COMP%]     .filterOutspaceModern.card .applyFilter{margin-top:6px;margin-bottom:6px;color:inherit;font-size:inherit;font-family:inherit;background-color:transparent;opacity:.5;position:relative;float:right}[_nghost-%COMP%]     .filterOutspaceModern.card .applyFilter:hover{background-color:transparent}[_nghost-%COMP%]     .filterOutspaceModern.card .applyFilter:enabled{color:inherit;opacity:1}[_nghost-%COMP%]     .filterOutspaceModern.card .description{font-size:inherit}[_nghost-%COMP%]     .filter.card select, [_nghost-%COMP%]     .filter.card mat-select{border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);background-color:var(--white-color, #FFF);height:24px;padding:2px}[_nghost-%COMP%]     .filter.card input[type=number]{background-color:var(--neutral-dark-color, #212121);border:1px solid var(--black-color, #000);height:24px;padding:2px 6px;text-align:left}[_nghost-%COMP%]     .filter.card input[type=number].ng-invalid{border:1px solid var(--warning-color, #A4262C)}[_nghost-%COMP%]     .filter.card input[type=number][type=number]::-webkit-outer-spin-button, [_nghost-%COMP%]     .filter.card input[type=number][type=number]::-webkit-inner-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0}[_nghost-%COMP%]     .filter.card .applyFilter{color:var(--neutral-tertiary-alt-color, #C8C8C8);background-color:transparent;position:relative;float:right;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif}[_nghost-%COMP%]     .filter.card .applyFilter:hover{background-color:transparent}[_nghost-%COMP%]     .filter.card .applyFilter:enabled{color:var(--theme-primary-color, #F2C811)}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]{float:left;width:100%;box-sizing:border-box;padding:0 6px 4px 4px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;overflow:visible}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]:focus{outline:none}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:var(--white-color, #FFF);display:flex;margin:6px 5px 6px 0;box-sizing:border-box;font-weight:inherit}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]{margin-left:12px;font-size:12px}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]:focus{outline:none}html[data-focus-source=key][_ngcontent-%COMP%]   .explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .bucket[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .caption[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{background-color:var(--neutral-primary-color-alt2, #4a4a4a);float:left;width:100%;border:1px dashed var(--neutral-secondary-color, #666666);border-radius:4px;box-sizing:border-box}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards.append[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811)}html[data-focus-source=key][_ngcontent-%COMP%]   .explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]   .filterWell[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{color:var(--neutral-tertiary-alt-color, #C8C8C8);padding:4px 8px}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]:focus{outline:none}html[data-focus-source=key][_ngcontent-%COMP%]   .explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .end-dropzone[_ngcontent-%COMP%]{height:8px}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4);border-radius:2px}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .cards.append[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C)}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPane[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background-color:inherit;padding:4px 8px;border-radius:2px;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);overflow:hidden}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:6px;margin-top:4px;height:16px;width:16px}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .controlIcons[_ngcontent-%COMP%]{display:inline-flex}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .clear[_ngcontent-%COMP%]{background:transparent}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{background:transparent}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:6px}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{cursor:pointer;font-weight:inherit;flex-grow:1;outline:none;font-size:14px}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{width:16px;height:16px;display:inline-block;padding:0;margin:2px 2px 0 0}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]:before{content:"\\e70d"}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]:before{content:"\\e70e"}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .hasRestateHighlight[_ngcontent-%COMP%]{background-color:transparent;font-weight:bolder}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{color:inherit;height:16px;width:16px;background:transparent;flex-grow:0;font-weight:inherit}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .lock[_ngcontent-%COMP%]{float:right;height:16px;width:16px;color:inherit;background:transparent}.explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%], .explorationContainer[_ngcontent-%COMP%]   filter.ui-draggable-dragging[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{color:inherit;height:16px;width:16px;background:transparent;flex-grow:0}.newPaneColors.explorationContainer[_ngcontent-%COMP%]   .filterPaneOutspace[_ngcontent-%COMP%]   .relativeDateFilter[_ngcontent-%COMP%]   .relativeDateFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   pbi-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:inherit}','.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]{position:relative;background-color:var(--fluentThemeWhiteColor);border-color:var(--fluentThemeNeutralTertiaColor);box-sizing:border-box;padding:0 8px;margin-bottom:20px;color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   button.delete[_ngcontent-%COMP%]{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.hasRestateHighlight[_ngcontent-%COMP%]:not(.expanded), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.hasRestateHighlight[_ngcontent-%COMP%]:not(.expanded){background-color:var(--fluentThemeNeutralLighterColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.expanded[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.expanded[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.expanded.advanced[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.expanded.advanced[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.expanded.relativeDate[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.expanded.relativeDate[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card.expanded.topN[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card.expanded.topN[_ngcontent-%COMP%]{overflow-y:auto}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]{max-height:100px;line-height:initial;position:relative;-webkit-tap-highlight-color:transparent;margin-bottom:10px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%]{order:1}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[aria-disabled=true][_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[aria-disabled=true][_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[disabled][_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.clear[disabled][_ngcontent-%COMP%]{visibility:hidden}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-error[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-error[_ngcontent-%COMP%]{order:2;margin-left:24px;color:var(--fluentThemeErrorDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-edit[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-edit[_ngcontent-%COMP%]{order:2;margin-left:20px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.expand[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.expand[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]{order:3;margin-left:24px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]:before, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]:before{content:"\\e76c"}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]{float:initial;margin-top:5px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{height:auto;width:auto}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%]{position:absolute;right:28px;padding:12px 4px;visibility:visible}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .restatement[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   .restatement[_ngcontent-%COMP%]{font-size:18px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel.cardExpanded[_ngcontent-%COMP%]   .restatement[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel.cardExpanded[_ngcontent-%COMP%]   .restatement[_ngcontent-%COMP%]{display:none;-webkit-line-clamp:unset;-webkit-box-orient:unset}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]{font-size:14px!important;line-height:initial;-webkit-tap-highlight-color:transparent;padding-top:10px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.expand[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.expand[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.collapse[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.collapse[_ngcontent-%COMP%]{display:block!important;right:0;position:absolute}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0;font-size:14px!important;font-weight:700;letter-spacing:normal}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not([ng-bind]), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not([ng-bind]){display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterPaneIcon[_ngcontent-%COMP%]{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title.withMobileInvalidIcon[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title.withMobileInvalidIcon[_ngcontent-%COMP%]{color:var(--fluentThemeErrorDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]     pbi-text-label, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]     pbi-text-label{width:100%}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .typeSelectTitle[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .typeSelectTitle[_ngcontent-%COMP%]{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select{height:32px;border-radius:4px;border:1px solid var(--fluentThemeNeutralTertiaColor);border-width:1px!important;width:100%;padding:0 8px!important;line-height:32px;background-color:var(--fluentThemeWhiteColor);margin:0 0 10px;color:var(--fluentThemeNeutralDarkColor);font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;display:flex;align-items:center}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-trigger, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-trigger{line-height:28px;vertical-align:middle}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select.typeSwitchOptions, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select.typeSwitchOptions{border:2px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow{width:auto;height:auto;color:inherit;font-weight:initial;font-size:14px;padding-right:0;padding-bottom:0}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow:before, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow:before{content:"\\ec8f"}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow-wrapper, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select .mat-select-arrow-wrapper{line-height:30px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .slicer-container, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .slicer-container, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .slicer-container, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .slicer-container{display:initial;height:auto!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .slicer-container .slicer-content-wrapper, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .slicer-container .slicer-content-wrapper, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .slicer-container .slicer-content-wrapper, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .slicer-container .slicer-content-wrapper{-webkit-tap-highlight-color:transparent}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row{display:inline-block;margin-top:8px;min-width:50px;max-width:90%}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCheckbox, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCheckbox, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCheckbox, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCheckbox{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCheckbox.selected+.slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCheckbox.selected+.slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCheckbox.selected+.slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCheckbox.selected+.slicerText{background-color:transparent;color:var(--fluentThemeNeutralDarkColor);border-color:var(--fluentThemeNeutralDarkColor);border-width:3px!important;font-weight:600!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCountText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerCountText, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCountText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerCountText{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerText, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerText{padding:10px;border-radius:100px;background-color:transparent;text-align:center;color:var(--fluentThemeNeutralDarkColor);border-width:1px!important;border-style:solid!important;border-color:var(--fluentThemeGrayRat);font-family:inherit!important;font-size:inherit!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerItemContainer, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerItemContainer, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerItemContainer, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerItemContainer{padding:2px 0 0 10px;height:44px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-date-picker, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-date-picker{width:initial}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .mat-select, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .mat-select{margin:0 8px 2px;width:100px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker input, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker input{border-radius:4px!important;border:1px solid var(--fluentThemeNeutralTertiaColor);height:32px;padding-top:8px;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .time-picker-body-item:last-child, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .time-picker-body-item:last-child{padding-top:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .time-picker-body-item:first-child, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker .time-picker-body-item:first-child{padding-bottom:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker button, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     pbi-time-picker button{color:var(--fluentThemeNeutralSecondaryAltColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchHeader, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchHeader{height:32px;border:0;border-bottom:1px solid var(--fluentThemeNeutralTertiaColor);border-radius:2px;color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchHeader, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchHeader{background-color:var(--fluentThemeWhiteColor)!important;margin-bottom:10px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchIcon, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchIcon{transform:rotateY(-180deg);margin:auto 30px auto auto;position:absolute;right:0px;color:var(--fluentThemeNeutralSecondaryColor)!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput{background:none;color:var(--fluentThemeNeutralDarkColor);height:100%;margin:auto 0;padding:0 30px 0 8px;z-index:2;border-radius:initial;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput::-webkit-input-placeholder, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput::-webkit-input-placeholder{color:var(--fluentThemeNeutralSecondaryAltColor);font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker{margin-bottom:15px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker .datePickerSelector, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker .datePickerSelector{background-color:var(--fluentThemeWhiteColor);color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker .datePickerSelector .condition-value, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker .datePickerSelector .condition-value{border:0px;border-bottom:1px solid var(--fluentThemeNeutralTertiaColor);width:220px;color:inherit;background:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker input, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker input{height:32px;border:0;border-radius:2px;padding:0 8px;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker input[type=text]::-webkit-input-placeholder, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datePicker input[type=text]::-webkit-input-placeholder{color:inherit;opacity:.5}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table{margin-top:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table button, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table button{margin-left:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .applyFilter, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .applyFilter{height:32px;font-weight:500;padding:0 16px;margin:8px 0 24px;border-radius:4px;color:var(--fluentThemeNeutralDarkColor);border-width:2px;border-style:solid;border-color:var(--fluentThemeNeutralDarkColor);font-size:14px;letter-spacing:normal;font-weight:700;background-color:transparent;opacity:.35}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .applyFilter:enabled, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .applyFilter:enabled{opacity:1}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .cardFooter, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .cardFooter{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select{width:100%;padding-left:8px;-webkit-appearance:none;border-radius:4px;border:1px solid var(--fluentThemeNeutralTertiaryColor);display:initial;margin:4px 0;background:url(data:image/svg+xml;utf8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8%202.49707L3.93262%206.55762L3.31738%205.94238L8%201.25293L12.6826%205.94238L12.0674%206.55762L8%202.49707ZM8%2013.5029L12.0674%209.44238L12.6826%2010.0576L8%2014.7471L3.31738%2010.0576L3.93262%209.44238L8%2013.5029Z%22%20fill%3D%22%23201F1E%22%2F%3E%3C%2Fsvg%3E) center right 10px no-repeat var(--fluentThemeWhiteColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions{padding-right:35px;border:2px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions+.ui-selectmenu-button, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions+.ui-selectmenu-button{width:200px!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     input[type=number].ng-invalid, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     input[type=number].ng-invalid{border-color:var(--fluentThemeErrorDarkColor);color:var(--fluentThemeErrorDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterInputWarningBorder:not(.topNInputArea) input, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterInputWarningBorder:not(.topNInputArea) input, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterInputWarningBorder:not(.topNInputArea), .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterInputWarningBorder:not(.topNInputArea){border-color:var(--fluentThemeErrorDarkColor)!important;color:var(--fluentThemeErrorDarkColor)!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     *, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     *{font-size:14px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.expand[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.expand[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]{margin-right:20px;margin-left:unset}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-error[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-error[_ngcontent-%COMP%]{margin-right:20px;margin-left:unset}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-edit[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.pbi-glyph-edit[_ngcontent-%COMP%]{margin-right:20px;margin-left:unset}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]:before, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   button.collapse[_ngcontent-%COMP%]:before{content:"\\e76b"}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .controlPanel[_ngcontent-%COMP%]   button.clear[_ngcontent-%COMP%]{right:initial;left:28px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.expand[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.expand[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.collapse[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]   .filterCardTitleSection[_ngcontent-%COMP%]   .cardHeader[_ngcontent-%COMP%]   span.collapse[_ngcontent-%COMP%]{right:initial;left:0}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select-arrow, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .mat-select-arrow{padding-left:0}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerItemContainer, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisual .visibleGroup .row .slicerItemContainer, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerItemContainer, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .filterVisualModern .visibleGroup .row .slicerItemContainer{padding:2px 0 0 12px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchIcon, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchIcon{margin:auto auto auto 30px;right:initial;left:0}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .searchInput{padding:0 30px 0 10px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table button, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker table button{margin-right:8px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker .time-picker-body-item, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     .datetimePicker .time-picker-body-item{direction:ltr}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select{padding-right:8px;background:url(data:image/svg+xml;utf8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8%202.49707L3.93262%206.55762L3.31738%205.94238L8%201.25293L12.6826%205.94238L12.0674%206.55762L8%202.49707ZM8%2013.5029L12.0674%209.44238L12.6826%2010.0576L8%2014.7471L3.31738%2010.0576L3.93262%209.44238L8%2013.5029Z%22%20fill%3D%22%23201F1E%22%2F%3E%3C%2Fsvg%3E) center left 10px no-repeat var(--fluentThemeWhiteColor)}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions, html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     select.typeSwitchOptions{padding-left:35px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     input[type=number], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .filter.card[_ngcontent-%COMP%]     input[type=number]{text-align:right}*[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}']}),re}()},38281:function(Ve,se,t){t.d(se,{I:function(){return L}});var e=t(73637),n=t(30830),f=function(){function D(){var m=this;this.onClick=function(v){return m.onButtonClick(v)},this.onKeydown=function(v){return m.onButtonKeydown(v)},this.onDocumentMouseDown=function(v){m.popup.contains(v.target)||m.popupButton.contains(v.target)||m.close()}}return D.prototype.subscribe=function(m,v){this.popup=m,this.popupButton=v,this.popup.style.position="fixed",this.close(),this.popupButton.addEventListener("click",this.onClick),this.popupButton.addEventListener("keydown",this.onKeydown),document.addEventListener("mousedown",this.onDocumentMouseDown,!0)},D.prototype.unsubscribe=function(){this.popupButton.removeEventListener("click",this.onClick),this.popupButton.removeEventListener("keydown",this.onKeydown),document.removeEventListener("mousedown",this.onDocumentMouseDown,!0),this.close(),this.popup=void 0,this.popupButton=void 0},D.prototype.onButtonClick=function(m){this.togglePopup()},D.prototype.onButtonKeydown=function(m){switch(m.keyCode){case n.K5:this.open();break;case n.hY:this.close();break;default:return}m.preventDefault(),m.stopPropagation()},D.prototype.togglePopup=function(){this.closed?this.open():this.close()},D.prototype.open=function(){this.popup.style.display="block";var l,m=this.popup.getBoundingClientRect(),v=this.popupButton.getBoundingClientRect();this.popup.style.left=v.right-m.width+"px",l=v.bottom+m.height>window.innerHeight?Math.max(v.top-m.height,0):v.bottom,this.popup.style.top=l+"px",this.closed=!1},D.prototype.close=function(){this.popup.style.display="none",this.closed=!0},D}(),i=t(23196),O=t(18266),T=t(2174),V=t(78186),h=t(49524),M=t(85385),I=["button"],b=["popup"],P=["noIcon"],g=["icon"];function u(D,m){if(1&D&&e.\u0275\u0275element(0,"img",14),2&D){var v=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("src",v.selectedIcon.imageUrl,e.\u0275\u0275sanitizeUrl)}}function s(D,m){if(1&D&&e.\u0275\u0275element(0,"pbi-svg-use-symbol",15),2&D){var v=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("symbolId",v.selectedIcon.svgId)}}function p(D,m){if(1&D&&(e.\u0275\u0275elementStart(0,"div",11),e.\u0275\u0275template(1,u,1,1,"img",12),e.\u0275\u0275template(2,s,1,1,"pbi-svg-use-symbol",13),e.\u0275\u0275elementEnd()),2&D){var v=e.\u0275\u0275nextContext();e.\u0275\u0275attribute("aria-label",v.getIconDescription(v.selectedIcon)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!v.selectedIcon&&!!v.selectedIcon.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!v.selectedIcon&&!!v.selectedIcon.svgId)}}function C(D,m){if(1&D&&e.\u0275\u0275element(0,"img",14),2&D){var v=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("src",v.imageUrl,e.\u0275\u0275sanitizeUrl)}}function A(D,m){if(1&D&&e.\u0275\u0275element(0,"pbi-svg-use-symbol",15),2&D){var v=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("symbolId",v.svgId)}}function S(D,m){if(1&D){var v=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",16,17),e.\u0275\u0275listener("click",function(){var N=e.\u0275\u0275restoreView(v).$implicit,X=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(X.onIconClick(N))})("keydown",function(x){var X=e.\u0275\u0275restoreView(v).$implicit,ne=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ne.onIconKeydown(x,X))}),e.\u0275\u0275template(2,C,1,1,"img",12),e.\u0275\u0275template(3,A,1,1,"pbi-svg-use-symbol",13),e.\u0275\u0275elementEnd()}if(2&D){var l=m.$implicit,y=m.index,d=e.\u0275\u0275nextContext();e.\u0275\u0275property("title",d.getIconDescription(l)),e.\u0275\u0275attribute("key",y)("tabindex",0==y?0:-1)("aria-selected",d.selectedIconId===l.id)("aria-posinset",y+1)("aria-setsize",l.length)("data-unique-id","icon-"+l.id),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",!!l.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",!!l.svgId)}}var L=function(){function D(m,v,l){this.eventBridge=m,this.localizationService=v,this.itemPickerService=l,this.iconChanged=new e.EventEmitter,this.closed=new e.EventEmitter,this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager()}return D.prototype.ngOnInit=function(){var m=this;this.noIconLabel=this.localizationService.get("IconPicker_NoIcon"),this.subscriptionManager.subscribe(powerbi.events.visualThemeChanged,function(){return m.onVisualThemeChanged()}),this.updateIcons(),this.selectedIcon=this.icons.find(function(v){return v.id===m.selectedIconId})},D.prototype.ngAfterViewInit=function(){this.popupHandler=new f,this.popupHandler.subscribe(this.popup.nativeElement,this.headerButton.nativeElement)},D.prototype.ngOnDestroy=function(){this.popupHandler.unsubscribe(),this.subscriptionManager.unsubscribeAll()},D.prototype.onIconClick=function(m){this.selectIcon(m)},D.prototype.onIconKeydown=function(m,v){switch(m.keyCode){case n.hY:this.popupHandler.close();break;case n.K5:this.selectIcon(v);break;case n.Mf:this.noIcon.nativeElement.focus();break;case n.LH:case n.JH:case n.oh:case n.SV:this.focusOnNextIcon(m.keyCode,this.icons.indexOf(v))}m.preventDefault(),m.stopPropagation()},D.prototype.onNoPickClick=function(){this.selectIcon(void 0)},D.prototype.onNoPickKeyDown=function(m){switch(m.keyCode){case n.Mf:var v;v=m.shiftKey?this.icons.length-1:0,this.iconElementRefs.map(function(l){return l.nativeElement}).find(function(l){return l.getAttribute("key")===v.toString()}).focus();break;case n.K5:this.selectIcon(void 0)}m.preventDefault(),m.stopPropagation()},D.prototype.getIconDescription=function(m){if(m.description){if("string"==typeof m.description)return m.description;if(m.description.resourceKey)return this.localizationService.get(m.description.resourceKey)}},D.prototype.onVisualThemeChanged=function(){this.updateIcons()},D.prototype.updateIcons=function(){var m=_.cloneDeep(this.itemPickerService.getIcons());for(var v in this.icons=[],m){var l=m[v];l.id=v,this.icons.push(l)}},D.prototype.selectIcon=function(m){this.selectedIcon=m,this.selectedIconId=m?m.id:void 0,this.popupHandler.close(),this.iconChanged.emit(this.selectedIconId)},D.prototype.focusOnNextIcon=function(m,v){var l=this.getNextIconIndex(m,v);this.focusOnIconByIndex(l)},D.prototype.focusOnIconByIndex=function(m){this.getElementFromIndex(m).focus()},D.prototype.getElementFromIndex=function(m){return this.iconElementRefs.map(function(v){return v.nativeElement}).find(function(v){return v.getAttribute("key")===m.toString()})},D.prototype.getNextIconIndex=function(m,v){var d,w,l=v%D.columnCount,y=Math.floor(v/D.columnCount);return m===n.LH||m===n.JH?(d=l,w=this.getNextIndex(this.getColumnItemCount(l),y,m)):(m===n.oh||m===n.SV)&&(d=this.getNextIndex(this.getRowItemCount(y),l,m),w=y),this.getIndexFromPosition(d,w)},D.prototype.getRowItemCount=function(m){var v=this.icons.length;return m<Math.floor(v/D.columnCount)?D.columnCount:v%D.columnCount},D.prototype.getColumnItemCount=function(m){var v=this.icons.length/D.columnCount,l=Math.floor(v);return m<(v-l)*D.columnCount-1&&l++,l},D.prototype.getNextIndex=function(m,v,l){return l===n.SV||l===n.JH?v=++v>=m?0:v:(l===n.oh||l===n.LH)&&(v=--v<0?m-1:v),v},D.prototype.getIndexFromPosition=function(m,v){return m+v*D.columnCount},D.columnCount=10,D.\u0275fac=function(v){return new(v||D)(e.\u0275\u0275directiveInject(i.J),e.\u0275\u0275directiveInject(O.o),e.\u0275\u0275directiveInject(T.a))},D.\u0275cmp=e.\u0275\u0275defineComponent({type:D,selectors:[["icon-picker"]],viewQuery:function(v,l){if(1&v&&(e.\u0275\u0275viewQuery(I,7),e.\u0275\u0275viewQuery(b,7),e.\u0275\u0275viewQuery(P,7),e.\u0275\u0275viewQuery(g,5)),2&v){var y=void 0;e.\u0275\u0275queryRefresh(y=e.\u0275\u0275loadQuery())&&(l.headerButton=y.first),e.\u0275\u0275queryRefresh(y=e.\u0275\u0275loadQuery())&&(l.popup=y.first),e.\u0275\u0275queryRefresh(y=e.\u0275\u0275loadQuery())&&(l.noIcon=y.first),e.\u0275\u0275queryRefresh(y=e.\u0275\u0275loadQuery())&&(l.iconElementRefs=y)}},inputs:{selectedIconId:"selectedIconId",labelId:"labelId"},outputs:{iconChanged:"iconChanged",closed:"closed"},decls:13,vars:7,consts:[["role","button","tabindex","0",1,"popoutButton"],["button",""],["class","icon",4,"ngIf"],[1,"glyphicon","pbi-glyph-flickup","glyph-micro","dropdown-icon"],[1,"popup"],["popup",""],["role","listbox",1,"icon-container"],[1,"icon-container-scroll"],["class","icon","role","option",3,"title","click","keydown",4,"ngFor","ngForOf"],["tabindex","0",1,"noIcon",3,"click","keydown"],["noIcon",""],[1,"icon"],["role","presentation",3,"src",4,"ngIf"],["sheet","conditionalFormattingDialogIcons",3,"symbolId",4,"ngIf"],["role","presentation",3,"src"],["sheet","conditionalFormattingDialogIcons",3,"symbolId"],["role","option",1,"icon",3,"title","click","keydown"],["icon",""]],template:function(v,l){1&v&&(e.\u0275\u0275elementStart(0,"div",0,1),e.\u0275\u0275pipe(2,"localize"),e.\u0275\u0275template(3,p,3,3,"div",2),e.\u0275\u0275element(4,"i",3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(5,"div",4,5)(7,"div",6)(8,"div",7),e.\u0275\u0275template(9,S,4,9,"div",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(10,"div",9,10),e.\u0275\u0275listener("click",function(){return l.onNoPickClick()})("keydown",function(d){return l.onNoPickKeyDown(d)}),e.\u0275\u0275text(12),e.\u0275\u0275elementEnd()()()),2&v&&(e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(2,5,"Icon_Picker")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",!!l.selectedIconId),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngForOf",l.icons),e.\u0275\u0275advance(1),e.\u0275\u0275attribute("aria-selected",void 0===l.selectedIconId),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(l.noIconLabel))},dependencies:[V.NgForOf,V.NgIf,h.R,M.F],styles:["[_nghost-%COMP%]{display:flex;white-space:nowrap;user-select:none}.popoutButton[_ngcontent-%COMP%]{display:flex;width:44px;height:28px;margin-left:4px;background-color:var(--white-color, #FFF);border:1px solid var(--fluent-theme-neutral-dark-color, #201F1E);box-sizing:border-box}.popoutButton[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:relative}.dropdown-icon[_ngcontent-%COMP%]{margin-left:6px;margin-top:6px}.popup[_ngcontent-%COMP%]{position:fixed;color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39);background-color:var(--white-color, #FFF);box-shadow:0 4.8px 14.4px rgba(0,0,0,.11),0 25.6px 57.6px rgba(0,0,0,.13);font-size:12px;padding:5px;z-index:1}.icon-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.icon-container-scroll[_ngcontent-%COMP%]{overflow:auto;max-height:200px}.icon[_ngcontent-%COMP%]{margin-left:4px;margin-top:4px;width:16px;height:16px;float:left}.icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.noIcon[_ngcontent-%COMP%]{text-align:center}"],changeDetection:0}),D}()},85467:function(Ve,se,t){t.d(se,{Z:function(){return S}});var e=t(68704),n=t(96831),f=t(98864),i=t(18266),O=t(2174),T=t(80535),V=t(73637),h=t(23196),M=t(78186),I=t(35380),b=t(20113),P=t(82599),g=t(8178);function u(L,D){if(1&L&&V.\u0275\u0275element(0,"img"),2&L){var m=V.\u0275\u0275nextContext().$implicit;V.\u0275\u0275attribute("src",m.imageUrl,V.\u0275\u0275sanitizeUrl)}}function s(L,D){if(1&L&&V.\u0275\u0275element(0,"svg-use-symbol",10),2&L){var m=V.\u0275\u0275nextContext().$implicit;V.\u0275\u0275property("symbolId",m.svgId)}}function p(L,D){if(1&L&&(V.\u0275\u0275elementStart(0,"div",7),V.\u0275\u0275template(1,u,1,1,"img",8),V.\u0275\u0275template(2,s,1,1,"svg-use-symbol",9),V.\u0275\u0275elementEnd()),2&L){var m=D.$implicit;V.\u0275\u0275advance(1),V.\u0275\u0275property("ngIf",m.url),V.\u0275\u0275advance(1),V.\u0275\u0275property("ngIf",m.svgId)}}function C(L,D){if(1&L&&(V.\u0275\u0275elementStart(0,"div",5),V.\u0275\u0275template(1,p,3,2,"div",6),V.\u0275\u0275elementEnd()),2&L){var m=V.\u0275\u0275nextContext();V.\u0275\u0275advance(1),V.\u0275\u0275property("ngForOf",m.selectedIcons)}}function A(L,D){1&L&&V.\u0275\u0275element(0,"div",11)}var S=function(){function L(D,m,v,l,y,d){this.elementRef=D,this.eventBridge=m,this.injector=v,this.itemPickerService=l,this.localizationService=y,this.overlay=d}return L.prototype.ngOnInit=function(){var D=this;this.updateIconSets(),this.visibilityPicker=new f.X(!1),this.isPickerOpened$=this.visibilityPicker.asObservable(),this.iconSelected=new f.X(this.iconSetId),this.onIconSetSelected$=this.iconSelected.asObservable(),this.eventsSubscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(powerbi.events.visualThemeChanged,function(){D.iconSets=null,D.updateIconSets()})},L.prototype.ngOnDestroy=function(){this.overlayRef&&this.overlayRef.hasAttached()&&this.overlayRef.dispose(),this.eventsSubscriptionManager.unsubscribeAll()},L.prototype.setIcons=function(D){var m;this.iconSetId=D,this.selectedIcons=null===(m=this.iconSets[this.iconSetId])||void 0===m?void 0:m.icons,this.onIconSetSelected(D),this.iconSelected.next(D),this.overlayRef&&this.overlayRef.hasAttached()&&this.closePicker()},L.prototype.toggle=function(){this.overlayRef&&this.overlayRef.hasAttached()?this.closePicker():this.openIconPicker()},L.prototype.closePicker=function(){this.overlayRef.dispose(),this.onClose&&this.onClose(),this.visibilityPicker.next(!1)},L.prototype.updateIconSets=function(){var D;for(var m in this.iconSets=this.itemPickerService.getIconSets(),this.icons=this.itemPickerService.getIcons(),this.iconSets){var v=this.iconSets[m];v.icons=[];for(var l=0,y=v.iconIds;l<y.length;l++)v.icons.push(this.icons[y[l]])}this.selectedIcons=null===(D=this.iconSets[this.iconSetId])||void 0===D?void 0:D.icons},L.prototype.openIconPicker=function(){var D=this;if(!this.isDisabled){var m=this.overlay.position().flexibleConnectedTo(this.elementRef).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"}]);this.overlayRef=this.overlay.create({width:"262px",height:"360px",hasBackdrop:!0,backdropClass:"invisible-backdrop",positionStrategy:m});var v=new WeakMap;v.set(this.itemPickerService,O.a),v.set(this.localizationService,i.o),v.set(n.Iu,this.overlayRef);var l=new e.nK(this.injector,v),y=new e.C5(T.V,null,l),d=this.overlayRef.attach(y);d.instance.labelId=this.labelId,d.instance.iconSetId=this.iconSetId,d.instance.iconSets=this.iconSets,d.instance.onClose=this.onClose,this.overlayRef.backdropClick().subscribe(function(w){return D.closePicker()}),d.instance.iconSetChanged.subscribe(function(w){return D.setIcons(w)}),this.visibilityPicker.next(!0)}},L.\u0275fac=function(m){return new(m||L)(V.\u0275\u0275directiveInject(V.ElementRef),V.\u0275\u0275directiveInject(h.J),V.\u0275\u0275directiveInject(V.Injector),V.\u0275\u0275directiveInject(O.a),V.\u0275\u0275directiveInject(i.o),V.\u0275\u0275directiveInject(n.aV))},L.\u0275cmp=V.\u0275\u0275defineComponent({type:L,selectors:[["icon-set-picker-input"]],inputs:{isDisabled:"isDisabled",labelId:"labelId",iconSetId:"iconSetId",onIconSetSelected:"onIconSetSelected",onClose:"onClose"},decls:6,vars:8,consts:[["role","combobox",1,"iconSetPicker",3,"tabindex","accessible-click"],[1,"iconsetpicker-anchor"],["class","selectedIconSet",4,"ngIf"],["class","iconSet-custom","localize","ConditionalFormattingDialog_RuleBased_IconStyleCustom",4,"ngIf"],["name","flickup","size","micro",1,"iconSetPicker-icon"],[1,"selectedIconSet"],["class","iconSet-icon",4,"ngFor","ngForOf"],[1,"iconSet-icon"],[4,"ngIf"],["class","iconSvg","sheet","conditionalFormattingDialogIcons",3,"symbolId",4,"ngIf"],["sheet","conditionalFormattingDialogIcons",1,"iconSvg",3,"symbolId"],["localize","ConditionalFormattingDialog_RuleBased_IconStyleCustom",1,"iconSet-custom"]],template:function(m,v){1&m&&(V.\u0275\u0275elementStart(0,"div",0),V.\u0275\u0275listener("accessible-click",function(){return v.toggle()}),V.\u0275\u0275pipe(1,"async"),V.\u0275\u0275elementStart(2,"div",1),V.\u0275\u0275template(3,C,2,1,"div",2),V.\u0275\u0275template(4,A,1,0,"div",3),V.\u0275\u0275element(5,"pbi-icon",4),V.\u0275\u0275elementEnd()()),2&m&&(V.\u0275\u0275propertyInterpolate("tabindex",v.isDisabled?-1:0),V.\u0275\u0275attribute("aria-labelledby",v.labelId)("aria-expanded",!!V.\u0275\u0275pipeBind1(1,6,v.isPickerOpened$))("aria-disabled",!!v.isDisabled),V.\u0275\u0275advance(3),V.\u0275\u0275property("ngIf",v.iconSetId),V.\u0275\u0275advance(1),V.\u0275\u0275property("ngIf",!v.iconSetId))},dependencies:[M.NgForOf,M.NgIf,I.X,b.t,P._,g.k,M.AsyncPipe],styles:["[_nghost-%COMP%]{height:28px}.iconSetPicker[_ngcontent-%COMP%]{position:relative;border:1px solid var(--black-color, #000);box-sizing:border-box;width:262px;margin-top:0;height:28px;padding-left:8px;vertical-align:middle;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.iconsetpicker-anchor[_ngcontent-%COMP%]{display:flex;align-items:center}.iconsetpicker-anchor[_ngcontent-%COMP%]   .selectedIconSet[_ngcontent-%COMP%]{display:inline-block;width:226px;overflow:hidden}.iconsetpicker-anchor[_ngcontent-%COMP%]   .iconSet-custom[_ngcontent-%COMP%]{display:inline-block;margin:4px}.iconsetpicker-anchor[_ngcontent-%COMP%]   .iconSetPicker-icon[_ngcontent-%COMP%]{position:absolute;margin-top:3px;margin-right:10px;right:0}  .iconSet-icon{display:inline-block;margin:6px;width:16px;height:16px}  .iconSet-icon img{max-width:100%;max-height:100%}"]}),L}()},80535:function(Ve,se,t){t.d(se,{V:function(){return s}});var e=t(73637),n=t(30830),f=t(18266),i=t(96831),O=t(78186),T=t(20113),V=t(8178),h=t(85385),M=["popup"],I=["icons"];function b(C,A){if(1&C&&e.\u0275\u0275element(0,"img"),2&C){var S=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275attribute("src",S.imageUrl,e.\u0275\u0275sanitizeUrl)}}function P(C,A){if(1&C&&e.\u0275\u0275element(0,"svg-use-symbol",12),2&C){var S=e.\u0275\u0275nextContext().$implicit;e.\u0275\u0275property("symbolId",S.svgId)}}function g(C,A){if(1&C&&(e.\u0275\u0275elementStart(0,"div",9),e.\u0275\u0275template(1,b,1,1,"img",10),e.\u0275\u0275template(2,P,1,1,"svg-use-symbol",11),e.\u0275\u0275elementEnd()),2&C){var S=A.$implicit;e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",S.url),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",S.svgId)}}function u(C,A){if(1&C){var S=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",6,7),e.\u0275\u0275listener("keydown",function(l){var d=e.\u0275\u0275restoreView(S).index,w=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(w.onIconSetKeyDown(l,d))})("accessible-click",function(l){var d=e.\u0275\u0275restoreView(S).$implicit,w=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(w.iconSetSelected(l,d.key))}),e.\u0275\u0275template(2,g,3,2,"div",8),e.\u0275\u0275elementEnd()}if(2&C){var L=A.$implicit,D=A.index,m=e.\u0275\u0275nextContext();e.\u0275\u0275propertyInterpolate("tabindex",0===D?0:-1),e.\u0275\u0275attribute("aria-posinset",D+1)("key",D)("aria-label",m.ariaLabels[L.key]),e.\u0275\u0275advance(2),e.\u0275\u0275property("ngForOf",L.value.icons)}}var s=function(){function C(A,S){this.localizationService=A,this.overlayRef=S,this.iconSetChanged=new e.EventEmitter}return C.prototype.ngOnInit=function(){this.ariaLabels={};for(var A=0,S=Object.keys(this.iconSets);A<S.length;A++){var L=S[A];this.ariaLabels[L]=this.setAriaLabel(this.iconSets[L])}},C.prototype.ngAfterViewInit=function(){this.focusManager=new p(this.iconElementRefs,Object.keys(this.iconSets).length),this.focusManager.focusFirstIcon()},C.prototype.setIcons=function(A){this.iconSetId=A},C.prototype.iconSetSelected=function(A,S){this.setIcons(S),this.iconSetChanged.emit(S),A.preventDefault(),A.stopPropagation()},C.prototype.close=function(){this.overlayRef.dispose(),this.onClose&&this.onClose()},C.prototype.onIconSetKeyDown=function(A,S){A.keyCode===n.hY?this.close():this.focusManager.onIconSetKeyDown(A,S),A.preventDefault(),A.stopPropagation()},C.prototype.setAriaLabel=function(A){for(var S="",L=0,D=A.icons;L<D.length;L++){var m=D[L];S+=this.localizationService.get("string"==typeof m.description?m.description:m.description.resourceKey)+", "}return S},C.\u0275fac=function(S){return new(S||C)(e.\u0275\u0275directiveInject(f.o),e.\u0275\u0275directiveInject(i.Iu))},C.\u0275cmp=e.\u0275\u0275defineComponent({type:C,selectors:[["icon-set-picker"]],viewQuery:function(S,L){if(1&S&&(e.\u0275\u0275viewQuery(M,7),e.\u0275\u0275viewQuery(I,5,e.ElementRef)),2&S){var D=void 0;e.\u0275\u0275queryRefresh(D=e.\u0275\u0275loadQuery())&&(L.popup=D.first),e.\u0275\u0275queryRefresh(D=e.\u0275\u0275loadQuery())&&(L.iconElementRefs=D)}},inputs:{labelId:"labelId",iconSetId:"iconSetId",iconSets:"iconSets",onClose:"onClose"},outputs:{iconSetChanged:"iconSetChanged"},decls:8,vars:6,consts:[[1,"popup","themeableElement"],["popup",""],[1,"iconSet-flyout"],["role","listbox",1,"iconSet-container"],[1,"iconSet-container-scroll"],["class","iconSet","role","option",3,"tabindex","keydown","accessible-click",4,"ngFor","ngForOf"],["role","option",1,"iconSet",3,"tabindex","keydown","accessible-click"],["icons",""],["class","iconSet-icon",4,"ngFor","ngForOf"],[1,"iconSet-icon"],[4,"ngIf"],["class","iconSvg","sheet","conditionalFormattingDialogIcons",3,"symbolId",4,"ngIf"],["sheet","conditionalFormattingDialogIcons",1,"iconSvg",3,"symbolId"]],template:function(S,L){1&S&&(e.\u0275\u0275elementStart(0,"div",0,1)(2,"div",2)(3,"div",3),e.\u0275\u0275pipe(4,"localize"),e.\u0275\u0275elementStart(5,"div",4),e.\u0275\u0275template(6,u,3,5,"div",5),e.\u0275\u0275pipe(7,"keyvalue"),e.\u0275\u0275elementEnd()()()()),2&S&&(e.\u0275\u0275advance(3),e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(4,2,"Icon_Picker")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngForOf",e.\u0275\u0275pipeBind1(7,4,L.iconSets)))},dependencies:[O.NgForOf,O.NgIf,T.t,V.k,O.KeyValuePipe,h.F],styles:["[_nghost-%COMP%]{position:relative}.popup[_ngcontent-%COMP%]{position:fixed;color:var(--fluent-theme-neutral-primary-alt-color, #3B3A39);background-color:var(--white-color, #FFF);box-shadow:var(--fluent-shadow-depth64, 0 25.6px 57.6px 0 rgba(0, 0, 0, .22), 0 4.8px 14.4px 0 rgba(0, 0, 0, .18));font-size:12px}.iconSet-container[_ngcontent-%COMP%]{overflow-y:auto;max-height:360px}.iconSet-flyout[_ngcontent-%COMP%]{width:262px;margin-left:0}.iconSet[_ngcontent-%COMP%]{padding-left:8px}.iconSet[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}"]}),C}(),p=function(){function C(A,S){this.iconElementRefs=A,this.totalIconSets=S}return C.prototype.onIconSetKeyDown=function(A,S){switch(A.keyCode){case n.Mf:this.focusOnNextIcon(A.shiftKey?n.LH:n.JH,S);break;case n.LH:case n.JH:case n.oh:case n.SV:this.focusOnNextIcon(A.keyCode,S)}},C.prototype.focusFirstIcon=function(){this.getElementFromIndex(0).focus()},C.prototype.focusOnNextIcon=function(A,S){var L=this.getNextColorIndex(A,S);this.getElementFromIndex(L).focus()},C.prototype.getElementFromIndex=function(A){return this.iconElementRefs.map(function(S){return S.nativeElement}).find(function(S){return S.getAttribute("key")===A.toString()})},C.prototype.getNextColorIndex=function(A,S){return(S+(A===n.JH||A===n.SV?1:-1)+this.totalIconSets)%this.totalIconSets},C}()},48234:function(Ve,se,t){t.d(se,{O:function(){return m}});var e=t(73637),n=t(29494),f=t(23196),i=t(25991),O=t(32130),T=t(33874),V=t(26092),h=t(18266),M=t(15338),I=t(14096),b=t(78186),P=t(81996),g=powerbi.explore.services.createVisualHostServices,u=powerbi.data.DataViewObjectDefinitions,s=powerbi.explore.services.events,p=powerbi.data.SemanticFilter,C=powerbi.data.SemanticQuery,A=powerbi.data.SQExprBuilder,S=powerbi.explore.util.VisualContainerUtils,L=powerbi.explore.contracts.VisualQuery;function D(v,l){if(1&v&&e.\u0275\u0275element(0,"single-visual-host",3),2&v){var y=e.\u0275\u0275nextContext();e.\u0275\u0275property("visual",y.visual)("visualViewport",y.viewport)("themeCollection",y.themeCollection)("config",y.singleVisualHostConfig)}}var m=function(){function v(l,y,d,w,x,N,X,ne,Ce){var he=this;this.eventBridge=l,this.explorationNavigation=y,this.filterGenerator=d,this.geocoder=w,this.geolocationService=x,this.localizationService=N,this.moduleLoader=X,this.promiseFactory=ne,this.visualHostTooltipServiceFactory=Ce,this.modelChange=new e.EventEmitter,this.queryError=new e.EventEmitter,this.slicerWidth=146,this.slicerHeight=28,this.singleVisualHostConfig={notifyStart:_.noop,notifyEnd:_.noop,clearQueryErrors:_.noop,handleQueryErrors:function(fe){return he.handleQueryErrors(fe)},handleQueryWarnings:_.noop,queryVisualHostServices:{getFilters:function(){if(he.filter){for(var fe=new powerbi.explore.services.FilterBuilder,pe=0,ge=p.unmerge(he.filter);pe<ge.length;pe++)fe.addVisualFilter({filter:ge[pe]});return fe.getFilters()}},getDataSourceVariables:function(){var fe=he.explorationNavigation.getCurrentExploration();return null==fe?void 0:fe.dataSourceVariables},disableAnchorTime:!0},visualHostServices:powerbi.Prototype.inherit(g({geocoder:this.geocoder,geolocation:this.geolocationService,localizationService:this.localizationService,moduleLoader:this.moduleLoader,promiseFactory:this.promiseFactory,visualHostTooltipService:this.visualHostTooltipServiceFactory.create()}),function(Fe){Fe.persistProperties=function(fe){return he.persistProperties(fe)},Fe.getLocalizedString=function(fe){return he.getLocalizedString(fe)}}),interactivityOptions:{selection:!0},additionalObjectUpdates:void 0,disableQueryCacheUpdates:!1,noLoadMore:!1},this.viewport={width:this.slicerWidth,height:this.slicerHeight,scale:1},this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(powerbi.events.visualThemeChanged,function(){return he.updateTheme()})}return v.prototype.ngOnInit=function(){this.updateTheme(),this.createVisualContainer(),this.isInitialized=!0},v.prototype.ngOnChanges=function(l){if(this.isInitialized){if(l.filter&&!p.isSameFilter(l.filter.currentValue,l.filter.previousValue)){var d=this.createQuery(this.field,l.filter.currentValue);this.visual.config.singleVisual.query=d,this.triggerChanges()}l.field&&(d=this.createQuery(l.field.currentValue,this.filter),this.visual.config.singleVisual.query=d,l.selectedValue||this.setFilterObject(this.visual,void 0),this.triggerChanges()),l.selectedValue&&(this.setFilterObject(this.visual,l.selectedValue.currentValue),this.triggerChanges())}},v.prototype.ngOnDestroy=function(){this.subscriptionManager&&(this.subscriptionManager.unsubscribeAll(),this.subscriptionManager=null)},v.prototype.createVisualContainer=function(){if(this.field){var l={},y=powerbi.visuals.slicerProps.data.mode,d=powerbi.visuals.slicerProps.selection.selectAllCheckboxEnabled,w=powerbi.visuals.slicerProps.selection.singleSelect,x=powerbi.visuals.slicerProps.header.show,N=powerbi.visuals.slicerProps.items.textSize;u.setValue(l,y,null,A.text(this.mode)),u.setValue(l,d,null,A.boolean(!1)),u.setValue(l,w,null,A.boolean(!0)),u.setValue(l,x,null,A.boolean(!1)),u.setValue(l,N,null,A.integer(powerbi.explore.constants.smallFontSizeInPoint)),this.visualName=jsCommon.Utility.generateGuid();var X={name:this.visualName,config:{singleVisual:{visualType:powerbi.visuals.plugins.slicer.name,objects:l}}},ne=this.createQuery(this.field,this.filter);X.config.singleVisual.query=ne,this.selectedValue&&this.setFilterObject(X,this.selectedValue),this.visual=X}},v.prototype.persistProperties=function(l){var w,y=this.filterGenerator.tryGetFilterPropertyIdentifier(powerbi.visuals.plugins.slicer.capabilities),d=_.isArray(l)?{merge:l}:l;d&&!_.isEmpty(d.merge)&&(w=_.find(d.merge,function(N){return N.objectName===y.objectName}).properties[y.propertyName]),this.setFilterObject(this.visual,w),this.triggerChanges(),this.modelChange.emit({field:this.field,filter:w})},v.prototype.getLocalizedString=function(l){return this.localizationService.get("All"===l?"InstancePicker_Slicer_Restatement_All":l)},v.prototype.handleQueryErrors=function(l){this.queryError.emit(l)},v.prototype.createQuery=function(l,y){var d=new L(C.create(),{},[]);return d.add(l,powerbi.visuals.slicerRoles.value),y&&(d.defn=d.defn.where(y.where(),y.from())),d},v.prototype.setFilterObject=function(l,y){var d=this.filterGenerator.tryGetFilterPropertyIdentifier(powerbi.visuals.plugins.slicer.capabilities),w=S.getObjectDefinitions(l);y?u.setValue(w,d,null,y):u.deleteProperty(w,d.objectName,null,d.propertyName)},v.prototype.triggerChanges=function(){var l=this;this.eventBridge.publishToChannel(s.visualContainerChanged,{affectContainer:function(d){return d.name===l.visualName}})},v.prototype.updateTheme=function(){var l=this.explorationNavigation.getCurrentExploration();this.themeCollection=null==l?void 0:l.themeCollection},v.\u0275fac=function(y){return new(y||v)(e.\u0275\u0275directiveInject(f.J),e.\u0275\u0275directiveInject(i.z),e.\u0275\u0275directiveInject(O.r),e.\u0275\u0275directiveInject(T.iS),e.\u0275\u0275directiveInject(V._1),e.\u0275\u0275directiveInject(h.o),e.\u0275\u0275directiveInject(M.m),e.\u0275\u0275directiveInject(n.t),e.\u0275\u0275directiveInject(I.q))},v.\u0275cmp=e.\u0275\u0275defineComponent({type:v,selectors:[["instance-picker-modern"]],inputs:{mode:"mode",filter:"filter",field:"field",selectedValue:"selectedValue"},outputs:{modelChange:"modelChange",queryError:"queryError"},features:[e.\u0275\u0275NgOnChangesFeature],decls:3,vars:1,consts:[[1,"instancePicker"],[1,"singleVisualHostContainer"],[3,"visual","visualViewport","themeCollection","config",4,"ngIf"],[3,"visual","visualViewport","themeCollection","config"]],template:function(y,d){1&y&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1),e.\u0275\u0275template(2,D,1,4,"single-visual-host",2),e.\u0275\u0275elementEnd()()),2&y&&(e.\u0275\u0275advance(2),e.\u0275\u0275property("ngIf",d.field&&d.visual&&d.singleVisualHostConfig))},dependencies:[b.NgIf,P.v],styles:[".instancePicker[_ngcontent-%COMP%]   .singleVisualHostContainer[_ngcontent-%COMP%]{position:relative}.instancePicker[_ngcontent-%COMP%]   .singleVisualHostContainer[_ngcontent-%COMP%]   single-visual-host[_ngcontent-%COMP%]     visual-modern{width:100%}"]}),v}()},77890:function(Ve,se,t){t.d(se,{s:function(){return u}});var e=t(7005),n=t(73637),f=t(18266),i=t(78186),O=t(20113),T=t(65909),V=powerbi.visuals.FontProperties,h=powerbi.Promise;function M(s,p){if(1&s){var C=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mobile-tooltip-child-menu",3),n.\u0275\u0275listener("onHide",function(){n.\u0275\u0275restoreView(C);var L=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(L.onHide)}),n.\u0275\u0275elementEnd()}if(2&s){var A=n.\u0275\u0275nextContext();n.\u0275\u0275property("commandsMenu",A.childMenu)("actionIconStyle",A.styles.actionIconStyle)("actionTitleStyle",A.styles.actionTitleStyle)}}function I(s,p){if(1&s&&n.\u0275\u0275element(0,"hr",4),2&s){var C=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",C.styles.dividerStyle)}}var b=function(p,C){return[p,C]};function P(s,p){if(1&s){var C=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",7),n.\u0275\u0275listener("accessible-click",function(){var m=n.\u0275\u0275restoreView(C).$implicit,v=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(v.execute(m.command))}),n.\u0275\u0275element(1,"div",8),n.\u0275\u0275elementStart(2,"div",9),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()}if(2&s){var A=p.$implicit,S=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("disabled",!A.enabled),n.\u0275\u0275attribute("aria-label",A.command.title(S.localizationService)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(6,b,A.command.glyph,A.command.title().toLowerCase()))("ngStyle",S.styles.actionIconStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",S.styles.actionTitleStyle),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(A.command.title(S.localizationService))}}function g(s,p){if(1&s&&(n.\u0275\u0275elementStart(0,"div",5),n.\u0275\u0275template(1,P,4,9,"button",6),n.\u0275\u0275elementEnd()),2&s){var C=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",C.commands)}}var u=function(){function s(p){this.localizationService=p,this.onHide=new n.EventEmitter,this.showChildMenu=new n.EventEmitter,this.styles={dividerStyle:{},actionTitleStyle:{},actionIconStyle:{}}}return s.prototype.ngOnChanges=function(p){(p.tooltipShown&&p.tooltipShown.currentValue||this.tooltipShown&&p.identities&&p.identities.currentValue)&&(this.childMenu=void 0,this.commands=this.getCommands()),this.setupStyle()},s.prototype.hide=function(){this.childMenu=void 0,this.showChildMenu.emit({show:!1}),this.onHide.emit()},s.prototype.execute=function(p){return(0,e.mG)(this,void 0,h,function(){var C;return(0,e.Jh)(this,function(A){switch(A.label){case 0:return[4,p.getChildren()];case 1:return C=A.sent(),_.isEmpty(C)?[3,2]:(this.toggleChildMenu(C),[3,4]);case 2:return p.execute?[4,p.execute()]:[3,4];case 3:A.sent(),this.hide(),A.label=4;case 4:return[2]}})})},s.prototype.toggleChildMenu=function(p){this.childMenu=this.childMenu?void 0:p,this.showChildMenu.emit({show:!!this.childMenu})},s.prototype.getCommands=function(){return this.actionsProvider&&this.actionsProvider.updateAndGetTooltipCommands()},s.prototype.setupStyle=function(){var p=this.tooltipStyle;if(p){if(p.actionFontProperties){var C=V.toHTMLStyle(p.actionFontProperties);this.styles.actionIconStyle.color=C.color,this.styles.actionTitleStyle.color=C.color,this.styles.actionTitleStyle["font-family"]=C["font-family"]}this.styles.dividerStyle["background-color"]=p.dividerColor,this.styles.dividerStyle.opacity=null!=p.transparency?1-p.transparency/100:1}},s.\u0275fac=function(C){return new(C||s)(n.\u0275\u0275directiveInject(f.o))},s.\u0275cmp=n.\u0275\u0275defineComponent({type:s,selectors:[["mobile-tooltip-actions"]],inputs:{actionsProvider:"actionsProvider",identities:"identities",tooltipShown:"tooltipShown",tooltipStyle:"tooltipStyle"},outputs:{onHide:"onHide",showChildMenu:"showChildMenu"},features:[n.\u0275\u0275NgOnChangesFeature],decls:3,vars:3,consts:[[3,"commandsMenu","actionIconStyle","actionTitleStyle","onHide",4,"ngIf"],["class","tooltip-divider",3,"ngStyle",4,"ngIf"],["class","mobile-tooltip-actions-container",4,"ngIf"],[3,"commandsMenu","actionIconStyle","actionTitleStyle","onHide"],[1,"tooltip-divider",3,"ngStyle"],[1,"mobile-tooltip-actions-container"],["class","action-button",3,"disabled","accessible-click",4,"ngFor","ngForOf"],[1,"action-button",3,"disabled","accessible-click"],[1,"glyphicon",3,"ngClass","ngStyle"],[1,"title",3,"ngStyle"]],template:function(C,A){1&C&&(n.\u0275\u0275template(0,M,1,3,"mobile-tooltip-child-menu",0),n.\u0275\u0275template(1,I,1,1,"hr",1),n.\u0275\u0275template(2,g,2,1,"div",2)),2&C&&(n.\u0275\u0275property("ngIf",!!A.childMenu),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==A.commands?null:A.commands.length),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",null==A.commands?null:A.commands.length))},dependencies:[i.NgClass,i.NgForOf,i.NgIf,i.NgStyle,O.t,T.d],styles:[".tooltip-divider[_ngcontent-%COMP%]{width:100%;height:1px;border:none;margin:0}.mobile-tooltip-actions-container[_ngcontent-%COMP%]{pointer-events:auto;height:48px;opacity:.87;display:flex;flex-direction:row;justify-content:flex-start}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover, .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus{padding:0;border:none;background-color:transparent;width:80px;height:48px;margin-left:4px;color:#e1e1e1}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover   .glyphicon[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus   .glyphicon[_ngcontent-%COMP%]{width:20px;height:20px;font-size:20px;margin-top:4px;color:#e1e1e1}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%], .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .action-button[_ngcontent-%COMP%]:focus   .title[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:10px}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   .glyphicon[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertiary-color, #A19F9D)!important;touch-action:none}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   .title[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-tertiary-color, #A19F9D)!important}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-left:auto}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .mobile-tooltip-actions-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:focus{margin-left:auto}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{width:16px;height:16px;font-size:16px;margin-top:0}.mobile-tooltip-actions-container[_ngcontent-%COMP%]   .hide-action-button[_ngcontent-%COMP%]{display:none}"]}),s}()},65909:function(Ve,se,t){t.d(se,{d:function(){return b}});var e=t(7005),n=t(73637),f=t(33714),i=t(78186),O=t(20113),T=t(80338);function V(P,g){if(1&P){var u=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",2),n.\u0275\u0275listener("accessible-click",function(){n.\u0275\u0275restoreView(u);var C=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(C.back())}),n.\u0275\u0275element(1,"tri-svg-icon",3),n.\u0275\u0275elementStart(2,"label",4),n.\u0275\u0275text(3),n.\u0275\u0275elementEnd()()}if(2&P){var s=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",s.actionIconStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",s.actionTitleStyle),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(s.commandsMenuTitle)}}function h(P,g){if(1&P&&n.\u0275\u0275element(0,"tri-svg-icon",8),2&P){var u=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",u.actionIconStyle)}}function M(P,g){if(1&P&&n.\u0275\u0275element(0,"div",9),2&P){var u=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",u.actionIconStyle)}}function I(P,g){if(1&P){var u=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275elementStart(1,"button",2),n.\u0275\u0275listener("accessible-click",function(){var S=n.\u0275\u0275restoreView(u).$implicit,L=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(L.execute(S))}),n.\u0275\u0275template(2,h,1,1,"tri-svg-icon",5),n.\u0275\u0275elementStart(3,"label",6),n.\u0275\u0275text(4),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(5,M,1,1,"div",7),n.\u0275\u0275elementEnd(),n.\u0275\u0275elementContainerEnd()}if(2&P){var s=g.$implicit,p=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",p.isNewMobileTooltip),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",p.actionTitleStyle),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(s.title()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!p.isNewMobileTooltip)}}var b=function(){function P(g){this.featureSwitchService=g,this.actionIconStyle={},this.actionTitleStyle={},this.onHide=new n.EventEmitter,this.onBack=new n.EventEmitter}return Object.defineProperty(P.prototype,"isNewMobileTooltip",{get:function(){return this.featureSwitchService.featureSwitches.newMobileTooltip},enumerable:!1,configurable:!0}),P.prototype.execute=function(g){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var u;return(0,e.Jh)(this,function(s){switch(s.label){case 0:return[4,g.getChildren()];case 1:return u=s.sent(),_.isEmpty(u)?[3,2]:(this.commandsMenu=u,[3,4]);case 2:return g.execute?[4,g.execute()]:[3,4];case 3:s.sent(),this.onHide.emit(),s.label=4;case 4:return[2]}})})},P.prototype.back=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(g){return this.onBack.emit(),[2]})})},P.\u0275fac=function(u){return new(u||P)(n.\u0275\u0275directiveInject(f.vZ))},P.\u0275cmp=n.\u0275\u0275defineComponent({type:P,selectors:[["mobile-tooltip-child-menu"]],inputs:{commandsMenu:"commandsMenu",commandsMenuTitle:"commandsMenuTitle",actionIconStyle:"actionIconStyle",actionTitleStyle:"actionTitleStyle"},outputs:{onHide:"onHide",onBack:"onBack"},decls:2,vars:2,consts:[["class","child-action",3,"accessible-click",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"child-action",3,"accessible-click"],["tri-svg-icon-20","","name","chevron_left_20_regular","sprite","fluentui-icons",1,"title-icon-20",3,"ngStyle"],[1,"label","title-label",3,"ngStyle"],["tri-svg-icon-20","","name","document_20_regular","sprite","fluentui-icons","class","item-icon-20",3,"ngStyle",4,"ngIf"],[1,"label","trimmedTextWithEllipsis",3,"ngStyle"],["class","chevron glyphicon pbi-glyph-chevronrightmedium",3,"ngStyle",4,"ngIf"],["tri-svg-icon-20","","name","document_20_regular","sprite","fluentui-icons",1,"item-icon-20",3,"ngStyle"],[1,"chevron","glyphicon","pbi-glyph-chevronrightmedium",3,"ngStyle"]],template:function(u,s){1&u&&(n.\u0275\u0275template(0,V,4,3,"button",0),n.\u0275\u0275template(1,I,6,4,"ng-container",1)),2&u&&(n.\u0275\u0275property("ngIf",s.isNewMobileTooltip),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",s.commandsMenu))},dependencies:[i.NgForOf,i.NgIf,i.NgStyle,O.t,T.M],styles:["@media (orientation: landscape){.tooltip-container.truncate-tooltip-height.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%], .tooltip-container.truncate-tooltip-height.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]{max-height:80px}}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]{height:auto;max-height:160px;background-color:transparent}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]:first-child, .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]:first-child{margin:0 10px 0 0;padding:6px 0 2px;font-weight:700}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]{justify-content:left;margin:0 10px;padding:6px 0 6px 11px;border:none}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .title-label[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .title-label[_ngcontent-%COMP%]{padding-left:2px}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .title-icon-20[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .title-icon-20[_ngcontent-%COMP%]{margin:4px 0 0 2px;width:20px;height:20px}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{max-width:200px}.tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .item-icon-20[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip   .visual-tooltip-mobile   [_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .item-icon-20[_ngcontent-%COMP%]{padding:4px 15px 4px 0}[_nghost-%COMP%]{display:flex;flex-direction:column;height:100px;overflow-y:auto}[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]{display:flex;justify-content:space-between;min-height:40px;background-color:transparent;border:none;border-bottom:1px solid var(--fluent-theme-neutral-quarter-alt-color, #E1DFDD);padding:12px 56px 12px 16px}[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-lighter-color, #F3F2F1);font-size:12px;font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;padding-top:4px}[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .title-icon-20[_ngcontent-%COMP%]{float:right;fill:var(--fluent-theme-neutral-lighter-color, #F3F2F1);width:16px;height:16px;font-size:14px;margin:auto 0}[_nghost-%COMP%]   .child-action[_ngcontent-%COMP%]   .chevron[_ngcontent-%COMP%]{font-size:22px}"]}),P}()},90020:function(Ve,se,t){t.d(se,{Q:function(){return I}});var e=t(73637),n=t(33714),f=t(78186),i=t(71136),O=t(20113),T=t(80338),V=powerbi.visuals.FontProperties;function h(b,P){if(1&b&&(e.\u0275\u0275elementStart(0,"span",4),e.\u0275\u0275text(1),e.\u0275\u0275elementEnd()),2&b){var g=e.\u0275\u0275nextContext();e.\u0275\u0275property("ngStyle",g.headerTextStyle),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",g.mobileTooltipHeaderText," ")}}var M=function(){return{"aria-label":"Close"}},I=function(){function b(P){this.featureSwitchService=P,this.onHide=new e.EventEmitter,this.mobileTooltipHeaderStyle={},this.closeButtonStyle={},this.headerTextStyle={}}return Object.defineProperty(b.prototype,"isNewMobileTooltip",{get:function(){return this.featureSwitchService.featureSwitches.newMobileTooltip},enumerable:!1,configurable:!0}),b.prototype.ngOnChanges=function(P){var g=this.tooltipStyle;if(g&&this.isNewMobileTooltip){var u=V.toHTMLStyle(g.titleFontProperties);this.closeButtonStyle.fill=g.valueFontProperties.color,this.headerTextStyle.color=g.valueFontProperties.color,this.headerTextStyle["font-size"]=u["font-size"],this.headerTextStyle["font-weight"]="700"}},b.prototype.hide=function(){this.onHide.emit()},b.\u0275fac=function(g){return new(g||b)(e.\u0275\u0275directiveInject(n.vZ))},b.\u0275cmp=e.\u0275\u0275defineComponent({type:b,selectors:[["mobile-tooltip-header"]],inputs:{tooltipStyle:"tooltipStyle",mobileTooltipHeaderText:"mobileTooltipHeaderText"},outputs:{onHide:"onHide"},features:[e.\u0275\u0275NgOnChangesFeature],decls:4,vars:5,consts:[[1,"mobile-tooltip-header-container",3,"ngStyle"],["class","mobile-tooltip-header-text trimmedTextWithEllipsis",3,"ngStyle",4,"ngIf"],[1,"close-button",3,"localizeAttr","accessible-click"],["tri-svg-icon-20","","name","dismiss_20_regular","sprite","fluentui-icons",1,"dismiss-icon",3,"ngStyle"],[1,"mobile-tooltip-header-text","trimmedTextWithEllipsis",3,"ngStyle"]],template:function(g,u){1&g&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,h,2,2,"span",1),e.\u0275\u0275elementStart(2,"button",2),e.\u0275\u0275listener("accessible-click",function(){return u.hide()}),e.\u0275\u0275element(3,"tri-svg-icon",3),e.\u0275\u0275elementEnd()()),2&g&&(e.\u0275\u0275property("ngStyle",u.mobileTooltipHeaderStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",u.isNewMobileTooltip),e.\u0275\u0275advance(1),e.\u0275\u0275property("localizeAttr",e.\u0275\u0275pureFunction0(4,M)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngStyle",u.closeButtonStyle))},dependencies:[f.NgIf,f.NgStyle,i.b,O.t,T.M],styles:['.tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]{float:none;position:relative}.tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}html:not([dir="rtl"]).tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html:not([dir="rtl"]).tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html:not([dir="rtl"])   .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html:not([dir="rtl"])   .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   html:not([dir="rtl"])[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   html:not([dir="rtl"])   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]{padding-left:24px}html[dir="rtl"].tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html[dir="rtl"].tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html[dir="rtl"]   .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], html[dir="rtl"]   .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   html[dir="rtl"][_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   html[dir="rtl"]   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]{padding-right:24px}.tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]   .mobile-tooltip-header-text[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .mobile-tooltip-header-container[_ngcontent-%COMP%]   .mobile-tooltip-header-text[_ngcontent-%COMP%]{max-width:200px}.tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .close-button[_ngcontent-%COMP%], .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:focus, .tooltip-container.new-mobile-tooltip.heightened-header   .visual-tooltip-mobile   [_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]:focus{margin:0}[_nghost-%COMP%]{float:right;width:40px;height:40px;position:absolute;right:0;z-index:1}.mobile-tooltip-header-container[_ngcontent-%COMP%]{pointer-events:auto;background-color:transparent}.mobile-tooltip-header-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   .dismiss-icon[_ngcontent-%COMP%]{color:#6e6e6e!important;touch-action:none}.mobile-tooltip-header-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled   title[_ngcontent-%COMP%]{color:#6e6e6e!important}.mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover, .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:focus{padding:0;border:none;background-color:transparent;color:var(--fluent-theme-neutral-dark-color, #201F1E);width:40px;height:40px;margin:auto}.mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   .dismiss-icon[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover   .dismiss-icon[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:focus   .dismiss-icon[_ngcontent-%COMP%]{padding:0 1px 1px 0;fill:#e1e1e1}.mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover   .title[_ngcontent-%COMP%], .mobile-tooltip-header-container[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:focus   .title[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:10px}'],changeDetection:0}),b}()},35228:function(Ve,se,t){t.d(se,{t:function(){return G}});var e=t(75082),n=t(73637),f=t(96341),i=t(23196),O=t(25991),T=t(9161),V=t(33714),h=t(25956),M=t(28252),I=t(22584),b=t(42),P=t(18266),g=t(78186),u=t(35380),s=t(68128),p=t(79597),C=t(45580),A=t(48998),S=t(26632),L=t(85385),D=powerbi.explore.services.events,m=powerbi.visuals.ColorHelper,v=powerbi.common.utils.ColorUtility,l=powerbi.DataViewObject,y=powerbi.data.DataViewObjectDefinitions,d=powerbi.explore.constants.ExploreCanvasConstants,w=powerbi.data.SQExprBuilder,x=powerbi.explore.util,N=["collapseIcon"],X=function(E,k){return{"pbi-glyph-view":E,"pbi-glyph-hide3":k}},ne=function(E){return{color:E}};function Ce(F,E){if(1&F){var k=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",14),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(k);var Q=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(Q.toggleOutspacePaneVisibility())}),n.\u0275\u0275elementEnd()}if(2&F){var R=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(4,X,R.isOutspacePaneVisible,!R.isOutspacePaneVisible))("pbiTooltip",R.showHidePaneLabel)("ngStyle",n.\u0275\u0275pureFunction1(7,ne,R.color)),n.\u0275\u0275attribute("aria-label",R.hideShowTooltip)}}var he=function(E,k,R){return{backgroundColor:E,"font-size":k,borderColor:R}};function Fe(F,E){if(1&F){var k=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"search-box-modern",15),n.\u0275\u0275listener("searchText",function(Q){n.\u0275\u0275restoreView(k);var me=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(me.updateFilterSearchText(Q))}),n.\u0275\u0275elementEnd()}if(2&F){var R=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction3(3,he,R.inputBoxColor,R.searchTextSize,R.borderColor))("initialValue",R.searchFiltersInput)("ariaLabel",R.searchLabel+" "+R.searchLabeledby)}}function fe(F,E){1&F&&n.\u0275\u0275element(0,"hr",16)}var ae=function(E){return{borderColor:E}};function pe(F,E){if(1&F&&(n.\u0275\u0275elementStart(0,"div",17),n.\u0275\u0275element(1,"filter-pane-modern",18,19),n.\u0275\u0275elementEnd()),2&F){var k=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(4,ae,k.borderColor))("isInOutspacePane",!0)("sectionObjects",k.sectionObjects)("searchFiltersInput",k.searchFiltersInput)}}var ge=function(E,k){return{outspacePaneCollapsed:E,outspacePaneExpanded:k}},Me=function(E,k,R,z,Q){return{backgroundColor:E,borderColor:k,borderWidth:R,width:z,color:Q}},ce=function(){return{leftOrRight:"ew-resize"}},J=function(E,k,R){return{color:E,"font-size":k,"font-family":R}},ie=function(E,k){return{"pbi-glyph-doublechevronright":E,"pbi-glyph-doublechevronleft":k}},G=function(){function F(E,k,R,z,Q,me,le,K,q,ye,Le){this.dir=E,this.eventBridge=k,this.featureSwitchService=R,this.gettingStartedService=z,this.navigationService=Q,this.telemetryService=me,this.themeService=le,this.undoRedoService=K,this.viewModeState=q,this.localizationService=ye,this.screenSizeService=Le,this.headerTitle="VisualizationPane_Filters",this.isPaneExpanded=!0,this.backgroundColorSelector={objectName:"outspacePane",propertyName:"backgroundColor"},this.foregroundColorSelector={objectName:"outspacePane",propertyName:"foregroundColor"},this.inputBoxColorSelector={objectName:"outspacePane",propertyName:"inputBoxColor"},this.expandCollapsePaneEditModeLabel=this.localizationService.get("FilterPane_ExpandCollapse"),this.searchLabeledby=this.localizationService.get("FilterPane_Page_OutspacePane"),this.searchLabel=this.localizationService.get("SearchBox_Text"),this.expandCollapsePaneReadModeLabel=this.localizationService.get("Pane_Toggle"),this.showHidePaneLabel=this.localizationService.get("FilterPane_ShowHide")}return Object.defineProperty(F.prototype,"contractWidth",{get:function(){return powerbi.explore.util.CanvasVisualsUtility.getOutspacePaneWidth(this.navigationService)},enumerable:!1,configurable:!0}),F.prototype.paneWidth=function(){return"".concat(this.isPaneExpanded?null!=this.manuallyResizedWidth?this.manuallyResizedWidth:this.contractWidth:d.OutspacePaneCollapsedWidth,"px")},Object.defineProperty(F.prototype,"showFilterPaneSearch",{get:function(){var k=this.navigationService.getCurrentExploration(),z=!(k.settings&&k.settings.disableFilterPaneSearch)&&this.isPaneExpanded;return!z&&""!==this.searchFiltersInput&&(this.searchFiltersInput=""),z},enumerable:!1,configurable:!0}),F.prototype.ngOnInit=function(){var E=this;this.autoCollapseSubscription=this.screenSizeService.observeMaxScreenSize(e._.Large).subscribe(function(R){R&&(E.isPaneExpanded=!1)});var k=this.navigationService.getCurrentExploration();k&&this.updateIsPaneExpanded(k.evaluatedObjects,this.isPaneExpanded),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(D.explorationObjectsLoaded,function(R,z){return E.updateIsPaneExpanded(z.evaluatedObjects,E.isPaneExpanded&&!E.screenSizeService.queryMaxWidth(e._.Large))}).subscribe(D.sectionChanged,function(R,z){E.onSectionChange()}),this.searchFiltersInput="",this.visibilitySubscription=this.gettingStartedService.filterPaneVisibility$.subscribe(function(R){E.updateIsPaneExpanded(E.navigationService.getCurrentExploration().evaluatedObjects,R.value,R.isForced)})},F.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.visibilitySubscription.unsubscribe(),this.autoCollapseSubscription.unsubscribe()},Object.defineProperty(F.prototype,"hideShowTooltip",{get:function(){return this.localizationService.get(this.isOutspacePaneVisible?"FilterPane_HidePane":"FilterPane_ShowPane")+", "+this.showHidePaneLabel},enumerable:!1,configurable:!0}),F.prototype.ngOnChanges=function(E){E.sectionObjects&&(this.updateStyle(E.sectionObjects.currentValue),this.isEditMode()&&void 0!==this.manuallyResizedWidth&&this.setResizedWidth())},F.prototype.toggle=function(){var E=this;this.isPaneExpanded=!this.isPaneExpanded,this.collapseIcon.nativeElement.focus();var k=w.boolean(this.isPaneExpanded),R=this.navigationService.getCurrentExploration();void 0===R.objects&&(R.objects={}),this.undoRedoService.register("ToggleOutspacePane",function(){y.setValue(R.objects,{objectName:"outspacePane",propertyName:"expanded"},null,k),E.eventBridge.publishToChannel(D.explorationObjectsChanged)}),this.telemetryService.logEvent(powerbi.telemetry.EXImprovedFilterExperienceToggleOutspacePaneExpansion,{expanded:this.isPaneExpanded,viewMode:x.getTelemetryViewMode(this.viewModeState.getMode())})},F.prototype.updateIsPaneExpanded=function(E,k,R){this.isPaneExpanded=R?k:l.getValue(E&&E.outspacePane,"expanded",k)},F.prototype.toggleOutspacePaneVisibility=function(){var E=this;this.isOutspacePaneVisible=!this.isOutspacePaneVisible;var k=w.boolean(this.isOutspacePaneVisible),R=this.navigationService.getCurrentExploration();this.undoRedoService.register("ToggleOutspacePaneVisibility",function(){void 0===R.objects&&(R.objects={}),y.setValue(R.objects,{objectName:"outspacePane",propertyName:"visible"},null,k),E.eventBridge.publishToChannel(D.explorationObjectsChanged)}),this.telemetryService.logEvent(powerbi.telemetry.EXImprovedFilterExperienceToggleOutspacePaneVisibility,{visible:this.isOutspacePaneVisible})},F.prototype.updateStyle=function(E){var k=E&&E.outspacePane,R=this.navigationService.getCurrentExploration(),Q=this.themeService.getVisualStyle(R.themeCollection),me=m.create(Q);this.setBackground(E,me),this.setText(k),this.setBorderColor(k),this.setBorderVisibility(k),this.setColor(E,me),this.setSearchTextSize(k),this.setInputBoxColor(E,me)},F.prototype.setBackground=function(E,k){var R=k.getColorForProperty(E,this.backgroundColorSelector,"background"),z=v.convertTransparencyToOpacity(l.getValue(E&&E.outspacePane,"transparency",d.DefaultOutspacePaneTransparency));this.backgroundColor=v.hexToRGBString(R,z)},F.prototype.setText=function(E){var k=l.getValue(E,"titleSize",d.DefaultOutspacePaneTitleSizePt);this.titleFontSize="".concat(k,"pt");var R=l.getValue(E,"fontFamily",d.DefaultOutspacePaneFontFamily);this.titleFontFamily=R},F.prototype.setSearchTextSize=function(E){var k=l.getValue(E,"searchTextSize",d.DefaultOutspaceSearchTextSizePt);this.searchTextSize="".concat(k,"pt")},F.prototype.setBorderColor=function(E){this.borderColor=l.getFillColorByPropertyName(E,"borderColor",d.DefaultOutspacePaneBorderColor)},F.prototype.setBorderVisibility=function(E){this.borderVisibility=l.getValue(E,"border",d.DefaultOutspacePaneBorder)},F.prototype.setColor=function(E,k){var R=k.getColorForProperty(E,this.foregroundColorSelector,"foreground");this.color=v.hexToRGBString(R)},F.prototype.setInputBoxColor=function(E,k){var R;R=k.getColorForProperty(E,E&&E.outspacePane&&E.outspacePane.inputBoxColor?this.inputBoxColorSelector:this.backgroundColorSelector,"background"),this.inputBoxColor=v.hexToRGBString(R)},F.prototype.onSectionChange=function(){this.setResizedWidth()},Object.defineProperty(F.prototype,"resizeEdges",{get:function(){return"rtl"===this.dir.value?{right:this.isPaneExpanded}:{left:this.isPaneExpanded}},enumerable:!1,configurable:!0}),F.prototype.onResizing=function(E){E.rectangle.width&&(this.isEditMode()?this.setContractWidth(E.rectangle.width):this.setResizedWidth(E.rectangle.width))},F.prototype.updateFilterSearchText=function(E){this.searchFiltersInput=E},F.prototype.onResizeEnd=function(){this.recurringActionInfo=void 0},F.prototype.setContractWidth=function(E){var k=this,R=this.getValueBoundByMinMax(E),z=w.integer(R),Q=this.navigationService.getCurrentSection();void 0===this.recurringActionInfo&&(this.recurringActionInfo=new j),this.undoRedoService.register("SetOutspacePaneContractWidth",function(){void 0===Q.objects&&(Q.objects={}),y.setValue(Q.objects,{objectName:"outspacePane",propertyName:"width"},null,z),k.eventBridge.publishToChannel(D.sectionObjectsChanged)},this.recurringActionInfo)},F.prototype.setResizedWidth=function(E){this.manuallyResizedWidth=E?this.getValueBoundByMinMax(E):void 0},F.prototype.getValueBoundByMinMax=function(E){return E>d.OutspacePaneMaxWidth?d.OutspacePaneMaxWidth:E<d.OutspacePaneMinWidth?d.OutspacePaneMinWidth:Math.round(E)},F.prototype.getValidationFunction=function(){return function(E){if(E.rectangle&&E.rectangle.width){var k=E.rectangle.width;return k<=d.OutspacePaneMaxWidth&&k>=d.OutspacePaneMinWidth}return!1}},F.prototype.isEditMode=function(){return 1===this.viewModeState.getMode()},F.\u0275fac=function(k){return new(k||F)(n.\u0275\u0275directiveInject(f.Is),n.\u0275\u0275directiveInject(i.J),n.\u0275\u0275directiveInject(V.vZ),n.\u0275\u0275directiveInject(h.c),n.\u0275\u0275directiveInject(O.z),n.\u0275\u0275directiveInject(M.y0),n.\u0275\u0275directiveInject(I.f),n.\u0275\u0275directiveInject(T.z),n.\u0275\u0275directiveInject(b.kc),n.\u0275\u0275directiveInject(P.o),n.\u0275\u0275directiveInject(e.O))},F.\u0275cmp=n.\u0275\u0275defineComponent({type:F,selectors:[["outspace-pane"]],viewQuery:function(k,R){var z;(1&k&&n.\u0275\u0275viewQuery(N,7),2&k)&&(n.\u0275\u0275queryRefresh(z=n.\u0275\u0275loadQuery())&&(R.collapseIcon=z.first))},inputs:{sectionObjects:"sectionObjects",isOutspacePaneVisible:"isOutspacePaneVisible"},features:[n.\u0275\u0275NgOnChangesFeature],decls:18,vars:53,consts:[["role","presentation","data-automation-type","outspacePaneGroup","mwlResizable","","keyboard-shortcuts","ctrl-F6","focus-priority","6","focus-nav-mode","Group",1,"outspacePane",3,"ngClass","ngStyle","enableGhostResize","resizeEdges","resizeCursorPrecision","resizeCursors","validateResize","resizing","resizeEnd"],[1,"paneHeader"],["role","heading","aria-level","2",1,"hiddenHeading",3,"localize"],[1,"btn","toggleBtn","pbi-borderless-button",3,"tabindex","pbiTooltip","click"],[1,"title"],[1,"glyphicon","pbi-glyph-filter","filterBtnIcon",3,"ngStyle"],[1,"titleContainer"],["id","outspace-pane-title",1,"unselectable","sidePaneTitle",3,"localize","ngStyle"],["class","btn enableFilterPane pbi-borderless-button glyphicon glyph-mini",3,"ngClass","pbiTooltip","ngStyle","click",4,"ngIf"],[1,"btn","collapseIcon","pbi-borderless-button","glyphicon","glyph-mini",3,"ngClass","pbiTooltip","ngStyle","click"],["collapseIcon",""],["id","searchBoxTheme","class","themeableElement","focus-nav-mode","Hierarchy",3,"ngStyle","initialValue","ariaLabel","searchText",4,"ngIf"],["class","searchFiltersLineBreak",4,"ngIf"],["class","paneContents",4,"ngIf"],[1,"btn","enableFilterPane","pbi-borderless-button","glyphicon","glyph-mini",3,"ngClass","pbiTooltip","ngStyle","click"],["id","searchBoxTheme","focus-nav-mode","Hierarchy",1,"themeableElement",3,"ngStyle","initialValue","ariaLabel","searchText"],[1,"searchFiltersLineBreak"],[1,"paneContents"],[3,"ngStyle","isInOutspacePane","sectionObjects","searchFiltersInput"],["filterPane",""]],template:function(k,R){1&k&&(n.\u0275\u0275elementStart(0,"article",0),n.\u0275\u0275listener("resizing",function(Q){return R.onResizing(Q)})("resizeEnd",function(){return R.onResizeEnd()}),n.\u0275\u0275elementStart(1,"div",1),n.\u0275\u0275element(2,"span",2),n.\u0275\u0275pipe(3,"localize"),n.\u0275\u0275elementStart(4,"button",3),n.\u0275\u0275listener("click",function(){return R.toggle()}),n.\u0275\u0275pipe(5,"localize"),n.\u0275\u0275elementStart(6,"div",4),n.\u0275\u0275element(7,"div",5),n.\u0275\u0275elementStart(8,"div",6),n.\u0275\u0275element(9,"div",7),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275template(10,Ce,1,9,"button",8),n.\u0275\u0275elementStart(11,"button",9,10),n.\u0275\u0275listener("click",function(){return R.toggle()}),n.\u0275\u0275pipe(13,"localize"),n.\u0275\u0275pipe(14,"localize"),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(15,Fe,1,7,"search-box-modern",11),n.\u0275\u0275template(16,fe,1,0,"hr",12),n.\u0275\u0275template(17,pe,3,6,"div",13),n.\u0275\u0275elementEnd()),2&k&&(n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(32,ge,!R.isPaneExpanded,R.isPaneExpanded))("ngStyle",n.\u0275\u0275pureFunction5(35,Me,R.backgroundColor,R.borderColor,R.borderVisibility?"1px":"0",R.paneWidth(),R.color))("enableGhostResize",!1)("resizeEdges",R.resizeEdges)("resizeCursorPrecision",5)("resizeCursors",n.\u0275\u0275pureFunction0(41,ce))("validateResize",R.getValidationFunction()),n.\u0275\u0275advance(2),n.\u0275\u0275property("localize",R.headerTitle),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(3,24,R.headerTitle)),n.\u0275\u0275advance(2),n.\u0275\u0275propertyInterpolate("tabindex",R.isPaneExpanded?0:-1),n.\u0275\u0275property("pbiTooltip",R.isEditMode()?R.expandCollapsePaneEditModeLabel:R.expandCollapsePaneReadModeLabel),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(5,26,R.headerTitle)),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction1(42,ne,R.color)),n.\u0275\u0275advance(2),n.\u0275\u0275property("localize",R.headerTitle)("ngStyle",n.\u0275\u0275pureFunction3(44,J,R.color,R.isPaneExpanded?R.titleFontSize:"",R.titleFontFamily)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",R.isPaneExpanded&&R.isEditMode()),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(48,ie,R.isPaneExpanded,!R.isPaneExpanded))("pbiTooltip",R.isEditMode()?R.expandCollapsePaneEditModeLabel:R.expandCollapsePaneReadModeLabel)("ngStyle",n.\u0275\u0275pureFunction1(51,ne,R.color)),n.\u0275\u0275attribute("aria-label",R.isEditMode()?n.\u0275\u0275pipeBind1(13,28,R.headerTitle)+" "+R.expandCollapsePaneEditModeLabel:n.\u0275\u0275pipeBind1(14,30,R.headerTitle)+" "+R.expandCollapsePaneReadModeLabel)("aria-expanded",R.isPaneExpanded),n.\u0275\u0275advance(4),n.\u0275\u0275property("ngIf",R.showFilterPaneSearch),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",R.showFilterPaneSearch),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",R.isPaneExpanded))},dependencies:[g.NgClass,g.NgIf,g.NgStyle,u.X,s.q,p.V,C.E$,A.E,S.v,L.F],styles:['.outspacePane[_ngcontent-%COMP%]{height:100%;color:#333;position:relative;display:flex;flex-direction:column}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{border-left-style:solid;border-right-style:none}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{border-left-style:none;border-right-style:solid}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{border-left-width:1px;border-right-width:0}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{border-left-width:0;border-right-width:1px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{transform-origin:top left}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{transform-origin:top right}.outspacePane[_ngcontent-%COMP%]   .paneHeader[_ngcontent-%COMP%]{cursor:pointer}.outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%]{margin-top:7px;border-color:inherit;border:1px solid;border-radius:2px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%]{margin-left:8px;margin-right:12px}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   search-box-modern[_ngcontent-%COMP%]{margin-left:12px;margin-right:8px}.outspacePane[_ngcontent-%COMP%]   .searchFiltersLineBreak[_ngcontent-%COMP%]{border:0;width:100%;border-bottom:1px solid;border-color:inherit;margin-top:4px}.outspacePane[_ngcontent-%COMP%]   .paneContents[_ngcontent-%COMP%]{display:block;overflow-y:auto;overflow-y:overlay;height:100%}.outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%]{margin:11px 8px 0;width:16px;background:transparent;font-weight:var(--font-weight-semi-bold, 600)}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%]{float:right}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .collapseIcon[_ngcontent-%COMP%]{float:left}.outspacePane[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{font-size:var(--lg-font-size, 16px);font-weight:var(--font-weight-semi-bold, 600);vertical-align:middle}.outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;cursor:pointer}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{text-align:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{text-align:right}.outspacePane[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]{display:inline-block;text-align:center;vertical-align:middle;margin-bottom:4px}.outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{background-color:transparent;width:calc(100% - 60px)}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{float:right}.outspacePane[_ngcontent-%COMP%]   .enableFilterPane[_ngcontent-%COMP%]{margin:11px 8px 0;font-weight:var(--font-weight-semi-bold, 600);background-color:transparent}.hiddenHeading[_ngcontent-%COMP%]{font-size:0}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{height:initial;padding-bottom:initial}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{line-height:normal;display:inline-block;width:100%;padding-top:8px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{float:right}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]{width:calc(100% - 8px)}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;display:block;font-size:24px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{margin:0 20px 5px 8px}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{margin:0 8px 5px 20px}.outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin-top:0;margin-bottom:8px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin-left:12px;margin-right:unset}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneExpanded[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin-left:unset;margin-right:12px}@media screen and (max-height: 320px){.outspacePaneExpanded[_ngcontent-%COMP%]{overflow-y:scroll!important}.outspacePaneExpanded[_ngcontent-%COMP%]   .paneContents[_ngcontent-%COMP%]{height:unset!important;overflow-y:visible!important}.outspacePaneExpanded[_ngcontent-%COMP%]   .filterPaneScrollWrapper.scroll-content[_ngcontent-%COMP%]{max-height:none!important}}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:column-reverse;padding-bottom:20px}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]:focus{outline:none}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{float:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]{float:right}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{line-height:normal;font-size:24px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:18px;margin-right:unset}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-left:unset;margin-right:18px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:left}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:right}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:6px;padding-right:unset}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:unset;padding-right:6px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform:rotate(90deg)}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform:rotate(-90deg)}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform-origin:0}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{transform-origin:100%}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{display:inline-block;font-size:16px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{margin:0 0 4px 8px}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .titleContainer[_ngcontent-%COMP%]   .sidePaneTitle[_ngcontent-%COMP%]{margin:0 8px 4px 0}.outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{font-size:12px}html:not([dir="rtl"])[_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin:8px 0 9px 16px}html[dir="rtl"][_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .outspacePaneCollapsed[_ngcontent-%COMP%]   .toggleBtn[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .filterBtnIcon[_ngcontent-%COMP%]{margin:8px 16px 9px 0}',".exploreHost.landingController   .explorationContainer[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], .exploreHost.landingController   .explorationContainer   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{-webkit-transition:all .3s;transition:right .3s;right:0}.exploreHost.landingController.commentsMenuOpenTablet[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], .exploreHost.landingController.commentsMenuOpenTablet   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{right:350px;z-index:50000}.exploreHost.landingController.commentsMenuOpenTablet.inFocus   .canvasFlexBox[_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%], .exploreHost.landingController.commentsMenuOpenTablet.inFocus   .canvasFlexBox   [_nghost-%COMP%]   .outspacePane[_ngcontent-%COMP%]{right:0}"]}),F}(),j=function(){function F(){}return F.prototype.equals=function(E){return!!E&&this===E},F}()},45656:function(Ve,se,t){t.d(se,{A:function(){return f}});var e=t(73637),n=t(31053),f=function(){function i(){this.modulePath="@powerbi/ExploreUI/pane-switcher.module#PaneSwitcherModule",this.componentId="PaneSwitcherComponentId"}return i.\u0275fac=function(T){return new(T||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["pane-switcher-lazy"]],decls:1,vars:2,consts:[[3,"modulePath","componentId"]],template:function(T,V){1&T&&e.\u0275\u0275element(0,"pbi-lazy-load",0),2&T&&e.\u0275\u0275property("modulePath",V.modulePath)("componentId",V.componentId)},dependencies:[n.R],encapsulation:2}),i}()},69798:function(Ve,se,t){t.d(se,{S:function(){return u}});var e=function(){function s(p){this.annotations=p}return s.prototype.clear=function(){this.annotations=[]},s.prototype.length=function(){return this.annotations.length},s.prototype.removeAt=function(p){this.annotations.splice(p,1)},s.prototype.getAnnotation=function(p){return this.annotations[p]},s.prototype.takeAll=function(){return _.take(this.annotations,this.annotations.length)},s.prototype.push=function(p){this.annotations.push(p)},s.prototype.eraseAnnotations=function(p,C){var A=this.annotations.length;return _.remove(this.annotations,function(S){return S.polygon.lineIntersectionPoint(p,C)}),A-this.annotations.length},s}(),n=function(){function s(p){this.rect=p,this.rectContext=this.rect.getContext("2d")}return s.prototype.validateRectPos=function(p){this.loadCanvasClientRects(),0===p&&(this.rect.width!==Math.floor(this.rectPosition.width)||this.rect.height!==Math.floor(this.rectPosition.height))&&(this.rect.width=this.rectPosition.width,this.rect.height=this.rectPosition.height)},s.prototype.drawLine=function(p,C){this.rectContext.moveTo(p.x,p.y),this.rectContext.lineTo(C.x,C.y),this.rectContext.stroke()},s.prototype.loadCanvasClientRects=function(){this.rectPosition=this.rect.getBoundingClientRect(),this.canvasLeft=this.rectPosition.left,this.canvasTop=this.rectPosition.top},s.prototype.redrawAnnotations=function(p){this.loadCanvasClientRects(),this.rectContext.clearRect(0,0,this.rectPosition.width,this.rectPosition.height);for(var C=0,A=this.getAnnotations(p);C<A.length;C++)this.drawAnnotation(A[C])},s.prototype.getAnnotations=function(p){var C=p.annotationsList.takeAll(),A=[];for(var S in p.currentAnnotations)A.push(p.currentAnnotations[S]);return C.concat(A)},s.prototype.drawAnnotation=function(p){this.rectContext.beginPath(),this.setupNewPath(p);var C=p.polygon.polygonPoints;this.rectContext.moveTo(C[0].x,C[0].y);for(var A=1;A<C.length;A++)this.rectContext.lineTo(C[A].x,C[A].y);this.rectContext.stroke()},s.prototype.setupNewPath=function(p){this.rectContext.lineWidth=p.lineWidth,this.rectContext.strokeStyle=p.strokeStyle,this.rectContext.globalAlpha=p.opacity,this.rectContext.lineCap="round",this.rectContext.lineJoin="round"},s.prototype.convertToCanvasPosition=function(p,C){return{x:p-this.canvasLeft,y:C-this.canvasTop}},s}(),f=function(){function s(){this.pensAnnotationsData=[]}return s.prototype.getAnnotationMode=function(p){return this.pensAnnotationsData[p]?this.pensAnnotationsData[p].penAnnotationMode:0},s.prototype.createPenAnnotationData=function(p,C){this.pensAnnotationsData[p]={pointerId:p,penAnnotationMode:C,points:[]}},s.prototype.addPoint=function(p,C){!this.pensAnnotationsData[p]||this.pensAnnotationsData[p].points.push(C)},s.prototype.remove=function(p){delete this.pensAnnotationsData[p]},s.prototype.getPoints=function(p){return this.pensAnnotationsData[p]?this.pensAnnotationsData[p].points:[]},s.prototype.clear=function(){this.pensAnnotationsData=[]},s}(),i=t(73637),O=t(23196),T=t(25991),V=t(42),h=powerbi.explore.services.events,M=powerbi.visuals.shapes.Polygon,I=["penAnnotationCanvas"],b="pen",u=function(){function s(p,C,A){this.eventBridge=p,this.explorationNavigation=C,this.viewModeState=A}return s.prototype.ngOnInit=function(){var p=this;this.pensAnnotationsDataHelper=new f,this.penAnnotationDrawer=new n(this.penAnnotationCanvas.nativeElement),interact.on("pointerdown",function(C){p.onPointerDown(C)}),interact.on("pointermove",function(C){p.onPointerMove(C)}),interact.on("pointerup",function(C){p.onPointerUp(C)}),this.resetViewModel(),this.eventBridge.createChannelSubscriptionManager().subscribe(h.sectionChanged,function(){return p.invalidateAnnotations()}).subscribe(h.clearAnnotations,function(){return p.clearAnnotations()})},s.prototype.ngOnDestroy=function(){var p=this;interact.off("pointerdown",function(C){p.onPointerDown(C)}),interact.off("pointermove",function(C){p.onPointerMove(C)}),interact.off("pointerup",function(C){p.onPointerUp(C)}),this.clearAnnotationsFromExploration()},s.prototype.eraseAnnotations=function(p,C){this.viewModel.annotationsList.eraseAnnotations(C,p)>0&&(this.penAnnotationDrawer.redrawAnnotations(this.viewModel),this.persistOnSection(this.viewModel.annotationsList.takeAll()))},s.prototype.onPointerDown=function(p){if(p.pointerType===b){this.penAnnotationDrawer.validateRectPos(this.viewModel.annotationsList.length());var C=this.penAnnotationDrawer.convertToCanvasPosition(p.pageX,p.pageY),A=this.isEraseEvent(p)?2:1;switch(this.pensAnnotationsDataHelper.createPenAnnotationData(p.pointerId,A),A){case 1:this.pensAnnotationsDataHelper.addPoint(p.pointerId,C),this.viewModel.currentAnnotations[p.pointerId]=this.createPenAnnotationCurve(p.pointerId);break;case 2:this.erasePrevPoint=C,this.eraseAnnotations(C,this.erasePrevPoint)}}},s.prototype.onPointerMove=function(p){if(p.pointerType===b){var C=this.penAnnotationDrawer.convertToCanvasPosition(p.pageX,p.pageY);switch(this.pensAnnotationsDataHelper.getAnnotationMode(p.pointerId)){case 1:this.pensAnnotationsDataHelper.addPoint(p.pointerId,C);var S=this.viewModel.currentAnnotations[p.pointerId];S&&(S.polygon=this.createPolygon(p.pointerId)),this.drawAnnotationAddedPoints(S);break;case 2:this.eraseAnnotations(C,this.erasePrevPoint),this.erasePrevPoint=C}}},s.prototype.onPointerUp=function(p){if(p.pointerType===b){if(1===this.pensAnnotationsDataHelper.getAnnotationMode(p.pointerId)){var A=this.viewModel.currentAnnotations[p.pointerId];A&&(A.polygon.polygonPoints.length>=10&&(this.viewModel.annotationsList.push(A),this.persistOnSection(this.viewModel.annotationsList.takeAll())),delete this.viewModel.currentAnnotations[p.pointerId])}this.pensAnnotationsDataHelper.remove(p.pointerId)}},s.prototype.drawAnnotationAddedPoints=function(p){var C=p.polygon.polygonPoints,A=C.length;A<10||(10===A?this.penAnnotationDrawer.drawAnnotation(p):this.penAnnotationDrawer.drawLine(C[A-2],C[A-1]))},s.prototype.resetViewModel=function(p){void 0===p&&(p=[]),this.viewModel={currentAnnotations:[],annotationsList:new e(p)},this.pensAnnotationsDataHelper.clear()},s.prototype.clearAnnotationsFromExploration=function(){for(var C=0,A=this.explorationNavigation.getCurrentExploration().sections;C<A.length;C++)A[C].penAnnotations=[]},s.prototype.isEraseEvent=function(p){return 5===p.button||!p.isPrimary&&0===p.pressure},s.prototype.persistOnSection=function(p){var C=this.explorationNavigation.getCurrentSection();C&&(C.penAnnotations=p)},s.prototype.getAnnotationsFromSection=function(){return this.explorationNavigation.getCurrentSection().penAnnotations||[]},s.prototype.clearAnnotations=function(){this.persistOnSection([]),this.invalidateAnnotations()},s.prototype.invalidateAnnotations=function(){var p=this.getAnnotationsFromSection();this.resetViewModel(p),this.penAnnotationDrawer.redrawAnnotations(this.viewModel)},s.prototype.createPenAnnotationCurve=function(p){var C=this.viewModeState.getConfig();return{polygon:this.createPolygon(p),lineWidth:C.penProperties.lineWidth,strokeStyle:C.penProperties.strokeStyle,opacity:C.penProperties.opacity}},s.prototype.createPolygon=function(p){for(var C=[],A=0,S=this.pensAnnotationsDataHelper.getPoints(p);A<S.length;A++){var L=S[A];C.push(L.x),C.push(L.y)}return new M(new Float64Array(C))},s.\u0275fac=function(C){return new(C||s)(i.\u0275\u0275directiveInject(O.J),i.\u0275\u0275directiveInject(T.z),i.\u0275\u0275directiveInject(V.kc))},s.\u0275cmp=i.\u0275\u0275defineComponent({type:s,selectors:[["pen-annotation"]],viewQuery:function(C,A){var S;(1&C&&i.\u0275\u0275viewQuery(I,7),2&C)&&(i.\u0275\u0275queryRefresh(S=i.\u0275\u0275loadQuery())&&(A.penAnnotationCanvas=S.first))},decls:2,vars:0,consts:[[1,"penAnnotationCanvas"],["penAnnotationCanvas",""]],template:function(C,A){1&C&&i.\u0275\u0275element(0,"canvas",0,1)},styles:[".penAnnotationCanvas[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;z-index:9999;pointer-events:none}"]}),s}()},4730:function(Ve,se,t){t.d(se,{C:function(){return f}});var e=t(73637),n=t(31053),f=function(){function i(){this.modulePath="@powerbi/ExploreUI/performance-pane.module#PerformancePaneModule",this.componentId="PerformancePaneComponentId"}return i.\u0275fac=function(T){return new(T||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["performance-pane-lazy"]],decls:1,vars:2,consts:[[3,"modulePath","componentId"]],template:function(T,V){1&T&&e.\u0275\u0275element(0,"pbi-lazy-load",0),2&T&&e.\u0275\u0275property("modulePath",V.modulePath)("componentId",V.componentId)},dependencies:[n.R],styles:["[_nghost-%COMP%]{flex-grow:1;display:flex;flex-direction:column}"]}),i}()},86195:function(Ve,se,t){t.d(se,{i:function(){return P}});var e=t(73637),n=t(67471),f=t(58494),i=t(36292),O=t(78186),T=t(31053),V=t(35380),h=t(27937),M=t(85385);function I(g,u){1&g&&e.\u0275\u0275element(0,"pbi-lazy-load",3)}function b(g,u){1&g&&(e.\u0275\u0275elementStart(0,"section",4),e.\u0275\u0275pipe(1,"localize"),e.\u0275\u0275elementStart(2,"header"),e.\u0275\u0275element(3,"div",5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",6),e.\u0275\u0275element(5,"pbi-spinner",7),e.\u0275\u0275elementEnd()()),2&g&&e.\u0275\u0275attribute("aria-label",e.\u0275\u0275pipeBind1(1,1,"DataLoaderSpinner_LoadingMessage1"))}var P=function(){function g(u,s,p){this.lazyScoped=u,this.lazyProvider=s,this.pbiLazyLoad=p}return g.prototype.ngOnInit=function(){var u=this;this.loaded=this.pbiLazyLoad.load(powerbi.explore.modules.ExploreUIShellModule).then(function(){return u.lazyScoped.get("fieldWellViewModelService")}).then(function(){return u.lazyProvider.getModule("./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule")})},g.\u0275fac=function(s){return new(s||g)(e.\u0275\u0275directiveInject(n.H),e.\u0275\u0275directiveInject(f.E),e.\u0275\u0275directiveInject(i.Q))},g.\u0275cmp=e.\u0275\u0275defineComponent({type:g,selectors:[["ng-component"]],decls:5,vars:4,consts:[[1,"no-outline","themeableElement"],["modulePath","./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule","componentId","PersonalizeVisualComponentId",4,"ngIf","ngIfElse"],["loading",""],["modulePath","./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule","componentId","PersonalizeVisualComponentId"],["tabindex","0",1,"pbi-depth-2","themeableElement"],["localize","PersonalizeVisual_MainMenuLabel",1,"fluentTheme-vlg-semibold"],[1,"loading"],[1,"pbi-spinner-medium"]],template:function(s,p){if(1&s&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275template(1,I,1,0,"pbi-lazy-load",1),e.\u0275\u0275pipe(2,"async"),e.\u0275\u0275template(3,b,6,3,"ng-template",null,2,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd()),2&s){var C=e.\u0275\u0275reference(4);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(2,2,p.loaded))("ngIfElse",C)}},dependencies:[O.NgIf,T.R,V.X,h.k,O.AsyncPipe,M.F],styles:["section[_ngcontent-%COMP%]{width:240px;background:var(--fluent-theme-neutral-lighter-color, #F3F2F1);border-radius:2px;box-sizing:border-box;height:300px;display:flex;flex-direction:column;padding:12px 24px 24px}header[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-alt-color, #333333);margin-bottom:16px}.loading[_ngcontent-%COMP%]{display:flex;height:100%}.loading[_ngcontent-%COMP%]   pbi-spinner[_ngcontent-%COMP%]{margin:auto}.no-outline[_ngcontent-%COMP%]{outline:none}"],changeDetection:0}),g}()},47414:function(Ve,se,t){t.d(se,{E:function(){return Pt}});var e=t(41),n=powerbi.data.RelativeDateFilterPattern,f=powerbi.data.RelativeDateQualifier,i=powerbi.data.RelativeDateUnit,O={relativeQualifier:f.Last,duration:null,relativeUnit:i.Day,includeToday:!0},T=function(){function ze(){}return ze.prototype.getDefaultOptions=function(){return O},ze.prototype.getRelativeUnitsAll=function(ke){return[{value:i.Day,text:ke.get("RelativeDateUnit_Days")},{value:i.Week,text:ke.get("RelativeDateUnit_Weeks")},{value:i.CalendarWeek,text:ke.get("RelativeDateUnit_CalendarWeeks")},{value:i.Month,text:ke.get("RelativeDateUnit_Months")},{value:i.CalendarMonth,text:ke.get("RelativeDateUnit_CalendarMonths")},{value:i.Year,text:ke.get("RelativeDateUnit_Years")},{value:i.CalendarYear,text:ke.get("RelativeDateUnit_CalendarYears")}]},ze.prototype.getCurrentRelativeUnits=function(ke){return[{value:i.Day,text:ke.get("RelativeDateUnit_Day")},{value:i.Week,text:ke.get("RelativeDateUnit_Week")},{value:i.Month,text:ke.get("RelativeDateUnit_Month")},{value:i.Year,text:ke.get("RelativeDateUnit_Year")}]},ze.prototype.isIncludeTodayApplicable=function(ke,We){return ke.value!==f.Current&&!n.isCalendarPeriod(We.value)},ze.prototype.onRelativeQualifierChanged=function(ke,We,Ue){if(ke.value===f.Current){var ve=We.value;switch(We.value){case i.CalendarWeek:ve=i.Week;break;case i.CalendarMonth:ve=i.Month;break;case i.CalendarYear:ve=i.Year}return _.find(Ue,function(r){return r.value===ve})}},ze}(),V=powerbi.data.RelativeDateQualifier,h=powerbi.data.RelativeDateUnit,M={relativeQualifier:V.Last,duration:null,relativeUnit:h.Hour,includeToday:!0},I=function(){function ze(){}return ze.prototype.getDefaultOptions=function(){return M},ze.prototype.getRelativeUnitsAll=function(ke){return[{value:h.Minute,text:ke.get("TimeUnit_Minutes_Lowercase")},{value:h.Hour,text:ke.get("TimeUnit_Hours_Lowercase")}]},ze.prototype.getCurrentRelativeUnits=function(ke){return[{value:h.Minute,text:ke.get("Insights_MinutesSingular")},{value:h.Hour,text:ke.get("Insights_HoursSingular")}]},ze.prototype.isIncludeTodayApplicable=function(){return!1},ze.prototype.onRelativeQualifierChanged=function(ke,We,Ue){if(ke.value===V.Current){var ve=We.value;We=_.find(Ue,function(r){return r.value===ve})}},ze}(),b=powerbi.explore.contracts.FilterType,P=powerbi.data.RelativeDateFilterPattern,g=powerbi.data.RelativeDateQualifier,u=powerbi.data.RelativeFilterType,D=t(13389),m=t(584),v=t(30411),l=t(73637),y=jsCommon.NumberExtensions,d=powerbi.data.RelativeDateRangeHelper,w=powerbi.data.RelativeDateQualifier,x=powerbi.data.RelativeFilterType,N=function(){function ze(ke,We,Ue,ve){this.relativeFilterViewModelComponent=function(ze){switch(ze){case u.Time:return new I;case u.Date:return new T;default:return null}}(Ue),ve||(ve=this.relativeFilterViewModelComponent.getDefaultOptions()),this.dateField=ke,this.duration=ve.duration,this.anchorDate=ve.anchorDate,this.localizationService=We,this.includeToday=function(ze,ke){switch(ze){case u.Time:return!0;case u.Date:return ke;default:return!1}}(Ue,ve.includeToday),this.showInputWarning=!1,this.populateRelativeQualifiers(ve.relativeQualifier),this.populateRelativeUnits(ve.relativeUnit)}return ze.prototype.populateRelativeQualifiers=function(ke){this.relativeQualifiers=[{value:w.Last,text:this.localizationService.get("RelativeDateQualifier_Last")},{value:w.Current,text:this.localizationService.get("RelativeDateQualifier_Current")},{value:w.Next,text:this.localizationService.get("RelativeDateQualifier_Next")}],this.relativeQualifier=_.find(this.relativeQualifiers,function(We){return We.value===ke})},ze.prototype.populateRelativeUnits=function(ke){this.relativeUnitsAll=this.relativeFilterViewModelComponent.getRelativeUnitsAll(this.localizationService),this.relativeUnitsCurrent=this.relativeFilterViewModelComponent.getCurrentRelativeUnits(this.localizationService),this.relativeUnit=_.find(this.relativeUnitsAll,function(We){return We.value===ke})},ze.prototype.isDurationApplicable=function(){return this.relativeQualifier.value!==w.Current},ze.prototype.isDurationWithinRange=function(){return this.duration>0&&this.duration<=this.getDurationMax()&&!y.isDecimal(this.duration)||this.relativeQualifier.value===w.Current},ze.prototype.isIncludeTodayApplicable=function(){return this.relativeFilterViewModelComponent.isIncludeTodayApplicable(this.relativeQualifier,this.relativeUnit)},ze.prototype.onRelativeQualifierChanged=function(){var ke=this.relativeFilterViewModelComponent.onRelativeQualifierChanged(this.relativeQualifier,this.relativeUnit,this.relativeUnitsAll);ke&&(this.relativeUnit=ke)},ze.prototype.getDurationMax=function(){return d.getDurationMax(this.relativeQualifier.value,this.relativeUnit.value)},ze.prototype.getRestatement=function(ke,We){var Ue=this,ve=this.getRelativeDateRangeOptions();return d.getRestatement(ve,ke,function(a,c){return Ue.localizationService.format(a,c)},We)},ze.prototype.getRelativeDateRangeOptions=function(){return{duration:this.duration,includeToday:this.includeToday,relativeUnit:this.relativeUnit.value,relativeQualifier:this.relativeQualifier.value,anchorDate:this.anchorDate}},ze.prototype.clearShowInputWarningAndPendingClear=function(){this.hasPendingClear=void 0,this.showInputWarning=void 0},ze.prototype.updateShowInputWarning=function(ke,We){this.showInputWarning=ke&&We?ke&&-1!==ke.indexOf(We.toString()):this.showInputWarning&&(this.duration<=0||y.isDecimal(this.duration))},ze.prototype.setupPendingClear=function(){this.showInputWarning=!1,this.duration=void 0,this.hasPendingClear=!0},ze.createRelativeFilterViewModel=function(ke,We,Ue,ve){switch(ke){case x.Time:return new ze(We,Ue,x.Time,ve);case x.Date:return new ze(We,Ue,x.Date,ve);default:return null}},ze}(),X=t(59279),ne=t(16660),Ce=t(93171),he=t(18766),Fe=t(23196),fe=t(25991),ae=t(9161),pe=t(22898),ge=t(70377),Me=t(33714),ce=t(18266),J=t(26092),ie=t(28252),G=t(42),j=t(5801),F=t(56339),E=t(78186),k=t(35380),R=t(52181),z=t(8126),Q=t(27826),me=t(18601),le=t(58622),K=t(79597),q=t(21099),ye=powerbi.explore.contracts.FilterType,Le=powerbi.explore.FilterUtils,Ne=powerbi.data.RelativeDateFilterPattern,be=powerbi.data.RelativeFilterType,Y=jsCommon.Utility,ue=function(ke,We,Ue,ve){return{"background-color":ke,color:We,"border-color":Ue,"font-family":ve}};function Pe(ze,ke){if(1&ze&&(l.\u0275\u0275elementStart(0,"mat-option",11),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&ze){var We=ke.$implicit,Ue=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("value",We)("ngStyle",l.\u0275\u0275pureFunction4(3,ue,Ue.viewModel.inputBoxBackgroundColor,Ue.viewModel.inputBoxForegroundColor,Ue.viewModel.inputBoxBorderColor,Ue.viewModel.fontFamily)),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",We.text,"")}}var Ae=function(ke,We,Ue){return{"background-color":ke,color:We,"border-color":Ue}};function Ze(ze,ke){if(1&ze){var We=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"input",12),l.\u0275\u0275listener("ngModelChange",function(r){l.\u0275\u0275restoreView(We);var o=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(o.vm.duration=r)}),l.\u0275\u0275elementEnd()}if(2&ze){var Ue=l.\u0275\u0275nextContext(2);l.\u0275\u0275classProp("filterInputWarningBorder",Ue.vm.showInputWarning),l.\u0275\u0275propertyInterpolate("placeholder","1-"+Ue.vm.getDurationMax()),l.\u0275\u0275property("ngModel",Ue.vm.duration)("ngStyle",l.\u0275\u0275pureFunction3(7,Ae,Ue.viewModel.inputBoxBackgroundColor,Ue.viewModel.inputBoxForegroundColor,Ue.viewModel.inputBoxBorderColor))("pbiTooltip",Ue.slicerDurationName),l.\u0275\u0275attribute("aria-label",Ue.slicerDurationName)}}function ot(ze,ke){if(1&ze&&(l.\u0275\u0275elementStart(0,"mat-option",11),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&ze){var We=ke.$implicit,Ue=l.\u0275\u0275nextContext(3);l.\u0275\u0275property("value",We)("ngStyle",l.\u0275\u0275pureFunction4(3,ue,Ue.viewModel.inputBoxBackgroundColor,Ue.viewModel.inputBoxForegroundColor,Ue.viewModel.inputBoxBorderColor,Ue.viewModel.fontFamily)),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",We.text,"")}}function lt(ze,ke){if(1&ze){var We=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"mat-select",13),l.\u0275\u0275listener("ngModelChange",function(r){l.\u0275\u0275restoreView(We);var o=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(o.vm.relativeUnit=r)}),l.\u0275\u0275template(1,ot,2,8,"mat-option",5),l.\u0275\u0275elementEnd()}if(2&ze){var Ue=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("ngModel",Ue.vm.relativeUnit)("ngStyle",l.\u0275\u0275pureFunction4(7,ue,Ue.viewModel.inputBoxBackgroundColor,Ue.viewModel.inputBoxForegroundColor,Ue.viewModel.inputBoxBorderColor,Ue.viewModel.fontFamily))("pbiTooltip",Ue.slicerPeriodFieldName)("aria-label",Ue.slicerPeriodFieldName)("compareWith",Ue.compareRelativeUnit)("panelClass",Ue.newPaneColors),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",Ue.vm.relativeUnitsAll)}}function yt(ze,ke){if(1&ze&&(l.\u0275\u0275elementStart(0,"mat-option",11),l.\u0275\u0275text(1),l.\u0275\u0275elementEnd()),2&ze){var We=ke.$implicit,Ue=l.\u0275\u0275nextContext(3);l.\u0275\u0275property("value",We)("ngStyle",l.\u0275\u0275pureFunction4(3,ue,Ue.viewModel.inputBoxBackgroundColor,Ue.viewModel.inputBoxForegroundColor,Ue.viewModel.inputBoxBorderColor,Ue.viewModel.fontFamily)),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",We.text,"")}}function De(ze,ke){if(1&ze){var We=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"mat-select",14),l.\u0275\u0275listener("ngModelChange",function(r){l.\u0275\u0275restoreView(We);var o=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(o.vm.relativeUnit=r)}),l.\u0275\u0275template(1,yt,2,8,"mat-option",5),l.\u0275\u0275elementEnd()}if(2&ze){var Ue=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("ngModel",Ue.vm.relativeUnit)("ngStyle",l.\u0275\u0275pureFunction4(7,ue,Ue.viewModel.inputBoxBackgroundColor,Ue.viewModel.inputBoxForegroundColor,Ue.viewModel.inputBoxBorderColor,Ue.viewModel.fontFamily))("compareWith",Ue.compareRelativeUnit)("panelClass",Ue.newPaneColors)("pbiTooltip",Ue.slicerPeriodFieldName)("aria-label",Ue.slicerPeriodFieldName),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",Ue.vm.relativeUnitsCurrent)}}var Ie=function(ke,We){return{color:ke,"font-family":We}};function Oe(ze,ke){if(1&ze){var We=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",15)(1,"mat-checkbox",16),l.\u0275\u0275listener("ngModelChange",function(r){l.\u0275\u0275restoreView(We);var o=l.\u0275\u0275nextContext(2);return l.\u0275\u0275resetView(o.vm.includeToday=r)}),l.\u0275\u0275element(2,"span",17),l.\u0275\u0275elementEnd()()}if(2&ze){var Ue=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(1),l.\u0275\u0275propertyInterpolate("aria-label",Ue.includeTodayLabel),l.\u0275\u0275property("matCheckBoxColor",Ue.viewModel.checkboxAndApplyColor)("matCheckBoxColorIsChecked",Ue.vm.includeToday)("ngModel",Ue.vm.includeToday)("ngStyle",l.\u0275\u0275pureFunction2(7,Ie,Ue.viewModel.inputBoxForegroundColor,Ue.viewModel.fontFamily))("pbiTooltip",Ue.includeTodayName)("pbiTooltipAlwaysShow",!0)}}function Be(ze,ke){if(1&ze&&l.\u0275\u0275element(0,"button",18),2&ze){var We=l.\u0275\u0275nextContext(2);l.\u0275\u0275property("disabled",!We.canApplyFilter())("pbiTooltip",We.applyFilterDescriptionName)}}var qe=function(ke){return{invalid:ke}},je=function(ke){return{"font-size":ke}};function st(ze,ke){if(1&ze){var We=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"form",1),l.\u0275\u0275listener("ngSubmit",function(){l.\u0275\u0275restoreView(We);var r=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(r.handleSubmit())}),l.\u0275\u0275element(1,"h3",2),l.\u0275\u0275elementStart(2,"div",3)(3,"mat-select",4),l.\u0275\u0275listener("ngModelChange",function(r){l.\u0275\u0275restoreView(We);var o=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(o.vm.relativeQualifier=r)})("ngModelChange",function(){l.\u0275\u0275restoreView(We);var r=l.\u0275\u0275nextContext();return l.\u0275\u0275resetView(r.vm.onRelativeQualifierChanged())}),l.\u0275\u0275template(4,Pe,2,8,"mat-option",5),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(5,Ze,1,11,"input",6),l.\u0275\u0275template(6,lt,2,12,"mat-select",7),l.\u0275\u0275template(7,De,2,12,"mat-select",8),l.\u0275\u0275template(8,Oe,3,10,"div",9),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(9,Be,1,2,"button",10),l.\u0275\u0275elementEnd()}if(2&ze){var Ue=l.\u0275\u0275nextContext();l.\u0275\u0275property("ngClass",l.\u0275\u0275pureFunction1(15,qe,Ue.viewModel.isInvalidCardType()))("ngStyle",l.\u0275\u0275pureFunction1(17,je,Ue.viewModel.fontSize))("formGroup",Ue.relativeFilterForm),l.\u0275\u0275advance(1),l.\u0275\u0275property("pbiTooltip",Ue.showItemsWhenValueName),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngModel",Ue.vm.relativeQualifier)("ngStyle",l.\u0275\u0275pureFunction4(19,ue,Ue.viewModel.inputBoxBackgroundColor,Ue.viewModel.inputBoxForegroundColor,Ue.viewModel.inputBoxBorderColor,Ue.viewModel.fontFamily))("pbiTooltip",Ue.slicerDateRangeName)("aria-label",Ue.slicerDateRangeName)("panelClass",Ue.newPaneColors),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",Ue.vm.relativeQualifiers),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",Ue.vm.isDurationApplicable()),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",Ue.vm.isDurationApplicable()),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",!Ue.vm.isDurationApplicable()),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",Ue.vm.isIncludeTodayApplicable()),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",!Ue.isApplyAllOnForThisFilter())}}var Pt=function(){function ze(ke,We,Ue,ve,r,o,a,c,B,U,H,oe,te,_e,de,Ee,we){var Se=this;this.aggrOps=ke,this.conceptualSchemaProxy=We,this.contextActivityService=Ue,this.dataSources=ve,this.eventBridge=r,this.explorationCapabilities=o,this.explorationNavigation=a,this.featureSwitchService=c,this.localizationService=B,this.networkAvailabilityService=U,this.ngZone=H,this.telemetryService=oe,this.undoRedo=te,this.viewModeState=_e,this.visualAuthoring=de,this.visualPlugin=Ee,this.visualTimeSynchronizationService=we,this.onFilterChanged=new l.EventEmitter,this.slicerDateRangeName=this.localizationService.get("Slicer_DateRange"),this.slicerDurationName=this.localizationService.get("Duration"),this.slicerPeriodFieldName=this.localizationService.get("DaxTemplates_PeriodField"),this.showItemsWhenValueName=this.localizationService.get("ShowItemsWhenValue"),this.applyFilterDescriptionName=this.localizationService.get("Filter_ApplyFilterDescription"),this.includeTodayName=this.localizationService.get("RelativeDateFilter_IncludeToday"),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(powerbi.explore.services.events.applyAllClicked,function(Re,$e){return Se.onApplyAllClicked($e)}).subscribe(powerbi.explore.services.events.explorationSlowDataSourceSettingsLoaded,function(Re,$e){return Se.ngZone.run(function(){$e.isApplyAllButtonEnabledChanged&&Se.vm.clearShowInputWarningAndPendingClear()})}).subscribe(powerbi.explore.services.events.filterContainerChanged,function(Re,$e){return Se.onFilterContainerChanged($e)}),this.newPaneColors=this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign?"pbi-modern-select-panel themeableElement":"pbi-modern-select-old-panel themeableElement"}return ze.prototype.ngOnInit=function(){var ke=this;this.relativeFilterType=function(ze){switch(ze){case b.RelativeTime:return u.Time;case b.RelativeDate:return u.Date;default:return"The following filterType is not a relativeDate or relativeTime: ".concat(ze),u.Unsupported}}(this.filterType),this.relativeFilterForm=new v.nJ({qualifier:new v.p4,duration:new v.p4,unitsAll:new v.p4,unitsCurrent:new v.p4,includeToday:new v.p4}),this.isApplyAllOnForThisFilter()&&(this.formChanges$=this.relativeFilterForm.valueChanges.pipe((0,D.b)(500),(0,m.b)(function(){return ke.onModelChanged()})).subscribe()),this.filterForm=new e.h(this.relativeFilterForm),this.currentZone=this.explorationNavigation.getCurrentZone(),this.ngZone.run(function(){return ke.onInitImpl()})},ze.prototype.onInitImpl=function(){this.viewModel.setServices(void 0,void 0,this.viewModeState),this.initializeViewModel(this.viewModel.contract),this.includeTodayLabel=this.localizationService.get("RelativeDateFilter_IncludeToday")},ze.prototype.ngOnDestroy=function(){this.formChanges$&&this.formChanges$.unsubscribe(),this.subscriptionManager.unsubscribeAll()},ze.prototype.handleSubmit=function(){this.isApplyAllOnForThisFilter()||this.applyFilter()},ze.prototype.compareRelativeUnit=function(ke,We){return ke.value===We.value},ze.prototype.applyFilter=function(ke){var We=this;if(this.canApplyFilter()){var Ue;this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Ue=Le.createChangeFilterActivity(this.contextActivityService,this.relativeFilterType===be.Date?"Relative Date Filter":"Relative Time Filter")),document.activeElement.blur(),this.viewModel.contract.type=function(ze){switch(ze){case u.Time:return b.RelativeTime;case u.Date:return b.RelativeDate;default:return null}}(this.relativeFilterType);var r=function(ze){switch(ze){case u.Time:return"ApplyRelativeTimeFilter";case u.Date:return"ApplyRelativeDateFilter";default:return"unknown command"}}(this.relativeFilterType),o=this.dataSources.get();this.conceptualSchemaProxy.get(o).then(function(a){We.undoRedo.register(r,function(){var c=We.vm.getRelativeDateRangeOptions();We.logFilterAppliedTelemetry(c,function(){var B=We.vm.isDurationWithinRange()?Ne.buildSemanticFilter({field:We.vm.dateField,options:c}):void 0;We.visualAuthoring.updateFilter(We.viewModel.getFilterContainerScope(),We.viewModel.contract,B),We.viewModel.useDefaultFilter=!1,We.filterForm.setPristine(),B?We.updateRestatement():We.clearRestatement(),We.onFilterChanged.emit({args:{filter:We.viewModel.contract,changeType:2,scope:We.viewModel.getFilterContainerScope(),changeFilterActivity:Ue}}),Ue&&Ue.resolve()})},ke)})}},ze.prototype.canApplyFilter=function(){return this.viewModel&&!this.viewModel.isInvalidCardType()&&this.vm&&this.vm.relativeUnit&&this.vm.relativeQualifier&&(this.vm.hasPendingClear||this.vm.isDurationWithinRange()&&this.filterForm&&this.filterForm.isDirty()&&this.filterForm.isValid())},ze.prototype.isApplyAllOnForThisFilter=function(){var ke=this.viewModeState.getConfig().displayOptions.enableMobileFilters;return Le.isApplyAllEnabled(this.viewModel.isInOutspacePane||ke,this.explorationNavigation)},ze.prototype.onApplyAllClicked=function(ke){this.isApplyAllOnForThisFilter()&&(ke.idsInError?this.vm.updateShowInputWarning(ke.idsInError,this.viewModel.id):(this.applyFilter(ke.undoRedoActionId),this.vm.clearShowInputWarningAndPendingClear()))},ze.prototype.onModelChanged=function(){!this.isApplyAllOnForThisFilter()||!this.filterForm.isDirty()||(this.vm.isDurationApplicable()&&null===this.vm.duration&&!this.vm.hasPendingClear?Le.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.contract.type,this.viewModel.id,!0,!0):Le.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,this.viewModel.contract.type,this.viewModel.id,this.canApplyFilter()),this.vm.updateShowInputWarning())},ze.prototype.initializeViewModel=function(ke){var We=this,Ue=this.dataSources.get();this.conceptualSchemaProxy.get(Ue).then(function(ve){var r=Ne.extractParametersFromSemanticFilter(ke.filter,We.relativeFilterType);We.vm=N.createRelativeFilterViewModel(We.relativeFilterType,ke.expression||r&&r.field,We.localizationService,r&&r.options),We.viewModel.updateFilterProperties(ve,We.visualPlugin,We.aggrOps),We.viewModel.updateViewState(),r?We.updateRestatement():(We.filterForm.setDirty(),ke.filter||We.clearRestatement())})},ze.prototype.logFilterAppliedTelemetry=function(ke,We){var Ue=function(ze,ke,We,Ue,ve){switch(ze){case u.Time:return ke.startEvent(powerbi.telemetry.EXFilterPaneRelativeTimeFilterApplied,{relativeQualifier:g[ve.relativeQualifier],duration:ve.duration,relativeUnit:powerbi.data.RelativeDateUnit[ve.relativeUnit],viewMode:powerbi.explore.util.getTelemetryViewMode(We.getMode()),isInOutspacePane:Ue});case u.Date:return ke.startEvent(powerbi.telemetry.EXFilterPaneRelativeDateFilterApplied,{relativeQualifier:g[ve.relativeQualifier],duration:ve.duration,relativeUnit:powerbi.data.RelativeDateUnit[ve.relativeUnit],includeToday:ve.includeToday,isCalendarPeriod:P.isCalendarPeriod(ve.relativeUnit),viewMode:powerbi.explore.util.getTelemetryViewMode(We.getMode()),isInOutspacePane:Ue});default:return null}}(this.relativeFilterType,this.telemetryService,this.viewModeState,this.viewModel.isInOutspacePane,ke);try{We(),Ue.resolve()}catch(ve){throw Ue.reject(),Y.ensureError(ve)}},ze.prototype.onFilterContainerChanged=function(ke){ke.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(ke.changeType,10)?this.onFilterClear(ke):ke.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(ke.changeType,2)&&this.initializeViewModel(ke.filter)},ze.prototype.onFilterClear=function(ke){this.isApplyAllOnForThisFilter()?(this.vm.setupPendingClear(),this.filterForm.setDirty(),this.vm.isDurationApplicable()||(this.vm.relativeQualifier.value=powerbi.data.RelativeDateQualifier.Last),Le.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,ye.TopN,this.viewModel.id,!0)):this.initializeViewModel(ke.filter)},ze.prototype.updateRestatement=function(){var ke=this.visualTimeSynchronizationService?this.visualTimeSynchronizationService.getAnchorTime():void 0,We=this.viewModel.isFilterExpanded()&&this.networkAvailabilityService.isNetworkAvailable();this.viewModel.setRestatement(this.vm.getRestatement(We,ke))},ze.prototype.clearRestatement=function(){this.viewModel.setRestatement(void 0)},ze.\u0275fac=function(We){return new(We||ze)(l.\u0275\u0275directiveInject(X.C),l.\u0275\u0275directiveInject(ne.i),l.\u0275\u0275directiveInject(Ce.r),l.\u0275\u0275directiveInject(he.D),l.\u0275\u0275directiveInject(Fe.J),l.\u0275\u0275directiveInject(ge.U),l.\u0275\u0275directiveInject(fe.z),l.\u0275\u0275directiveInject(Me.vZ),l.\u0275\u0275directiveInject(ce.o),l.\u0275\u0275directiveInject(J.SW),l.\u0275\u0275directiveInject(l.NgZone),l.\u0275\u0275directiveInject(ie.y0),l.\u0275\u0275directiveInject(ae.z),l.\u0275\u0275directiveInject(G.kc),l.\u0275\u0275directiveInject(j.$),l.\u0275\u0275directiveInject(F.D),l.\u0275\u0275directiveInject(pe.a))},ze.\u0275cmp=l.\u0275\u0275defineComponent({type:ze,selectors:[["relative-filter"]],inputs:{filterType:"filterType",viewModel:"viewModel"},outputs:{onFilterChanged:"onFilterChanged"},decls:1,vars:1,consts:[["class","relativeFilter",3,"ngClass","ngStyle","formGroup","ngSubmit",4,"ngIf"],[1,"relativeFilter",3,"ngClass","ngStyle","formGroup","ngSubmit"],["localize","ShowItemsWhenValue",1,"description",3,"pbiTooltip"],[1,"relativeFilterSettings"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","formControlName","qualifier","disableOptionCentering","true",1,"filterInput","pbi-modern-select",3,"ngModel","ngStyle","pbiTooltip","aria-label","panelClass","ngModelChange"],[3,"value","ngStyle",4,"ngFor","ngForOf"],["class","filterInput pbi-modern-input","type","number","formControlName","duration",3,"ngModel","filterInputWarningBorder","ngStyle","pbiTooltip","placeholder","ngModelChange",4,"ngIf"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","class","filterInput pbi-modern-select","formControlName","unitsAll","disableOptionCentering","true",3,"ngModel","ngStyle","pbiTooltip","aria-label","compareWith","panelClass","ngModelChange",4,"ngIf"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","class","filterInput pbi-modern-select","formControlName","unitsCurrent","disableOptionCentering","true",3,"ngModel","ngStyle","compareWith","panelClass","pbiTooltip","aria-label","ngModelChange",4,"ngIf"],["class","footerSection",4,"ngIf"],["type","submit","class","applyFilter smallFontSize","localize","Filter_ApplyFilter",3,"disabled","pbiTooltip",4,"ngIf"],[3,"value","ngStyle"],["type","number","formControlName","duration",1,"filterInput","pbi-modern-input",3,"ngModel","ngStyle","pbiTooltip","placeholder","ngModelChange"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","formControlName","unitsAll","disableOptionCentering","true",1,"filterInput","pbi-modern-select",3,"ngModel","ngStyle","pbiTooltip","aria-label","compareWith","panelClass","ngModelChange"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","formControlName","unitsCurrent","disableOptionCentering","true",1,"filterInput","pbi-modern-select",3,"ngModel","ngStyle","compareWith","panelClass","pbiTooltip","aria-label","ngModelChange"],[1,"footerSection"],["pbiTooltipCheckChildren","true","localizeTooltip","RelativeDateFilter_IncludeToday","formControlName","includeToday",1,"pbi-checkbox",3,"matCheckBoxColor","matCheckBoxColorIsChecked","ngModel","ngStyle","aria-label","pbiTooltip","pbiTooltipAlwaysShow","ngModelChange"],["localize","RelativeDateFilter_IncludeToday"],["type","submit","localize","Filter_ApplyFilter",1,"applyFilter","smallFontSize",3,"disabled","pbiTooltip"]],template:function(We,Ue){1&We&&l.\u0275\u0275template(0,st,10,24,"form",0),2&We&&l.\u0275\u0275property("ngIf",void 0!==Ue.vm)},dependencies:[E.NgClass,E.NgForOf,E.NgIf,E.NgStyle,v._Y,v.Fj,v.wV,v.JJ,v.JL,k.X,R.r,z.N,Q.oG,me.gD,le.ey,K.V,v.sg,v.u,q.x],styles:['.invalid[_ngcontent-%COMP%]   .applyFilter[_ngcontent-%COMP%]{color:var(--neutral-secondary-color, #666666)}.description[_ngcontent-%COMP%]{margin:12px 0 6px}.relativeFilterSettings[_ngcontent-%COMP%]   .filterInput[_ngcontent-%COMP%]{margin-bottom:4px;width:100%;box-sizing:border-box;border:1px solid var(--neutral-dark-color, #212121);min-height:24px}html:not([dir="rtl"])[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]{margin:6px 0 3px 3px}html[dir="rtl"][_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]{margin:6px 3px 3px 0}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]    {margin-bottom:0;display:inline-block;vertical-align:middle}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label{color:inherit}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label span.mat-checkbox-label{font-size:inherit;font-family:inherit}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label div.mat-checkbox-inner-container{width:16px;height:16px}.relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{vertical-align:middle}html:not([dir="rtl"])[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], html:not([dir="rtl"])   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0 0 0 4px}html[dir="rtl"][_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], html[dir="rtl"]   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0 4px 0 0}.relativeFilterSettings[_ngcontent-%COMP%]   input.filterInput.pbi-modern-input[_ngcontent-%COMP%]{font-size:inherit;font-family:inherit}.filterPaneModern   .card[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label, .filterPaneModern   .card   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     label{color:inherit;font-family:inherit;line-height:unset}.filterPaneModern   .card[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .formLabel, .filterPaneModern   .card   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .formLabel, .filterPaneModern   .card[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .checkbox, .filterPaneModern   .card   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .checkbox{font-size:unset}.newPaneColors.explorationContainer[_nghost-%COMP%]   .relativeFilter.invalid[_ngcontent-%COMP%]   .applyFilter[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .relativeFilter.invalid[_ngcontent-%COMP%]   .applyFilter[_ngcontent-%COMP%]{color:var(--gray-80, #B3B0AD)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%], .newPaneColors.explorationContainer[_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .filterInput[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .filterInput[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]    , .newPaneColors.explorationContainer   [_nghost-%COMP%]   .isInOutspacePane[_ngcontent-%COMP%]   .relativeFilter[_ngcontent-%COMP%]   .footerSection[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]    {color:inherit}',".exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]{color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:32px;padding:0 8px;background-color:var(--fluentThemeNeutralLighterAltColor);margin:0 0 15px;border:0px;border-bottom:1px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--fluentThemeNeutralSecondaryAltColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-select-value, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-select-value{padding:0}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-background, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-background{background-color:var(--fluentThemeNeutralLighterAltColor);border:solid 1px var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-checked, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-checked, .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-checkmark-path, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox .mat-checkbox-checkmark-path{stroke:var(--fluentThemeNeutralDarkColor)!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox:not(.mat-checkbox-checked) .mat-checkbox-checkmark-path, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .relativeFilterSettings[_ngcontent-%COMP%]     .mat-checkbox:not(.mat-checkbox-checked) .mat-checkbox-checkmark-path{display:none}*[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}"]}),ze}()},34109:function(Ve,se,t){t.d(se,{u:function(){return h}});var e=t(584),n=t(73637),f=t(3643),i=t(78186),O=t(31053);function T(M,I){if(1&M&&n.\u0275\u0275element(0,"pbi-lazy-load",3),2&M){var b=I.ngIf;n.\u0275\u0275property("modulePath",b.componentManifest.modulePath)("componentId",b.componentManifest.componentId)("inputArgs",b.componentManifest.inputArgs)}}function V(M,I){if(1&M&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275pipe(1,"async"),n.\u0275\u0275template(2,T,1,3,"pbi-lazy-load",2),n.\u0275\u0275pipe(3,"async"),n.\u0275\u0275elementEnd()),2&M){var P,b=n.\u0275\u0275nextContext();n.\u0275\u0275property("ngClass",null==(P=n.\u0275\u0275pipeBind1(1,2,b.sideFlyoutConfig$))?null:P.paneClass),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(3,4,b.sideFlyoutConfig$))}}var h=function(){function M(I,b){this.sideFlyoutService=I,this.changeDetector=b}return M.prototype.ngOnInit=function(){var I=this;this.shouldShowFlyout$=this.sideFlyoutService.shouldShow(),this.sideFlyoutConfig$=this.sideFlyoutService.config().pipe((0,e.b)(function(){return I.changeDetector.detectChanges()}))},M.\u0275fac=function(b){return new(b||M)(n.\u0275\u0275directiveInject(f.p),n.\u0275\u0275directiveInject(n.ChangeDetectorRef))},M.\u0275cmp=n.\u0275\u0275defineComponent({type:M,selectors:[["side-flyout"]],decls:2,vars:3,consts:[["class","flyout",3,"ngClass",4,"ngIf"],[1,"flyout",3,"ngClass"],[3,"modulePath","componentId","inputArgs",4,"ngIf"],[3,"modulePath","componentId","inputArgs"]],template:function(b,P){1&b&&(n.\u0275\u0275template(0,V,4,6,"div",0),n.\u0275\u0275pipe(1,"async")),2&b&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,P.shouldShowFlyout$))},dependencies:[i.NgClass,i.NgIf,O.R,i.AsyncPipe],styles:[".flyout[_ngcontent-%COMP%]{height:100%;width:100%;max-width:fit-content;overflow-x:auto;background:var(--fluent-theme-white-color, #FFF);z-index:10000003;border-left:1px solid var(--fluent-theme-neutral-tertiary-alt-color, #C8C6C4);position:absolute;right:0;top:0;bottom:0}"],changeDetection:0}),M}()},3643:function(Ve,se,t){t.d(se,{p:function(){return f}});var e=t(98864),n=t(73637),f=function(){function i(){this.shouldShow$=new e.X(!1),this.config$=new e.X(void 0)}return i.prototype.shouldShow=function(){return this.shouldShow$.asObservable()},i.prototype.config=function(){return this.config$.asObservable()},i.prototype.show=function(O){this.config$.next(void 0),this.config$.next(O),this.shouldShow$.next(!!O&&!!O.componentManifest)},i.prototype.hide=function(){this.shouldShow$.next(!1),this.config$.next(void 0)},i.\u0275prov=n.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac=function(T){return new(T||i)},providedIn:"root"}),i}()},81996:function(Ve,se,t){t.d(se,{v:function(){return fe}});var e=t(7005),n=t(73637),f=t(29494),i=t(35668),O=t(16660),T=t(83406),V=t(18766),h=t(31701),M=t(23196),I=t(32130),b=t(14135),P=t(11613),g=t(87014),u=t(82118),s=t(79067),p=t(74850),C=t(59897),A=t(62282),S=t(11032),L=t(33401),D=t(33714),m=t(26092),v=t(90547),l=t(56339),y=t(28252),d=t(848),w=t(40166),x=powerbi.explore.services.createExploreVisualDataProxyService,N=powerbi.explore.services.createVisualContainerQueryHandler,X=powerbi.data.DataViewObjectDefinitions,ne=powerbi.explore.services.events,Ce=powerbi.data.SQExpr,he=powerbi.explore.util.VisualContainerUtils,Fe=powerbi.explore.helpers.VisualHostInsideZoneAdapter,fe=function(){function ae(pe,ge,Me,ce,J,ie,G,j,F,E,k,R,z,Q,me,le,K,q,ye,Le,Ne,be,Y,ue,Pe){this.cachePolicyProviderService=pe,this.conceptualSchemaProxy=ge,this.dataSources=Me,this.displayNameService=ce,this.eventBridge=J,this.explorationNavigation=ie,this.featureSwitchService=G,this.filterGenerator=j,this.networkAvailability=F,this.ngZone=E,this.promiseFactory=k,this.resourceLoader=R,this.resourceRegistration=z,this.singleExecutableDataProxyFactory=Q,this.telemetryService=me,this.visualDataProxyExecutionServiceFactory=le,this.visualInsightsAnalysisHandlerFactory=K,this.visualLifecycleService=q,this.visualParameterServiceFactory=ye,this.visualPlugin=Le,this.visualPluginOps=Ne,this.visualQueryGenerator=be,this.visualValidator=Y,this.runningVisual=ue,this.visualContainerUtils=Pe,this.visualReady=new n.EventEmitter,this.canDeferQuery=!0}return ae.prototype.ngOnInit=function(){var pe=this;this.initializeQueryHandler(),this.initializeVisual(),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(ne.visualContainerChanged,function(ge,Me){pe.visual&&(null==Me?void 0:Me.affectContainer(pe.visual))&&pe.onVisualContainerChanged()}),this.onVisualContainerChanged(!0,!this.networkAvailability.isNetworkAvailable()||void 0)},ae.prototype.ngOnChanges=function(pe){var ge,Me,ce,J=null==pe?void 0:pe.visualViewport;J&&!J.isFirstChange()&&this.visualDefinition&&(this.visualDefinition.viewport=this.visualViewport);var ie=null==pe?void 0:pe.themeCollection;ie&&!ie.isFirstChange()&&this.visualDefinition&&(this.visualDefinition.themeCollection=this.themeCollection);var G=null===(ge=null==pe?void 0:pe.visual)||void 0===ge?void 0:ge.currentValue;if((null==G?void 0:G.name)&&(null===(Me=this.currentVisual)||void 0===Me?void 0:Me.name)!==G.name){null!==(ce=this.currentVisual)&&void 0!==ce&&ce.name&&this.runningVisual.removeVisual(this.currentVisual);var j=this.visualContainerUtils.wrapRunningVisual(this.visualDefinition,this.getVisualHostServices(),void 0,G.config.singleVisual,void 0,this.filterGenerator,void 0);this.currentVisual=G,this.runningVisual.setVisual(G,j)}},ae.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll(),this.runningVisual.removeVisual(this.visual)},ae.prototype.onVisualReady=function(){this.visualReady.emit()},ae.prototype.onVisualContainerChanged=function(pe,ge){return void 0===pe&&(pe=!1),(0,e.mG)(this,void 0,void 0,function(){var Me,ce;return(0,e.Jh)(this,function(J){switch(J.label){case 0:return this.config.clearQueryErrors(),this.visualDefinition.type=he.getVisualType(this.visual),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return Me=J.sent(),[4,this.visualValidator.validate(this.visual,Me)];case 2:return(ce=J.sent())?(this.config.handleQueryErrors({code:ce.code,getDetails:function(){return ce.details}}),[2]):(this.visualQueryGenerator.shouldExecute(this.visual.config.singleVisual,this.dataSources.get())?this.applyUpdate({initialLoad:pe,preferCurrentData:!1,allowResultFromClientCache:ge}):this.queryHandler.updateNonQueryVisual(this.visual,this.visualDefinition.dataTransforms),[2])}})})},ae.prototype.initializeQueryHandler=function(){var pe=this;this.queryHandler=this.createQueryHandler({notifyStart:function(ce){return pe.config.notifyStart(ce)},notifyEnd:function(){return pe.config.notifyEnd()},clearErrors:function(){return pe.config.clearQueryErrors()},handleErrors:function(ce){return pe.config.handleQueryErrors(ce)},handleWarnings:function(ce,J){return pe.config.handleQueryWarnings(ce,J)},applyUpdate:function(ce,J,ie,G){return pe.handleQueryResult(ce,J,ie,G)},applyResolveParametersUpdate:function(){return _.noop()},loadMergedData:function(ce,J){return pe.setVisualData(ce,J)}})},ae.prototype.initializeVisual=function(){var ge,pe=this,Me=this.visualPlugin.getPlugin(he.getVisualType(this.visual)),ce=null!==(ge=null==Me?void 0:Me.name)&&void 0!==ge?ge:void 0,J=X.getValue(he.getContainerObjectDefinitions(this.visual),{objectName:"stylePreset",propertyName:"name"},void 0),ie=this.getVisualHostServices();this.visualDefinition={interactivityOptions:this.config.interactivityOptions,type:ce,allowInvalidDataView:!0,themeCollection:this.themeCollection,viewport:this.visualViewport,dataTransforms:{objects:he.getObjectDefinitions(this.visual)},hostServices:Fe.wrapHostServices(ie,this.ngZone),visualAdapterHostServices:{startProgressBar:function(){return pe.config.notifyStart()},stopProgressBar:function(){return pe.config.notifyEnd()},getNextDataSegment:function(){return pe.getNextDataSegment()}},stylePresetName:J&&Ce.isConstant(J)?J.value:void 0,additionalObjectUpdates:this.config.additionalObjectUpdates,visualPlugin:this.visualPlugin};var G=this.visualContainerUtils.wrapRunningVisual(this.visualDefinition,ie,void 0,this.visual.config.singleVisual,void 0,this.filterGenerator,void 0);this.currentVisual=this.visual,this.runningVisual.setVisual(this.visual,G)},ae.prototype.createQueryHandler=function(pe){var ge=x(this.singleExecutableDataProxyFactory.create(),this.filterGenerator,this.promiseFactory,this.visualPlugin);return N(pe,this.config.queryVisualHostServices,this.promiseFactory,this.conceptualSchemaProxy,this.featureSwitchService,this.telemetryService,this.visualQueryGenerator,this.visualPlugin,this.visualPluginOps,this.filterGenerator,this.displayNameService,this.explorationNavigation,this.visualValidator,this.resourceLoader,this.eventBridge,ge,this.dataSources,this.cachePolicyProviderService,this.visualInsightsAnalysisHandlerFactory.create(this.config.queryVisualHostServices),this.visualParameterServiceFactory.create(),this.visualDataProxyExecutionServiceFactory.create(ge),this.resourceRegistration,this.visualLifecycleService)},ae.prototype.getVisualHostServices=function(){var pe=this,ge=this.config.visualHostServices;return this.config.noLoadMore||(ge=powerbi.Prototype.inherit(ge,function(Me){Me.loadMoreData=function(){return pe.loadMoreData()}})),powerbi.Prototype.inherit(ge,function(Me){Me.setShouldDeferData=function(ce){pe.canDeferQuery!==ce&&(pe.canDeferQuery=ce,ce||pe.applyUpdate())}})},ae.prototype.applyUpdate=function(pe){void 0===pe&&(pe={});var Me=pe.preferCurrentData,ce=pe.allowResultFromClientCache;this.queryHandler.runQuery({contract:this.visual,viewport:this.visualDefinition.viewport,initialLoad:pe.initialLoad,useVisualContainerCache:this.shouldUseCache(),preferCurrentData:Me,allowResultFromClientCache:ce,currentData:this.visualDefinition.data,canDefer:this.canDeferQuery})},ae.prototype.handleQueryResult=function(pe,ge,Me,ce){var J=this.visualDefinition;J.dataTransforms=ge,Me&&(J.dataTransforms=powerbi.Prototype.inherit(J.dataTransforms),J.dataTransforms.objects=Me),this.setVisualData(pe,ce)},ae.prototype.setVisualData=function(pe,ge){var Me=this.visualDefinition;Me.data=pe,Me.dataAppliedEvent&&(Me.dataAppliedEvent.reject(),Me.dataAppliedEvent=void 0),Me.dataAppliedEvent=this.telemetryService.startChildActivity(ge&&ge.telemetryActivity&&ge.telemetryActivity.event,powerbi.telemetry.EXVisualDataChanged,{visualName:this.visual.name})},ae.prototype.getNextDataSegment=function(){return this.queryHandler.getNextDataSegment({contract:this.visual,viewport:this.visualDefinition.viewport,useVisualContainerCache:this.shouldUseCache()})},ae.prototype.loadMoreData=function(){this.queryHandler.loadMoreData({contract:this.visual,currentData:this.visualDefinition.data,useVisualContainerCache:this.shouldUseCache(),viewport:this.visualDefinition.viewport})},ae.prototype.shouldUseCache=function(){return he.shouldUseQueryCache(this.visual,this.config.disableQueryCacheUpdates)},ae.\u0275fac=function(ge){return new(ge||ae)(n.\u0275\u0275directiveInject(i.g),n.\u0275\u0275directiveInject(O.i),n.\u0275\u0275directiveInject(V.D),n.\u0275\u0275directiveInject(h.O),n.\u0275\u0275directiveInject(M.J),n.\u0275\u0275directiveInject(L.I),n.\u0275\u0275directiveInject(D.vZ),n.\u0275\u0275directiveInject(I.r),n.\u0275\u0275directiveInject(m.SW),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(f.t),n.\u0275\u0275directiveInject(v.l6),n.\u0275\u0275directiveInject(b.j),n.\u0275\u0275directiveInject(T.U),n.\u0275\u0275directiveInject(y.y0),n.\u0275\u0275directiveInject(P.Y),n.\u0275\u0275directiveInject(g.b),n.\u0275\u0275directiveInject(u.U),n.\u0275\u0275directiveInject(s.P),n.\u0275\u0275directiveInject(l.D),n.\u0275\u0275directiveInject(p.f),n.\u0275\u0275directiveInject(C.S),n.\u0275\u0275directiveInject(A.R),n.\u0275\u0275directiveInject(S.s),n.\u0275\u0275directiveInject(d.K))},ae.\u0275cmp=n.\u0275\u0275defineComponent({type:ae,selectors:[["single-visual-host"]],inputs:{visual:"visual",visualViewport:"visualViewport",themeCollection:"themeCollection",config:"config"},outputs:{visualReady:"visualReady"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[1,"visualSite"],[3,"viewModel","allowDeferredRendering","visualReady"]],template:function(ge,Me){1&ge&&(n.\u0275\u0275elementStart(0,"div",0)(1,"visual-modern",1),n.\u0275\u0275listener("visualReady",function(){return Me.onVisualReady()}),n.\u0275\u0275elementEnd()()),2&ge&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("viewModel",Me.visualDefinition)("allowDeferredRendering",!0))},dependencies:[w.y],styles:["single-visual-host[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color, #FFF)}single-visual-host[_ngcontent-%COMP%]   .visualSite[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;transform-origin:0 0;display:flex}single-visual-host[_ngcontent-%COMP%]   .visualSite[_ngcontent-%COMP%]   .visual.allow-deferred-rendering[_ngcontent-%COMP%]{opacity:0;transition:opacity .25s}single-visual-host[_ngcontent-%COMP%]   .visualSite[_ngcontent-%COMP%]   .visual.allow-deferred-rendering[initialized][_ngcontent-%COMP%]{opacity:1}"]}),ae}()},74298:function(Ve,se,t){t.d(se,{W:function(){return i}});var e=t(67617),n=t(73637),f=t(2819),i=function(){function O(T){this.smartNarrativeData=T,this.visual=T.visual}return O.\u0275fac=function(V){return new(V||O)(n.\u0275\u0275directiveInject(e.M))},O.\u0275cmp=n.\u0275\u0275defineComponent({type:O,selectors:[["smart-narrative-overlay"]],decls:2,vars:1,consts:[[1,"pbi-depth-2"],[3,"visual"]],template:function(V,h){1&V&&(n.\u0275\u0275elementStart(0,"div",0),n.\u0275\u0275element(1,"smart-narrative",1),n.\u0275\u0275elementEnd()),2&V&&(n.\u0275\u0275advance(1),n.\u0275\u0275property("visual",h.visual))},dependencies:[f.I],encapsulation:2,changeDetection:0}),O}()},2819:function(Ve,se,t){t.d(se,{I:function(){return V}});var e=t(7005),n=t(73637),f=t(67471),i=t(18266),O=t(78186);function T(h,M){if(1&h&&(n.\u0275\u0275elementStart(0,"li")(1,"p"),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd()()),2&h){var I=M.$implicit;n.\u0275\u0275advance(2),n.\u0275\u0275textInterpolate(I)}}var V=function(){function h(M,I,b){this.lazyScoped=M,this.changeDetector=I,this.localizationService=b,this.summaryDisplays=[],this.emptySummaryCode="EmptySummary"}return h.prototype.ngOnInit=function(){this.ariaLabelString=this.localizationService.get("SmartNarratives_ToolTip"),this.summaryDisplays[0]=this.localizationService.get("SmartNarratives_Visual_Loading_Message"),this.update()},h.prototype.ngOnChanges=function(M){M.visual&&this.update()},h.prototype.update=function(){return(0,e.mG)(this,void 0,void 0,function(){var M,I,b;return(0,e.Jh)(this,function(P){switch(P.label){case 0:return this.visual?(M=this,[4,this.lazyScoped.get("smartNarratives")]):[3,3];case 1:return M.smartNarrativeService=P.sent(),[4,this.smartNarrativeService.getVisualSummary(this.visual)];case 2:(I=P.sent()).error&&I.error.code!==this.emptySummaryCode?this.summaryDisplays=[this.localizationService.get("SmartNarratives_Visual_Fail_Message")]:_.isEmpty(I.summaryText)?this.summaryDisplays=[this.localizationService.get("SmartNarratives_Visual_CouldNotFind_Message")]:(b=(b=I.summaryText.split("\n")).slice(0,3),this.summaryDisplays=b),this.changeDetector.detectChanges(),P.label=3;case 3:return[2]}})})},h.\u0275fac=function(I){return new(I||h)(n.\u0275\u0275directiveInject(f.H),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(i.o))},h.\u0275cmp=n.\u0275\u0275defineComponent({type:h,selectors:[["smart-narrative"]],inputs:{visual:"visual"},features:[n.\u0275\u0275NgOnChangesFeature],decls:4,vars:2,consts:[[2,"background-color","white"],["autofocus","autofocus","tabindex","0","role","region",1,"smartNarrative","themeableElement",2,"z-index","999"],["aria-live","polite"],[4,"ngFor","ngForOf"]],template:function(I,b){1&I&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"ul",2),n.\u0275\u0275template(3,T,3,1,"li",3),n.\u0275\u0275elementEnd()()()),2&I&&(n.\u0275\u0275advance(1),n.\u0275\u0275attribute("aria-label",b.ariaLabelString),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngForOf",b.summaryDisplays))},dependencies:[O.NgForOf],styles:[".smartNarrative[_ngcontent-%COMP%]{font-size:14px;width:260px;max-height:374px;overflow-y:auto;padding:12px 16px}.smartNarrative[_ngcontent-%COMP%]   .glyphicon[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle}.smartNarrative[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{vertical-align:middle;margin-bottom:4px;margin-left:2px}.smartNarrative[_ngcontent-%COMP%]   .noFilter[_ngcontent-%COMP%]{padding:5px}.smartNarrative[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:0}.smartNarrative[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;margin:0}.no-outline[_ngcontent-%COMP%]{outline:none}"],changeDetection:0}),h}()},84503:function(Ve,se,t){t.d(se,{$:function(){return g}});var e=t(7005),n=t(70030),f=t(93880),i=t(24708),O=t(19461),T=t(84752),V=t(73637),h=t(23196),M=t(25991),I=t(18266),b=t(78186),P=powerbi.explore.services.events,g=function(u){function s(p,C,A){var S=u.call(this)||this;return S.eventBridge=p,S.localizationService=C,S.navigationService=A,S}return(0,e.ZT)(s,u),s.prototype.ngOnInit=function(){var p=this,C=this.eventBridge.on(P.sectionChanged),A=this.eventBridge.on(P.sectionDeleted);this.sectionStatus$=(0,n.T)(C,A).pipe((0,f.O)(this.getSectionStatus()),(0,i.U)(function(){return p.getSectionStatus()}),(0,O.R)(this.onDestroy$))},s.prototype.getSectionStatus=function(){var p=this.navigationService.getCurrentSection(),C=this.navigationService.getAllSections();return p&&0!==(null==C?void 0:C.length)?this.localizationService.format("ReportStatusBarReportPageCount",C.indexOf(p)+1,C.length):""},s.\u0275fac=function(C){return new(C||s)(V.\u0275\u0275directiveInject(h.J),V.\u0275\u0275directiveInject(I.o),V.\u0275\u0275directiveInject(M.z))},s.\u0275cmp=V.\u0275\u0275defineComponent({type:s,selectors:[["status-bar-section-status"]],features:[V.\u0275\u0275InheritDefinitionFeature],decls:4,vars:3,consts:[[1,"statusBarSection"]],template:function(C,A){1&C&&(V.\u0275\u0275elementStart(0,"div",0)(1,"span"),V.\u0275\u0275text(2),V.\u0275\u0275pipe(3,"async"),V.\u0275\u0275elementEnd()()),2&C&&(V.\u0275\u0275advance(2),V.\u0275\u0275textInterpolate(V.\u0275\u0275pipeBind1(3,1,A.sectionStatus$)))},dependencies:[b.AsyncPipe],styles:[".statusBarSection[_ngcontent-%COMP%]{display:flex}"],changeDetection:0}),s}(T.w)},80681:function(Ve,se,t){t.d(se,{f:function(){return O},q:function(){return T}});var e=t(73637),n=t(41541),f=t(48333),i=t(78186),O=Object.freeze({maxZoomScale:4,midZoomScale:1,minZoomScale:.1,zoomScaleStepAmount:.1}),T=function(){function V(h){this.canvasZoomService=h,this.zoomScaleConfig=O}return V.prototype.ngOnInit=function(){this.zoomScale$=this.canvasZoomService.getZoomScale()},V.prototype.onFitToContent=function(){this.canvasZoomService.fitToPage()},V.prototype.onZoomStep=function(h){h?this.canvasZoomService.zoomIn():this.canvasZoomService.zoomOut()},V.prototype.onZoomScaleChange=function(h){this.canvasZoomService.setZoomScale(h)},V.\u0275fac=function(M){return new(M||V)(e.\u0275\u0275directiveInject(n.w))},V.\u0275cmp=e.\u0275\u0275defineComponent({type:V,selectors:[["status-bar-zoom"]],decls:2,vars:6,consts:[[3,"zoomScale","showFitToPage","enableZoomDialog","zoomScaleConfig","fitToPage","zoomStep","zoomScaleChange"]],template:function(M,I){1&M&&(e.\u0275\u0275elementStart(0,"pbi-zoom-control",0),e.\u0275\u0275listener("fitToPage",function(){return I.onFitToContent()})("zoomStep",function(P){return I.onZoomStep(P)})("zoomScaleChange",function(P){return I.onZoomScaleChange(P)}),e.\u0275\u0275pipe(1,"async"),e.\u0275\u0275elementEnd()),2&M&&e.\u0275\u0275property("zoomScale",e.\u0275\u0275pipeBind1(1,4,I.zoomScale$))("showFitToPage",!0)("enableZoomDialog",!0)("zoomScaleConfig",I.zoomScaleConfig)},dependencies:[f.i,i.AsyncPipe],encapsulation:2,changeDetection:0}),V}()},8178:function(Ve,se,t){t.d(se,{k:function(){return f}});var e=t(73637),n=t(28966),f=function(){function i(O){this.svgProvider=O}return i.prototype.ngOnInit=function(){this.svgProvider.loadSheet(this.sheet)},i.prototype.getSymbolRef=function(){return"#"+this.symbolId+(this.disabled?"_disabled":"")},i.\u0275fac=function(T){return new(T||i)(e.\u0275\u0275directiveInject(n.g))},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["svg-use-symbol"]],inputs:{disabled:"disabled",sheet:"sheet",symbolId:"symbolId"},decls:2,vars:2,consts:[["height","100%","width","100%"],[2,"pointer-events","none"]],template:function(T,V){1&T&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",0),e.\u0275\u0275element(1,"use",1),e.\u0275\u0275elementEnd()),2&T&&(e.\u0275\u0275advance(1),e.\u0275\u0275attribute("href",V.getSymbolRef())("href",V.getSymbolRef(),null,"xlink"))},encapsulation:2}),i}()},20671:function(Ve,se,t){t.d(se,{E:function(){return y}});var e=t(7005),n=t(73637),f=t(21810),i=t(37473),O=t(24708),T=t(98864),V=t(98632),h=t(4104),M=t(47013),I=t(84752),b=t(18266),P=t(28252),g=t(33714),u=t(78186),s=t(17181),p=t(65909),C=powerbi.visuals.FontProperties,A=powerbi.Promise;function S(d,w){if(1&d&&n.\u0275\u0275element(0,"hr",5),2&d){var x=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",x.dividerStyle)}}function L(d,w){if(1&d&&n.\u0275\u0275element(0,"div",6),2&d){var x=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",x.bufferSpaceStyle)}}function D(d,w){if(1&d){var x=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"pbi-menu-container",9),n.\u0275\u0275listener("menuButtonClick",function(Ce){n.\u0275\u0275restoreView(x);var he=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(he.handleActionClicked(Ce))})("onOpenSubMenu",function(Ce){n.\u0275\u0275restoreView(x);var he=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(he.openTouchSubMenu(Ce))})("isPointerWithin",function(Ce){n.\u0275\u0275restoreView(x);var he=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(he.receiveIsPointerWithin(Ce))}),n.\u0275\u0275elementEnd()}if(2&d){var N=n.\u0275\u0275nextContext(2).ngIf,X=n.\u0275\u0275nextContext();n.\u0275\u0275property("menu",N)("menuMode",X.menuMode)}}function m(d,w){if(1&d){var x=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mobile-tooltip-child-menu",10),n.\u0275\u0275listener("onHide",function(){n.\u0275\u0275restoreView(x);var Ce=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(Ce.onHide)})("onBack",function(){n.\u0275\u0275restoreView(x);var Ce=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(Ce.closeTouchSubMenu())}),n.\u0275\u0275elementEnd()}if(2&d){var N=n.\u0275\u0275nextContext().ngIf,X=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("commandsMenu",N)("commandsMenuTitle",X.touchSubMenuTitle)("actionIconStyle",X.touchSubMenuStyles.actionIconStyle)("actionTitleStyle",X.touchSubMenuStyles.actionTitleStyle)}}function v(d,w){if(1&d&&(n.\u0275\u0275elementContainerStart(0),n.\u0275\u0275template(1,D,1,2,"pbi-menu-container",7),n.\u0275\u0275template(2,m,1,4,"mobile-tooltip-child-menu",8),n.\u0275\u0275elementContainerEnd()),2&d){var x=w.ngIf,N=n.\u0275\u0275nextContext(2);n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",0==x.length||!N.isNewMobileTooltip),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",x.length>0&&N.isNewMobileTooltip)}}function l(d,w){if(1&d&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,S,1,1,"hr",2),n.\u0275\u0275template(2,L,1,1,"div",3),n.\u0275\u0275template(3,v,3,2,"ng-container",4),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275elementEnd()),2&d){var x=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!x.hideDivider),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!x.isOptimizedTouchEvent),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(4,3,x.touchSubMenu$))}}var y=function(d){function w(x,N,X){var ne=d.call(this)||this;return ne.localizationService=x,ne.telemetryService=N,ne.featureSwitchService=X,ne.onHide=new n.EventEmitter,ne.isPointerWithin=new n.EventEmitter,ne.menuMode=M.Kb.Full,ne.dividerStyle={},ne.bufferSpaceStyle={},ne.touchSubMenuStyles={actionTitleStyle:{},actionIconStyle:{}},ne.pbiMenuStyle={},ne.touchSubMenu$=new T.X([]),ne.subscriptionChange=(0,V.aj)([d.prototype.changes$.call(ne,"tooltipShown"),d.prototype.changes$.call(ne,"identities"),d.prototype.changes$.call(ne,"tooltipStyle")]).pipe((0,f.h)(function(Ce){return Ce[0]||!!Ce[1]})).subscribe(function(Ce){ne.setupActionComponent(Ce[2])}),ne}return(0,e.ZT)(w,d),Object.defineProperty(w.prototype,"isNewMobileTooltip",{get:function(){return this.featureSwitchService.featureSwitches.newMobileTooltip},enumerable:!1,configurable:!0}),w.prototype.ngOnChanges=function(x){this.touchSubMenu$.getValue().length>0&&this.isNewMobileTooltip&&this.openTouchSubMenu(),d.prototype.ngOnChanges.call(this,x)},w.prototype.setupActionComponent=function(x){x?(this.dividerStyle=this.constructDividerStyle(x),this.bufferSpaceStyle=this.constructBufferSpaceStyle(x),this.pbiMenuStyle=this.constructPbiMenuStyle(x),this.touchSubMenuStyles=this.setupTouchTooltipStyle(x)):this.telemetryService.logEvent(powerbi.telemetry.EXUndefinedTooltipStyleInActionBar);var N=this.getCommands();this.menu$=this.getPbiMenu(N,this.pbiMenuStyle,!0)},w.prototype.receiveIsPointerWithin=function(x){this.isPointerWithin.emit(x)},w.prototype.ngOnDestroy=function(){return this.isPointerWithin.emit(void 0),this.subscriptionChange.unsubscribe(),d.prototype.ngOnDestroy.call(this)},w.prototype.handleActionClicked=function(x){return(0,e.mG)(this,void 0,A,function(){var N,X;return(0,e.Jh)(this,function(ne){switch(ne.label){case 0:return(N=x.data).execute?(X=N.getTelemetryInfo(),this.telemetryService.logEvent(powerbi.telemetry.EXExecuteActionCommands,{commandName:X}),[4,N.execute()]):[3,2];case 1:ne.sent(),this.onHide.emit(),ne.label=2;case 2:return[2]}})})},w.prototype.openTouchSubMenu=function(){return(0,e.mG)(this,void 0,void 0,function(){var x,N,X,ne,Ce;return(0,e.Jh)(this,function(he){switch(he.label){case 0:if(!this.isOptimizedTouchEvent)return[2];X=0,ne=this.getCommands(),he.label=1;case 1:return X<ne.length?[4,(Ce=ne[X]).getChildren()]:[3,4];case 2:x=he.sent(),_.isEmpty(x)||(_.isEmpty(N),N=x,this.touchSubMenuTitle=Ce.title(this.localizationService)),he.label=3;case 3:return X++,[3,1];case 4:return _.isEmpty(N)||this.touchSubMenu$.next(N),[2]}})})},w.prototype.closeTouchSubMenu=function(){this.touchSubMenu$.next([])},w.prototype.setupTouchTooltipStyle=function(x){var N={actionTitleStyle:{},actionIconStyle:{}};if(x.actionFontProperties){var X=C.toHTMLStyle(x.actionFontProperties);N.actionIconStyle={color:X.color,fill:X.color,"font-size":X["font-size"]},N.actionTitleStyle={color:X.color,"font-size":X["font-size"],"font-family":X["font-family"]}}return N},w.prototype.getCommands=function(){var x;return(null===(x=this.actionsProvider)||void 0===x?void 0:x.updateAndGetTooltipCommands().filter(function(X){return X.enabled}).map(function(X){return X.command}))||[]},w.prototype.constructPbiMenuStyle=function(x){var N={};if(N["background-color"]=x.background.solid.color,N.opacity=null!=x.transparency?1-x.transparency/100:1,N[":hover"]={"background-color":x.hoverColor},x.actionFontProperties){var X=C.toHTMLStyle(x.actionFontProperties);N=(0,e.pi)((0,e.pi)({},N),X)}return N},w.prototype.constructDividerStyle=function(x){var N={};return N["background-color"]=x.dividerColor,N.opacity=null!=x.transparency?1-x.transparency/100:1,N},w.prototype.constructBufferSpaceStyle=function(x){var N={};return N["background-color"]=x.background.solid.color,N.opacity=null!=x.transparency?1-x.transparency/100:1,N},w.prototype.getPbiMenu=function(x,N,X){var ne=this,Ce=N["font-size"],he=N["font-family"],Fe=N.color,fe=N["background-color"],ae=N.opacity,pe=N[":hover"],ge=x.map(function(Me,ce){return(0,h.D)(Me.getChildren()).pipe((0,i.q)(1),(0,O.U)(function(J){var ie=J&&J.length>0?M.iB.SubMenu:M.iB.Button,G={id:ce,type:ie,text:Me.title(ne.localizationService),styles:{"font-family":he,"font-size":Ce,color:Fe,"background-color":fe,":hover":pe},icon:null==Me.glyph?null:{type:0,glyph:Me.glyph,styles:{"font-size":Ce,color:Fe}}};return ie===M.iB.SubMenu?G.menu=function(){return ne.getPbiMenu(J,ne.pbiMenuStyle,!1)}:G.data=Me,G}))});return(0,V.aj)(ge).pipe((0,f.h)(function(Me){return Me&&Me.length>0}),(0,O.U)(function(Me){return ne.telemetryService.logEvent(powerbi.telemetry.EXActionBarShown,{isSubmenu:!X}),{items:Me,styles:{"box-shadow":X?"none":"","border-radius":"0px","background-color":fe,opacity:ae,"min-width":X?"inherit":"",animation:"none"}}}))},w.\u0275fac=function(N){return new(N||w)(n.\u0275\u0275directiveInject(b.o),n.\u0275\u0275directiveInject(P.y0),n.\u0275\u0275directiveInject(g.vZ))},w.\u0275cmp=n.\u0275\u0275defineComponent({type:w,selectors:[["tooltip-actions"]],inputs:{actionsProvider:"actionsProvider",identities:"identities",tooltipShown:"tooltipShown",tooltipStyle:"tooltipStyle",isOptimizedTouchEvent:"isOptimizedTouchEvent",hideDivider:"hideDivider"},outputs:{onHide:"onHide",isPointerWithin:"isPointerWithin"},features:[n.\u0275\u0275InheritDefinitionFeature,n.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[["class","tooltip-actions-container",4,"ngIf"],[1,"tooltip-actions-container"],["class","tooltip-divider",3,"ngStyle",4,"ngIf"],["class","buffer-space",3,"ngStyle",4,"ngIf"],[4,"ngIf"],[1,"tooltip-divider",3,"ngStyle"],[1,"buffer-space",3,"ngStyle"],[3,"menu","menuMode","menuButtonClick","onOpenSubMenu","isPointerWithin",4,"ngIf"],[3,"commandsMenu","commandsMenuTitle","actionIconStyle","actionTitleStyle","onHide","onBack",4,"ngIf"],[3,"menu","menuMode","menuButtonClick","onOpenSubMenu","isPointerWithin"],[3,"commandsMenu","commandsMenuTitle","actionIconStyle","actionTitleStyle","onHide","onBack"]],template:function(N,X){1&N&&(n.\u0275\u0275template(0,l,5,5,"div",0),n.\u0275\u0275pipe(1,"async")),2&N&&n.\u0275\u0275property("ngIf",n.\u0275\u0275pipeBind1(1,1,X.menu$))},dependencies:[u.NgIf,u.NgStyle,s.m,p.d,u.AsyncPipe],styles:[".tooltip-actions-container[_ngcontent-%COMP%]{pointer-events:auto}.tooltip-actions-container[_ngcontent-%COMP%]   .tooltip-divider[_ngcontent-%COMP%]{width:100%;height:1px;border:none;margin:0}.tooltip-actions-container[_ngcontent-%COMP%]   .buffer-space[_ngcontent-%COMP%]{height:2px}","@media (orientation: landscape){.tooltip-container.truncate-tooltip-height   .visual-tooltip-mobile[_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu, .tooltip-container.truncate-tooltip-height   .visual-tooltip-mobile   [_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu{max-height:80px}}.tooltip-container   .visual-tooltip-mobile[_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu, .tooltip-container   .visual-tooltip-mobile   [_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu{background-color:transparent!important;opacity:1!important}.tooltip-container   .visual-tooltip-mobile[_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu .pbi-menu-item, .tooltip-container   .visual-tooltip-mobile   [_nghost-%COMP%]   .tooltip-actions-container[_ngcontent-%COMP%]     pbi-menu .pbi-menu-item{margin-left:15px;background-color:transparent!important}"],changeDetection:0}),w}(I.w)},6762:function(Ve,se,t){t.d(se,{z:function(){return yt}});var e=t(7005),n=t(73637),f=t(30411),i=t(41),O=t(29494),T=jsCommon.StringExtensions,V=powerbi.visuals.valueFormatter,h=function(De){return De[De.Top=0]="Top",De[De.Bottom=1]="Bottom",De}({}),M=function(){function De(Ie,Oe,Be){this.filterTypes=Ie,this.targetType=Oe,this.itemCount=Be}return De.prototype.getRestatement=function(Ie){if(null!=this.itemCount){var Oe=V.format(this.itemCount,"#,###"),Be=this.orderByDisplayName,qe=this.targetType.type===h.Top;return Be?T.format(Ie.get(qe?"FilterRestatement_TopNBy":"FilterRestatement_BottomNBy"),Oe,Be):T.format(Ie.get(qe?"FilterRestatement_TopN":"FilterRestatement_BottomN"),Oe)}},De.prototype.canApplyPendingClear=function(){return this.hasPendingClear&&!this.orderByField&&!this.itemCount},De.prototype.setInitialInputWarningStates=function(Ie,Oe){var Be=Ie&&-1!==Ie.indexOf(Oe.toString());this.showItemCountInputWarning=Be&&!this.itemCount,this.showOrderByFieldWarning=Be&&!this.orderByField},De.prototype.clearOrderByFieldWarning=function(){this.showOrderByFieldWarning=!1},De.prototype.updateItemCountInputWarning=function(){this.showItemCountInputWarning=this.showItemCountInputWarning&&this.itemCount<=0},De}(),I=powerbi.data.SQExpr,b=powerbi.data.SQExprBuilder;function p(De,Ie,Oe,Be,qe,je){return!I.equals(Ie,De.orderByField)&&(De.orderByField=Ie,De.availableAggregates=function(De,Ie,Oe,Be){return{items:powerbi.explore.viewModels.MenuItemFactory.createAggregateMenuItems(De,Ie,Oe,!1,powerbi.VisualDataRoleKind.Measure,[],Be)}}(Ie,Oe,je,qe),De.orderByDisplayName=Be.getDisplayName(De.orderByField,Oe,null,null,null,{includeVariationSource:!0}),De.selectedAggregate=I.isAggregation(Ie)?Ie.func:null,A(De),!0)}function A(De){for(var Ie=0,Oe=De.availableAggregates.items;Ie<Oe.length;Ie++){var Be=Oe[Ie];Be.checked=Be.key.aggregate===De.selectedAggregate}}powerbi;var D=t(59279),m=t(16660),v=t(93171),l=t(18766),y=t(31701),d=t(23196),w=t(25991),x=t(80242),N=t(16850),X=t(33714),ne=t(18266),Ce=t(42),he=t(5801),Fe=t(56339),fe=t(78186),ae=t(35380),pe=t(52181),ge=t(18601),Me=t(58622),ce=t(45055),J=t(16231),ie=t(21099),G=powerbi.data.FieldExprPattern,j=powerbi.explore.viewModels.FilterEvents,F=powerbi.explore.contracts.FilterType,E=powerbi.explore.FilterUtils,k=powerbi.data.SQExprBuilder,R=powerbi.data.SQExprConverter,z=powerbi.data.SQExprUtils,Q=powerbi.data.TopNFilterPattern,me=function(Ie,Oe){return{"font-size":Ie,"font-family":Oe}};function le(De,Ie){if(1&De&&n.\u0275\u0275element(0,"pbi-alert",14),2&De){var Oe=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction2(3,me,Oe.viewModel.fontSize,Oe.viewModel.fontFamily))("kind","warning")("messageWarning","TopNFilter_SingleTopNAllowedWarning")}}var K=function(Ie,Oe,Be,qe){return{"background-color":Ie,color:Oe,"border-color":Be,"font-family":qe}};function q(De,Ie){if(1&De&&(n.\u0275\u0275elementStart(0,"mat-option",17),n.\u0275\u0275text(1),n.\u0275\u0275elementEnd()),2&De){var Oe=Ie.$implicit,Be=n.\u0275\u0275nextContext(3);n.\u0275\u0275property("value",Oe)("ngStyle",n.\u0275\u0275pureFunction4(3,K,Be.viewModel.inputBoxBackgroundColor,Be.viewModel.inputBoxForegroundColor,Be.viewModel.inputBoxBorderColor,Be.viewModel.fontFamily)),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate1(" ",Oe.text,"")}}var ye=function(Ie,Oe,Be){return{"background-color":Ie,color:Oe,"border-color":Be}};function Le(De,Ie){if(1&De){var Oe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"mat-select",15),n.\u0275\u0275listener("selectionChange",function(je){n.\u0275\u0275restoreView(Oe);var st=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(st.onTargetSelectionChange(je))})("ngModelChange",function(je){n.\u0275\u0275restoreView(Oe);var st=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(st.vm.targetType=je)}),n.\u0275\u0275template(1,q,2,8,"mat-option",16),n.\u0275\u0275elementEnd()}if(2&De){var Be=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction3(3,ye,Be.viewModel.inputBoxBackgroundColor,Be.viewModel.inputBoxForegroundColor,Be.viewModel.inputBoxBorderColor))("ngModel",Be.vm.targetType),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",Be.vm.filterTypes)}}function Ne(De,Ie){if(1&De){var Oe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",22),n.\u0275\u0275listener("click",function(qe){n.\u0275\u0275restoreView(Oe);var je=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(je.showContextMenu(qe))}),n.\u0275\u0275elementEnd()}}function be(De,Ie){if(1&De){var Oe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",23),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(Oe);var qe=n.\u0275\u0275nextContext(3);return n.\u0275\u0275resetView(qe.removeOrderBy())}),n.\u0275\u0275elementEnd()}}function Y(De,Ie){if(1&De&&(n.\u0275\u0275elementStart(0,"div",18)(1,"span",19),n.\u0275\u0275text(2),n.\u0275\u0275elementEnd(),n.\u0275\u0275template(3,Ne,1,0,"button",20),n.\u0275\u0275template(4,be,1,0,"button",21),n.\u0275\u0275elementEnd()),2&De){var Oe=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction3(5,ye,Oe.viewModel.inputBoxBackgroundColor,Oe.viewModel.inputBoxForegroundColor,Oe.viewModel.inputBoxBorderColor)),n.\u0275\u0275advance(1),n.\u0275\u0275property("tabindex",Oe.isEditMode?0:-1),n.\u0275\u0275advance(1),n.\u0275\u0275textInterpolate(Oe.vm.orderByDisplayName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Oe.vm.availableAggregates.items.length>0),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Oe.isEditMode)}}function ue(De,Ie){1&De&&n.\u0275\u0275element(0,"div",24)}function Pe(De,Ie){if(1&De&&n.\u0275\u0275element(0,"button",25),2&De){var Oe=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("disabled",!Oe.canApplyFilter())}}var Ae=function(Ie){return{invalid:Ie}},Ze=function(Ie){return{"font-size":Ie}},ot=function(Ie){return{filled:Ie}};function lt(De,Ie){if(1&De){var Oe=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"form",1),n.\u0275\u0275listener("ngSubmit",function(){n.\u0275\u0275restoreView(Oe);var je=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(je.applyFilter())}),n.\u0275\u0275template(1,le,1,6,"pbi-alert",2),n.\u0275\u0275elementStart(2,"fieldset",3),n.\u0275\u0275element(3,"legend",4),n.\u0275\u0275elementStart(4,"div",5),n.\u0275\u0275template(5,Le,2,7,"mat-select",6),n.\u0275\u0275elementStart(6,"input",7),n.\u0275\u0275listener("ngModelChange",function(je){n.\u0275\u0275restoreView(Oe);var st=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(st.vm.itemCount=je)})("input",function(je){n.\u0275\u0275restoreView(Oe);var st=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(st.onInputEvent(je))}),n.\u0275\u0275elementEnd()()(),n.\u0275\u0275elementStart(7,"fieldset",8),n.\u0275\u0275element(8,"legend",9),n.\u0275\u0275elementStart(9,"div",10),n.\u0275\u0275listener("dropHandler",function(){n.\u0275\u0275restoreView(Oe);var je=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(je.dropFilterTarget())})("dropAction",function(){n.\u0275\u0275restoreView(Oe);var je=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(je.getDropAction())})("drop",function(je){n.\u0275\u0275restoreView(Oe);var st=n.\u0275\u0275nextContext();return n.\u0275\u0275resetView(st.drop(je))}),n.\u0275\u0275template(10,Y,5,9,"div",11),n.\u0275\u0275template(11,ue,1,0,"div",12),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(12,Pe,1,1,"button",13),n.\u0275\u0275elementEnd()}if(2&De){var Be=n.\u0275\u0275nextContext();n.\u0275\u0275property("formGroup",Be.topNFilterForm)("ngClass",n.\u0275\u0275pureFunction1(24,Ae,Be.viewModel.isInvalidCardType()))("ngStyle",n.\u0275\u0275pureFunction1(26,Ze,Be.viewModel.fontSize)),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Be.viewModel.isInvalidCardType()),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",Be.viewModel.isInvalidCardType()),n.\u0275\u0275advance(3),n.\u0275\u0275property("ngIf",Be.vm.targetType),n.\u0275\u0275advance(1),n.\u0275\u0275classProp("filterInputWarningBorder",Be.vm.showItemCountInputWarning),n.\u0275\u0275propertyInterpolate("placeholder",Be.viewModel.getInputPlaceholder()),n.\u0275\u0275property("ngStyle",n.\u0275\u0275pureFunction3(28,ye,Be.viewModel.inputBoxBackgroundColor,Be.viewModel.inputBoxForegroundColor,Be.viewModel.inputBoxBorderColor))("ngModel",Be.vm.itemCount),n.\u0275\u0275attribute("aria-label",Be.topNEditAriaLabel)("aria-valuemin",Be.topNMinValue)("aria-valuemax",Be.topNMaxValue)("aria-invalid",Be.ariaInvalid),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",Be.viewModel.isInvalidCardType()),n.\u0275\u0275advance(2),n.\u0275\u0275classProp("filterInputWarningBorder",Be.vm.showOrderByFieldWarning),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction1(32,ot,Be.vm.orderByDisplayName))("ngStyle",n.\u0275\u0275pureFunction3(34,ye,Be.viewModel.inputBoxBackgroundColor,Be.viewModel.inputBoxForegroundColor,Be.viewModel.inputBoxBorderColor))("drop",Be.dropConfig),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",Be.vm.orderByDisplayName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!Be.vm.orderByDisplayName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",!Be.isApplyAllOnForThisFilter())}}var yt=function(){function De(Ie,Oe,Be,qe,je,st,ht,Pt,ze,ke,We,Ue,ve,r,o,a){this.aggrOps=Ie,this.conceptualSchemaProxy=Oe,this.contextActivityService=Be,this.dataSources=qe,this.displayNameService=je,this.dragDataService=st,this.dropdown=ht,this.eventBridge=Pt,this.explorationNavigation=ze,this.featureSwitchService=ke,this.localizationService=We,this.ngZone=Ue,this.promiseFactory=ve,this.viewModeState=r,this.visualAuthoring=o,this.visualPlugin=a,this.onFilterChanged=new n.EventEmitter,this.topNMaxValue=9999999,this.topNMinValue=1,this.ariaInvalid=!1}return De.prototype.ngOnInit=function(){var Ie=this;this.topNFilterForm=new f.nJ({targetType:new f.p4,itemCount:new f.p4}),this.topNInteropForm=new i.h(this.topNFilterForm),this.ngZone.run(function(){return Ie.onInitImpl()}),this.topNEditAriaLabel=this.localizationService.get("Top_N_Edit_Aria_Label")},De.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},Object.defineProperty(De.prototype,"isEditMode",{get:function(){return 1===this.viewModeState.getMode()},enumerable:!1,configurable:!0}),De.prototype.applyFilter=function(Ie){return(0,e.mG)(this,void 0,void 0,function(){var Oe,Be,qe,je;return(0,e.Jh)(this,function(st){switch(st.label){case 0:return this.canApplyFilter()?(document.activeElement.blur(),this.viewModel.contract.type=F.TopN,Oe={fieldBeingFiltered:this.viewModel.contract.expression,isTop:this.vm.targetType.type===h.Top,itemCount:this.vm.itemCount,orderByField:this.vm.orderByField},this.vm.canApplyPendingClear()?(this.visualAuthoring.updateFilter(this.viewModel.getFilterContainerScope(),this.viewModel.contract,void 0),Be=!0,[3,3]):[3,1]):[2];case 1:return[4,this.visualAuthoring.updateTopNFilter(this.viewModel.visualContainer,Oe,this.viewModel.getFilterContainerScope(),this.viewModel.contract,this.viewModel.isInOutspacePane,Ie)];case 2:Be=st.sent(),st.label=3;case 3:return Be&&(qe=void 0,this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(qe=E.createChangeFilterActivity(this.contextActivityService,"Top N Filter")),je={filter:this.viewModel.contract,changeType:2,scope:this.viewModel.getFilterContainerScope(),changeFilterActivity:qe},this.viewModel.useDefaultFilter=!1,this.updateRestatement(),this.topNInteropForm.setPristine(),this.onFilterChanged.emit(je),qe&&qe.resolve()),[2]}})})},De.prototype.canApplyFilter=function(){return this.checkDisabled(),!this.viewModel.isInvalidCardType()&&this.vm&&this.vm.canApplyPendingClear()||this.vm.itemCount>0&&null!=this.vm.orderByField&&this.topNInteropForm.isDirty()&&this.topNInteropForm.isValid()},De.prototype.dropFilterTarget=function(){var Ie=this.dragDataService.getDragContext();!Ie||!Ie.field||this.dropField(Ie.field)},De.prototype.drop=function(Ie){var Oe=powerbi.explore.helpers.getModernFieldListExpr(Ie);!Oe||this.dropField(Oe)},De.prototype.dropField=function(Ie){var Oe=this,Be=this.dataSources.get();this.conceptualSchemaProxy.get(Be).then(function(qe){var je=z.isMeasure(Ie)?Ie:k.aggregate(Ie,Oe.aggrOps.defaultAggregate(Ie,qe,!0));Oe.isValidOrderByExpr(je,qe)&&Oe.ngZone.run(function(){p(Oe.vm,je,qe,Oe.displayNameService,Oe.localizationService,Oe.aggrOps)&&Oe.topNInteropForm.setDirty()}),Oe.isApplyAllOnForThisFilter()&&(Oe.vm.clearOrderByFieldWarning(),E.notifyBufferedFilterChanges(Oe.eventBridge,Oe.viewModel.getFilterContainerScope().scopeType,F.TopN,Oe.viewModel.id,Oe.canApplyFilter()))})},De.prototype.getDropAction=function(){return(0,e.mG)(this,void 0,void 0,function(){var Ie,Oe,Be,qe,je,st;return(0,e.Jh)(this,function(ht){switch(ht.label){case 0:return Ie=this.promiseFactory.defer(),Oe=0,this.viewModel.isInvalidCardType()?[3,2]:(Be=this.dragDataService.getDragContext())&&Be.field?(qe=Be.field,je=this.dataSources.get(),[4,this.conceptualSchemaProxy.get(je)]):[3,2];case 1:st=ht.sent(),this.isValidOrderByExpr(qe,st)&&!z.isFromVariation(qe)&&(Oe=1),ht.label=2;case 2:return Ie.resolve(Oe),[2,Ie.promise]}})})},De.prototype.removeOrderBy=function(){(function(De){De.orderByField=null,De.availableAggregates=null,De.selectedAggregate=null,De.orderByDisplayName=null})(this.vm),this.topNInteropForm.setDirty(),this.isApplyAllOnForThisFilter()&&E.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,F.TopN,this.viewModel.id,this.canApplyFilter())},De.prototype.selectAggregate=function(Ie){var Oe=this;if(Ie!==this.vm.selectedAggregate){var Be=this.dataSources.get();this.conceptualSchemaProxy.get(Be).then(function(qe){(function(De,Ie,Oe,Be,qe){return De.selectedAggregate!==Ie&&(De.orderByField=b.setAggregate(De.orderByField,Ie),De.selectedAggregate=Ie,A(De),De.orderByDisplayName=Be.getDisplayName(De.orderByField,Oe,null,null,null,{includeVariationSource:!0}),!0)})(Oe.vm,Ie,qe,Oe.displayNameService)&&(Oe.topNInteropForm.setDirty(),Oe.isApplyAllOnForThisFilter()&&E.notifyBufferedFilterChanges(Oe.eventBridge,Oe.viewModel.getFilterContainerScope().scopeType,F.TopN,Oe.viewModel.id,Oe.canApplyFilter()))})}},De.prototype.showContextMenu=function(Ie){var Oe=this,Be={anchorElement:$(Ie.currentTarget)};this.dropdown.showContextMenu(this.vm.availableAggregates,void 0,function(qe){return Oe.selectAggregate(qe.aggregate)},!1,void 0,void 0,!0,Be)},De.prototype.onInputEvent=function(Ie){this.isApplyAllOnForThisFilter()&&isFinite(Ie.data)&&(this.vm.updateItemCountInputWarning(),E.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,F.TopN,this.viewModel.id,this.canApplyFilter())),this.ariaInvalid=!this.topNInteropForm.isValid()},De.prototype.onTargetSelectionChange=function(Ie){this.isApplyAllOnForThisFilter()&&E.notifyBufferedFilterChanges(this.eventBridge,this.viewModel.getFilterContainerScope().scopeType,F.TopN,this.viewModel.id,this.canApplyFilter())},De.prototype.isApplyAllOnForThisFilter=function(){var Ie=this.viewModeState.getConfig().displayOptions.enableMobileFilters;return E.isApplyAllEnabled(this.viewModel.isInOutspacePane||Ie,this.explorationNavigation)},De.prototype.onApplyAllClicked=function(Ie){this.isApplyAllOnForThisFilter()&&(Ie.idsInError?this.vm.setInitialInputWarningStates(Ie.idsInError,this.viewModel.id):this.applyFilter(Ie.undoRedoActionId),this.vm.hasPendingClear=!1)},De.prototype.onInitImpl=function(){var Ie=this;this.initializeViewModel(this.viewModel.contract),this.checkDisabled(),this.dropConfig={accept:"field"},this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(powerbi.explore.services.events.filterContainerChanged,function(Oe,Be){return Ie.onFilterContainerChanged(Be)}).subscribe(powerbi.explore.services.events.applyAllClicked,function(Oe,Be){return Ie.onApplyAllClicked(Be)}).subscribe(powerbi.explore.services.events.explorationSlowDataSourceSettingsLoaded,function(Oe,Be){return Ie.ngZone.run(function(){Be.isApplyAllButtonEnabledChanged&&(Ie.vm.setInitialInputWarningStates(),Ie.vm.hasPendingClear=!1)})}).subscribe(j.topNFilterOrderByUpdate,function(Oe,Be){return Ie.onTopNFilterValueUpdate(Be)})},De.prototype.checkDisabled=function(){var Ie=this,Oe=this.viewModel.getFilterContainerScope().container;this.viewModel.cardType.invalid=this.isApplyAllOnForThisFilter()?_.filter(Oe.filters,function(Be){return Be&&Be.type===F.TopN}).length>1:_.some(Oe.filters,function(Be){return Be&&Be!==Ie.viewModel.contract&&Q.extractParametersFromFilter(Be.filter)})},De.prototype.initializeViewModel=function(Ie){var Oe=this,Be=this.dataSources.get();this.conceptualSchemaProxy.get(Be).then(function(qe){var je=Ie&&Ie.filter&&Q.extractParametersFromFilter(Ie.filter);Oe.vm=function(De,Ie,Oe,Be,qe){var je=!De||De.isTop?h.Top:h.Bottom,st=function(De){return[{type:h.Top,text:De.get("Top")},{type:h.Bottom,text:De.get("Bottom")}]}(Oe),ht=new M(st,_.find(st,function(Pt){return Pt.type===je}),De&&De.itemCount);return De&&p(ht,De.orderByField,Ie,Be,Oe,qe),ht}(je,qe,Oe.localizationService,Oe.displayNameService,Oe.aggrOps),Oe.updateRestatement(),Oe.viewModel.updateFilterProperties(qe,Oe.visualPlugin,Oe.aggrOps),Oe.viewModel.updateViewState()})},De.prototype.isValidOrderByExpr=function(Ie,Oe){var Be=R.asFieldPattern(Ie,Oe);return!!(z.isMeasure(Ie)||G.getProperty(Be)||Be.hierarchyLevel)},De.prototype.onTopNFilterValueUpdate=function(Ie){var Oe=this,Be=Ie.filterViewModel,qe=Ie.orderByField;if(Be&&Be.contract===this.viewModel.contract){var je=this.dataSources.get();this.conceptualSchemaProxy.get(je).then(function(st){Oe.isValidOrderByExpr(qe,st)&&p(Oe.vm,qe,st,Oe.displayNameService,Oe.localizationService,Oe.aggrOps)&&Oe.topNInteropForm.setDirty()})}},De.prototype.onFilterContainerChanged=function(Ie){Ie.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(Ie.changeType,10)?this.onFilterClear(Ie):Ie.filter===this.viewModel.contract&&jsCommon.EnumExtensions.hasFlag(Ie.changeType,2)&&this.initializeViewModel(Ie.filter),this.checkDisabled()},De.prototype.onFilterClear=function(Ie){this.isApplyAllOnForThisFilter()?(this.vm.hasPendingClear=!0,this.topNInteropForm.setDirty(),this.vm.setInitialInputWarningStates(),this.vm.itemCount=void 0,this.removeOrderBy()):this.initializeViewModel(Ie.filter)},De.prototype.updateRestatement=function(){this.viewModel.setRestatement(this.vm.getRestatement(this.localizationService))},De.\u0275fac=function(Oe){return new(Oe||De)(n.\u0275\u0275directiveInject(D.C),n.\u0275\u0275directiveInject(m.i),n.\u0275\u0275directiveInject(v.r),n.\u0275\u0275directiveInject(l.D),n.\u0275\u0275directiveInject(y.O),n.\u0275\u0275directiveInject(x.x),n.\u0275\u0275directiveInject(N.V),n.\u0275\u0275directiveInject(d.J),n.\u0275\u0275directiveInject(w.z),n.\u0275\u0275directiveInject(X.vZ),n.\u0275\u0275directiveInject(ne.o),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(O.t),n.\u0275\u0275directiveInject(Ce.kc),n.\u0275\u0275directiveInject(he.$),n.\u0275\u0275directiveInject(Fe.D))},De.\u0275cmp=n.\u0275\u0275defineComponent({type:De,selectors:[["top-n-filter"]],inputs:{viewModel:"viewModel"},outputs:{onFilterChanged:"onFilterChanged"},decls:1,vars:1,consts:[["class","topNFilterModern",3,"formGroup","ngClass","ngStyle","ngSubmit",4,"ngIf"],[1,"topNFilterModern",3,"formGroup","ngClass","ngStyle","ngSubmit"],["class","pbi-alert-reset",3,"ngStyle","kind","messageWarning",4,"ngIf"],[1,"filterOptions",3,"disabled"],["id","TopNFilter_header","localize","ShowItems"],[1,"topNSelector","topNInputArea","flex"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","aria-labelledby","TopNFilter_header","class","item-fill topNInputBox pbi-modern-select","formControlName","targetType","panelClass","pbi-modern-select-panel themeableElement","disableOptionCentering","true",3,"ngStyle","ngModel","selectionChange","ngModelChange",4,"ngIf"],["pattern","^[1-9][0-9]{0,6}$","formControlName","itemCount","type","number","inputmode","numeric",1,"item-fill","topNInputBox","topNNumber","pbi-modern-input",3,"ngStyle","ngModel","placeholder","ngModelChange","input"],[1,"orderBy",3,"disabled"],["localize","TopNFilter_Value"],[1,"topNInputArea","ui-droppable","dropzone","topNInputBox",3,"ngClass","ngStyle","drop","dropHandler","dropAction"],["class","flex orderByPill",3,"ngStyle",4,"ngIf"],["class","dragHereWatermark trimmedTextWithEllipsis","localize","FieldDropZone_AddFields",4,"ngIf"],["type","submit","class","applyFilter smallFontSize","localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",3,"disabled",4,"ngIf"],[1,"pbi-alert-reset",3,"ngStyle","kind","messageWarning"],["pbiMatSelect","","tabindex","0","focus-nav-mode","Browser","aria-labelledby","TopNFilter_header","formControlName","targetType","panelClass","pbi-modern-select-panel themeableElement","disableOptionCentering","true",1,"item-fill","topNInputBox","pbi-modern-select",3,"ngStyle","ngModel","selectionChange","ngModelChange"],[3,"value","ngStyle",4,"ngFor","ngForOf"],[3,"value","ngStyle"],[1,"flex","orderByPill",3,"ngStyle"],[1,"displayName","trimmedTextWithEllipsis","item-fill",3,"tabindex"],["class","fieldWellIcon dropDown item-auto glyphicon pbi-glyph-chevrondownsmall glyph-mini","type","button",3,"click",4,"ngIf"],["localizeTooltip","FieldWell_Remove","class","delete glyphicon pbi-glyph-close glyph-micro item-auto","type","button",3,"click",4,"ngIf"],["type","button",1,"fieldWellIcon","dropDown","item-auto","glyphicon","pbi-glyph-chevrondownsmall","glyph-mini",3,"click"],["localizeTooltip","FieldWell_Remove","type","button",1,"delete","glyphicon","pbi-glyph-close","glyph-micro","item-auto",3,"click"],["localize","FieldDropZone_AddFields",1,"dragHereWatermark","trimmedTextWithEllipsis"],["type","submit","localize","Filter_ApplyFilter","localizeTooltip","Filter_ApplyFilterDescription",1,"applyFilter","smallFontSize",3,"disabled"]],template:function(Oe,Be){1&Oe&&n.\u0275\u0275template(0,lt,13,38,"form",0),2&Oe&&n.\u0275\u0275property("ngIf",void 0!==Be.vm)},dependencies:[fe.NgClass,fe.NgForOf,fe.NgIf,fe.NgStyle,f._Y,f.Fj,f.wV,f.JJ,f.JL,f.c5,ae.X,pe.r,ge.gD,Me.ey,f.sg,f.u,ce.W,J.r,ie.x],styles:[".topNFilterModern.invalid[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{border-color:var(--neutral-secondary-color, #666666);background-color:inherit}.topNFilterModern.invalid[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%], .topNFilterModern.invalid[_ngcontent-%COMP%]   .applyFilter[_ngcontent-%COMP%], .topNFilterModern.invalid[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{color:var(--neutral-secondary-color, #666666)}.topNFilterModern[_ngcontent-%COMP%]   pbi-alert[_ngcontent-%COMP%]{margin-top:8px}.topNFilterModern[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{min-width:0;border-width:0;margin:8px 0 0;padding:0}.topNFilterModern[_ngcontent-%COMP%]   .topNInputArea[_ngcontent-%COMP%]{margin-top:4px;margin-bottom:4px}.topNFilterModern[_ngcontent-%COMP%]   .topNInputArea.dropzone[_ngcontent-%COMP%]{margin:4px 0;padding:0}.topNFilterModern[_ngcontent-%COMP%]   .topNSelector[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:4px;width:inherit}.topNFilterModern[_ngcontent-%COMP%]   .topNNumber[_ngcontent-%COMP%]{min-width:40px;-moz-appearance:textfield}.topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{box-sizing:border-box;height:28px;border:1px dashed var(--neutral-secondary-color, #666666);border-radius:4px;background-color:var(--neutral-primary-color-alt2, #4a4a4a)}.topNFilterModern[_ngcontent-%COMP%]   .dropzone.dropover[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811);border-style:dashed}.topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]{height:100%;background:var(--neutral-primary-color, #333333);border:1px solid var(--neutral-dark-color, #212121);border-radius:3px;box-sizing:border-box;color:var(--white-color, #FFF)}.topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .displayName[_ngcontent-%COMP%]{margin-left:4px;line-height:21px}.topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{height:16px;width:16px;background:0 0;flex-grow:0;color:inherit}.topNFilterModern[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{display:inline-block;width:100%;line-height:22px;margin-left:4px}.topNFilterModern[_ngcontent-%COMP%]   .removeOrderBy[_ngcontent-%COMP%]{margin:0 4px}.topNFilterModern[_ngcontent-%COMP%]   .removeOrderBy[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--neutral-secondary-alt-color2, #888888)}.topNFilterModern[_ngcontent-%COMP%]   .dropDown[_ngcontent-%COMP%]{background:transparent;color:inherit}.isInOutspacePane   .card[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .displayName[_ngcontent-%COMP%], .isInOutspacePane   .card   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .displayName[_ngcontent-%COMP%]{line-height:initial}.isInOutspacePane   .card[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .topNInputArea[_ngcontent-%COMP%], .isInOutspacePane   .card   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .topNInputArea[_ngcontent-%COMP%]{margin-bottom:0}.isInOutspacePane   .card[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%], .isInOutspacePane   .card   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{height:initial;border-radius:2px;border:1px solid var(--neutral-tertiary-alt-color, #C8C8C8);color:inherit;text-align:left;padding:2px;margin-bottom:2px}.isInOutspacePane   .card[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%], .isInOutspacePane   .card   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{line-height:initial;vertical-align:middle;min-height:20px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{border-color:var(--gray-80, #B3B0AD)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%], .newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern.invalid[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{color:var(--gray-80, #B3B0AD)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{border-color:var(--gray-60, #C8C6C4);background-color:var(--white-color, #FFF);border-radius:2px}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone.dropover[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .dropzone.dropover[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]{background:var(--gray-30, #EDEBE9);border-color:var(--gray-60, #C8C6C4);border-radius:2px;color:var(--gray-180, #252423)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .newPaneColors.explorationContainer[_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .topNFilterModern[_ngcontent-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{background-color:var(--white-color, #FFF);border-color:var(--gray-60, #C8C6C4)}",".exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{height:32px;background-color:var(--fluentThemeWhiteColor);border:0;padding-left:8px;margin:4px 0;flex-basis:100%}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]{border:1px solid var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]{color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox.topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 4px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]{flex-flow:row wrap}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]{visibility:hidden!important}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]:before, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .dragHereWatermark[_ngcontent-%COMP%]:before{visibility:visible!important;color:var(--fluentThemeNeutralTertiaryColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]{border:0;background-color:inherit}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .removeOrderBy[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputArea[_ngcontent-%COMP%]   .orderByPill[_ngcontent-%COMP%]   .removeOrderBy[_ngcontent-%COMP%]{display:none}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   input.topNNumber[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   input.topNNumber[_ngcontent-%COMP%]{border-radius:inherit;border-bottom:1px solid var(--fluentThemeNeutralTertiaryColor);color:var(--fluentThemeNeutralDarkColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   input.topNNumber[_ngcontent-%COMP%]::-webkit-input-placeholder, .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   input.topNNumber[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--fluentThemeNeutralSecondaryAltColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   select[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   select[_ngcontent-%COMP%]{color:var(--fluentThemeNeutralDarkColor)!important;border-radius:4px;border:1px solid var(--fluentThemeNeutralTertiaryColor);background:url(data:image/svg+xml;utf8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath%20d%3D%22M8%202.49707L3.93262%206.55762L3.31738%205.94238L8%201.25293L12.6826%205.94238L12.0674%206.55762L8%202.49707ZM8%2013.5029L12.0674%209.44238L12.6826%2010.0576L8%2014.7471L3.31738%2010.0576L3.93262%209.44238L8%2013.5029Z%22%20fill%3D%22%23201F1E%22%2F%3E%3C%2Fsvg%3E) center right 10px no-repeat var(--fluentThemeWhiteColor)}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .orderBy[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .orderBy[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{padding-left:8px}.exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   pbi-alert[_ngcontent-%COMP%], .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   pbi-alert[_ngcontent-%COMP%]{color:var(--fluent-theme-neutral-dark-color, #201F1E)}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .topNInputBox[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .topNInputBox[_ngcontent-%COMP%]{padding-right:8px}html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu[_nghost-%COMP%]   .orderBy[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%], html[dir=rtl]   .exploreHost.landingController   .mobileFooterFiltersMenu   [_nghost-%COMP%]   .orderBy[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{padding-right:8px}*[_ngcontent-%COMP%]{-webkit-tap-highlight-color:transparent}"]}),De}()},44099:function(Ve,se,t){t.d(se,{U:function(){return T}});var e=t(7005),n=t(73637),f=t(69314),i=powerbi.common.controllers.TransformElement,O=["*"],T=function(){function V(h,M,I){this.elementRef=h,this.platformCapabilities=M,this.ngZone=I,this.positionChange=new n.EventEmitter}return V.prototype.ngAfterViewInit=function(){this.updatePosition(this.position),this.attachHandlers&&this.updateTransformElement()},V.prototype.ngOnDestroy=function(){this.transformElement&&this.transformElement.destroy()},V.prototype.ngOnChanges=function(h){var M=!1;if(h.autoScrollSelector){var I=h.autoScrollSelector,b=I.currentValue;I.previousValue&&(this.autoScrollElement=void 0),b&&(this.autoScrollElement=$(this.elementRef.nativeElement).closest(b)),M=!h.autoScrollSelector.isFirstChange()}h.attachHandlers&&h.attachHandlers.currentValue&&!h.attachHandlers.isFirstChange()&&(M=!0),h.position&&!h.position.isFirstChange()&&this.updatePosition(h.position.currentValue),h.transformOptions&&!h.transformOptions.isFirstChange()&&(M=!0),this.attachHandlers&&M?this.updateTransformElement():this.transformElement&&!this.attachHandlers&&(this.transformElement.destroy(),this.transformElement=void 0)},V.prototype.updateTransformElement=function(){var h=(0,e.pi)((0,e.pi)({},this.transformOptions),{supportsPointerCapture:this.platformCapabilities.supportsPointerCapture,restrictDraw:this.restrictDraw});this.autoScrollElement&&(h.autoScrollParent=this.autoScrollElement),this.transformElement?this.transformElement.updateOptions(h):this.transformElement=new i($(this.elementRef.nativeElement),this.ngZone,h)},V.prototype.updatePosition=function(h){var M=[];h.angle&&M.push("rotate(".concat(h.angle,"deg)")),M.push("translate(".concat(h.x,"px, ").concat(h.y,"px)")),$(this.elementRef.nativeElement).height(h.height).width(h.width).css("transform",M.join(" ")).css("zIndex",h.z),this.positionChange.emit(h)},V.\u0275fac=function(M){return new(M||V)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(f.E),n.\u0275\u0275directiveInject(n.NgZone))},V.\u0275cmp=n.\u0275\u0275defineComponent({type:V,selectors:[["transform"]],inputs:{attachHandlers:"attachHandlers",autoScrollSelector:"autoScrollSelector",position:"position",restrictDraw:"restrictDraw",transformOptions:"transformOptions"},outputs:{positionChange:"positionChange"},features:[n.\u0275\u0275NgOnChangesFeature],ngContentSelectors:O,decls:1,vars:0,template:function(M,I){1&M&&(n.\u0275\u0275projectionDef(),n.\u0275\u0275projection(0))},styles:["[_nghost-%COMP%]{position:absolute}"]}),V}()},75206:function(Ve,se,t){t.d(se,{g:function(){return i}});var e=t(73637),n=t(81609),f=t(31053),i=function(){function O(T){this.modelingUICapabilitiesService=T,this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/visual-calc-editor/visual-calc-editor.module#VisualCalcEditorModule",this.componentId="VisualCalcEditorComponentId"}return O.prototype.ngOnInit=function(){this.modelingUICapabilitiesService.disableDataModelFormulaBar()},O.prototype.ngOnChanges=function(){this.inputArgs={visualContainer:this.visualContainer,themeCollection:this.themeCollection,viewport:this.viewport,detailVisualSpinnerActionCallback:this.detailVisualSpinnerActionCallback}},O.prototype.ngOnDestroy=function(){this.modelingUICapabilitiesService.enableDataModelFormulaBar()},O.\u0275fac=function(V){return new(V||O)(e.\u0275\u0275directiveInject(n.B))},O.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["visual-calc-editor-lazy"]],inputs:{visualContainer:"visualContainer",themeCollection:"themeCollection",viewport:"viewport",detailVisualSpinnerActionCallback:"detailVisualSpinnerActionCallback"},features:[e.\u0275\u0275NgOnChangesFeature],decls:2,vars:3,consts:[[1,"visual-calc-editor-lazy"],[3,"modulePath","componentId","inputArgs"]],template:function(V,h){1&V&&(e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275element(1,"pbi-lazy-load",1),e.\u0275\u0275elementEnd()),2&V&&(e.\u0275\u0275advance(1),e.\u0275\u0275property("modulePath",h.modulePath)("componentId",h.componentId)("inputArgs",h.inputArgs))},dependencies:[f.R],styles:["div.visual-calc-editor-lazy[_ngcontent-%COMP%]{width:100%}"]}),O}()},65129:function(Ve,se,t){t.d(se,{e:function(){return g}});var e=t(98864),n=t(73637),f=t(93171),i=t(23196),O=t(70377),T=t(18266),V=t(58494),h=t(28252),M=t(79597),I=t(93838),b=t(58029),P=t(78186),g=function(){function u(s,p,C,A,S,L){this.contextActivityService=s,this.eventBridge=p,this.explorationCapabilities=C,this.localizationService=A,this.lazyProvider=S,this.telemetryService=L,this.disableCopyVisualImageButton$=new e.X(!1)}return u.prototype.ngOnInit=function(){var s=this;this.lazyProvider.get("@powerbi/CopyVisualImage/copy-visual-image.module#CopyVisualImageModule","copyVisualImageService").then(function(p){s.copyVisualImageService=p,s.disableCopyVisualImageButton$.next(s.disableCopyVisualImageButton())})},u.prototype.copyVisualContainer=function(){var s,p=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"CopyVisual",source:"VisualHeader"}});this.telemetryService.logEvent(powerbi.telemetry.CopyVisualImageEntryPoint,{visualType:powerbi.explore.util.VisualContainerUtils.getVisualType(this.visual.contract),hasMetadata:!0,entryPoint:"VisualHeader"}),this.eventBridge.publishToChannel(powerbi.explore.services.events.copyVisualAsImage,{visual:this.visual,hasMetadata:!0,useModernClipboard:null===(s=this.explorationCapabilities.getCapabilities())||void 0===s?void 0:s.useModernClipboard}),p.resolve()},u.prototype.getCopyTileTitle=function(){return this.localizationService.get("CopyVisualImage_Caption")},u.prototype.getCopyTooltipTitle=function(){return this.disableCopyVisualImageButton$.value?this.localizationService.get("CopyVisualImage_NotSupported"):this.getCopyTileTitle()},u.prototype.disableCopyVisualImageButton=function(){var s=powerbi.explore.util.VisualContainerUtils.getVisualType(this.visual.contract);return!this.copyVisualImageService.canCopy(s)},u.\u0275fac=function(p){return new(p||u)(n.\u0275\u0275directiveInject(f.r),n.\u0275\u0275directiveInject(i.J),n.\u0275\u0275directiveInject(O.U),n.\u0275\u0275directiveInject(T.o),n.\u0275\u0275directiveInject(V.E),n.\u0275\u0275directiveInject(h.y0))},u.\u0275cmp=n.\u0275\u0275defineComponent({type:u,selectors:[["visual-container-copy-button"]],inputs:{visual:"visual"},decls:4,vars:7,consts:[[3,"dynamicStyle"],[1,"vcCopyBtn",3,"disabled","pbiTooltip","apply-style","click"],[1,"glyphicon","pbi-glyph-copy","glyph-small"]],template:function(p,C){1&p&&(n.\u0275\u0275elementStart(0,"visual-header-item-container",0)(1,"button",1),n.\u0275\u0275listener("click",function(){return C.copyVisualContainer()}),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275element(3,"i",2),n.\u0275\u0275elementEnd()()),2&p&&(n.\u0275\u0275property("dynamicStyle",C.visual.readOnlyState.headerItemContainerStyle),n.\u0275\u0275advance(1),n.\u0275\u0275property("disabled",n.\u0275\u0275pipeBind1(2,5,C.disableCopyVisualImageButton$))("pbiTooltip",C.getCopyTooltipTitle())("apply-style",C.visual.readOnlyState.headerForegroundStyle),n.\u0275\u0275attribute("aria-label",C.getCopyTileTitle()))},dependencies:[M.V,I.Y,b.s,P.AsyncPipe],encapsulation:2,changeDetection:0}),u}()},3977:function(Ve,se,t){t.d(se,{p:function(){return b}});var e=t(73637),n=t(26326),f=t(23196),i=t(18266),O=t(78186),T=t(79597),V=t(93838),h=t(58029),M=powerbi.explore.services.events;function I(g,u){if(1&g){var s=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(s);var A=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(A.toggleDrillDown())}),e.\u0275\u0275elementEnd()()}if(2&g){var p=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",p.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275classProp("pbi-glyph-drilldownenabled",p.isDrillDownEnabled),e.\u0275\u0275property("ngClass",p.visual.useStylableHeader()?"pbi-glyph-drilldowndisabled-nocircle":"pbi-glyph-drilldowndisabled")("pbiTooltip",p.title)("apply-style",p.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",p.title)}}var b=function(){function g(u,s,p){this.drill=u,this.eventBridge=s,this.localizationService=p}return g.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},g.prototype.ngOnInit=function(){var u=this;this.updateDrillState(),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(M.visualContainerChanged,function(s,p){p&&p.affectContainer(u.visual.contract)&&u.updateDrillState()}).subscribe(M.drillModeChanged,function(s,p){u.updateDrillState()})},g.prototype.updateDrillState=function(){if(!this.visual)return this.canDrillDown=!1,void(this.isDrillDownEnabled=!1);var u=this.visual.contract,s=this.drill;this.canDrillDown=P(1,s,u);var p=u.drillMode,C=!1;(1===p&&!this.canDrillDown||null!=p&&0!==p&&!P(p,s,u))&&(C=!0),C&&this.drill.setDrillMode(u,0),this.isDrillDownEnabled=s.isDrillModeEnabled(u,1),this.title=this.localizationService.get(1===this.visual.contract.drillMode?"DrillMode_ToolTip":"DrillDown_ToolTip")},g.prototype.toggleDrillDown=function(){this.isDrillDownEnabled=!1===this.isDrillDownEnabled,this.drill.setDrillMode(this.visual.contract,this.isDrillDownEnabled?1:0)},g.\u0275fac=function(s){return new(s||g)(e.\u0275\u0275directiveInject(n.s),e.\u0275\u0275directiveInject(f.J),e.\u0275\u0275directiveInject(i.o))},g.\u0275cmp=e.\u0275\u0275defineComponent({type:g,selectors:[["visual-container-drill-toggle"]],inputs:{visual:"visual"},decls:1,vars:1,consts:[[3,"dynamicStyle",4,"ngIf"],[3,"dynamicStyle"],[1,"drillDownLevelGrouped","glyphicon","glyph-small",3,"ngClass","pbiTooltip","apply-style","click"]],template:function(s,p){1&s&&e.\u0275\u0275template(0,I,2,7,"visual-header-item-container",0),2&s&&e.\u0275\u0275property("ngIf",p.canDrillDown)},dependencies:[O.NgClass,O.NgIf,T.V,V.Y,h.s],encapsulation:2}),g}();function P(g,u,s){switch(g){case 1:return u.canDrillByDirection(s,2)||u.canDrillByDirection(s,4)||u.canDrillByDirection(s,1);case 3:return u.canDrillthrough(s);case 2:return u.canDrillToDetails(s);case 0:return!0;default:return!1}}},97623:function(Ve,se,t){t.d(se,{c:function(){return y}});var e=t(73637),n=t(93171),f=t(26326),i=t(23196),O=t(18266),T=t(5801),V=t(56339),h=t(78186),M=t(30411),I=t(35380),b=t(79597),P=t(3977),g=t(93838),u=t(58029),s=powerbi.explore.services.events,p=powerbi.explore.viewModels.ViewModelFactory,C=["drillUpButton"],A=["drillDownButton"];function S(d,w){if(1&d&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"option",6),e.\u0275\u0275text(2),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&d){var x=w.$implicit,N=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngValue",x.name)("apply-style",N.visual.readOnlyState.headerBackgroundStyle),e.\u0275\u0275attribute("label",x.value),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate(x.name)}}function L(d,w){if(1&d){var x=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",2),e.\u0275\u0275element(1,"span",3),e.\u0275\u0275elementStart(2,"select",4),e.\u0275\u0275listener("ngModelChange",function(ne){e.\u0275\u0275restoreView(x);var Ce=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ce.activeRoleName=ne)})("ngModelChange",function(){e.\u0275\u0275restoreView(x);var ne=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ne.onRoleChanged())})("click",function(ne){return ne.stopPropagation()})("mousedown",function(ne){e.\u0275\u0275restoreView(x);var Ce=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ce.handleRoleNameMouseDown(ne))}),e.\u0275\u0275template(3,S,3,4,"ng-container",5),e.\u0275\u0275elementEnd()()}if(2&d){var N=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",N.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("apply-style",N.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngModel",N.activeRoleName)("apply-style",N.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",N.drillableRoles)("ngForTrackBy",N.role&&N.role.name)}}function D(d,w){if(1&d){var x=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",2)(1,"button",7,8),e.\u0275\u0275listener("click",function(ne){e.\u0275\u0275restoreView(x);var Ce=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ce.drillUp(ne))}),e.\u0275\u0275elementEnd()()}if(2&d){var N=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",N.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("drillDownLevelGrouped glyphicon glyph-small ",N.visual.useStylableHeader()?"pbi-glyph-drillup-nocircle":"pbi-glyph-drillup",""),e.\u0275\u0275property("pbiTooltip",N.drillUpTitle())("disabled",!N.canDrillUp)("apply-style",N.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",N.drillUpTitle())}}function m(d,w){if(1&d&&e.\u0275\u0275element(0,"visual-container-drill-toggle",9),2&d){var x=e.\u0275\u0275nextContext();e.\u0275\u0275property("visual",x.visual)}}function v(d,w){if(1&d){var x=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",2)(1,"button",10,11),e.\u0275\u0275listener("click",function(ne){e.\u0275\u0275restoreView(x);var Ce=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Ce.drillDownLevel(ne))}),e.\u0275\u0275elementEnd()()}if(2&d){var N=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",N.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("drillDownLevelGrouped glyphicon glyph-small ",N.visual.useStylableHeader()?"pbi-glyph-expand-nocircle":"pbi-glyph-expand",""),e.\u0275\u0275property("pbiTooltip",N.drillLevelTitle())("disabled",!N.canDrillDownWithoutCurrentGroup)("apply-style",N.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",N.drillLevelTitle())}}function l(d,w){if(1&d){var x=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",2)(1,"button",7),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(x);var ne=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(ne.drillDownLevelGrouped())}),e.\u0275\u0275elementEnd()()}if(2&d){var N=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",N.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275classMapInterpolate1("drillDownLevelGrouped glyphicon glyph-small ",N.visual.useStylableHeader()?"pbi-glyph-inline-drill-nocircle":"pbi-glyph-inline-drill",""),e.\u0275\u0275property("pbiTooltip",N.drillLevelGroupedTitle())("disabled",!N.canDrillDownWithCurrentGroup)("apply-style",N.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",N.drillLevelGroupedTitle())}}var y=function(){function d(w,x,N,X,ne,Ce){this.contextActivityService=w,this.drill=x,this.eventBridge=N,this.localizationService=X,this.visualAuthoring=ne,this.visualPlugin=Ce,this.drillableRoles=[]}return d.prototype.ngOnInit=function(){var w=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(s.visualContainerChanged,function(x,N){w.updateDrillableRoles(),w.updateDrillMode(N)}).subscribe(s.drillModeChanged,function(x,N){w.updateDrillModeCore()}),this.updateDrillableRoles(),this.updateDrillModeCore()},d.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},d.prototype.handleRoleNameMouseDown=function(w){if(jsCommon.BrowserUtils.isFirefox()||jsCommon.BrowserUtils.isInternetExplorer11()){w.preventDefault();var x=1+this.drillableRoles.indexOf(this.activeRole);x>=this.drillableRoles.length&&(x=0),this.activeRole=this.drillableRoles[x],this.onRoleChanged()}},Object.defineProperty(d.prototype,"activeRoleName",{get:function(){return this.activeRole.name},set:function(x){var N=_.find(this.drillableRoles,function(X){return X.name===x});N&&(this.activeRole=N)},enumerable:!1,configurable:!0}),d.prototype.drillUp=function(w){var x,N=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"DrillUp",source:"VisualHeader"}});this.visualAuthoring.drillUp(this.getActiveRoleName(),this.visual.contract),N.resolve(),!this.canDrillUp&&w&&jsCommon.BrowserUtils.isKeyboardClick(w)&&(null===(x=this.drillDownButton)||void 0===x||x.nativeElement.focus())},d.prototype.drillDownLevel=function(w){var x,N=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"DrillDown",source:"VisualHeader"}});this.visualAuthoring.drillDownLevel(this.getActiveRoleName(),this.visual.contract,3),N.resolve(),!this.canDrillDownWithoutCurrentGroup&&w&&jsCommon.BrowserUtils.isKeyboardClick(w)&&(null===(x=this.drillUpButton)||void 0===x||x.nativeElement.focus())},d.prototype.drillDownLevelGrouped=function(){var w=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"DrillDownLevelGrouped",source:"VisualHeader"}});this.visualAuthoring.drillDownLevel(this.getActiveRoleName(),this.visual.contract,2),w.resolve()},d.prototype.canDrill=function(){var w=this.visualPlugin.capabilities(this.visual.contract.config.singleVisual.visualType);return!(w&&w.drilldown&&w.drilldown.suppresDrillOperations)&&(this.canDrillDownWithCurrentGroup||this.canDrillDownWithoutCurrentGroup||this.canDrillUp)},d.prototype.canDrillOnMoreThanOneRole=function(){return this.drillableRoles.length>1},d.prototype.onRoleChanged=function(){this.updateDrillModeCore()},d.prototype.drillUpTitle=function(){return this.localizationService.get("DrillUp_ToolTip")},d.prototype.drillLevelTitle=function(){return this.localizationService.get(this.canDrillDownWithCurrentGroup||this.canDrillDownWithoutCurrentGroup?"DrillDownLevel_ToolTip":"DrillDownLevelDisabled_ToolTip")},d.prototype.drillLevelGroupedTitle=function(){return this.localizationService.get(this.canDrillDownWithCurrentGroup||this.canDrillDownWithoutCurrentGroup?"DrillDownLevelGrouped_ToolTip":"DrillDownLevelDisabled_ToolTip")},d.prototype.updateDrillMode=function(w){w&&w.affectContainer(this.visual.contract)&&this.updateDrillModeCore()},d.prototype.updateDrillableRoles=function(){this.drillableRoles=[];var w=this.visualPlugin.capabilities(this.visual.contract.config.singleVisual.visualType);if(w){var x=w.dataRoles;if(x)for(var N=0,X=x;N<X.length;N++){var ne=X[N],Ce=ne.name;(this.canDrillDownWithCurrentGroupOnRole(Ce)||this.canDrillDownWithoutCurrentGroupOnRole(Ce)||this.canDrillUpOnRole(Ce))&&this.drillableRoles.push({name:Ce,value:p.getDisplayName(ne.displayName)})}}if(_.isEmpty(this.drillableRoles))this.activeRole=void 0;else{var he=this.getActiveRoleName();_.find(this.drillableRoles,function(Fe){return he===Fe.name})||(this.activeRole=this.drillableRoles[0])}},d.prototype.canDrillDownWithCurrentGroupOnRole=function(w){return this.drill.canDrillByDirection(this.visual.contract,2,w)},d.prototype.canDrillDownWithoutCurrentGroupOnRole=function(w){return this.drill.canDrillByDirection(this.visual.contract,4,w)},d.prototype.canDrillUpOnRole=function(w){return this.drill.canDrillByDirection(this.visual.contract,1,w)},d.prototype.getActiveRoleName=function(){return this.activeRole?this.activeRole.name:null},d.prototype.updateDrillModeCore=function(){var w=this.getActiveRoleName();this.canDrillDownWithCurrentGroup=this.canDrillDownWithCurrentGroupOnRole(w),this.canDrillDownWithoutCurrentGroup=this.canDrillDownWithoutCurrentGroupOnRole(w),this.canDrillUp=this.canDrillUpOnRole(w)},d.\u0275fac=function(x){return new(x||d)(e.\u0275\u0275directiveInject(n.r),e.\u0275\u0275directiveInject(f.s),e.\u0275\u0275directiveInject(i.J),e.\u0275\u0275directiveInject(O.o),e.\u0275\u0275directiveInject(T.$),e.\u0275\u0275directiveInject(V.D))},d.\u0275cmp=e.\u0275\u0275defineComponent({type:d,selectors:[["visual-container-drill"]],viewQuery:function(x,N){if(1&x&&(e.\u0275\u0275viewQuery(C,5),e.\u0275\u0275viewQuery(A,5)),2&x){var X=void 0;e.\u0275\u0275queryRefresh(X=e.\u0275\u0275loadQuery())&&(N.drillUpButton=X.first),e.\u0275\u0275queryRefresh(X=e.\u0275\u0275loadQuery())&&(N.drillDownButton=X.first)}},inputs:{visual:"visual"},decls:5,vars:5,consts:[[3,"dynamicStyle",4,"ngIf"],["class","optionSection",3,"visual",4,"ngIf"],[3,"dynamicStyle"],["localize","Drill_On","id","drillOnText",3,"apply-style"],["aria-labelledby","drillOnText",3,"ngModel","apply-style","ngModelChange","click","mousedown"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngValue","apply-style"],[3,"pbiTooltip","disabled","apply-style","click"],["drillUpButton",""],[1,"optionSection",3,"visual"],["data-automation-type","drillDownLevelButton",3,"pbiTooltip","disabled","apply-style","click"],["drillDownButton",""]],template:function(x,N){1&x&&(e.\u0275\u0275template(0,L,4,6,"visual-header-item-container",0),e.\u0275\u0275template(1,D,3,8,"visual-header-item-container",0),e.\u0275\u0275template(2,m,1,1,"visual-container-drill-toggle",1),e.\u0275\u0275template(3,v,3,8,"visual-header-item-container",0),e.\u0275\u0275template(4,l,2,8,"visual-header-item-container",0)),2&x&&(e.\u0275\u0275property("ngIf",N.visual.isHeaderItemVisible("drillRoleSelector")&&N.canDrillOnMoreThanOneRole()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",N.visual.isHeaderItemVisible("drillUpButton")&&N.canDrill()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",N.visual.useStylableHeader()&&N.visual.isHeaderItemVisible("drillToggleButton")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",N.visual.isHeaderItemVisible("drillDownLevelButton")&&N.canDrill()),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",N.visual.isHeaderItemVisible("drillDownExpandButton")&&N.canDrill()))},dependencies:[h.NgForOf,h.NgIf,M.YN,M.Kr,M.EJ,M.JJ,M.On,I.X,b.V,P.p,g.Y,u.s],encapsulation:2}),d}()},82012:function(Ve,se,t){t.d(se,{m:function(){return D}});var e=t(33275),n=t(13389),f=t(37473),i=t(54865),O=t(17350),T=t(36717),V=t(13734),h=t(73637),M=t(18266),I=t(74850),b=t(23196),P=t(38838),g=t(67617),u=t(78186),s=t(79597),p=t(93838),C=t(58029),A=powerbi.explore.services.events,S=powerbi.explore.util.VisualContainerUtils;function L(m,v){if(1&m){var l=h.\u0275\u0275getCurrentView();h.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2,3),h.\u0275\u0275listener("click",function(){h.\u0275\u0275restoreView(l);var w=h.\u0275\u0275reference(2),x=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(x.handleMouseClick(w))})("mouseenter",function(){h.\u0275\u0275restoreView(l);var w=h.\u0275\u0275reference(2),x=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(x.handleMouseEnter(w))})("mouseleave",function(w){h.\u0275\u0275restoreView(l);var x=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(x.handleMouseLeave(w))}),h.\u0275\u0275element(3,"i",4),h.\u0275\u0275elementEnd()()}if(2&m){var y=h.\u0275\u0275nextContext();h.\u0275\u0275property("dynamicStyle",y.visual.readOnlyState.headerItemContainerStyle),h.\u0275\u0275advance(1),h.\u0275\u0275property("apply-style",y.visual.readOnlyState.headerForegroundStyle)("pbiTooltip",y.pinTileTitle),h.\u0275\u0275attribute("aria-label",y.ariaLabel)}}var D=function(){function m(v,l,y,d,w,x,N,X){this.el=v,this.localizationService=l,this.visualPluginOps=y,this.canvasScaleService=d,this.overlay=w,this.injector=x,this.componentFactoryResolver=N,this.eventBridge=X,this.close$=new e.xQ,this.showTimeout=500}return m.prototype.ngOnInit=function(){var v=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(A.visibilityChanged,function(){v.closeStickyOverlay()}),this.ariaLabel=this.localizationService.get("FilterRestatementVisual_Button_Label"),this.pinTileTitle=this.localizationService.get("FilterRestatementVisual_Button_Label")},m.prototype.ngOnDestroy=function(){this.clearShowRestatementTimeout(),null!=this.subscriptionManager&&this.subscriptionManager.unsubscribeAll(),this.closeStickyOverlay()},m.prototype.showButton=function(){var v=this.visual.isHeaderItemVisible("filterRestatementButton"),l=S.getVisualType(this.visual.contract),y=this.visualPluginOps.isQueryVisual(l);return v&&y},m.prototype.handleMouseClick=function(v){(null==this.overlayRef||!this.sticky)&&(this.clearShowRestatementTimeout(),this.showRestatement(v,!0))},m.prototype.handleMouseEnter=function(v){this.setShowRestatementTimeout(v)},m.prototype.handleMouseLeave=function(v){var l,y,d;this.clearShowRestatementTimeout();var w=null===(d=null===(y=null===(l=this.overlayRef)||void 0===l?void 0:l.componentRef)||void 0===y?void 0:y.location)||void 0===d?void 0:d.nativeElement;null!=w&&w.contains(v.relatedTarget)||this.close$.next(!1)},m.prototype.closeStickyOverlay=function(){this.sticky&&(this.sticky=!1,this.overlayRef.close(),this.overlayRef=void 0,this.close$.next(!1))},m.prototype.listenForHideIntent=function(){var v=this,l=this.close$.pipe((0,n.b)(1e3)).subscribe(function(y){!y&&!v.sticky&&(v.overlayRef&&(v.overlayRef.close(),v.overlayRef=void 0),l.unsubscribe(),l=null)})},m.prototype.setShowRestatementTimeout=function(v){var l=this;null!=this.showTimer||null!=this.overlayRef||(this.showTimer=setTimeout(function(){l.showTimer=void 0,l.showRestatement(v)},this.showTimeout))},m.prototype.clearShowRestatementTimeout=function(){this.showTimer&&(clearTimeout(this.showTimer),this.showTimer=void 0)},m.prototype.showRestatement=function(v,l){var y=this;if(null==this.overlayRef||!this.sticky){var d=this.overlayRef;this.sticky=l;var w=this.injector;if(!w)throw new Error("Parent element injector undefined when creating filter restatement overlay");var x={visual:this.visual.contract,options:this.options?this.options:{hideExistingOverlays:!0},isSticky:l},N=this.overlay.position().flexibleConnectedTo(v).withPositions([(0,T.Oq)(-4,0),(0,T.hT)(4,0),(0,T.f6)(4,0),(0,T.w3)(-4,0)]).withFlexibleDimensions(!0).withPush(!0).withGrowAfterOpen(!0);this.overlayRef=this.overlay.open({component:V.k,data:x,options:{positionStrategy:N,hasBackdrop:l,disposeOnNavigation:!0,backdropClass:"cdk-overlay-transparent-backdrop"},focusElementOnClose:l?v:null,hasCaret:!1,injector:w,componentFactoryResolver:this.componentFactoryResolver,closeOnBackdropClick:l}),l?this.overlayRef.onClose.pipe((0,f.q)(1)).subscribe(function(){y.overlayRef=void 0,y.sticky=!1}):(this.overlayRef.isPointerWithin$&&this.overlayRef.isPointerWithin$.pipe((0,i.T)(1),(0,O.x)()).subscribe(function(X){y.close$.next(X)}),this.listenForHideIntent()),d&&d.close()}},m.\u0275fac=function(l){return new(l||m)(h.\u0275\u0275directiveInject(h.ElementRef),h.\u0275\u0275directiveInject(M.o),h.\u0275\u0275directiveInject(I.f),h.\u0275\u0275directiveInject(P.Z),h.\u0275\u0275directiveInject(g._c),h.\u0275\u0275directiveInject(h.Injector),h.\u0275\u0275directiveInject(h.ComponentFactoryResolver),h.\u0275\u0275directiveInject(b.J))},m.\u0275cmp=h.\u0275\u0275defineComponent({type:m,selectors:[["visual-container-filter-restatement-button"]],inputs:{visual:"visual",options:"options"},decls:1,vars:1,consts:[[3,"dynamicStyle",4,"ngIf"],[3,"dynamicStyle"],["cdkmonitorelementfocus","","aria-haspopup","true","aria-expanded","false",1,"vcFilterRestatementBtn",3,"apply-style","pbiTooltip","click","mouseenter","mouseleave"],["overlayOrigin",""],[1,"glyphicon","pbi-glyph-filter","glyph-small"]],template:function(l,y){1&l&&h.\u0275\u0275template(0,L,4,4,"visual-header-item-container",0),2&l&&h.\u0275\u0275property("ngIf",y.showButton())},dependencies:[u.NgIf,s.V,p.Y,C.s],encapsulation:2,changeDetection:0}),m}()},76364:function(Ve,se,t){t.d(se,{x:function(){return m}});var e=t(7005),n=t(37473),f=t(86195),i=t(11378),O=t(27941),T=t(36717),V=t(67617),h=t(73637),M=t(93171),I=t(67471),b=t(18266),P=t(28252),g=t(97850),u=t(23276),s=t(78186),p=t(72661),C=t(79597),A=t(93838),S=t(58029),L=powerbi.common.ArrowVerticalPosition;function D(v,l){if(1&v){var y=h.\u0275\u0275getCurrentView();h.\u0275\u0275elementStart(0,"visual-header-item-container",0)(1,"button",4),h.\u0275\u0275listener("click",function(){h.\u0275\u0275restoreView(y);var x=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(x.resetVisualContainer())}),h.\u0275\u0275element(2,"i",5),h.\u0275\u0275elementEnd()()}if(2&v){var d=h.\u0275\u0275nextContext();h.\u0275\u0275property("dynamicStyle",d.visual.readOnlyState.headerItemContainerStyle),h.\u0275\u0275advance(1),h.\u0275\u0275property("apply-style",d.visual.readOnlyState.headerForegroundStyle)("pbi-tooltip",d.resetTooltipConfig),h.\u0275\u0275attribute("aria-label",d.resetLabel)}}var m=function(){function v(l,y,d,w,x,N,X,ne){this.contextActivityService=l,this.lazyScopedProviderModern=y,this.localizationService=d,this.overlay=w,this.telemetryService=x,this.injector=N,this.visibility=X,this.visualOverlayPositionService=ne,this.resetLabel=this.localizationService.get("InlineExplore_ResetVisualToDefault"),this.resetTooltipConfig={tooltipArrowVerticalPosition:L.bottom,tooltipTitle:this.resetLabel,tooltipShowOnFocus:!0}}return v.prototype.getTitle=function(){return this.localizationService.get(this.isInteractive?"InlineExplore_VisualHeader_Label":"InlineExplore_VisualHeader_Label_NonInteractive")},v.prototype.handleMouseClick=function(){var l=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"PersonalizeVisual",source:"VisualHeader"}});this.isInteractive&&(this.setSpotlight(),this.showExploreMode()),l.resolve()},v.prototype.resetVisualContainer=function(){return(0,e.mG)(this,void 0,void 0,function(){var l;return(0,e.Jh)(this,function(d){switch(d.label){case 0:return l=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"PersonalizeResetVisual",source:"VisualHeader"}}),[4,this.lazyScopedProviderModern.get("persistentState")];case 1:return d.sent().resetVisualContainer(this.visual.contract),this.telemetryService.logChildEvent(this.rootTelemetryEvent,i.iD,{}),l.resolve(),[2]}})})},v.prototype.setSpotlight=function(){this.visibility.set(this.visual.contract,4)},v.prototype.showExploreMode=function(){var l=this,y=this.visualOverlayPositionService.flexibleConnectedTo(this.visual.contract).withPositions([(0,T.Zz)(4,0),(0,T.Iz)(-4,0),(0,T.J7)(4,0),(0,T.Kb)(-4,0)]).withFlexibleDimensions(!0).withPush(!0).withGrowAfterOpen(!0),d=this.telemetryService.startEvent(O.lb,{overlayType:"Main"});this.rootTelemetryEvent=d.event,this.overlay.open({component:f.i,data:{visual:this.visual.contract,rootEvent:this.rootTelemetryEvent},options:{positionStrategy:y,hasBackdrop:!0,backdropClass:V.L6},closeOnBackdropClick:!0,injector:this.injector}).onClose.pipe((0,n.q)(1)).subscribe(function(){d.resolve(),l.visibility.clearForVisualContainers([l.visual.contract])})},v.\u0275fac=function(y){return new(y||v)(h.\u0275\u0275directiveInject(M.r),h.\u0275\u0275directiveInject(I.H),h.\u0275\u0275directiveInject(b.o),h.\u0275\u0275directiveInject(V._c),h.\u0275\u0275directiveInject(P.y0),h.\u0275\u0275directiveInject(h.Injector),h.\u0275\u0275directiveInject(g.w),h.\u0275\u0275directiveInject(u.z))},v.\u0275cmp=h.\u0275\u0275defineComponent({type:v,selectors:[["visual-container-personalize-visual-button"]],inputs:{visual:"visual",isInteractive:"isInteractive",showReset:"showReset"},decls:4,vars:5,consts:[[3,"dynamicStyle"],["aria-haspopup","true","aria-expanded","false",3,"apply-style","pbiTooltip","click"],[1,"glyphicon","pbi-glyph-barchartverticaledit","glyph-small"],[3,"dynamicStyle",4,"ngIf"],[3,"apply-style","pbi-tooltip","click"],[1,"glyphicon","pbi-glyph-undo","glyph-small"]],template:function(y,d){1&y&&(h.\u0275\u0275elementStart(0,"visual-header-item-container",0)(1,"button",1),h.\u0275\u0275listener("click",function(){return d.handleMouseClick()}),h.\u0275\u0275element(2,"i",2),h.\u0275\u0275elementEnd()(),h.\u0275\u0275template(3,D,3,4,"visual-header-item-container",3)),2&y&&(h.\u0275\u0275property("dynamicStyle",d.visual.readOnlyState.headerItemContainerStyle),h.\u0275\u0275advance(1),h.\u0275\u0275property("apply-style",d.visual.readOnlyState.headerForegroundStyle)("pbiTooltip",d.getTitle()),h.\u0275\u0275attribute("aria-label",d.getTitle()),h.\u0275\u0275advance(2),h.\u0275\u0275property("ngIf",d.showReset))},dependencies:[s.NgIf,p.i,C.V,A.Y,S.s],encapsulation:2,changeDetection:0}),v}()},90085:function(Ve,se,t){t.d(se,{c:function(){return m}});var e=t(7005),n=t(29494),f=t(98809),i=t(73637),O=t(90547),T=t(56339),V=t(18266),h=t(25991),M=t(32130),I=t(78144),b=t(18766),P=t(23196),g=t(16660),u=t(42),s=t(3103),p=t(93171),C=t(78186),A=t(79597),S=t(93838),L=t(58029);function D(v,l){if(1&v){var y=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2),i.\u0275\u0275listener("click",function(x){i.\u0275\u0275restoreView(y);var N=i.\u0275\u0275nextContext();return i.\u0275\u0275resetView(N.pinVisualContainer(x))}),i.\u0275\u0275element(2,"i",3),i.\u0275\u0275elementEnd()()}if(2&v){var d=i.\u0275\u0275nextContext();i.\u0275\u0275property("dynamicStyle",d.visual.readOnlyState.headerItemContainerStyle)("hidden",!d.showPin()),i.\u0275\u0275advance(1),i.\u0275\u0275property("disabled",d.disablePin)("pbiTooltip",d.getPinTileTitle())("apply-style",d.visual.readOnlyState.headerForegroundStyle),i.\u0275\u0275attribute("aria-label",d.getPinTileTitle())}}var m=function(){function v(l,y,d,w,x,N,X,ne,Ce,he,Fe,fe,ae){this.resourceLoader=l,this.localizationService=y,this.explorationNavigation=d,this.filterGenerator=w,this.conceptualSchemaProxy=x,this.explorationSerializer=N,this.promiseFactory=X,this.dataSources=ne,this.viewModeState=Ce,this.visualPlugin=he,this.pinVisual=Fe,this.eventBridge=fe,this.contextActivityService=ae}return v.prototype.pinVisualContainer=function(l){return(0,e.mG)(this,void 0,void 0,function(){var y,d,w,N=this;return(0,e.Jh)(this,function(X){switch(X.label){case 0:y=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"PinVisual",source:"VisualHeader"}}),d=function(){var Fe,Ce=N.dataSources.get(),he=N.visual;return N.conceptualSchemaProxy.get(Ce).then(function(fe){Fe=N.visual.hostServices.getFilters(N.filterGenerator,fe)}).then(function(){return(0,f.H)(he.contract,N.explorationNavigation.getCurrentExploration(),N.visualPlugin,N.resourceLoader,N.promiseFactory,N.explorationSerializer)}).then(function(fe){return N.pinVisual.pinVisualContainer(Ce,fe,Fe,he.themeCollection,N.explorationNavigation.getCurrentExploration().resourcePackages)})},X.label=1;case 1:return X.trys.push([1,5,,6]),this.promptToSaveFirst()?[3,3]:[4,d()];case 2:return X.sent(),[3,4];case 3:w=this.localizationService.get("ReportContainer_NeedToSaveReportBeforePin"),this.eventBridge.publishToChannel(powerbi.explore.events.saveAsExploration,{promptMessage:w}),X.label=4;case 4:return y.resolve(),[3,6];case 5:return X.sent(),y.reject(),[3,6];case 6:return l&&l.stopPropagation&&l.stopPropagation(),[2]}})})},v.prototype.promptToSaveFirst=function(){var l=this.explorationNavigation.getCurrentExploration();return!(!l||l.report)},v.prototype.canPin=function(){return this.viewModeState.getConfig().supportsPinning&&this.pinVisual.canPin(this.visual)},v.prototype.showPin=function(){return this.visual&&this.visual.options.showPin},v.prototype.getPinTileTitle=function(){return this.localizationService.get(this.visual.options.disablePin?"PinTile_NotSupportedTitle":"PinVisual_ToolTip")},v.\u0275fac=function(y){return new(y||v)(i.\u0275\u0275directiveInject(O.l6),i.\u0275\u0275directiveInject(V.o),i.\u0275\u0275directiveInject(h.z),i.\u0275\u0275directiveInject(M.r),i.\u0275\u0275directiveInject(g.i),i.\u0275\u0275directiveInject(I.L),i.\u0275\u0275directiveInject(n.t),i.\u0275\u0275directiveInject(b.D),i.\u0275\u0275directiveInject(u.kc),i.\u0275\u0275directiveInject(T.D),i.\u0275\u0275directiveInject(s.k),i.\u0275\u0275directiveInject(P.J),i.\u0275\u0275directiveInject(p.r))},v.\u0275cmp=i.\u0275\u0275defineComponent({type:v,selectors:[["visual-container-pin-button"]],inputs:{visual:"visual",disablePin:"disablePin"},decls:1,vars:1,consts:[[3,"dynamicStyle","hidden",4,"ngIf"],[3,"dynamicStyle","hidden"],[1,"vcPinBtn",3,"disabled","pbiTooltip","apply-style","click"],[1,"glyphicon","pbi-glyph-pinned","glyph-small"]],template:function(y,d){1&y&&i.\u0275\u0275template(0,D,3,6,"visual-header-item-container",0),2&y&&i.\u0275\u0275property("ngIf",d.canPin())},dependencies:[C.NgIf,A.V,S.Y,L.s],encapsulation:2}),v}()},86715:function(Ve,se,t){t.d(se,{E:function(){return s}});var e=t(7005),n=t(73637),f=t(24708),i=t(84752),O=t(78186),T=t(35380),V=t(80694),h=t(68128),M=t(85385),I=["backToReportButton"];function b(p,C){1&p&&n.\u0275\u0275element(0,"div",9)}function P(p,C){if(1&p&&n.\u0275\u0275element(0,"div",10),2&p){var A=n.\u0275\u0275nextContext();n.\u0275\u0275property("innerText",A.viewModel.readOnlyState.popOutBarTitle)}}function g(p,C){if(1&p&&n.\u0275\u0275element(0,"div",11),2&p){var A=n.\u0275\u0275nextContext();n.\u0275\u0275property("innerText",A.viewModel.readOnlyState.popOutBarSubtitle)}}function u(p,C){if(1&p&&(n.\u0275\u0275elementStart(0,"div",12),n.\u0275\u0275element(1,"span",13)(2,"span",14),n.\u0275\u0275elementEnd()),2&p){var A=n.\u0275\u0275nextContext();n.\u0275\u0275advance(2),n.\u0275\u0275property("innerText",A.viewModel.lastUpdateAttemptTime)}}var s=function(p){function C(){var A=p.call(this)||this;return A.popout=new n.EventEmitter,A.closeButtonRendered=new n.EventEmitter,A.shouldFocusOn$=p.prototype.changes$.call(A,"viewModel").pipe((0,f.U)(function(S){return null!=S.contract.visibility&&8!==S.contract.visibility&&16!==S.contract.visibility})),A}return(0,e.ZT)(C,p),C.prototype.onClosePopOut=function(A){this.popout.emit(A)},C.prototype.ngAfterViewInit=function(){this.closeButtonRendered.emit(this.backToReportButton.nativeElement)},C.\u0275fac=function(S){return new(S||C)},C.\u0275cmp=n.\u0275\u0275defineComponent({type:C,selectors:[["visual-container-pop-out-bar"]],viewQuery:function(S,L){var D;(1&S&&n.\u0275\u0275viewQuery(I,5),2&S)&&(n.\u0275\u0275queryRefresh(D=n.\u0275\u0275loadQuery())&&(L.backToReportButton=D.first))},inputs:{viewModel:"viewModel"},outputs:{popout:"onClosePopOut",closeButtonRendered:"onCloseButtonRendered"},features:[n.\u0275\u0275InheritDefinitionFeature],decls:12,vars:10,consts:[["keyboard-shortcuts","",1,"popOutBar"],["type","button","data-automation-type","backToReportButton",3,"focus-on","click"],["backToReportButton",""],[1,"glyphicon","iconBox","pbi-glyph-chevronleftmedium","glyph-small"],["localize","VisualContainer_PopOut_BackToReportButton",1,"menuItem"],["class","divider",4,"ngIf"],["class","title trimmedTextWithEllipsis",3,"innerText",4,"ngIf"],["class","subtitle trimmedTextWithEllipsis",3,"innerText",4,"ngIf"],["class","visualLastRefreshTime trimmedTextWithEllipsis",4,"ngIf"],[1,"divider"],[1,"title","trimmedTextWithEllipsis",3,"innerText"],[1,"subtitle","trimmedTextWithEllipsis",3,"innerText"],[1,"visualLastRefreshTime","trimmedTextWithEllipsis"],["localize","ReportAppBar_LastRefresh"],[1,"dataUpdatedTime",3,"innerText"]],template:function(S,L){1&S&&(n.\u0275\u0275elementStart(0,"div",0)(1,"div")(2,"button",1,2),n.\u0275\u0275listener("click",function(m){return L.onClosePopOut(m)}),n.\u0275\u0275pipe(4,"async"),n.\u0275\u0275pipe(5,"localize"),n.\u0275\u0275element(6,"i",3)(7,"span",4),n.\u0275\u0275elementEnd()(),n.\u0275\u0275template(8,b,1,0,"div",5),n.\u0275\u0275template(9,P,1,1,"div",6),n.\u0275\u0275template(10,g,1,1,"div",7),n.\u0275\u0275template(11,u,3,1,"div",8),n.\u0275\u0275elementEnd()),2&S&&(n.\u0275\u0275advance(2),n.\u0275\u0275propertyInterpolate("focus-on",n.\u0275\u0275pipeBind1(4,6,L.shouldFocusOn$)),n.\u0275\u0275attribute("aria-label",n.\u0275\u0275pipeBind1(5,8,"VisualContainer_PopOut_BackToReportButton")),n.\u0275\u0275advance(6),n.\u0275\u0275property("ngIf",L.viewModel.readOnlyState.popOutBarTitle||L.viewModel.readOnlyState.popOutBarSubtitle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",L.viewModel.readOnlyState.popOutBarTitle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",L.viewModel.readOnlyState.popOutBarSubtitle),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",L.viewModel.lastUpdateAttemptTime))},dependencies:[O.NgIf,T.X,V.j,h.q,O.AsyncPipe,M.F],styles:['.popOutBar[_ngcontent-%COMP%]{position:absolute;top:20px;left:0;right:0;margin:0;padding:0;height:40px;line-height:40px;list-style-type:none;font-size:12px;overflow:hidden;display:flex;flex-direction:row;align-items:center}.popOutBar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .popOutBar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{vertical-align:top;text-transform:uppercase;letter-spacing:.04375em}html[data-focus-source="key"][_nghost-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]:focus, html[data-focus-source="key"][_nghost-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]:focus, html[data-focus-source="key"]   [_nghost-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color);outline-offset:-1px;background-color:transparent}.popOutBar[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-family:wf_standard-font,helvetica,arial,sans-serif;color:var(--neutral-secondary-color, #666666)}.popOutBar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--bold-secondary-font-family, "wf_standard-font_bold", helvetica, arial, sans-serif);color:var(--theme-secondary-alt-color, #444444);max-width:500px;padding-right:5px}.popOutBar[_ngcontent-%COMP%]   .visualLastRefreshTime[_ngcontent-%COMP%]{float:right;margin-left:auto}.popOutBar[_ngcontent-%COMP%]   .menuItem[_ngcontent-%COMP%]{font-family:Segoe UI,wf_segoe-ui_normal,helvetica,arial,sans-serif;font-size:12px}.popOutBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;padding:0;line-height:16px;height:38px;background-color:transparent;color:var(--neutral-secondary-color, #666666);margin-top:1px}.popOutBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.popOutBar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-left:12px;margin-right:6px}.popOutBar[_ngcontent-%COMP%]   .iconBox[_ngcontent-%COMP%]{padding:0;margin:0;cursor:pointer}html[dir=rtl][_ngcontent-%COMP%]   .popOutBar[_ngcontent-%COMP%]   .iconBox[_ngcontent-%COMP%]{transform:rotate(90deg)}.popOutBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;font-size:12px;display:inline-block;cursor:default;vertical-align:top;line-height:40px;padding:0 15px;outline:none}.popOutBar[_ngcontent-%COMP%] > div.divider[_ngcontent-%COMP%]{display:inline-block;width:1px;height:30px;background-color:var(--neutral-secondary-alt-color3, #999999);margin-top:5px;padding:0}.popOutBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%], .popOutBar[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{vertical-align:top}']}),C}(i.w)},18103:function(Ve,se,t){t.d(se,{Y:function(){return M}});var e=t(73637),n=t(93171),f=t(18266),i=t(23196),O=t(79597),T=t(93838),V=t(58029),h=powerbi.explore.services.events,M=function(){function I(b,P,g){this.contextActivityService=b,this.localizationService=P,this.eventBridge=g,this.onVisualContainerRefresh=new e.EventEmitter,this.label=this.localizationService.get("VisualContainer_Analyze")}return I.prototype.refreshVisual=function(){var b=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"RefreshVisual",source:"VisualHeader"}});this.eventBridge.publishToChannel(h.userActionTriggered,{source:"UserAction_Refresh"}),this.onVisualContainerRefresh.emit(),b.resolve()},I.\u0275fac=function(P){return new(P||I)(e.\u0275\u0275directiveInject(n.r),e.\u0275\u0275directiveInject(f.o),e.\u0275\u0275directiveInject(i.J))},I.\u0275cmp=e.\u0275\u0275defineComponent({type:I,selectors:[["visual-container-refresh-button"]],inputs:{visual:"visual"},outputs:{onVisualContainerRefresh:"onVisualContainerRefresh"},decls:3,vars:4,consts:[[3,"dynamicStyle"],[3,"pbiTooltip","apply-style","click"],[1,"glyphicon","pbi-glyph-analyze","glyph-small"]],template:function(P,g){1&P&&(e.\u0275\u0275elementStart(0,"visual-header-item-container",0)(1,"button",1),e.\u0275\u0275listener("click",function(){return g.refreshVisual()}),e.\u0275\u0275element(2,"i",2),e.\u0275\u0275elementEnd()()),2&P&&(e.\u0275\u0275property("dynamicStyle",g.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("pbiTooltip",g.label)("apply-style",g.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",g.label))},dependencies:[O.V,T.Y,V.s],encapsulation:2}),I}()},34480:function(Ve,se,t){t.d(se,{Q:function(){return w}});var e=t(73637),n=t(16660),f=t(93171),i=t(18766),O=t(23196),T=t(33892),V=t(86191),h=t(18266),M=t(28252),I=t(5801),b=t(78186),P=t(72661),g=t(93838),u=t(58029),s=powerbi.common.ArrowVerticalPosition,p=powerbi.explore.services.events,C=powerbi.explore.services.selectionUtils,A=powerbi.telemetry,S=powerbi.explore.util.VisualContainerUtils,L=powerbi.explore.contracts.VisualRelationshipFilterActionUtil,D=function(N,X){return{"pbi-glyph-crossfilterfilled":N,"pbi-glyph-crossfilter":X}};function m(x,N){if(1&x){var X=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2),e.\u0275\u0275listener("click",function(he){e.\u0275\u0275restoreView(X);var Fe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Fe.setVisualRelationshipFilterAction(he,1))}),e.\u0275\u0275elementEnd()()}if(2&x){var ne=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",ne.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,D,1===ne.filterAction,1!==ne.filterAction))("pbi-tooltip",ne.filterTooltipConfig)("apply-style",ne.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",ne.filterTitle)}}var v=function(N,X){return{"pbi-glyph-crosshighlightfilled":N,"pbi-glyph-crosshighlight":X}};function l(x,N){if(1&x){var X=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2),e.\u0275\u0275listener("click",function(he){e.\u0275\u0275restoreView(X);var Fe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Fe.setVisualRelationshipFilterAction(he,2))}),e.\u0275\u0275elementEnd()()}if(2&x){var ne=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",ne.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,v,2===ne.filterAction,2!==ne.filterAction))("pbi-tooltip",ne.highlightTooltipConfig)("apply-style",ne.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",ne.highlightTitle)}}var y=function(N,X){return{"pbi-glyph-disablefilled":N,"pbi-glyph-disable":X}};function d(x,N){if(1&x){var X=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2),e.\u0275\u0275listener("click",function(he){e.\u0275\u0275restoreView(X);var Fe=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(Fe.setVisualRelationshipFilterAction(he,3))}),e.\u0275\u0275elementEnd()()}if(2&x){var ne=e.\u0275\u0275nextContext();e.\u0275\u0275property("dynamicStyle",ne.visual.readOnlyState.headerItemContainerStyle),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(5,y,3===ne.filterAction,3!==ne.filterAction))("pbi-tooltip",ne.noneTooltipConfig)("apply-style",ne.visual.readOnlyState.headerForegroundStyle),e.\u0275\u0275attribute("aria-label",ne.noneTitle)}}var w=function(){function x(N,X,ne,Ce,he,Fe,fe,ae,pe){this.conceptualSchemaProxy=N,this.contextActivityService=X,this.dataSources=ne,this.eventBridge=Ce,this.localizationService=he,this.selection=Fe,this.telemetryService=fe,this.visualAuthoring=ae,this.visualRelationship=pe,this.onVisualContainerChanged=new e.EventEmitter,this.filterTitle=this.localizationService.get("VisualRelationships_DataFilter"),this.filterTooltipConfig={tooltipArrowVerticalPosition:s.bottom,tooltipTitle:this.filterTitle,tooltipShowOnFocus:!0},this.highlightTitle=this.localizationService.get("VisualRelationships_HighlightFilter"),this.highlightTooltipConfig={tooltipArrowVerticalPosition:s.bottom,tooltipTitle:this.highlightTitle,tooltipShowOnFocus:!0},this.noneTitle=this.localizationService.get("None"),this.noneTooltipConfig={tooltipArrowVerticalPosition:s.bottom,tooltipTitle:this.noneTitle,tooltipShowOnFocus:!0}}return x.prototype.ngOnInit=function(){var N=this;this.loadVisualRelationshipFilterAction(),this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(p.selectionChanged,function(){return N.loadVisualRelationshipFilterAction()}).subscribe(p.visualTypeChanged,function(){return N.loadVisualRelationshipFilterAction()}).subscribe(p.explorationSlowDataSourceSettingsLoaded,function(X,ne){return ne.isCrossHighlightingDisabledChanged&&N.loadVisualRelationshipFilterAction()})},x.prototype.ngOnDestroy=function(){this.subscriptionManager.unsubscribeAll()},x.prototype.setVisualRelationshipFilterAction=function(N,X){var ne=this.contextActivityService.createActivity({name:"VisualAction",visualName:this.visual.contract.name,data:{action:"SetVisualRelationship",source:"VisualHeader"}});N&&N.stopPropagation&&N.stopPropagation();var Ce=C.getSelectedVisual(this.selection);this.visual.hostServices.setVisualRelationshipFilterAction(Ce,this.visual.contract,X,this.visualAuthoring),this.telemetryService.logEvent(A.EXVisualRelationshipOverride,{sourceVisualType:S.getVisualType(Ce),targetVisualType:S.getVisualType(this.visual.contract),filterAction:L.toString(X)}),this.filterAction=X,this.onVisualContainerChanged.emit(),ne.resolve()},x.prototype.loadVisualRelationshipFilterAction=function(){var N=this,X=C.getSelectedVisual(this.selection);if(X){var ne=this.dataSources.get();this.conceptualSchemaProxy.get(ne).then(function(Ce){var he=N.visual.hostServices.getVisualRelationshipFilterAction(X,N.visualRelationship,Ce);0===he&&(he=N.visualRelationship.defaultFilterAction(X,N.visual.contract)),N.filterAction=he})}},x.prototype.supportsVisualRelationshipFilterAction=function(N){var X=C.getSelectedVisual(this.selection);return this.visualRelationship.supportsFilterActionTarget(X,this.visual.contract,N)},x.\u0275fac=function(X){return new(X||x)(e.\u0275\u0275directiveInject(n.i),e.\u0275\u0275directiveInject(f.r),e.\u0275\u0275directiveInject(i.D),e.\u0275\u0275directiveInject(O.J),e.\u0275\u0275directiveInject(h.o),e.\u0275\u0275directiveInject(T.z),e.\u0275\u0275directiveInject(M.y0),e.\u0275\u0275directiveInject(I.$),e.\u0275\u0275directiveInject(V.s))},x.\u0275cmp=e.\u0275\u0275defineComponent({type:x,selectors:[["visual-container-relationship-filters"]],inputs:{visual:"visual"},outputs:{onVisualContainerChanged:"onVisualContainerChanged"},decls:3,vars:3,consts:[[3,"dynamicStyle",4,"ngIf"],[3,"dynamicStyle"],[1,"glyphicon","glyph-small","alwaysVisible",3,"ngClass","pbi-tooltip","apply-style","click"]],template:function(X,ne){1&X&&(e.\u0275\u0275template(0,m,2,8,"visual-header-item-container",0),e.\u0275\u0275template(1,l,2,8,"visual-header-item-container",0),e.\u0275\u0275template(2,d,2,8,"visual-header-item-container",0)),2&X&&(e.\u0275\u0275property("ngIf",ne.supportsVisualRelationshipFilterAction(1)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ne.supportsVisualRelationshipFilterAction(2)),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",ne.supportsVisualRelationshipFilterAction(3)))},dependencies:[b.NgClass,b.NgIf,P.i,g.Y,u.s]}),x}()},18870:function(Ve,se,t){t.d(se,{Z:function(){return f}});var e=t(73637),n=t(31053),f=function(){function i(){this.modulePath="@powerbi/ExploreUIAuthoring/lazy-modules/visual-container-skittles/visual-container-skittles-ui.module#VisualContainerSkittlesUIModule",this.componentId="VisualContainerSkittlesComponentId"}return i.\u0275fac=function(T){return new(T||i)},i.\u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["visual-container-skittles-lazy"]],decls:1,vars:2,consts:[[3,"modulePath","componentId"]],template:function(T,V){1&T&&e.\u0275\u0275element(0,"pbi-lazy-load",0),2&T&&e.\u0275\u0275property("modulePath",V.modulePath)("componentId",V.componentId)},dependencies:[n.R],encapsulation:2,changeDetection:0}),i}()},92331:function(Ve,se,t){t.d(se,{s:function(){return l}});var e=t(33275),n=t(13389),f=t(37473),i=t(54865),O=t(17350),T=t(36717),V=t(74298),h=t(73637),M=t(18266),I=t(38838),b=t(67617),P=t(56339),g=t(33714),u=t(18766),s=t(23196),p=t(70377),C=t(78186),A=t(79597),S=t(93838),L=t(58029),D=powerbi.explore.services.events,m=powerbi.explore.util.VisualContainerUtils;function v(y,d){if(1&y){var w=h.\u0275\u0275getCurrentView();h.\u0275\u0275elementStart(0,"visual-header-item-container",1)(1,"button",2,3),h.\u0275\u0275listener("click",function(X){h.\u0275\u0275restoreView(w);var ne=h.\u0275\u0275reference(2),Ce=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(Ce.handleMouseClick(ne,X))})("mouseleave",function(X){h.\u0275\u0275restoreView(w);var ne=h.\u0275\u0275nextContext();return h.\u0275\u0275resetView(ne.handleMouseLeave(X))}),h.\u0275\u0275element(3,"i",4),h.\u0275\u0275elementEnd()()}if(2&y){var x=h.\u0275\u0275nextContext();h.\u0275\u0275property("dynamicStyle",x.visual.readOnlyState.headerItemContainerStyle),h.\u0275\u0275advance(1),h.\u0275\u0275property("apply-style",x.visual.readOnlyState.headerForegroundStyle)("pbiTooltip",x.pinTileTitle),h.\u0275\u0275attribute("aria-label",x.ariaLabel)}}var l=function(){function y(d,w,x,N,X,ne,Ce,he,Fe,fe,ae){this.el=d,this.localizationService=w,this.canvasScaleService=x,this.overlay=N,this.injector=X,this.componentFactoryResolver=ne,this.visualPlugin=Ce,this.featureSwitchService=he,this.dataSources=Fe,this.explorationCapabilities=fe,this.eventBridge=ae,this.showTimeout=500,this.close$=new e.xQ}return y.prototype.ngOnDestroy=function(){this.clearShowSmartNarrativeTimeout(),null!=this.subscriptionManager&&this.subscriptionManager.unsubscribeAll(),this.closeStickyOverlay()},y.prototype.ngOnInit=function(){var d=this;this.subscriptionManager=this.eventBridge.createChannelSubscriptionManager().subscribe(D.visibilityChanged,function(){d.closeStickyOverlay()}).subscribe(D.visualContainerChanged,function(){d.isSupported=d.isVisualSupported()}),this.ariaLabel=this.localizationService.get("SmartNarratives_ToolTip"),this.pinTileTitle=this.localizationService.get("SmartNarratives_ToolTip"),this.isSupported=this.isVisualSupported()},y.prototype.ngOnChanges=function(d){(d.visual||d.options)&&(this.isSupported=this.isVisualSupported())},y.prototype.handleMouseClick=function(d,w){this.overlay.isOverlayOpen&&this.overlayRef?this.overlayRef.close():(null==this.overlayRef||!this.sticky)&&(this.clearShowSmartNarrativeTimeout(),this.showSmartNarrative(d,!0))},y.prototype.handleMouseEnter=function(d){this.setShowRestatementTimeout(d)},y.prototype.handleMouseLeave=function(d){var w,x,N;this.clearShowSmartNarrativeTimeout();var X=null===(N=null===(x=null===(w=this.overlayRef)||void 0===w?void 0:w.componentRef)||void 0===x?void 0:x.location)||void 0===N?void 0:N.nativeElement;null!=X&&X.contains(d.relatedTarget)||this.close$.next(!1)},y.prototype.setShowRestatementTimeout=function(d){var w=this;null!=this.showTimer||null!=this.overlayRef||(this.showTimer=setTimeout(function(){w.showTimer=void 0,w.showSmartNarrative(d)},this.showTimeout))},y.prototype.listenForHideIntent=function(){var d=this,w=this.close$.pipe((0,n.b)(1e3)).subscribe(function(x){!x&&!d.sticky&&(d.overlayRef&&(d.overlayRef.close(),d.overlayRef=void 0),w.unsubscribe(),w=null)})},y.prototype.clearShowSmartNarrativeTimeout=function(){this.showTimer&&(clearTimeout(this.showTimer),this.showTimer=void 0)},y.prototype.showSmartNarrative=function(d,w){var x=this;if(null==this.overlayRef||!this.sticky){var N=this.overlayRef;this.sticky=w;var X=this.injector;if(!X)throw new Error("Parent element injector undefined when creating smart narrative overlay");var ne={visual:this.visual.contract,options:this.options?this.options:{hideExistingOverlays:!0}},Ce=this.overlay.position().flexibleConnectedTo(d).withPositions([(0,T.Oq)(-4,0),(0,T.hT)(4,0),(0,T.f6)(4,0),(0,T.w3)(-4,0)]).withFlexibleDimensions(!0).withPush(!0).withGrowAfterOpen(!0);this.overlayRef=this.overlay.open({component:V.W,data:ne,options:{positionStrategy:Ce,hasBackdrop:w,disposeOnNavigation:!0,backdropClass:"cdk-overlay-transparent-backdrop"},focusElementOnClose:w?d:null,hasCaret:!1,injector:X,componentFactoryResolver:this.componentFactoryResolver,closeOnBackdropClick:w}),w&&this.overlayRef.onClose.pipe((0,f.q)(1)).subscribe(function(){x.overlayRef=void 0,x.sticky=!1}),this.overlayRef.isPointerWithin$&&this.overlayRef.isPointerWithin$.pipe((0,i.T)(1),(0,O.x)()).subscribe(function(he){x.close$.next(he)}),this.listenForHideIntent(),N&&N.close()}},y.prototype.isVisualSupported=function(){var w=powerbi.explore.services.createVisualPluginOps(this.visualPlugin,this.featureSwitchService).canSummarizeVisual(this.visual.contract.config.singleVisual.visualType);if(!w||m.isSmallMultiplesVisual(this.visual.contract.config.singleVisual))return!1;if(!this.dataSources.get())return!1;var N=this.explorationCapabilities.getCapabilities();return!(!N.insights&&!N.analysisVisuals)&&w},y.prototype.closeStickyOverlay=function(){this.sticky&&(this.sticky=!1,this.close$.next(!1))},y.\u0275fac=function(w){return new(w||y)(h.\u0275\u0275directiveInject(h.ElementRef),h.\u0275\u0275directiveInject(M.o),h.\u0275\u0275directiveInject(I.Z),h.\u0275\u0275directiveInject(b._c),h.\u0275\u0275directiveInject(h.Injector),h.\u0275\u0275directiveInject(h.ComponentFactoryResolver),h.\u0275\u0275directiveInject(P.D),h.\u0275\u0275directiveInject(g.vZ),h.\u0275\u0275directiveInject(u.D),h.\u0275\u0275directiveInject(p.U),h.\u0275\u0275directiveInject(s.J))},y.\u0275cmp=h.\u0275\u0275defineComponent({type:y,selectors:[["visual-container-smart-narrative-button"]],inputs:{visual:"visual",options:"options"},features:[h.\u0275\u0275NgOnChangesFeature],decls:1,vars:1,consts:[[3,"dynamicStyle",4,"ngIf"],[3,"dynamicStyle"],["cdkmonitorelementfocus","","aria-haspopup","true","aria-expanded","false",1,"vcFilterRestatementBtn",3,"apply-style","pbiTooltip","click","mouseleave"],["overlayOrigin",""],[1,"glyphicon","pbi-glyph-page","glyph-small"]],template:function(w,x){1&w&&h.\u0275\u0275template(0,v,4,4,"visual-header-item-container",0),2&w&&h.\u0275\u0275property("ngIf",x.isSupported)},dependencies:[C.NgIf,A.V,S.Y,L.s]}),y}()},93838:function(Ve,se,t){t.d(se,{Y:function(){return i}});var e=t(73637),n=t(58029),f=["*"],i=function(){function O(){}return O.\u0275fac=function(V){return new(V||O)},O.\u0275cmp=e.\u0275\u0275defineComponent({type:O,selectors:[["visual-header-item-container"]],inputs:{dynamicStyle:"dynamicStyle"},ngContentSelectors:f,decls:2,vars:1,consts:[[1,"visualHeaderItemContainer","themeableElement",3,"apply-style"]],template:function(V,h){1&V&&(e.\u0275\u0275projectionDef(),e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275projection(1),e.\u0275\u0275elementEnd()),2&V&&e.\u0275\u0275property("apply-style",h.dynamicStyle)},dependencies:[n.s],styles:[".visualHeaderItemContainer[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}.stylableVisualContainerHeader[_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%], .stylableVisualContainerHeader   [_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]{height:20px;padding-top:1px;margin-left:4px;border:1px solid #ffffff;background-color:#fff}",".exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader[_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%], .exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   [_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]{height:22px;padding-top:1px;margin-left:4px;border:none}.exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader[_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]     button, .exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   [_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]     button{width:24px;color:#000;border-radius:4px;background-color:rgba(255,255,255,.75)}.exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader[_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]     button.tooltipInfoButton, .exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   [_nghost-%COMP%]   .visualHeaderItemContainer[_ngcontent-%COMP%]     button.tooltipInfoButton{display:none}"]}),O}()},78485:function(Ve,se,t){t.d(se,{r:function(){return Q}});var e=t(7005),n=t(73637),f=t(98864),i=t(47013),O=t(33185),T=t(70030),V=t(54865),h=t(66859),M=t(48009),I=t(6459),b=t(752),P=t(32209),g=t(56339),u=t(28030),s=t(23196),p=t(18840),C=t(33892),A=t(74850),S=t(70377),L=t(9508),D=t(33714),m=t(66592),v=t(18266),l=t(46706),y=t(10378),d=t(28252),w=t(29541),x=powerbi.explore.services.events,N=powerbi.data.getDisplayName,X=powerbi.explore.services.selectionUtils,ne=powerbi.explore.viewModels.ViewModelFactory,Ce=powerbi.explore.util.VisualContainerUtils,he=new n.InjectionToken("VisualTypeAboutDialogIdentifier"),Fe=function(){function le(K,q,ye,Le,Ne,be,Y,ue,Pe,Ae,Ze,ot,lt,yt,De,Ie,Oe,Be,qe,je,st){var ht=this;this.appSourceResourceService=K,this.eventBridge=q,this.explorationCapabilities=ye,this.favoriteVisualLoader=Le,this.featureSwitchService=Ne,this.globalEventBridge=be,this.localizationService=Y,this.modernDialogService=ue,this.publicCustomVisualService=Pe,this.reportSettingsService=Ae,this.screenReaderService=Ze,this.selectionService=ot,this.telemetryService=lt,this.trustedVisualService=yt,this.visualConsent=De,this.visualPaneSettingsService=Ie,this.visualPluginOps=Oe,this.visualPluginService=Be,this.visualPrivilegeService=qe,this.managedCustomVisualsService=je,this.aboutVisualDialogIdentifier=st,this.availableVisualTypesInternal$=new f.X(void 0),this.availableVisualTypes$=this.availableVisualTypesInternal$.pipe((0,V.T)(1)),(0,T.T)(this.eventBridge.on(x.selectionChanged),this.eventBridge.on(x.visualTypeChanged),this.eventBridge.on(x.visualContainerChanged)).pipe().subscribe(function(Pt){var ze,ke,We=(0,e.ev)([],null!==(ke=null===(ze=ht.availableVisualTypesInternal$.value)||void 0===ze?void 0:ze.types)&&void 0!==ke?ke:[],!0);ht.updateVisualTypeStates(We)&&ht.availableVisualTypesInternal$.next({types:We,updateSource:"statesUpdateOnly"})}),this.eventBridge.on(x.visualPluginsChanged).subscribe(function(){return(0,e.mG)(ht,void 0,void 0,function(){return(0,e.Jh)(this,function(Pt){switch(Pt.label){case 0:return[4,this.updateAvailableVisualTypes()];case 1:return Pt.sent(),[2]}})})}),this.eventBridge.on(x.VisualContainerAdded).subscribe(function(Pt){return(0,e.mG)(ht,void 0,void 0,function(){var ze;return(0,e.Jh)(this,function(ke){switch(ke.label){case 0:return(ze=Ce.getVisualType(Pt))?(this.visualPaneSettingsService.addExplorationVisual(ze),[4,this.updateAvailableVisualTypes()]):[3,2];case 1:ke.sent(),ke.label=2;case 2:return[2]}})})}),this.eventBridge.on(x.addCustomVisual).subscribe(function(Pt){ht.visualPaneSettingsService.addExplorationVisual(Pt.name),ht.updateAvailableVisualTypes()})}return le.prototype.initialize=function(K,q){var Le,ye=this;this.additionalFilter=K,this.customVisualsEnabled=!CustomVisualsUtils.areCustomVisualsDisabled(this.featureSwitchService,null===(Le=this.reportSettingsService)||void 0===Le?void 0:Le.areCustomVisualsDisabled()),this.setCustomVisualActions(),this.trustedVisualService.loadTrustedVisualPlugins().then(function(Ne){ye.visualPluginService.ensureTrustedVisualPlugins(Ne)}).finally(function(){return(0,e.mG)(ye,void 0,void 0,function(){return(0,e.Jh)(this,function(Ne){switch(Ne.label){case 0:return[4,this.updateAvailableVisualTypes()];case 1:return Ne.sent(),q&&q(),[2]}})})}),this.updateAvailableVisualTypes()},le.prototype.performVisualTypeMenuItemAction=function(K,q){switch(K){case 0:this.eventBridge.publishToChannel(x.deleteCustomVisuals);break;case 1:this.customVisualsEnabled?this.importVisual():this.showCustomVisualsDisabledDialog();break;case 2:this.eventBridge.publishToChannel(x.downloadVisual);break;case 8:this.restoreAllVisuals();break;case 3:q&&this.addVisualToFavorites(q.plugin);break;case 4:q&&this.removeVisualFromFavorites(q.plugin);break;case 5:q&&this.showAboutDialog(q.plugin,q.title);break;case 6:q&&this.unpinVisual(q.plugin);break;case 7:q&&this.restoreVisual(q.plugin)}},le.prototype.performSelectVisualTypeAction=function(K,q,ye){var Ne,Le=this;void 0===q&&(q=!1);var be=K.plugin;if(!1!==this.visualConsent.hasConsent(K.plugin.name)){this.notifyAddVisualToCanvas(be);var Y=ye||this.getSelectedVisual();if(!q&&Y){if(this.isVisualTypeEnabled(be,Y)){var ue=Ce.getVisualType(Y),Pe=_.find(null===(Ne=this.availableVisualTypesInternal$.value)||void 0===Ne?void 0:Ne.types,function(Ae){return Ae.plugin.name===ue});this.eventBridge.publishToChannel(x.visualConversion,{visualContainer:Y,newVisualType:be.name,actionAfterConversion:function(){var Ze=Pe?Le.localizationService.format("ChangedVisualType",[Pe.title,K.title]):Le.localizationService.format("ChangedVisualType_differentSection",[K.title]);Le.screenReaderService.alert(Ze)}})}}else this.eventBridge.publishToChannel(x.addVisualContainer,{visualType:be.name,telemetrySource:2,shouldSummarize:!0,actionAfterAddition:function(){var Ze=Le.localizationService.format("CreatedVisualType",[K.title]);Le.screenReaderService.alert(Ze)}})}else this.showTrustedVisualConsentDialog(K)},le.prototype.importVisual=function(){this.eventBridge.publishToChannel(x.importVisual)},le.prototype.updateAvailableVisualTypes=function(){return(0,e.mG)(this,void 0,void 0,function(){var K;return(0,e.Jh)(this,function(q){switch(q.label){case 0:return[4,this.getAvailableVisualTypes()];case 1:return K=q.sent(),this.updateVisualTypeStates(K),this.availableVisualTypesInternal$.next({types:K,updateSource:"all"}),[2]}})})},le.prototype.updateVisualTypeStates=function(K){if(_.isEmpty(K))return!1;for(var q=this.getSelectedVisual(),ye=!1,Le=0,Ne=K;Le<Ne.length;Le++){var be=Ne[Le],Y=be.enabled,ue=be.active;be.enabled=this.isVisualTypeEnabled(be.plugin,q),be.active=this.isVisualTypeActive(be.plugin,q),ye=ye||!!Y!=!!be.enabled||!!ue!=!!be.active}return ye},le.prototype.getAvailableVisualTypes=function(){return(0,e.mG)(this,void 0,void 0,function(){var K,q,ye,Le,Ne,be,Y,ue=this;return(0,e.Jh)(this,function(Pe){switch(Pe.label){case 0:return[4,this.visualPluginService.getConvertibleVisualsAsync()];case 1:for(K=Pe.sent(),q=_.filter(K,function(Ae){return!!Ae&&(!(ue.visualPaneSettingsService.isUnpinnedVisual(Ae.name)&&!ue.visualPaneSettingsService.isExplorationVisual(Ae.name))||void 0)}),ye=ne.getAvailableVisualTypes(q,this.featureSwitchService,this.visualPaneSettingsService,this.additionalFilter,this.trustedVisualService),Le=0,Ne=ye;Le<Ne.length;Le++)(be=Ne[Le]).plugin.name===powerbi.visuals.plugins.textbox.name&&(Y=this.localizationService.get("SmartNarratives_ToolTip"),be.title=Y,be.tooltipConfig.tooltipTitle=Y);return[2,ye]}})})},le.prototype.setCustomVisualActions=function(){var K;null!==(K=this.explorationCapabilities.getCapabilities())&&void 0!==K&&K.disableCustomVisualPluginActions||(this.customVisualActions=[],this.featureSwitchService.featureSwitches.customVisualsStore&&this.customVisualActions.push({titleKey:"DownloadVisuals_ContextMenu",action:2}),this.customVisualActions.push({titleKey:"ImportVisuals_ContextMenu",action:1}),this.customVisualActions.push({titleKey:"DeleteVisuals_ContextMenu",action:0}),this.featureSwitchService.featureSwitches.personalVisualizationPaneEnabled&&this.customVisualActions.push({titleKey:"RestoreVisualizationPane_ContextMenu",action:8}))},le.prototype.addVisualToFavorites=function(K){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(q){switch(q.label){case 0:return[4,this.favoriteVisualLoader.addVisualToFavorites(K)];case 1:return q.sent(),this.eventBridge.publishToChannel(x.visualPluginsChanged),[2]}})})},le.prototype.showAboutDialog=function(K,q){var ye;return(0,e.mG)(this,void 0,void 0,function(){var Le,Ne,be,Y,ue,Pe,Ze,ot,lt,yt,De,Ie,Oe;return(0,e.Jh)(this,function(je){switch(je.label){case 0:if(this.telemetryService.logEvent(powerbi.telemetry.EXAboutVisualDialog,{guid:K.name}),!K)return[2];switch(Pe=K.publisher,K.source){case 0:return[3,1];case 2:return[3,2];case 1:return[3,4]}return[3,5];case 1:return Le=this.localizationService.get("VisualSource_FromFile"),Ne=K.supportUrl&&K.supportUrl.length?K.supportUrl:"https://go.microsoft.com/fwlink/?linkid=2099671",ue=K.developerModeVisual?void 0:this.getWarningVersionsMessage(K.name,K.version),[3,6];case 2:return[4,this.managedCustomVisualsService.isPublicManagedVisualByVisualType(K.name)];case 3:return je.sent()?(Le=this.localizationService.get("VisualSource_FromOrgSource"),Ne=K.supportUrl):K.custom?(Le=this.localizationService.get("VisualSource_FromAppSource"),be="https://go.microsoft.com/fwlink/?linkid=2106525"):Le=this.localizationService.get("VisualSource_Default"),Ne=K.supportUrl,ue=this.getWarningVersionsMessage(K.name,K.version),[3,6];case 4:return Le=this.localizationService.get("VisualSource_FromOrgSource"),Ne=K.supportUrl&&K.supportUrl.length?K.supportUrl:"https://go.microsoft.com/fwlink/?linkid=2100000",[3,6];case 5:Pe=this.localizationService.get("AboutVisualDialog_Microsoft"),Le=this.localizationService.get("VisualSource_Default"),Y="https://go.microsoft.com/fwlink/?linkid=2100001",je.label=6;case 6:return(Ze=null!==(ye=K.displayName)&&void 0!==ye?ye:N(K.titleKey,this.localizationService))||(Ze=N(q,this.localizationService)),ot=null,K.custom?[4,this.publicCustomVisualService.isApprovedResourceServerRender(K.name)]:[3,8];case 7:lt=je.sent(),yt=this.visualPrivilegeService.getWebAccessParameters(K),De=this.visualPrivilegeService.getLocalStoragePrivilege(K),Ie=this.visualPrivilegeService.getExportContentPrivilege(K),Oe=this.visualPrivilegeService.getAcquireAADTokenParameters(K),ot={certified:lt,webaccess:yt,localstorage:De,exportContent:Ie,aadAuthentication:Oe},je.label=8;case 8:return this.modernDialogService.openHostDialog({bindings:{visualName:Ze,supportUrl:Ne,source:Le,version:K.version,guid:K.name,appSourceLink:be,publisher:Pe,documentation:Y,warning:ue,capabilities:ot},componentName:this.aboutVisualDialogIdentifier,dialogName:"AboutVisualDialog"}),[2]}})})},le.prototype.removeVisualFromFavorites=function(K){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(ye){switch(ye.label){case 0:return[4,this.modernDialogService.promptHostSimpleDialog("RemoveVisualFromFavoritesWarning",{title:this.localizationService.get("RemoveVisualFromFavoritesWarningTitle"),message:this.localizationService.get("RemoveCustomVisualFromFavoritesWarningMessage"),okButtonText:this.localizationService.get("OK_ButtonText"),cancelButtonText:this.localizationService.get("Cancel_ButtonText")})];case 1:return 1!==ye.sent()?[3,3]:[4,this.favoriteVisualLoader.removeVisualFromFavorites(K)];case 2:ye.sent(),this.eventBridge.publishToChannel(x.visualPluginsChanged),ye.label=3;case 3:return[2]}})})},le.prototype.unpinVisual=function(K){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(ye){switch(ye.label){case 0:return[4,this.modernDialogService.promptHostSimpleDialog("UnpinVisualWarning",{title:this.localizationService.get("RemoveVisualFromFavoritesWarningTitle"),message:this.localizationService.get("RemoveVisualFromFavoritesWarningMessage"),okButtonText:this.localizationService.get("OK_ButtonText"),cancelButtonText:this.localizationService.get("Cancel_ButtonText")})];case 1:return 1!==ye.sent()?[3,3]:[4,this.visualPaneSettingsService.unpinVisual(K)];case 2:ye.sent(),this.visualPaneSettingsService.addExplorationVisual(K.name),this.eventBridge.publishToChannel(x.visualPluginsChanged),ye.label=3;case 3:return[2]}})})},le.prototype.restoreVisual=function(K){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(q){switch(q.label){case 0:return[4,this.visualPaneSettingsService.restoreVisual(K)];case 1:return q.sent(),this.eventBridge.publishToChannel(x.visualPluginsChanged),[2]}})})},le.prototype.restoreAllVisuals=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(q){switch(q.label){case 0:return[4,this.modernDialogService.promptHostSimpleDialog("RestoreVisualizationPaneWarning",{title:this.localizationService.get("RestoreVisualizationPaneWarningTitle"),message:this.localizationService.get("RestoreVisualizationPaneWarningMessage"),okButtonText:this.localizationService.get("OK_ButtonText"),cancelButtonText:this.localizationService.get("Cancel_ButtonText")})];case 1:return 1!==q.sent()?[3,3]:[4,this.visualPaneSettingsService.restoreAllVisuals()];case 2:q.sent(),this.eventBridge.publishToChannel(x.visualPluginsChanged),q.label=3;case 3:return[2]}})})},le.prototype.getWarningVersionsMessage=function(K,q){if(this.appSourceResourceService.isNotUpdatedVersion(K,q))return this.localizationService.format("CustomVisuals_VersionIsNotUpdatedMessage",[this.appSourceResourceService.getVisualVersionFromId(K),q])},le.prototype.isVisualTypeEnabled=function(K,q){if(!q)return!0;var ye=Ce.getVisualType(q),Le=this.visualPluginService.capabilities(ye);return ye!==K.name&&((null==Le?void 0:Le.isConvertible)||this.visualPluginOps.isQueryVisual(ye))},le.prototype.isVisualTypeActive=function(K,q){return Ce.getVisualType(q)===K.name},le.prototype.showTrustedVisualConsentDialog=function(K){return(0,e.mG)(this,void 0,void 0,function(){var q;return(0,e.Jh)(this,function(ye){switch(ye.label){case 0:return[4,this.trustedVisualService.getConsentAndLoadVisuals([K.plugin.name])];case 1:return q=ye.sent(),_.isEmpty(q)||(this.performSelectVisualTypeAction(K),this.visualPluginService.ensureTrustedVisualPlugins(q),this.eventBridge.publishToChannel(x.visualPluginsChanged),this.globalEventBridge.publishToChannel(powerbi.events.reloadEmptyVisuals,{visualTypes:q.map(function(Le){return Le.name})})),[2]}})})},le.prototype.notifyAddVisualToCanvas=function(K){return(0,e.mG)(this,void 0,void 0,function(){var q,ye,Le,Ne,be,Y,ue;return(0,e.Jh)(this,function(Pe){switch(Pe.label){case 0:return q=!1,ye=!1,Le=!1,K.custom?(Ne=K,be=!1,this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps?[4,this.publicCustomVisualService.isApprovedResourceByVisualId(Ne.name)]:[3,2]):[3,9];case 1:be=Pe.sent(),Pe.label=2;case 2:return this.eventBridge.publishToChannel(x.addCustomVisualToCanvas,{visualType:Ne.name,resourcePackageId:Ne.resourcePackageId,isPublic:be}),this.featureSwitchService.featureSwitches.userFavoriteResourcePackagesEnabled?(Y=this.visualPaneSettingsService.isFavoritePublicCustomVisual(Ne.name),(ue=Y)?[3,4]:[4,this.favoriteVisualLoader.isFavoriteResourcePackage(Ne.resourcePackageId)]):[3,5];case 3:ue=Pe.sent(),Pe.label=4;case 4:q=ue,Pe.label=5;case 5:return this.featureSwitchService.featureSwitches.tenantOutOfBoxVisualsEnabled?[4,this.favoriteVisualLoader.isOutOfBoxResourcePackage(Ne.resourcePackageId)]:[3,7];case 6:ye=Pe.sent(),Pe.label=7;case 7:return this.featureSwitchService.featureSwitches.manageMarketplaceVisuals?[4,this.managedCustomVisualsService.isPublicManagedVisualById(Ne.resourcePackageId)]:[3,9];case 8:Le=Pe.sent(),Pe.label=9;case 9:return this.telemetryService.logEvent(powerbi.telemetry.EXAddVisualToCanvas,{visualType:K.name,isCustom:!!K.custom,isFavorite:q,isOutOfBox:ye,isManaged:Le}),[2]}})})},le.prototype.getSelectedVisual=function(){return X.getSelectedVisual(this.selectionService)},le.prototype.showCustomVisualsDisabledDialog=function(){this.modernDialogService.promptHostSimpleDialog("ImportCustomVisualsDisabled",{title:this.localizationService.get("ImportCustomVisualsDisabledDialogTitle"),message:this.localizationService.get("ImportCustomVisualsDisabledDialogBody"),additionalMessages:[this.localizationService.get("ImportCustomVisualsDisabledDialogBody_AdditionalMessage")],okButtonText:this.localizationService.get("Close"),cancelButtonText:""})},le.\u0275fac=function(q){return new(q||le)(n.\u0275\u0275inject(M.r),n.\u0275\u0275inject(s.J),n.\u0275\u0275inject(S.U),n.\u0275\u0275inject(L.W),n.\u0275\u0275inject(D.vZ),n.\u0275\u0275inject(m.Z),n.\u0275\u0275inject(v.o),n.\u0275\u0275inject(l.x),n.\u0275\u0275inject(I.B),n.\u0275\u0275inject(p.h),n.\u0275\u0275inject(y.g),n.\u0275\u0275inject(C.z),n.\u0275\u0275inject(d.y0),n.\u0275\u0275inject(b.t),n.\u0275\u0275inject(P.f),n.\u0275\u0275inject(w.R),n.\u0275\u0275inject(A.f),n.\u0275\u0275inject(g.D),n.\u0275\u0275inject(u.s),n.\u0275\u0275inject(h.D),n.\u0275\u0275inject(he))},le.\u0275prov=n.\u0275\u0275defineInjectable({token:le,factory:le.\u0275fac}),le}(),fe=t(24267),ae=t(28966),pe=t(78186),ge=t(49524),Me=t(79597),ce=t(68296),J=jsCommon.FocusManager,ie=["allVisualTypes"];function G(le,K){if(1&le&&n.\u0275\u0275element(0,"pbi-svg-use-symbol",10),2&le){var q=n.\u0275\u0275nextContext().$implicit,ye=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("sheet",ye.core.getVisualIconSheetName(q))("symbolId",null==q?null:q.class)("disabled",ye.core.isDisabled(q))}}var j=function(K){return{active:K}},F=function(K,q){return{disabled:K,isOldIcon:q}};function E(le,K){if(1&le){var q=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",5,6),n.\u0275\u0275listener("keydown",function(Y){var Pe=n.\u0275\u0275restoreView(q).index,Ae=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Ae.core.onVisualButtonKeyDown(Y,Pe))})("click",function(){var ue=n.\u0275\u0275restoreView(q).$implicit,Pe=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Pe.core.performSelectVisualTypeAction(ue))})("mouseover",function(){var ue=n.\u0275\u0275restoreView(q).$implicit,Pe=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Pe.core.toggleEffectClasses(ue,!0,!0))})("mouseleave",function(){var ue=n.\u0275\u0275restoreView(q).$implicit,Pe=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Pe.core.toggleEffectClasses(ue,!1,!0))})("focus",function(){var ue=n.\u0275\u0275restoreView(q).$implicit,Pe=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Pe.core.toggleEffectClasses(ue,!0,!1))})("blur",function(){var ue=n.\u0275\u0275restoreView(q).$implicit,Pe=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Pe.core.toggleEffectClasses(ue,!1,!1))})("pbiMenuButtonClick",function(Y){var Pe=n.\u0275\u0275restoreView(q).$implicit,Ae=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Ae.core.selectMenuItem(Y.data,Pe))}),n.\u0275\u0275pipe(2,"async"),n.\u0275\u0275elementStart(3,"div",7)(4,"div",8),n.\u0275\u0275template(5,G,1,3,"pbi-svg-use-symbol",9),n.\u0275\u0275elementEnd()()()}if(2&le){var ye=K.$implicit,Le=K.index,Ne=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("tabindex",Le===n.\u0275\u0275pipeBind1(2,15,Ne.core.visualTypesFocusIndex$)?0:-1)("pbiTooltip",ye.tooltipConfig.tooltipTitle)("ngClass",n.\u0275\u0275pureFunction1(17,j,ye.active))("ngStyle",Ne.core.visualStyle(ye))("pbiMenu",Ne.pbiMenuViewModel(ye.menuItems))("disabled",Ne.core.disableContextMenu||!Ne.core.showDropdownForCustomVisuals),n.\u0275\u0275attribute("aria-posinset",Le+1)("aria-setsize",Ne.core.viewModel.visuals.length)("aria-label",ye.title)("aria-selected",!!ye.active),n.\u0275\u0275advance(3),n.\u0275\u0275classMapInterpolate1("visual-icon visual-icon-outer ",ye.class,""),n.\u0275\u0275property("ngClass",n.\u0275\u0275pureFunction2(19,F,Ne.core.isDisabled(ye),!Ne.core.newPaneColorsEnabled||!Ne.core.showDropdownForCustomVisuals)),n.\u0275\u0275advance(2),n.\u0275\u0275property("ngIf",!(null!=ye&&ye.plugin.custom))}}function k(le,K){if(1&le){var q=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",11),n.\u0275\u0275listener("pbiMenuButtonClick",function(Ne){n.\u0275\u0275restoreView(q);var be=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(be.core.selectMenuItem(Ne.data,be.visual))}),n.\u0275\u0275element(1,"span",12),n.\u0275\u0275elementEnd()}if(2&le){var ye=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("pbiTooltip",ye.core.optionsTooltipTitle)("pbiMenu",ye.core.customVisualMenuItems),n.\u0275\u0275attribute("aria-label",ye.core.optionsTooltipTitle)}}function R(le,K){if(1&le){var q=n.\u0275\u0275getCurrentView();n.\u0275\u0275elementStart(0,"button",13),n.\u0275\u0275listener("click",function(){n.\u0275\u0275restoreView(q);var Ne=n.\u0275\u0275nextContext(2);return n.\u0275\u0275resetView(Ne.core.importVisual())}),n.\u0275\u0275element(1,"span",12),n.\u0275\u0275elementEnd()}if(2&le){var ye=n.\u0275\u0275nextContext(2);n.\u0275\u0275property("pbiTooltip",ye.core.optionsTooltipTitle),n.\u0275\u0275attribute("aria-label",ye.core.optionsTooltipTitle)}}function z(le,K){if(1&le&&(n.\u0275\u0275elementStart(0,"div",1),n.\u0275\u0275template(1,E,6,22,"button",2),n.\u0275\u0275template(2,k,2,3,"button",3),n.\u0275\u0275template(3,R,2,2,"button",4),n.\u0275\u0275elementEnd()),2&le){var q=n.\u0275\u0275nextContext();n.\u0275\u0275advance(1),n.\u0275\u0275property("ngForOf",q.core.viewModel.visuals)("ngForTrackBy",q.core.trackByPluginName),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",q.core.showMoreOptionsIcon&&q.core.showDropdownForCustomVisuals),n.\u0275\u0275advance(1),n.\u0275\u0275property("ngIf",q.core.showMoreOptionsIcon&&!q.core.showDropdownForCustomVisuals)}}var Q=function(){function le(K,q,ye,Le,Ne,be,Y,ue){var Pe=this;this.isFinishedLoading=new n.EventEmitter,this.pbiMenuViewModel=function(Ae){return function(){return Pe.convertOldMenuItemToPbiMenu(Ae)}},this.core=new me(function(){return Pe.isFinishedLoading.emit()},{$element:$(K.nativeElement),highContrastCssGenerationService:q,featureSwitchService:ye,localizationService:Le,explorationCapabilities:Ne,trustedVisual:be,svgProvider:Y,visualTypesService:ue})}return Object.defineProperty(le.prototype,"_allVisualTypeElementRefs",{set:function(q){this.core.allVisualTypeElementRefs=(null==q?void 0:q.toArray())||[]},enumerable:!1,configurable:!0}),Object.defineProperty(le.prototype,"disableMoreOptionsIcon",{get:function(){return this.core.disableMoreOptionsIcon},set:function(q){this.core.disableMoreOptionsIcon=q},enumerable:!1,configurable:!0}),Object.defineProperty(le.prototype,"disableContextMenu",{get:function(){return this.core.disableContextMenu},set:function(q){this.core.disableContextMenu=q},enumerable:!1,configurable:!0}),Object.defineProperty(le.prototype,"visualPluginFilter",{get:function(){return this.core.visualPluginFilter},set:function(q){this.core.visualPluginFilter=q},enumerable:!1,configurable:!0}),Object.defineProperty(le.prototype,"visualContainer",{get:function(){return this.core.visualContainer},set:function(q){this.core.visualContainer=q},enumerable:!1,configurable:!0}),le.prototype.ngOnInit=function(){this.core.$onInit()},le.prototype.ngOnDestroy=function(){this.core.$onDestroy()},le.prototype.convertOldMenuItemToPbiMenu=function(K){return{items:K.map(function(ye){return{text:ye.text,type:i.iB.Button,data:ye.action}})}},le.\u0275fac=function(q){return new(q||le)(n.\u0275\u0275directiveInject(n.ElementRef),n.\u0275\u0275directiveInject(fe.g),n.\u0275\u0275directiveInject(D.vZ),n.\u0275\u0275directiveInject(v.o),n.\u0275\u0275directiveInject(S.U),n.\u0275\u0275directiveInject(b.t),n.\u0275\u0275directiveInject(ae.g),n.\u0275\u0275directiveInject(Fe))},le.\u0275cmp=n.\u0275\u0275defineComponent({type:le,selectors:[["visual-types-container-modern"]],viewQuery:function(q,ye){var Le;(1&q&&n.\u0275\u0275viewQuery(ie,5,n.ElementRef),2&q)&&(n.\u0275\u0275queryRefresh(Le=n.\u0275\u0275loadQuery())&&(ye._allVisualTypeElementRefs=Le))},inputs:{disableMoreOptionsIcon:"disableMoreOptionsIcon",disableContextMenu:"disableContextMenu",visualPluginFilter:"visualPluginFilter",visualContainer:"visualContainer"},outputs:{isFinishedLoading:"isFinishedLoading"},features:[n.\u0275\u0275ProvidersFeature([Fe,{provide:he,useValue:O.Ys}])],decls:1,vars:1,consts:[["data-automation-type","visualTypesContainer","role","listbox","class","visual-types-container themeableElement",4,"ngIf"],["data-automation-type","visualTypesContainer","role","listbox",1,"visual-types-container","themeableElement"],["role","option","pbiTooltipCaretSize","small","class","visual-icon-container","pbiMenuActivation","contextmenu",3,"tabindex","pbiTooltip","ngClass","ngStyle","pbiMenu","disabled","keydown","click","mouseover","mouseleave","focus","blur","pbiMenuButtonClick",4,"ngFor","ngForOf","ngForTrackBy"],["class","visual-icon-container more","pbiTooltipCaretSize","small",3,"pbiTooltip","pbiMenu","pbiMenuButtonClick",4,"ngIf"],["class","visual-icon-container more","pbiTooltipCaretSize","small",3,"pbiTooltip","click",4,"ngIf"],["role","option","pbiTooltipCaretSize","small","pbiMenuActivation","contextmenu",1,"visual-icon-container",3,"tabindex","pbiTooltip","ngClass","ngStyle","pbiMenu","disabled","keydown","click","mouseover","mouseleave","focus","blur","pbiMenuButtonClick"],["allVisualTypes",""],[3,"ngClass"],[1,"visual-icon-inner"],[3,"sheet","symbolId","disabled",4,"ngIf"],[3,"sheet","symbolId","disabled"],["pbiTooltipCaretSize","small",1,"visual-icon-container","more",3,"pbiTooltip","pbiMenu","pbiMenuButtonClick"],[1,"visual-icon-inner","glyphicon","pbi-glyph-more"],["pbiTooltipCaretSize","small",1,"visual-icon-container","more",3,"pbiTooltip","click"]],template:function(q,ye){1&q&&n.\u0275\u0275template(0,z,4,4,"div",0),2&q&&n.\u0275\u0275property("ngIf",(null==ye.core.viewModel.visuals?null:ye.core.viewModel.visuals.length)>0||ye.core.showMoreOptionsIcon)},dependencies:[pe.NgClass,pe.NgForOf,pe.NgIf,pe.NgStyle,ge.R,Me.V,ce.l8,pe.AsyncPipe],styles:[".visual-types-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(28px,1fr));row-gap:4px;justify-items:center}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]{background-color:transparent;border:1px solid transparent;margin:1px 3px;width:22px;height:22px;box-sizing:border-box;float:left;transition:none}html[data-focus-source=key][_ngcontent-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus{outline:var(--focus-two-tone-outline-definition, auto 1px);outline-color:var(--focus-two-tone-outline-color, -webkit-focus-ring-color)}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%]{color:var(--white-color, #FFF);font-size:16px}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]{width:100%;height:100%;display:block}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;display:block;background-color:transparent;border:1px solid transparent;box-sizing:border-box}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.more[_ngcontent-%COMP%]:hover   .pbi-glyph-more[_ngcontent-%COMP%]{color:var(--alert-color, #FFF9AE)}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%]{border-color:var(--alert-color, #FFF9AE)}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]{border-color:var(--theme-primary-color, #F2C811);background-color:rgba(0,0,0,.4)}.visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%]{border-color:var(--alert-color, #FFF9AE)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]{background-color:var(--gray-20, #F3F2F1)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .pbi-glyph-more[_ngcontent-%COMP%]{color:var(--gray-180, #252423)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover   .visual-icon-inner[_ngcontent-%COMP%]{border-color:var(--gray-80, #B3B0AD)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C);background-color:var(--gray-50, #D2D0CE)}.newPaneColors.explorationContainer[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%], .newPaneColors.explorationContainer   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%], .inline-explore[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%], .inline-explore   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%]{border-color:var(--gray-130, #605E5C)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]{background-color:var(--gray-20, #F3F2F1)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]{margin:0;width:24px;height:24px;box-sizing:border-box}html[data-focus-source=key]   .newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus, .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--fluent-theme-black-color, #000)}html[data-focus-source=key]   .newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus:hover, .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:focus:hover{background-color:var(--gray-30, #EDEBE9);border-color:var(--fluent-theme-black-color, #000)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:active, .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:active{outline:none;border:none;background-color:var(--gray-50, #D2D0CE)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]   .visual-icon-outer[_ngcontent-%COMP%]   .visual-icon-inner[_ngcontent-%COMP%]{border:none}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover, .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]:hover{border-color:var(--gray-70)}.newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%], .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]   .visual-icon-container.active[_ngcontent-%COMP%]{border-color:var(--gray-130);background-color:var(--gray-40)}.white-background[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .white-background   .newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .white-background   .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]{background-color:var(--fluent-theme-white-color)}.compact-visual-types[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .compact-visual-types   .newPaneColors.explorationContainer   .modern-format-pane[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%], .compact-visual-types   .newPaneColors.explorationContainer   .modern-format-pane   [_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(26px,1fr));row-gap:2px}.compact-container[_nghost-%COMP%]   .visual-icon-container[_ngcontent-%COMP%]{width:auto;height:auto;padding:0}.withTopDivider[_nghost-%COMP%]   .visual-types-container[_ngcontent-%COMP%]{margin-top:3px;border-top:1px solid var(--gray-110);padding-top:3px}"]}),le}(),me=function(){function le(K,q){var ye=this;this.isFinishedLoading=K,this.services=q,this.optionsTooltipTitle=this.services.localizationService.get("DownloadVisuals_ContextMenu"),this.visualTypesFocusIndex$=new f.X(void 0),this.viewModel={visuals:[]},this.services.visualTypesService.availableVisualTypes$.pipe().subscribe(function(Le){ye.viewModel=powerbi.explore.viewModels.ViewModelFactory.createVisualTypesContainer((0,e.ev)([],Le.types,!0));var Ne=_.findIndex(ye.viewModel.visuals,function(be){return be.active});ye.visualTypesFocusIndex$.next(Ne>=0?Ne:Math.min(0,ye.viewModel.visuals.length-1)),ye.update()}),this.explorationCapabilities=this.services.explorationCapabilities.getCapabilities(),this.newPaneColorsEnabled=this.services.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.showFluentDesign}return le.prototype.$onInit=function(){this.services.visualTypesService.initialize(this.visualPluginFilter,this.isFinishedLoading),this.showDropdownForCustomVisuals=!_.isEmpty(this.services.visualTypesService.customVisualActions),this.showMoreOptionsIcon=!this.disableMoreOptionsIcon&&this.showDropdownForCustomVisuals,this.loadMenuItems(),this.initializeHighContrastRules(),this.services.svgProvider.loadSheet("visualizationPaneIcons_officeUpdate"),this.services.svgProvider.loadSheet("visualizationPaneIcons")},le.prototype.$onDestroy=function(){this.subscriptionManager&&this.subscriptionManager.unsubscribeAll()},le.prototype.getTabIndex=function(K,q){return null!=_.find(this.viewModel.visuals,function(Le){return Le.active})?K.active?0:-1:0===q?0:-1},le.prototype.initializeHighContrastRules=function(){this.services.highContrastCssGenerationService.addRule(".themeableElement .visual-types-container .visual-icon-container.active","{ background-color: @selectedBackgroundColor !important; }"),this.services.highContrastCssGenerationService.addRule(".OfficeIconColors_HighContrast","{ fill: @foregroundColor !important; }"),this.services.highContrastCssGenerationService.addRule("#svgProvider-visualizationPaneIcons_officeUpdate svg symbol .OfficeIconColors_HighContrast","{ fill: currentColor !important; }"),this.services.highContrastCssGenerationService.addRule("#svgProvider-visualizationPaneIcons_officeUpdate svg symbol .OfficeIconColors_HighContrast.active","{ fill: @selectedForegroundColor !important; }"),this.services.highContrastCssGenerationService.addRule(".OfficeIconColors_HighContrast_Off","{ fill: transparent !important;  stroke: transparent !important; }")},le.prototype.onVisualButtonKeyDown=function(K,q){var ye,Le,Ne,be,Y,ue=this.viewModel.visuals.length;"ArrowLeft"===K.key||"ArrowUp"===K.key?(K.stopPropagation(),this.visualTypesFocusIndex$.next(Y=(q-1+ue)%ue),J.focus(null===(ye=this.allVisualTypeElementRefs[Y])||void 0===ye?void 0:ye.nativeElement)):"ArrowRight"===K.key||"ArrowDown"===K.key?(K.stopPropagation(),this.visualTypesFocusIndex$.next(Y=(q+1)%ue),J.focus(null===(Le=this.allVisualTypeElementRefs[Y])||void 0===Le?void 0:Le.nativeElement)):"Home"===K.key?(K.stopPropagation(),this.visualTypesFocusIndex$.next(0),J.focus(null===(Ne=this.allVisualTypeElementRefs[0])||void 0===Ne?void 0:Ne.nativeElement)):"End"===K.key&&(K.stopPropagation(),this.visualTypesFocusIndex$.next(ue-1),J.focus(null===(be=this.allVisualTypeElementRefs[ue-1])||void 0===be?void 0:be.nativeElement))},le.prototype.toggleEffectClasses=function(K,q,ye){var Le=ye?jsCommon.DOMConstants.hoverEventName:jsCommon.DOMConstants.focusEventName;this.services.svgProvider.toggleCssClasses(q,Le,this.getVisualIconSheetName(K),K.class)},le.prototype.selectMenuItem=function(K,q){this.services.visualTypesService.performVisualTypeMenuItemAction(K,q)},le.prototype.importVisual=function(){this.services.visualTypesService.importVisual()},le.prototype.loadMenuItems=function(){var K=this;this.customVisualMenuItems={items:[]},_.forEach(this.services.visualTypesService.customVisualActions,function(q){var ye=K.createCustomVisualMenuItem(K.services.localizationService.get(q.titleKey),q.action);K.customVisualMenuItems.items.push(ye)})},le.prototype.createCustomVisualMenuItem=function(K,q){return{text:K,type:i.iB.Button,data:q,checked:!1}},le.prototype.update=function(){var q=_.find(this.viewModel.visuals,function(ye){return ye.active});q&&this.services.svgProvider.toggleCssClasses(!0,"active",this.getVisualIconSheetName(q),q.class),this.currentActiveType&&this.currentActiveType!==q&&this.services.svgProvider.toggleCssClasses(!1,"active",this.getVisualIconSheetName(this.currentActiveType),this.currentActiveType.class),this.currentActiveType=q},le.prototype.performSelectVisualTypeAction=function(K){this.services.visualTypesService.performSelectVisualTypeAction(K,!1,this.visualContainer)},le.prototype.visualStyle=function(K){return K.plugin.iconUrl&&(K.plugin.developerModeVisual||K.plugin.custom&&!this.services.trustedVisual.isAutomaticallyImportedVisual(K.plugin.name))?{"background-image":K.plugin.iconUrl,"background-repeat":"round","background-clip":"content-box",padding:"1px"}:null},le.prototype.isDisabled=function(K){return!K.enabled&&!this.newPaneColorsEnabled},le.prototype.getVisualIconSheetName=function(K){return this.newPaneColorsEnabled&&K.class!==powerbi.visuals.plugins.azureMap.name?"visualizationPaneIcons_officeUpdate":"visualizationPaneIcons"},le.prototype.trackByPluginName=function(K,q){return q.plugin.name},le}()},33791:function(Ve,se,t){t.d(se,{Q:function(){return h}});var e=t(78186),n=t(72283),f=t(63099),i=t(24908),T=(t(78485),t(73637)),h=function(){function M(){}return M.\u0275fac=function(b){return new(b||M)},M.\u0275mod=T.\u0275\u0275defineNgModule({type:M}),M.\u0275inj=T.\u0275\u0275defineInjector({imports:[e.CommonModule,f.j,i.Z,n.b]}),M}()},48579:function(Ve,se,t){t.d(se,{_:function(){return S}});var e=t(21810),n=t(584),f=t(24708),i='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 18.1.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 479 492" enable-background="new 0 0 479 492" xml:space="preserve">\n<symbol id="100stackedbar">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="100" y1="0" x2="100" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="200" y1="0" x2="200" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="300" y1="0" x2="300" y2="300"/>\n  <rect class="hcAreaWithOutline" x="0" y="20.6" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcAreaWithOutline" x="0" y="74.7" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcAreaWithOutline" x="0" y="129.8" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcAreaWithOutline" x="0" y="184" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcAreaWithOutline" x="0" y="241" fill="#E1E2E3" width="380.4" height="39"/>\n  <rect class="hcOuterLine" x="0" y="20.6" fill="#D0D2D3" width="313.6" height="39"/>\n  <rect class="hcOuterLine" x="0" y="74.7" fill="#D0D2D3" width="284.9" height="39"/>\n  <rect class="hcOuterLine" x="0" y="129.8" fill="#D0D2D3" width="318.8" height="39"/>\n  <rect class="hcOuterLine" x="0" y="184" fill="#D0D2D3" width="308.6" height="39"/>\n  <rect class="hcOuterLine" x="0" y="241" fill="#D0D2D3" width="278.6" height="39"/>\n  <rect class="hcArea" x="0" y="20.6" opacity="0.5" fill="#A6A8AB" width="211.1" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" opacity="0.5" fill="#A6A8AB" width="186.2" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" opacity="0.5" fill="#A6A8AB" width="211.1" height="39"/>\n  <rect class="hcArea" x="0" y="184" opacity="0.5" fill="#A6A8AB" width="200" height="39"/>\n  <rect class="hcArea" x="0" y="241" opacity="0.5" fill="#A6A8AB" width="184" height="39"/>\n</symbol>\n\n<symbol id="100stackedcolumn">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcAreaWithOutline" x="19" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="83.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="147.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="211.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="275.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcAreaWithOutline" x="339.1" y="20" fill="#E1E2E3" width="40.9" height="280.1"/>\n  <rect class="hcOuterLine" x="19" y="104.6" fill="#D0D2D3" width="40.9" height="195.5"/>\n  <rect class="hcOuterLine" x="83.1" y="58" fill="#D0D2D3" width="40.9" height="242.1"/>\n  <rect class="hcOuterLine" x="147.1" y="94.6" fill="#D0D2D3" width="40.9" height="205.5"/>\n  <rect class="hcOuterLine" x="211.1" y="99.5" fill="#D0D2D3" width="40.9" height="200.6"/>\n  <rect class="hcOuterLine" x="275.1" y="60.6" fill="#D0D2D3" width="40.9" height="239.5"/>\n  <rect class="hcOuterLine" x="339.1" y="136.5" fill="#D0D2D3" width="40.9" height="163.6"/>\n  <rect class="hcArea" x="19" y="197.6" opacity="0.5" fill="#A6A8AB" width="40.9" height="102.5"/>\n  <rect class="hcArea" x="83.1" y="173.2" opacity="0.5" fill="#A6A8AB" width="40.9" height="126.9"/>\n  <rect class="hcArea" x="147.1" y="192.3" opacity="0.5" fill="#A6A8AB" width="40.9" height="107.8"/>\n  <rect class="hcArea" x="211.1" y="184.7" opacity="0.5" fill="#A6A8AB" width="40.9" height="115.4"/>\n  <rect class="hcArea" x="275.1" y="162.3" opacity="0.5" fill="#A6A8AB" width="40.9" height="137.8"/>\n  <rect class="hcArea" x="339.1" y="206" opacity="0.5" fill="#A6A8AB" width="40.9" height="94.1"/>\n</symbol>\n\n<symbol id="area">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <g>\n    <g>\n      <g>\n        <polygon class="hcArea" fill="#E1E2E3" points="345.1,93.4 287.8,77 230.6,82.1 173.9,211.9 115.1,204.3 56.9,217.5 0.1,172.3 0.1,300\n          399.8,300 399.8,82.3"/>\n      </g>\n    </g>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#D0D2D3" points="115.1,206.7 175,214.5 231.8,84.9 287.3,80 344.6,96.4 399.8,85.2 399.8,81.1 344.8,92.3\n      288.1,76.1 287.7,76 229,81.2 172.5,210.1 114.9,202.7 57.5,215.7 0.1,170.2 0.1,175.3 56.5,220"/>\n  </g>\n</symbol>\n\n<symbol id="bar">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="100" y1="0" x2="100" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="200" y1="0" x2="200" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="300" y1="0" x2="300" y2="300"/>\n  <rect class="hcArea" x="0" y="20.6" fill="#D0D2D3" width="179.9" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" fill="#D0D2D3" width="253.4" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" fill="#D0D2D3" width="224.6" height="39"/>\n  <rect class="hcArea" x="0" y="184" fill="#D0D2D3" width="311.1" height="39"/>\n  <rect class="hcArea" x="0" y="241" fill="#D0D2D3" width="367.2" height="39"/>\n</symbol>\n\n<symbol id="kpi">\n     <g id="Creation" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="KPI-Canvas" sketch:type="MSArtboardGroup">\n            <rect class="hcOuterLine" id="BG" fill="#FAFAFA" sketch:type="MSShapeGroup" x="0" y="0" width="400" height="299.441341"></rect>\n            <g id="Rectangle-20-+-Rectangle-21-+-Triangle-3" sketch:type="MSLayerGroup" transform="translate(122.000000, 123.000000)">\n                <rect class="hcArea" id="Rectangle-20" fill="#BABABA" sketch:type="MSShapeGroup" x="0" y="0" width="146" height="24"></rect>\n                <rect class="hcArea" id="Rectangle-21" fill="#DDDDDD" sketch:type="MSShapeGroup" x="32" y="35" width="82" height="10"></rect>\n                <polygon class="hcArea" id="Triangle-3" fill="#DDDDDD" sketch:type="MSShapeGroup" points="173.444444 1 186.888889 23 160 23 "></polygon>\n            </g>\n            <path class="hcAreaWithOutline" d="M-2.30078125,266.449219 L32.9472656,292.931641 L66.9375,285.017578 L100.927734,291.078125 L134.900391,222.228516 L167.779297,219.632812 L198.302734,227.175781 L242.171875,250.173828 L286.412109,226.193359 L316.695312,229.787109 L352.632812,216.943359 L425.914062,225.597656 L425.914062,367.497434 L-34.7301703,367.497434 L-34.7301703,273.284528 L-2.30078125,266.449219 Z" id="Path-2" stroke="#DDDDDD" stroke-width="2" fill="#EAEAEA" sketch:type="MSShapeGroup"></path>\n        </g>\n    </g>\n</symbol>\n\n<symbol id="card">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="0" y="0.3" fill="#A6A6A6" width="8" height="299.6"/>\n  <rect class="hcArea" x="221.6" y="42.2" fill="#A6A6A6" width="139.9" height="4"/>\n  <rect class="hcArea" x="221.6" y="109.7" fill="#A6A6A6" width="139.9" height="4"/>\n  <rect class="hcArea" x="221.6" y="180" fill="#A6A6A6" width="141.7" height="4"/>\n  <rect class="hcArea" x="221.6" y="249.5" fill="#A6A6A6" width="141.7" height="4"/>\n  <rect class="hcArea" x="34.1" y="41.8" opacity="0.5" fill="#A6A8AB" width="142" height="142"/>\n  <rect class="hcArea" x="36.1" y="249.5" fill="#A6A6A6" width="141.7" height="4"/>\n</symbol>\n\n<symbol id="cardVisual">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="0" y="0.3" fill="#A6A6A6" width="8" height="299.6"/>\n  <rect class="hcArea" x="221.6" y="42.2" fill="#A6A6A6" width="139.9" height="4"/>\n  <rect class="hcArea" x="221.6" y="109.7" fill="#A6A6A6" width="139.9" height="4"/>\n  <rect class="hcArea" x="221.6" y="180" fill="#A6A6A6" width="141.7" height="4"/>\n  <rect class="hcArea" x="221.6" y="249.5" fill="#A6A6A6" width="141.7" height="4"/>\n  <rect class="hcArea" x="34.1" y="41.8" opacity="0.5" fill="#A6A8AB" width="142" height="142"/>\n  <rect class="hcArea" x="36.1" y="249.5" fill="#A6A6A6" width="141.7" height="4"/>\n</symbol>\n\n<symbol id="clusteredBar">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="100" y1="0" x2="100" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="200" y1="0" x2="200" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="300" y1="0" x2="300" y2="300"/>\n  <rect class="hcArea" x="0" y="25.1" fill="#E1E2E3" width="290.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="71.1" fill="#E1E2E3" width="338.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="103.8" fill="#E1E2E3" width="237.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="182.6" fill="#E1E2E3" width="237.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="260.8" fill="#E1E2E3" width="313.1" height="13.5"/>\n  <rect class="hcOuterLine" x="0" y="38.8" fill="#ACACAC" width="211.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="136.5" fill="#E1E2E3" width="284.1" height="13.5"/>\n  <rect class="hcArea" x="0" y="215" fill="#E1E2E3" width="240.1" height="13.5"/>\n  <rect class="hcOuterLine" x="0" y="150.2" fill="#ACACAC" width="336.1" height="13.5"/>\n  <rect class="hcOuterLine" x="0" y="228.4" fill="#ACACAC" width="284.1" height="13.5"/>\n</symbol>\n\n<symbol id="clusteredColumn">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcArea" x="43.7" y="163.6" fill="#D0D2D3" width="40.9" height="135.7"/>\n  <rect class="hcOuterLine" x="84.4" y="196.8" fill="#ACACAC" width="40.9" height="102.5"/>\n  <rect class="hcArea" x="147.7" y="52.2" fill="#D0D2D3" width="40.9" height="247.1"/>\n  <rect class="hcArea" x="315.4" y="131" fill="#D0D2D3" width="40.9" height="168.3"/>\n  <rect class="hcOuterLine" x="252" y="160.6" fill="#ACACAC" width="40.9" height="138.7"/>\n  <rect class="hcArea" x="211.1" y="103.8" fill="#D0D2D3" width="40.9" height="195.5"/>\n</symbol>\n\n<symbol id="column">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcArea" x="19.1" y="193.3" fill="#D0D2D3" width="40.9" height="106.9"/>\n  <rect class="hcArea" x="83.1" y="167.8" fill="#D0D2D3" width="40.9" height="132.4"/>\n  <rect class="hcArea" x="147.1" y="187.8" fill="#D0D2D3" width="40.9" height="112.4"/>\n  <rect class="hcArea" x="211.2" y="82.1" fill="#D0D2D3" width="40.9" height="218.1"/>\n  <rect class="hcArea" x="275.2" y="39.9" fill="#D0D2D3" width="40.9" height="260.3"/>\n  <rect class="hcArea" x="339.2" y="122.3" fill="#D0D2D3" width="40.9" height="177.9"/>\n</symbol>\n\n<symbol id="combo">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcArea" x="20.4" y="189.5" fill="#D0D2D3" width="40.7" height="110.6"/>\n  <rect class="hcArea" x="84.1" y="163.1" fill="#D0D2D3" width="40.7" height="137"/>\n  <rect class="hcArea" x="147.9" y="183.8" fill="#D0D2D3" width="40.7" height="116.4"/>\n  <rect class="hcArea" x="211.6" y="74.4" fill="#D0D2D3" width="40.7" height="225.8"/>\n  <rect class="hcArea" x="275.3" y="30.7" fill="#D0D2D3" width="40.7" height="269.5"/>\n  <rect class="hcArea" x="339" y="116.1" fill="#D0D2D3" width="40.7" height="184.1"/>\n  <polyline class="hcPolyLine" opacity="0.5" fill="none" stroke="#A6A8AB" stroke-width="4" stroke-miterlimit="10" points="399.3,95.6 344.1,106.8\n    287.4,90.5 230.7,95.6 174.6,224.8 116.4,217.1 58.8,230.3 2.4,185.2 "/>\n</symbol>\n\n<symbol id="defaultWatermark">\n  <g>\n    <rect x="0" y="1" opacity="0.5" fill="#F4F4F4" width="400" height="300"/>\n    <path fill="#929497" d="m93.79999 69.79999v47l30.20001 36.09998c10.29999-8.59998 16.79999-21.59998 16.79999-36.09998l0 0c0-25.89999-21.09998-47-47-47z"/>\n    <path fill="#D0D2D3" d="m46.7 116.9c0 22.1 15.3 40.49999 35.6 45.7l11.39999-45.7h-47l0 0 0 0z"/>\n    <path fill="#E1E2E3" d="m93.79999 116.89999l-11.39999 45.69999c3.69998 0.90001 7.39999 1.5 11.39999 1.5 11.5 0 22-4.09999 30.20001-11l-30.20001-36.19999z"/>\n    <path fill="#A6A8AB" d="m93.79999 69.79999c-25.99998 0-46.99998 21-46.99998 47l0 0h46.99998v-47l0 0z"/>\n    <g>\n      <polygon fill="#E1E2E3" points="200.89999389648438 193.5999755859375 167.70001220703125 185.0999755859375 134.29998779296875 187.70001220703125 101.29998779296875 254.9000244140625 67.10000610351562 251 33.30000305175781 257.79998779296875 0.1999969482421875 234.4000244140625 0.1999969482421875 300.5 399.9000244140625 300.5 399.9000244140625 187.9000244140625 349.20001220703125 182.0999755859375 314.1000061035156 194.5999755859375 286.8999938964844 191.0999755859375 242 214.5 "/>\n    </g>\n    <g>\n      <polyline fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" points="399.9000244140625 187.70001220703125 349.20001220703125 182.0999755859375 314.1000061035156 194.5999755859375 286.8999938964844 191.0999755859375 242 214.5 200.89999389648438 193.4000244140625 167.70001220703125 185 134.29998779296875 187.5999755859375 101.29998779296875 254.79998779296875 67.10000610351562 251 33.30000305175781 257.70001220703125 0.1999969482421875 234.4000244140625 "/>\n    </g>\n    <rect x="185.6" y="115.9" fill="#E1E2E3" width="20.7" height="48"/>\n    <rect x="217.8" y="104.4" fill="#E1E2E3" width="20.7" height="59.5"/>\n    <rect x="250.1" y="113.4" fill="#E1E2E3" width="20.7" height="50.5"/>\n    <rect x="282.3" y="66" fill="#E1E2E3" width="20.7" height="97.9"/>\n    <rect x="314.6" y="47" fill="#E1E2E3" width="20.7" height="116.9"/>\n    <rect x="346.8" y="84" fill="#E1E2E3" width="20.7" height="79.9"/>\n    <rect x="185.6" y="129.5" fill="#D0D2D3" width="20.7" height="34.4"/>\n    <rect x="217.8" y="121.2" fill="#D0D2D3" width="20.7" height="42.7"/>\n    <rect x="250.1" y="127.7" fill="#D0D2D3" width="20.7" height="36.1"/>\n    <rect x="282.3" y="93.7" fill="#D0D2D3" width="20.7" height="70.2"/>\n    <rect x="314.6" y="80.1" fill="#D0D2D3" width="20.7" height="83.8"/>\n    <rect x="346.8" y="106.6" fill="#D0D2D3" width="20.7" height="57.2"/>\n    <rect x="185.6" y="145.1" opacity="0.5" fill="#A6A8AB" width="20.7" height="18.7"/>\n    <rect x="217.8" y="140.7" opacity="0.5" fill="#A6A8AB" width="20.7" height="23.2"/>\n    <rect x="250.1" y="144.1" opacity="0.5" fill="#A6A8AB" width="20.7" height="19.7"/>\n    <rect x="282.3" y="125.6" opacity="0.5" fill="#A6A8AB" width="20.7" height="38.2"/>\n    <rect x="314.6" y="118.3" opacity="0.5" fill="#A6A8AB" width="20.7" height="45.6"/>\n    <rect x="346.8" y="132.7" opacity="0.5" fill="#A6A8AB" width="20.7" height="31.1"/>\n  </g>\n</symbol>\n\n<symbol id="donut">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <path class="hcAreaWithOutline" fill="#929497" d="M200.6,55.6v94.5l60.6,72.5c20.7-17.3,33.9-43.4,33.9-72.5v0C295.1,97.9,252.8,55.6,200.6,55.6z"/>\n  <path class="hcAreaWithOutline" fill="#D0D2D3" d="M106.1,150.1c0,44.3,30.5,81.4,71.6,91.7l22.9-91.7H106.1z"/>\n  <path class="hcOuterLine" fill="#E1E2E3" d="M200.6,150.1l-22.9,91.7c7.3,1.8,15,2.8,22.9,2.8c23.1,0,44.2-8.3,60.6-22L200.6,150.1z"/>\n  <path class="hcOuterLine" fill="#A6A8AB" d="M200.6,55.6c-52.2,0-94.5,42.3-94.5,94.5v0h94.5V55.6z"/>\n  <circle class="hcOuterLine" fill="#F4F4F4" cx="200.6" cy="151" r="53.4"/>\n</symbol>\n\n<symbol id="funnel">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g>\n    <g>\n      <g>\n        <rect class="hcArea" x="46.5" y="59.7" fill="#D0D2D3" width="317.6" height="34"/>\n      </g>\n      <g>\n        <rect class="hcArea" x="82.7" y="97.9" fill="#D0D2D3" width="245.2" height="34"/>\n      </g>\n      <g>\n        <rect class="hcArea" x="141.2" y="136.2" fill="#D0D2D3" width="128.3" height="34"/>\n      </g>\n      <g>\n        <rect class="hcArea" x="181.2" y="174.4" fill="#D0D2D3" width="48.3" height="34"/>\n      </g>\n      <g>\n        <rect class="hcArea" x="194.1" y="212.6" fill="#D0D2D3" width="23.4" height="34"/>\n      </g>\n    </g>\n  </g>\n</symbol>\n\n<symbol id="filledMap">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g>\n    <defs>\n      <rect id="SVGID_1_" x="0.2" y="0" width="401.4" height="302.1"/>\n    </defs>\n    <clipPath id="SVGID_2_">\n      <use xlink:href="#SVGID_1_"  overflow="visible"/>\n    </clipPath>\n    <path class="hcArea2" clip-path="url(#SVGID_2_)" fill="#E1E2E3" d="M49.4-9.3l18.3,44.6l-97.2,30.3c-2.2,0.7-3.4,3-2.7,5.2c0.6,1.8,2.2,2.9,4,2.9\n      c0.4,0,0.8-0.1,1.2-0.2l57.4-17.9l-1.9,32.9l-59.3-4c-2.3-0.2-4.3,1.6-4.4,3.9c-0.2,2.3,1.6,4.3,3.9,4.4l59.4,4l-6.3,111\n      l-50.9-26.4c-2-1.1-4.5-0.3-5.6,1.8c-1.1,2-0.3,4.5,1.8,5.6l56.6,29.4c0,0,0,0,0,0l21.2,11l-71,60c-1.1,0.9-1.6,2.3-1.4,3.7\n      c0.2,1.4,1,2.6,2.2,3.2l62.9,31.8c0.6,0.3,1.2,0.4,1.9,0.4c1.5,0,3-0.8,3.7-2.3c1-2,0.2-4.5-1.8-5.6l-57.3-29l68.8-58.1l20.9,10.9\n      l-4.6,79.7c-0.1,2.3,1.6,4.2,3.9,4.4c0.1,0,0.2,0,0.2,0c2.2,0,4-1.7,4.1-3.9l4.3-76l39,20.2l-41.7,53c-1.4,1.8-1.1,4.4,0.7,5.8\n      c0.8,0.6,1.7,0.9,2.6,0.9c1.2,0,2.4-0.5,3.3-1.6L180.7,206l54.3,26.3l-44.4,89.9c-1,2.1-0.2,4.5,1.9,5.6c0.6,0.3,1.2,0.4,1.8,0.4\n      c1.5,0,3-0.8,3.7-2.3l44.4-90l40.4,19.6l-34.1,66.7c-1,2-0.2,4.5,1.8,5.6c0.6,0.3,1.2,0.5,1.9,0.5c1.5,0,3-0.8,3.7-2.3l34.2-66.8\n      l63.2,30.6l-2.9,34c-0.2,2.3,1.5,4.3,3.8,4.5c0.1,0,0.2,0,0.4,0c2.1,0,3.9-1.6,4.1-3.8l2.9-34.6L400,295c2.2-0.5,3.6-2.8,3-5\n      c-0.5-2.2-2.8-3.6-5-3l-35.5-5.9l4.3-51H399c2.3,0,4.1-1.9,4.1-4.1c0-2.3-1.9-4.1-4.1-4.1h-48.8l-32.4-16.4l1.2-2.4\n      c0.1-0.3,0.2-0.5,0.3-0.8l3.4-12.9l76.1,2.9c0.1,0,0.1,0,0.2,0c2.2,0,4.1-1.8,4.1-4c0.1-2.3-1.7-4.2-4-4.3l-74.2-2.8l14.3-54\n      c14.8,3.5,31.6,5.8,50.3,5.8c3.2,0,6.4-0.1,9.6-0.2c2.3-0.1,4.1-2,4-4.3c-0.1-2.3-2-4.1-4.3-4c-21.6,0.9-40.8-1.5-57.4-5.5\n      l4.7-17.8c14.6,3.3,27.6,4.2,37.1,4.2c9.7,0,15.8-0.9,16.3-1c2.3-0.3,3.8-2.5,3.5-4.7c-0.3-2.3-2.4-3.8-4.7-3.5\n      c-0.2,0-21.4,3.1-48.3-2.7l5.8-76.7l42.9,3.3c2.3,0.2,4.3-1.5,4.5-3.8c0.2-2.3-1.5-4.3-3.8-4.5l-45.4-3.5l-17.5-31.4\n      c-1.5-1.5-3.9-1.7-5.6-0.3l-62.7,64.2c-9.9-13.8-17.7-30.2-23.5-48.9c-0.7-2.2-3-3.4-5.2-2.7c-2.2,0.7-3.4,3-2.7,5.2\n      c6.5,20.9,15.2,37.9,25.2,51.6l-19.1,16.1c-2.6-1.8-33.6-24.6-44.4-76.8c-0.5-2.2-2.7-3.7-4.9-3.2c-2.2,0.5-3.7,2.7-3.2,4.9\n      c0.7,3.3,1.4,6.5,2.3,9.5l-80.5,25.1c-11.6-10.9-7.7-34.5-7.7-34.8c0.4-2.3-1.1-4.4-3.4-4.8c-2.3-0.4-4.4,1.1-4.8,3.4\n      c-0.2,1.1-4.1,24.4,7.2,38.9l-27.8,8.7c0,0,0,0,0-0.1L55.8-15.6c-0.8-1.8-2.7-2.9-4.7-2.5 M307.8,206.7l-7,13.6l-40.7-20.2l10.9-22\n      l16,9.2c0.6,0.3,1.2,0.5,1.9,0.6l25.4,1l-2.8,10.7l-2.2,4.3 M286.3,71.9c6.9,5.7,13.9,10.4,20.9,14.3c-0.1,0.2-0.3,0.4-0.4,0.6\n      l-8.1,16.4c-12.3-6.2-20.8-12.1-25-15.3l12.4-15.8C286.2,72.1,286.2,72,286.3,71.9z M268.5,94.5c4.5,3.5,13.4,9.8,26.4,16.3\n      l-42.2,85.6l-46.3-23.1L268.5,94.5z M316.5,180.6l-26.2-1l-15.6-9l27.7-56.2c8.3,3.8,17.9,7.4,28.8,10.4L316.5,180.6z M333.4,116.7\n      c-10.2-2.9-19.3-6.4-27.2-9.9l8-16.3c0.1-0.2,0.1-0.4,0.2-0.6c6.4,3.1,12.7,5.5,18.7,7.4c1.7,0.5,3.4,1,5,1.5L333.4,116.7z\n       M333.1-14.8l14.6,28.5l-5.8,77.7c-2.1-0.6-4.1-1.2-6.2-1.9c-25.4-8.2-46.3-22.3-62.4-42.3L333.1-14.8z M280.2,66.5\n      c-0.2,0.2-0.4,0.4-0.6,0.6l-82.9,105.2l0,0l-18.4,23.4l-51.4-24.9L267,52.3C271.2,57.5,275.6,62.3,280.2,66.5z M86.8,160.6\n      l24.9,12.1l-26.9,22.7L86.8,160.6z M87.4,151.6l3-52.7l8.4-4.6l2.2,3.5v14.7c0,2.3,1.9,4.1,4.1,4.1h27.7c1.1,0,2.1-0.4,2.9-1.1\n      L165.6,87l20.7,22.7l-67.6,57.1L87.4,151.6z M184.9,47.6l4,5.6l-57.7,55.1h-21.9V96.6c0-0.8-0.2-1.6-0.6-2.2l-2.6-4L184.9,47.6z\n       M236.3,67.4l-43.7,36.9l-21-23.1l25.7-24.5c1.5-1.4,1.7-3.7,0.5-5.4l-5.5-7.7l16.2-8.8C219.5,53.4,231.5,63.7,236.3,67.4z\n       M204.5,27.5L90.9,89.1l3-53.3L194.9,4.3C197.7,13,201,20.7,204.5,27.5z M38.8,53l46.7-14.6l-3.1,53.8l-45.7-3.1L38.8,53z\n       M29.8,212l6.5-114.6l45.7,3.1l-5.8,102.2l-24.4,20.6L29.8,212z M59.7,227.5l15.8-13.4L74.3,235L59.7,227.5z M126.1,261.9\n      l-43.7-22.7l1.9-32.5l35.7-30.2l53.1,25.7L126.1,261.9z M185.9,199.3l15.2-19.3l47.9,23.8l-10.4,21L185.9,199.3z M246.1,228.5\n      l10.3-21l40.6,20.2l-10.4,20.4L246.1,228.5z M294.1,251.7l12.3-24c0,0,0,0,0,0l0,0l7.7-15l33.3,16.9c0.6,0.3,1.2,0.4,1.9,0.4h9.3\n      l-4.3,50.8L294.1,251.7z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="119.4,172.5 81.5,203.8 79.7,244.4 127.5,265.1 178.4,199.4 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M127.5,270.4c-0.7,0-1.4-0.1-2.1-0.4l-47.8-20.7c-2-0.9-3.3-2.9-3.2-5.1l1.8-40.5c0.1-1.5,0.8-2.9,1.9-3.8\n      l37.9-31.3c1.6-1.3,3.7-1.6,5.6-0.7l59,26.9c1.5,0.7,2.6,2,2.9,3.5c0.4,1.6,0,3.2-1,4.5l-50.9,65.7\n      C130.7,269.6,129.1,270.4,127.5,270.4z M85.2,240.9l40.7,17.6l44.3-57.1l-50-22.7l-33.5,27.7L85.2,240.9z"/>\n  </g>\n  <g>\n    <path class="hcArea" fill="#A6A8AB" d="M301.3,108.4l-30.6,62.9L289,183l30.9,0.6l16-61.9C336,121.7,324,121,301.3,108.4z"/>\n    <path class="hcArea" fill="#A6A8AB" d="M320,188.9C319.9,188.9,319.9,188.9,320,188.9l-31-0.6c-1,0-1.9-0.3-2.8-0.8l-18.3-11.7\n      c-2.3-1.5-3.1-4.4-1.9-6.8l30.6-62.9c0.6-1.3,1.8-2.3,3.2-2.8c1.4-0.4,2.9-0.3,4.2,0.4c20.9,11.7,32.2,12.6,32.4,12.6\n      c1.6,0.1,3,0.9,4,2.2c0.9,1.3,1.2,2.9,0.9,4.4l-16,61.9C324.5,187.3,322.4,188.9,320,188.9z M290.6,177.7l25.2,0.5l13.5-52.3\n      c-5.3-1.3-14-4.1-25.7-10.2l-26.1,53.6L290.6,177.7z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="99.7,90.8 104.9,98.1 104.9,111.3 132,111.3 192.9,53.8 185.9,42.8 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M132,116.6h-27.1c-2.9,0-5.3-2.4-5.3-5.3V99.8l-4.3-5.9c-0.9-1.2-1.2-2.8-0.9-4.3c0.3-1.5,1.3-2.8,2.6-3.5\n      l86.3-47.9c1.9-1,4.2-0.8,5.8,0.5l6.9,10.9c1.2,1,1.9,2.4,2,3.9c0.1,1.5-0.5,3-1.6,4.1l-60.8,57.5C134.7,116,133.4,116.6,132,116.6\n      z M110.2,106h19.7l54.9-51.9l-2.4-1.9l-74.9,40.4l1.7,2.4c0.7,0.9,1,2,1,3.1V106z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="4.8,91.4 30.6,92.8 24.6,213.1 4.8,201.8 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M24.6,218.4c-0.9,0-1.8-0.2-2.6-0.7L2.2,206.4c-1.7-0.9-2.7-2.7-2.7-4.6V91.4c0-1.4,0.6-2.8,1.6-3.8\n      c1.1-1,2.5-1.5,3.9-1.4l25.8,1.3c2.9,0.1,5.2,2.6,5,5.5l-5.9,120.3c-0.1,1.8-1.1,3.5-2.7,4.4C26.4,218.1,25.5,218.4,24.6,218.4z\n       M10.1,198.7l9.7,5.5L25,97.8L10.1,97V198.7z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="240.1,229.5 255.4,202.2 301.3,225.5 287.4,251.5 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M287.4,256.8c-0.8,0-1.5-0.2-2.2-0.5l-47.3-22c-1.3-0.6-2.4-1.8-2.8-3.2s-0.3-2.9,0.4-4.2l15.3-27.3\n      c1.4-2.5,4.5-3.4,7.1-2.1l45.9,23.3c1.3,0.6,2.2,1.8,2.7,3.2c0.4,1.4,0.3,2.9-0.4,4.1l-14,26C291.1,255.8,289.3,256.8,287.4,256.8z\n       M247.6,227.1l37.5,17.4l9-16.7l-36.5-18.5L247.6,227.1z"/>\n  </g>\n  <g>\n    <polygon class="hcArea" fill="#A6A8AB" points="358.4,272.1 364.6,226.4 396.5,226.4 397,271.7 \t"/>\n    <path class="hcArea" fill="#A6A8AB" d="M358.4,277.4c-1.5,0-3-0.7-4-1.8c-1-1.2-1.5-2.7-1.3-4.2l6.2-45.7c0.4-2.6,2.6-4.6,5.3-4.6h31.9\n      c2.9,0,5.3,2.4,5.3,5.3l0.4,45.3c0,2.9-2.3,5.3-5.3,5.4L358.4,277.4C358.4,277.4,358.4,277.4,358.4,277.4z M369.2,231.7l-4.8,35\n      l27.1-0.3l-0.3-34.7H369.2z"/>\n  </g>\n  <g>\n    <path class="hcArea" fill="#A6A8AB" d="M198.6,5c0,0,6.2,34.2,43.5,62.6L314,5.4L198.6,5z"/>\n    <path class="hcArea" fill="#A6A8AB" d="M242.1,72.9c-1.1,0-2.3-0.4-3.2-1.1c-38.5-29.3-45.2-64.4-45.5-65.8c-0.3-1.6,0.1-3.2,1.2-4.4\n      c1-1.2,2.5-1.9,4.1-1.9L314,0.1c2.2,0,4.2,1.4,5,3.5c0.8,2.1,0.2,4.4-1.5,5.9l-71.9,62.1C244.6,72.4,243.4,72.9,242.1,72.9z\n       M205.7,10.3c3.5,10.3,13,31.4,36.3,50.3l57.8-49.9L205.7,10.3z"/>\n  </g>\n  <g>\n    <path class="hcArea" fill="#A6A8AB" d="M56.3,5l15,31.3l37-11.5c0,0-3.1-4.4-7.9-20.3L56.3,5z"/>\n    <path class="hcArea" fill="#A6A8AB" d="M71.2,41.5c-2,0-3.9-1.1-4.8-3l-15-31.3c-0.8-1.6-0.7-3.5,0.3-5.1s2.6-2.5,4.4-2.5l44.1-0.4c0,0,0,0,0.1,0\n      c2.3,0,4.4,1.5,5.1,3.7c4.4,14.4,7.2,18.8,7.3,18.9c1,1.4,1.2,3.1,0.6,4.7c-0.5,1.6-1.9,2.8-3.5,3.3l-37,11.5\n      C72.3,41.5,71.8,41.5,71.2,41.5z M64.6,10.2L74,29.8l26.7-8.3c-1.2-2.7-2.6-6.5-4.3-11.7L64.6,10.2z"/>\n  </g>\n  <g>\n    <path class="hcArea" fill="#A6A8AB" d="M397.4,21.9l-1.6,78.5c-29.3,4.7-49.9-4.7-49.9-4.7L353,17l-8.4-12h53.2L397.4,21.9z"/>\n    <path class="hcArea" fill="#A6A8AB" d="M379.4,107c-21.2,0-35.1-6.2-35.7-6.4c-2.1-0.9-3.3-3.1-3.1-5.3l6.9-76.8l-7.3-10.4\n      c-1.1-1.6-1.3-3.8-0.4-5.5c0.9-1.8,2.7-2.9,4.7-2.9h53.2c1.4,0,2.8,0.6,3.8,1.6c1,1,1.5,2.4,1.5,3.9L402.7,22l-1.6,78.5\n      c-0.1,2.6-1.9,4.7-4.5,5.2C391,106.6,385.2,107,379.4,107z M351.6,92.2c5,1.6,14.9,4.2,27.8,4.2c3.7,0,7.5-0.2,11.2-0.6l1.5-74\n      l0.3-11.4h-37.5l2.5,3.6c0.7,1,1.1,2.3,0.9,3.5L351.6,92.2z"/>\n  </g>\n</symbol>\n\n<symbol id="azureMap">\n  <g>\n    <path d="M123.06 0L0 195.304l154.077-59.735L123.06 0z" fill="#555555"/>\n    <path d="M98.188 39.47l76.356 185.14L123.06 0 98.188 39.47z" fill="#8e8e8e"/>\n    <path d="M93.768 158.95l46.294-17.948 34.482 83.608-80.776-65.66z" fill="#101010"/>\n  </g>\n</symbol>\n\n<symbol id="gauge">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <path class="hcOuterLine" fill="#E1E2E3" d="M200,82.3c-73.7,0-133.4,59.7-133.4,133.4h51.6c0-45.2,36.6-81.8,81.8-81.8s81.8,36.6,81.8,81.8h51.6\n    C333.4,142,273.7,82.3,200,82.3z"/>\n  <path class="hcArea" fill="#A6A8AB" d="M94.4,134.3C77,156.8,66.7,185,66.7,215.7h51.6c0-18.9,6.4-36.2,17.1-50.1L94.4,134.3z"/>\n</symbol>\n\n<symbol id="line">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <g>\n    <polygon class="hcArea" fill="#D0D2D3" points="115.1,206.7 175,214.5 231.8,84.9 287.3,80 344.6,96.4 399.8,85.2 399.8,81.1 344.8,92.3\n      288.1,76.1 287.7,76 229,81.2 172.5,210.1 114.9,202.7 57.5,215.7 0.1,170.2 0.1,175.3 56.5,220 \t"/>\n  </g>\n</symbol>\n\n<symbol id="map">\n  <g>\n    <defs>\n      <rect id="SVGID_1_" x="0.9" y="0.2" width="399.1" height="299.6"/>\n    </defs>\n    <clipPath id="SVGID_2_">\n      <use xlink:href="#SVGID_1_"  overflow="visible"/>\n    </clipPath>\n    <path class="hcArea2" clip-path="url(#SVGID_2_)" fill="#E1E2E3" d="M54.1-9.8l19.8,48.3L-31.3,71.3c-2.4,0.7-3.7,3.3-2.9,5.6\n      c0.6,1.9,2.4,3.2,4.3,3.2c0.4,0,0.9-0.1,1.3-0.2l62.1-19.4l-2,35.6l-64.1-4.4c-2.5-0.2-4.6,1.7-4.8,4.2c-0.2,2.5,1.7,4.6,4.2,4.8\n      L31,105l-6.8,120.1l-55-28.5c-2.2-1.1-4.9-0.3-6.1,1.9c-1.1,2.2-0.3,4.9,1.9,6.1l61.3,31.8c0,0,0,0,0,0l22.9,11.9l-76.8,64.9\n      c-1.2,1-1.7,2.5-1.6,4c0.2,1.5,1.1,2.8,2.4,3.5l68.1,34.4c0.6,0.3,1.3,0.5,2,0.5c1.6,0,3.2-0.9,4-2.5c1.1-2.2,0.2-4.9-2-6l-62-31.4\n      l74.4-62.9l22.7,11.8l-4.9,86.3c-0.1,2.5,1.8,4.6,4.2,4.7c0.1,0,0.2,0,0.3,0c2.4,0,4.3-1.8,4.5-4.2l4.7-82.2l42.2,21.9l-45.2,57.3\n      c-1.5,1.9-1.2,4.8,0.7,6.3c0.8,0.6,1.8,1,2.8,1c1.3,0,2.6-0.6,3.5-1.7l102.9-130.5l58.8,28.5l-48,97.3c-1.1,2.2-0.2,4.9,2,6\n      c0.6,0.3,1.3,0.5,2,0.5c1.7,0,3.2-0.9,4-2.5l48-97.4l43.7,21.2l-36.9,72.2c-1.1,2.2-0.3,4.9,2,6c0.7,0.3,1.4,0.5,2,0.5\n      c1.6,0,3.2-0.9,4-2.4l37-72.3l68.4,33.1l-3.1,36.8c-0.2,2.5,1.6,4.6,4.1,4.9c0.1,0,0.3,0,0.4,0c2.3,0,4.3-1.8,4.5-4.1l3.2-37.5\n      l41.3,5.7c2.4-0.6,3.9-3,3.3-5.4c-0.6-2.4-3-3.9-5.4-3.3l-38.4-6.4l4.7-55.2h34.8c2.5,0,4.5-2,4.5-4.5s-2-4.5-4.5-4.5h-52.8\n      l-35.1-17.8l1.4-2.6c0.1-0.3,0.3-0.6,0.3-0.9l3.7-14l82.3,3.1c0.1,0,0.1,0,0.2,0c2.4,0,4.4-1.9,4.5-4.3c0.1-2.5-1.8-4.6-4.3-4.7\n      l-80.3-3l15.5-58.4c16,3.8,34.2,6.3,54.4,6.3c3.4,0,6.9-0.1,10.4-0.2c2.5-0.1,4.4-2.2,4.3-4.7c-0.1-2.5-2.2-4.4-4.7-4.3\n      c-23.3,1-44.1-1.6-62.1-6l5.1-19.3c15.8,3.6,29.9,4.5,40.2,4.5c10.5,0,17.1-1,17.7-1c2.5-0.4,4.1-2.7,3.8-5.1\n      c-0.4-2.5-2.7-4.1-5.1-3.8c-0.3,0-23.2,3.3-52.3-2.9l6.2-83l46.4,3.6c2.5,0.2,4.6-1.7,4.8-4.1c0.2-2.5-1.7-4.6-4.1-4.8L383.6,9\n      l-18.9-34c-1.6-1.7-4.2-1.8-6.1-0.4l-67.8,69.5c-10.7-15-19.2-32.6-25.5-52.9c-0.7-2.4-3.3-3.7-5.6-3c-2.4,0.7-3.7,3.2-3,5.6\n      c7,22.7,16.5,41,27.2,55.9l-20.7,17.5c-2.8-2-36.3-26.7-48-83.1c-0.5-2.4-2.9-4-5.3-3.5c-2.4,0.5-4,2.9-3.5,5.3\n      c0.7,3.6,1.6,7,2.5,10.3l-87.1,27.2c-12.6-11.8-8.4-37.4-8.3-37.6c0.4-2.4-1.2-4.8-3.6-5.2c-2.5-0.4-4.8,1.2-5.2,3.6\n      c-0.2,1.2-4.4,26.4,7.8,42.1l-30.1,9.4c0,0,0,0,0-0.1L61-16.7c-0.8-2-2.9-3.1-5-2.7 M333.7,223.9l-7.5,14.7l-44-21.9l11.8-23.8\n      l17.3,10c0.6,0.4,1.3,0.6,2.1,0.6l27.4,1l-3.1,11.6l-2.4,4.6 M310.5,78c7.4,6.2,15.1,11.3,22.6,15.4c-0.2,0.2-0.3,0.4-0.4,0.7\n      l-8.8,17.8c-13.3-6.7-22.5-13.1-27-16.5l13.4-17.1C310.3,78.2,310.4,78.1,310.5,78z M291.2,102.5c4.9,3.8,14.6,10.6,28.6,17.7\n      l-45.7,92.6L224,187.8L291.2,102.5z M343.1,195.6l-28.4-1.1l-16.9-9.7l30-60.8c9,4.1,19.4,8,31.2,11.3L343.1,195.6z M361.4,126.5\n      c-11.1-3.1-20.9-6.9-29.4-10.7l8.7-17.7c0.1-0.2,0.2-0.4,0.2-0.6c7,3.4,13.8,6,20.2,8.1c1.8,0.6,3.6,1.1,5.4,1.6L361.4,126.5z\n       M361.1-15.8L376.9,15l-6.3,84c-2.2-0.6-4.5-1.3-6.8-2c-27.5-8.8-50.1-24.2-67.6-45.8L361.1-15.8z M303.8,72.2\n      c-0.2,0.2-0.4,0.4-0.6,0.6l-89.7,113.8l0,0l-19.9,25.3l-55.7-27L289.5,56.9C294.1,62.5,298.9,67.6,303.8,72.2z M94.6,174l26.9,13\n      l-29.1,24.6L94.6,174z M95.2,164.3l3.3-57.1l9.1-4.9l2.4,3.8V122c0,2.5,2,4.5,4.5,4.5h29.9c1.2,0,2.3-0.4,3.1-1.2l32.3-30.9\n      l22.4,24.6L129,180.7L95.2,164.3z M200.7,51.7l4.3,6.1l-62.5,59.7h-23.7v-12.7c0-0.9-0.2-1.7-0.7-2.4l-2.8-4.4L200.7,51.7z\n       M256.3,73.2L209,113.1l-22.8-25L214,61.6c1.6-1.5,1.9-4,0.6-5.8l-5.9-8.3l17.6-9.5C238.2,58.1,251.1,69.2,256.3,73.2z M221.9,30\n      L99,96.7l3.3-57.7L211.5,4.9C214.6,14.3,218.1,22.7,221.9,30z M42.7,57.6l50.5-15.8L89.9,100l-49.4-3.4L42.7,57.6z M32.9,229.6\n      l7.1-124l49.4,3.4L83,219.6l-26.4,22.3L32.9,229.6z M65.2,246.4l17.1-14.5L81,254.6L65.2,246.4z M137,283.6l-47.3-24.5l2-35.2\n      l38.6-32.6l57.5,27.8L137,283.6z M201.8,215.9l16.5-20.9l51.8,25.8l-11.2,22.8L201.8,215.9z M267,247.5l11.2-22.7l43.9,21.8\n      l-11.3,22L267,247.5z M318.9,272.6l13.3-26c0,0,0,0,0,0l0,0l8.3-16.3l36.1,18.3c0.6,0.3,1.3,0.5,2,0.5h10.1l-4.6,55L318.9,272.6z"\n      />\n  </g>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="45.5" cy="62.9" r="18.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="158.8" cy="177.3" r="12.8"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="228.2" cy="235" r="12.8"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="297.6" cy="157.2" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="20.8" cy="230.1" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="382.6" cy="250.1" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="374.7" cy="22.1" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="240.9" cy="111.1" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="182.7" cy="26" r="6.5"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.3183" stroke-miterlimit="10" cx="268.6" cy="95.6" r="13.6"/>\n  <circle class="hcArea" fill="#D0D2D3" stroke="#A6A8AB" stroke-width="1.0954" stroke-miterlimit="10" cx="63.2" cy="124.9" r="11.3"/>\n</symbol>\n\n<symbol id="matrix">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcOuterLine" x="0.3" y="0" fill="#E1E2E3" width="92.8" height="300"/>\n  <line class="hcNoStroke" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="93.1" y1="0" x2="93.1" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="199.7" y1="0.5" x2="199.7" y2="299.8"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="298.6" y1="0" x2="298.6" y2="300"/>\n  <rect class="hcArea" x="14.7" y="46.4" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="46.4" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="46.4" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="46.4" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="79.7" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="79.7" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="79.7" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="79.7" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="114" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="114" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="114" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="114" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="148.5" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="148.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="148.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="148.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="182.3" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="182.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="182.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="182.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="215.3" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="215.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="215.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="215.3" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="248.6" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="248.6" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="248.6" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="248.6" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="14.7" y="281.5" fill="#A6A6A6" width="61.2" height="3.1"/>\n  <rect class="hcArea" x="108.8" y="281.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="212.2" y="281.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="311.1" y="281.5" fill="#A6A6A6" width="76.8" height="3.1"/>\n  <rect class="hcArea" x="0" y="0" fill="#D0D2D3" width="399.8" height="30.4"/>\n</symbol>\n\n<symbol id="multiRowCard">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="22" y="21" fill="#A6A6A6" width="3.1" height="47.2"/>\n  <rect class="hcArea" x="22" y="91" fill="#A6A6A6" width="3.1" height="47.2"/>\n  <rect class="hcArea" x="22" y="160.3" fill="#A6A6A6" width="3.1" height="47.2"/>\n  <rect class="hcArea" x="22" y="231" fill="#A6A6A6" width="3.1" height="47.2"/>\n  <rect class="hcAreaWithOutline" x="36.7" y="35.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="36.7" y="46.2" fill="#D0D2D3" width="39.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="36.7" y="105.4" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="36.7" y="116.1" fill="#D0D2D3" width="46.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="36.7" y="174.7" fill="#ACACAC" width="65.8" height="7.7"/>\n  <rect class="hcOuterLine" x="36.7" y="185.4" fill="#D0D2D3" width="39.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="36.7" y="245.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="36.7" y="256.2" fill="#D0D2D3" width="28.2" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="163.1" y="35.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="163.1" y="46.2" fill="#D0D2D3" width="39.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="163.1" y="105.4" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="163.1" y="116.1" fill="#D0D2D3" width="46.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="163.1" y="174.7" fill="#ACACAC" width="65.8" height="7.7"/>\n  <rect class="hcOuterLine" x="163.1" y="185.4" fill="#D0D2D3" width="39.3" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="163.1" y="245.5" fill="#ACACAC" width="39.3" height="7.7"/>\n  <rect class="hcOuterLine" x="163.1" y="256.2" fill="#D0D2D3" width="28.2" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="289.5" y="35.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="289.5" y="46.2" fill="#D0D2D3" width="75.4" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="289.5" y="105.4" fill="#ACACAC" width="37.7" height="7.7"/>\n  <rect class="hcOuterLine" x="289.5" y="116.1" fill="#D0D2D3" width="87.4" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="289.5" y="174.7" fill="#ACACAC" width="28.2" height="7.7"/>\n  <rect class="hcOuterLine" x="289.5" y="185.4" fill="#D0D2D3" width="56.4" height="7.7"/>\n  <rect class="hcAreaWithOutline" x="289.5" y="245.5" fill="#ACACAC" width="56.4" height="7.7"/>\n  <rect class="hcOuterLine" x="289.5" y="256.2" fill="#D0D2D3" width="87.4" height="7.7"/>\n</symbol>\n\n<symbol id="pie">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <path class="hcAreaWithOutline" fill="#929497" d="M200,55.3v94.8l60.8,72.7c20.8-17.4,34-43.5,34-72.7v0C294.8,97.7,252.3,55.3,200,55.3z"/>\n  <path class="hcAreaWithOutline" fill="#D0D2D3" d="M105.2,150.1c0,44.4,30.6,81.7,71.8,92l23-92H105.2z"/>\n  <path class="hcOuterLine" fill="#E1E2E3" d="M200,150.1l-23,92c7.4,1.8,15.1,2.8,23,2.8c23.1,0,44.3-8.3,60.8-22.1L200,150.1z"/>\n  <path class="hcOuterLine" fill="#A6A8AB" d="M200,55.3c-52.3,0-94.8,42.4-94.8,94.8v0H200V55.3z"/>\n</symbol>\n\n<symbol id="scatterplot">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="133.9" y1="0.4" x2="133.3" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="266.9" y1="0.4" x2="266.6" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="149.8" x2="400" y2="150"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="74.9" cy="214.1" r="36.2"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="186" cy="94" r="12.9"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="266.9" cy="124.1" r="17.2"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="310.4" cy="193.8" r="26.3"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="214.5" cy="176.3" r="18.6"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="137" cy="150.2" r="12.9"/>\n  <circle class="hcArea" fill="#D0D2D3" cx="346.4" cy="68.1" r="12.9"/>\n</symbol>\n\n<symbol id="shapeMap">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g>\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="#EEEEEE" d="M379.2,0H400v10.75l-14.2-1.5c-1.672-0.266-2.738-1.016-3.2-2.25\n      L379.2,0z M218.775,0h39c7.22,18.663,16.17,35.087,26.85,49.275L261.85,68.55C243.634,49.55,229.275,26.7,218.775,0z M0,62V0\n      h57.725L73.15,38.875L0,62z M78.175,300H1.25l55.925-47.325L80.2,264.775L78.175,300z M231.05,300h-96.475l60.575-76.7\n      l59.575,28.851L231.05,300z M400,206.675v34.575h-18.5l-37.15-18.025l1.825-3.475l3.875-14.825L400,206.675z M400,142.875v55.05\n      l-47.675-1.649l15.725-59.95C378.267,138.94,388.917,141.123,400,142.875z M361.275,125.875c-10.32-2.924-20.153-6.332-29.5-10.225\n      l9.5-19.175c7.915,3.922,16.273,7.272,25.074,10.05L361.275,125.875z M326.425,238.75L281.6,217.025L293.45,193.1l17.3,9.15\n      c1.639,0.954,3.472,1.454,5.5,1.5l24.4,0.85l-3.7,14.15L326.425,238.75z M304.65,71.4L192.9,212.875l-56.4-27.3l153.325-129.75\n      C294.472,61.398,299.414,66.59,304.65,71.4z M121.25,187.5l-30.1,25.475L93.375,174L121.25,187.5z M39.55,105.2l49.6,3.2\n      l-6.375,111.65L56.25,242.475l-24.7-12.949L39.55,105.2z M258.45,244.65l-57.976-28.101l17.075-21.625L270.4,220.5L258.45,244.65z"\n      />\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M369.4,0l7.024,14.975L371,99.15\n      c-30.688-8.892-55.647-25.2-74.875-48.925L345.425,0H369.4z M400,114.05v20.15c-10.34-1.591-20.281-3.575-29.825-5.95l5-19.175\n      C383.115,111.174,391.39,112.833,400,114.05z M333.675,0l-42.85,43.325C281.736,30.743,274.086,16.301,267.875,0H333.675z\n       M353.45,300H304l10.05-19.1L353.45,300z M240.55,300l21.825-44.15l43.9,21.275L294.25,300H240.55z M0,212.95V102.675l30.925,1.975\n      l-7.75,120.475L0,212.95z M111.975,0H196.1l-75.025,23.725C115.636,18.07,112.603,10.162,111.975,0z M0,290.075v-67.4l49.175,25.8\n      L0,290.075z M124.1,300H86.175l1.775-31.15l42.95,22.525L124.1,300z M392.025,300l5.225-49.85H400V300H392.025z M384.275,300H372.7\n      l-54.75-26.525l22.524-42.875l37.551,18.226c1.563,0.898,3.389,1.34,5.475,1.325h6L384.275,300z M359.175,133.9l-16.25,62.05\n      L316,195l-18.6-9.875l30.75-62.15C337.978,127.132,348.319,130.773,359.175,133.9z M295.35,96.425l15.5-19.625\n      c7.126,5.878,14.751,11.103,22.875,15.675l-9.774,19.75C313.812,107.567,304.277,102.3,295.35,96.425z M199.925,51.6l4.575,5.9\n      l-62,59.75h-25.3l0.75-11.25c-0.098-2.051-0.498-3.617-1.2-4.7L114.3,98L199.925,51.6z M40.075,97l2.575-39.975L93,41.1\n      l-3.375,59.075L40.075,97z M80.75,255.325l-16.475-8.65L82.1,231.6L80.75,255.325z M136.325,284.5L88.5,259.4l2-34.9l39-33\n      l58.075,28.125L136.325,284.5z M310.175,269.7L266.1,248.35l11.95-24.149l44.65,21.649L310.175,269.7z"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="#F8F8F8" d="M66.725,0h36.325c0.458,11.727,3.549,20.561,9.275,26.5\n      L81.15,36.35L66.725,0z M0,94.425V70.5l33.8-10.675L31.45,96.45L0,94.425z M400,19.825V105.1\n      c-6.929-0.898-13.62-2.106-20.075-3.625l5.351-83.225L400,19.825z M223.075,29.2l-125.3,67.925l3.35-58.6L211.05,3.775\n      C214.647,12.659,218.656,21.134,223.075,29.2z M207.675,47.4l19.7-10.7c8.162,13.625,17.57,26,28.225,37.125l-46.875,39.65\n      l-23.3-25.825L213.5,60.6c1.147-1.6,1.364-3.2,0.65-4.8L207.675,47.4z M320.35,119.525l-46.399,93.8l-51.3-24.851l67.675-85.7\n      C299.695,108.996,309.704,114.579,320.35,119.525z M179.125,93.725l22.925,25.4l-73.775,62.45L93.9,164.925l3.3-57.625l9.7-5.275\n      l2.95,3.975l-1,15.1c0.133,3.4,1.916,5.15,5.35,5.25h28.65c1.682,0.015,3.099-0.568,4.25-1.75L179.125,93.725z"/>\n    <path fill-rule="evenodd" clip-rule="evenodd" fill="#D9D9D9" d="M400,10.75v9.075l-14.725-1.575l-5.351,83.225\n      c6.455,1.519,13.146,2.727,20.075,3.625v8.95c-8.61-1.217-16.885-2.875-24.825-4.975l-5,19.175\n      c9.544,2.375,19.485,4.359,29.825,5.95v8.675c-11.083-1.752-21.733-3.935-31.95-6.55l-15.725,59.95L400,197.925v8.75l-49.95-1.75\n      l-3.875,14.825l-1.825,3.475l37.15,18.025H400v8.9h-2.75L392.025,300h-7.75l5.225-49.85h-6c-2.086,0.015-3.911-0.427-5.475-1.325\n      L340.475,230.6l-22.524,42.875L372.7,300h-19.25l-39.4-19.1L304,300h-9.75l12.025-22.875l-43.9-21.275L240.55,300h-9.5\n      l23.675-47.85L195.15,223.3L134.575,300H124.1l6.8-8.625L87.95,268.85L86.175,300h-8l2.025-35.225l-23.025-12.101L1.25,300H0\n      v-9.925l49.175-41.601L0,222.675v-9.725l23.175,12.175l7.75-120.475L0,102.675v-8.25l31.45,2.025l2.35-36.625L0,70.5V62\n      l73.15-23.125L57.725,0h9L81.15,36.35l31.175-9.85c-5.726-5.939-8.818-14.773-9.275-26.5h8.925\n      c0.627,10.162,3.661,18.07,9.1,23.725L196.1,0h22.675c10.5,26.7,24.858,49.55,43.074,68.55l22.775-19.275\n      c-10.68-14.188-19.63-30.612-26.85-49.275h10.1c6.211,16.301,13.861,30.743,22.95,43.325L333.675,0h11.75l-49.3,50.225\n      C315.353,73.95,340.312,90.258,371,99.15l5.425-84.175L369.4,0h9.8l3.399,7c0.462,1.234,1.528,1.984,3.2,2.25L400,10.75z\n       M361.275,125.875l5.074-19.35c-8.801-2.778-17.159-6.128-25.074-10.05l-9.5,19.175\n      C341.122,119.543,350.955,122.951,361.275,125.875z M359.175,133.9c-10.855-3.126-21.197-6.768-31.024-10.925l-30.75,62.15L316,195\n      l26.925,0.95L359.175,133.9z M326.425,238.75l10.525-20l3.7-14.15l-24.4-0.85c-2.028-0.046-3.861-0.546-5.5-1.5l-17.3-9.15\n      L281.6,217.025L326.425,238.75z M304.65,71.4c-5.236-4.81-10.179-10.001-14.825-15.575L136.5,185.575l56.4,27.3L304.65,71.4z\n       M295.35,96.425c8.928,5.875,18.462,11.142,28.601,15.8l9.774-19.75c-8.124-4.572-15.749-9.797-22.875-15.675L295.35,96.425z\n       M223.075,29.2c-4.419-8.066-8.428-16.541-12.025-25.425l-109.925,34.75l-3.35,58.6L223.075,29.2z M207.675,47.4l6.476,8.4\n      c0.714,1.6,0.497,3.2-0.65,4.8l-28.075,27.05l23.3,25.825l46.875-39.65c-10.654-11.125-20.063-23.5-28.225-37.125L207.675,47.4z\n       M199.925,51.6L114.3,98l2.45,3.3c0.703,1.083,1.103,2.649,1.2,4.7l-0.75,11.25h25.3l62-59.75L199.925,51.6z M320.35,119.525\n      c-10.646-4.946-20.654-10.529-30.024-16.75l-67.675,85.7l51.3,24.851L320.35,119.525z M179.125,93.725L147.1,124.6\n      c-1.151,1.182-2.568,1.765-4.25,1.75H114.2c-3.434-0.1-5.217-1.85-5.35-5.25l1-15.1l-2.95-3.975l-9.7,5.275l-3.3,57.625\n      l34.375,16.65l73.775-62.45L179.125,93.725z M40.075,97l49.55,3.175L93,41.1L42.65,57.025L40.075,97z M121.25,187.5L93.375,174\n      l-2.225,38.975L121.25,187.5z M39.55,105.2l-8,124.325l24.7,12.949l26.525-22.425L89.15,108.4L39.55,105.2z M136.325,284.5\n      l51.25-64.875L129.5,191.5l-39,33l-2,34.9L136.325,284.5z M80.75,255.325L82.1,231.6l-17.825,15.075L80.75,255.325z M258.45,244.65\n      l11.95-24.15l-52.851-25.575l-17.075,21.625L258.45,244.65z M310.175,269.7L322.7,245.85L278.05,224.2L266.1,248.35L310.175,269.7z\n      "/>\n  </g>\n</symbol>\n\n<symbol id="slicer">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="11.8" y="17.7" fill="#D0D2D3" width="34.7" height="15.3"/>\n  <rect class="hcArea" x="34.1" y="57" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="55" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcOuterLine" x="12.8" y="79" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="105" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="103" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="129" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="127" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="153" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="151" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="177" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="175" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="201" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="199" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="225" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="223" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="249" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="247" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="273" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <rect class="hcOuterLine" x="12.8" y="271" fill="none" stroke="#D0D2D3" stroke-width="2" stroke-miterlimit="10" width="11.3" height="11.3"/>\n  <rect class="hcArea" x="34.1" y="81.7" fill="#D0D2D3" width="33.8" height="7.7"/>\n  <line class="hcGridLine" fill="none" stroke="#D0D2D3" stroke-miterlimit="10" x1="3" y1="44.3" x2="397" y2="44.3"/>\n</symbol>\n\n<symbol id="stackedarea">\n  <rect id="XMLID_263_" class="hcOuterLine" x="0" y="0" opacity="0.5" fill="#F1F2F2" width="400" height="300"/>\n  <line id="XMLID_262_" class="hcNoStroke" opacity="0.5" fill="#F4F4F4" x1="0" y1="38" x2="400" y2="38"/>\n  <line id="XMLID_261_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="75.4" x2="400" y2="75.4"/>\n  <line id="XMLID_260_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="112.8" x2="400" y2="112.8"/>\n  <line id="XMLID_259_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="150.3" x2="400" y2="150.3"/>\n  <line id="XMLID_258_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="400" y1="187.7" x2="0" y2="187.7"/>\n  <line id="XMLID_257_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="225.1" x2="400" y2="225.1"/>\n  <line id="XMLID_256_" class="hcNoStroke"opacity="0.5" fill="#F4F4F4" x1="0" y1="262.6" x2="400" y2="262.6"/>\n  <polygon id="XMLID_242_" class="hcOuterLine" fill="#A6A8AB" points="0,107.5 83.6,96.9 139.6,113 200,97.1 265.8,116.6 336,107.7 400,116.3 400,199.3\n\t  0,199.3 "/>\n  <polygon id="XMLID_239_" class="hcOuterLine" fill="#D0D2D3" points="0,157.6 60.4,153 132.4,169.6 216.9,159 279.1,177.7 334.2,162.7 400,172.5 400,253.2\n\t  0,253.2 "/>\n  <polygon id="XMLID_236_" class="hcOuterLine" fill="#E1E2E3" points="0,224.1 69.3,241.5 156,219.5 252,241.5 332,219.5 400,227.8 400,300 0,300 "/>\n  <polyline id="XMLID_138_" class="hcOuterLine" fill="none" stroke="#797A7A" stroke-width="4" stroke-miterlimit="10" points="0,107.5 83.6,96.9 139.6,113 200,97.1 265.8,116.6 336,107.7 400,116.3 "/>\n  <polyline id="XMLID_294_" class="hcOuterLine" fill="none" stroke="#929497" stroke-width="4" stroke-miterlimit="10" points="0,157.6 60.4,153 132.4,169.6 216.9,159 279.1,177.7 334.2,162.7 400,172.5 "/>\n  <polyline id="XMLID_301_" class="hcOuterLine" fill="none" stroke="#A6A8AB" stroke-width="4" stroke-miterlimit="10" points="0,224.1 69.3,241.5 156,219.5 252,241.5 332,219.5 400,227.8 "/>\n </symbol>\n\n<symbol id="stackedbar">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="100" y1="0" x2="100" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="200" y1="0" x2="200" y2="300"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="300" y1="0" x2="300" y2="300"/>\n  <rect class="hcArea" x="0" y="20.6" fill="#E1E2E3" width="179.9" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" fill="#E1E2E3" width="253.4" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" fill="#E1E2E3" width="224.6" height="39"/>\n  <rect class="hcArea" x="0" y="184" fill="#E1E2E3" width="311.1" height="39"/>\n  <rect class="hcArea" x="0" y="241" fill="#E1E2E3" width="367.2" height="39"/>\n  <rect class="hcArea" x="0" y="20.6" fill="#D0D2D3" width="138.7" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" fill="#D0D2D3" width="195.3" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" fill="#D0D2D3" width="173.1" height="39"/>\n  <rect class="hcArea" x="0" y="184" fill="#D0D2D3" width="239.8" height="39"/>\n  <rect class="hcArea" x="0" y="241" fill="#D0D2D3" width="283" height="39"/>\n  <rect class="hcArea" x="0" y="20.6" opacity="0.5" fill="#A6A8AB" width="90.2" height="39"/>\n  <rect class="hcArea" x="0" y="74.7" opacity="0.5" fill="#A6A8AB" width="127" height="39"/>\n  <rect class="hcArea" x="0" y="129.8" opacity="0.5" fill="#A6A8AB" width="112.5" height="39"/>\n  <rect class="hcArea" x="0" y="184" opacity="0.5" fill="#A6A8AB" width="155.9" height="39"/>\n  <rect class="hcArea" x="0" y="241" opacity="0.5" fill="#A6A8AB" width="184" height="39"/>\n</symbol>\n\n<symbol id="stackedcolumn">\n  <rect x="0.2" y="-0.1" fill="#F4F4F4" width="400.1" height="300"/>\n  <line fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0.2" y1="73.4" x2="400.2" y2="73.4"/>\n  <line fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0.2" y1="147.9" x2="400.2" y2="147.9"/>\n  <line fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0.2" y1="222.3" x2="400.2" y2="222.3"/>\n  <rect x="19.3" y="193.2" fill="#E1E2E3" width="40.9" height="106.9"/>\n  <rect x="83.3" y="167.7" fill="#E1E2E3" width="40.9" height="132.4"/>\n  <rect x="147.3" y="187.7" fill="#E1E2E3" width="40.9" height="112.4"/>\n  <rect x="211.3" y="82" fill="#E1E2E3" width="40.9" height="218.1"/>\n  <rect x="275.4" y="39.8" fill="#E1E2E3" width="40.9" height="260.3"/>\n  <rect x="339.4" y="122.3" fill="#E1E2E3" width="40.9" height="177.9"/>\n  <rect x="19.3" y="219.2" fill="#D0D2D3" width="40.9" height="80.9"/>\n  <rect x="83.3" y="199.9" fill="#D0D2D3" width="40.9" height="100.2"/>\n  <rect x="147.3" y="215.1" fill="#D0D2D3" width="40.9" height="85"/>\n  <rect x="211.3" y="129.8" fill="#D0D2D3" width="40.9" height="170.3"/>\n  <rect x="275.4" y="103.2" fill="#D0D2D3" width="40.9" height="197"/>\n  <rect x="339.4" y="165.6" fill="#D0D2D3" width="40.9" height="134.6"/>\n  <rect x="19.3" y="254" opacity="0.5" fill="#A6A8AB" width="40.9" height="46.1"/>\n  <rect x="83.3" y="243" opacity="0.5" fill="#A6A8AB" width="40.9" height="57.1"/>\n  <rect x="147.3" y="251.6" opacity="0.5" fill="#A6A8AB" width="40.9" height="48.5"/>\n  <rect x="211.3" y="206.1" opacity="0.5" fill="#A6A8AB" width="40.9" height="94.1"/>\n  <rect x="275.4" y="187.8" opacity="0.5" fill="#A6A8AB" width="40.9" height="112.3"/>\n  <rect x="339.4" y="223.4" opacity="0.5" fill="#A6A8AB" width="40.9" height="76.7"/>\n</symbol>\n\n<symbol id="table">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <rect class="hcArea" x="0" y="0" fill="#D0D2D3" width="399.8" height="30.1"/>\n  <rect class="hcArea" x="14.4" y="46.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="46.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="46.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="46.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="64.8" x2="400" y2="64.8"/>\n  <rect class="hcArea" x="14.4" y="79.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="79.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="79.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="79.6" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="98.6" x2="399.3" y2="98.6"/>\n  <rect class="hcArea" x="14.4" y="113.4" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="113.4" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="113.4" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="113.4" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="132.7" x2="400" y2="132.7"/>\n  <rect class="hcArea" x="14.4" y="147.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="147.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="147.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="147.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="166.2" x2="400" y2="166.2"/>\n  <rect class="hcArea" x="14.4" y="181" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="181" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="181" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="181" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="198.8" x2="400" y2="198.8"/>\n  <rect class="hcArea" x="14.4" y="213.7" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="213.7" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="213.7" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="213.7" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="231.7" x2="400" y2="231.7"/>\n  <rect class="hcArea" x="14.4" y="246.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="246.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="246.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="246.5" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <line class="hcGridLine" fill="none" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="265.4" x2="400" y2="265.4"/>\n  <rect class="hcArea" x="14.4" y="281.1" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="111.4" y="281.1" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="208.5" y="281.1" fill="#A6A6A6" width="76.7" height="3.1"/>\n  <rect class="hcArea" x="304.8" y="281.1" fill="#A6A6A6" width="76.7" height="3.1"/>\n</symbol>\n\n<symbol id="tree">\n  <rect class="hcOuterLine" x="204.3" y="0" fill="#E1E2E3" width="195.3" height="150"/>\n  <rect class="hcAreaWithOutline" x="0" y="0" fill="#D0D2D3" width="204.3" height="150"/>\n  <rect class="hcOuterLine" x="0" y="150" fill="#E1E2E3" width="180.9" height="79.6"/>\n  <rect class="hcAreaWithOutline" x="0" y="229.6" fill="#A6A8AB" width="180.9" height="70.4"/>\n  <rect class="hcOuterLine" x="180.9" y="150" fill="#F4F4F4" width="121.1" height="103.8"/>\n  <rect class="hcAreaWithOutline" x="302" y="150" opacity="0.5" fill="#A6A8AB" width="97.7" height="103.8"/>\n  <rect class="hcOuterLine" x="180.9" y="253.8" fill="#E1E2E3" width="218.8" height="46.2"/>\n</symbol>\n\n<symbol id="waterfall">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <rect class="hcArea" x="75.3" y="128" fill="#D0D2D3" width="44" height="89.1"/>\n  <rect class="hcArea"x="143.8" y="27.1" fill="#D0D2D3" width="44" height="103"/>\n  <rect class="hcArea"x="212.3" y="27.1" fill="#D0D2D3" width="44" height="205.3"/>\n  <rect class="hcArea"x="280.8" y="230.2" fill="#D0D2D3" width="44" height="55"/>\n  <rect class="hcArea"x="349.2" y="283.1" fill="#D0D2D3" width="44" height="16.5"/>\n  <rect class="hcArea"x="6.9" y="214.9" fill="#D0D2D3" width="44" height="84.7"/>\n  <rect class="hcArea"x="50.8" y="214.9" fill="#D0D2D3" width="24.5" height="2.1"/>\n  <rect class="hcArea"x="119.3" y="128" fill="#D0D2D3" width="24.5" height="2.1"/>\n  <rect class="hcArea"x="187.8" y="27.1" fill="#D0D2D3" width="24.5" height="2.1"/>\n  <rect class="hcArea"x="256.3" y="230.2" fill="#D0D2D3" width="24.5" height="2.1"/>\n  <rect class="hcArea"x="324.7" y="283.1" fill="#D0D2D3" width="24.5" height="2.1"/>\n</symbol>\n\n<symbol id="scriptvisual">\n\t<rect x="0" y="0" fill="#F4F4F4" width="400" height="100"/>\n\t<rect x="0" y="100" fill="#FFFFFF" width="400" height="100"/>\n\t<rect x="0" y="200" fill="#F4F4F4" width="400" height="100"/>\n\t<path fill="#E1E2E3" d="M138.8,90h-65.5v-8h65.5V90z"/>\n\t<path fill="#E1E2E3" d="M22.3,81l-8.2-9.7l25.1-21.2l-25.1-21.3l8.2-9.7l35.9,30.3v1.4L22.3,81z"/>\n\t<path fill="#E1E2E3" d="M168.2,193.4h-14.5v-14.5h14.5V193.4z"/>\n\t<path fill="#E1E2E3" d="M199.3,160.2v33.4h-16v-87.2h36.3c3,0,6,0.5,9.1,1.5c3.1,1.1,5.9,2.6,8.4,4.8c2.5,2.1,4.6,4.9,6.2,8.3\n\t\tc1.6,3.4,2.4,7.5,2.4,12.3c0,3.6-0.4,6.6-1.3,9.4c-0.8,2.8-2,5.1-3.5,7.2c-1.5,2-3.2,3.8-5.2,5.2c-1.9,1.4-4,2.5-6.2,3.3l18.5,35.1\n\t\th-17.2l-16.6-33.4h-14.9V160.2z M217.2,145.5c1.4,0,2.8-0.2,4.3-0.5c1.5-0.4,2.9-1.1,4.2-2c1.2-1,2.4-2.2,3.2-3.7\n\t\tc0.8-1.5,1.2-3.5,1.2-5.9c0-2.4-0.4-4.4-1.2-5.9c-0.9-1.6-1.9-2.8-3.2-3.8c-1.2-1-2.6-1.6-4.2-2c-1.5-0.4-2.9-0.6-4.3-0.6h-18v24.3\n\t\tL217.2,145.5L217.2,145.5z"/>\n</symbol>\n\n<symbol id="pythonvisual">\n\t<rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="100"/>\n\t<rect class="hcOuterLine" x="0" y="100" fill="#FFFFFF" width="400" height="100"/>\n\t<rect class="hcOuterLine" x="0" y="200" fill="#F4F4F4" width="400" height="100"/>\n\t<path class="hcArea" fill="#E1E2E3" d="M22.3,81l-8.2-9.7l25.1-21.2l-25.1-21.3l8.2-9.7l35.9,30.3v1.4L22.3,81z"/>\n  <g transform="scale(0.8, 0.8) translate(142, 65)">\n    <path class="hcArea2"\n        style="fill:#E1E2E3;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;marker:none;marker-start:none;marker-mid:none;marker-end:none;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;visibility:visible;display:inline;overflow:visible"\n        d="M 99.75,67.46875 C 71.718268,67.468752 73.46875,79.625 73.46875,79.625 L 73.5,92.21875 L 100.25,92.21875 L 100.25,96 L 62.875,96 C 62.875,96 44.9375,93.965724 44.9375,122.25 C 44.937498,150.53427 60.59375,149.53125 60.59375,149.53125 L 69.9375,149.53125 L 69.9375,136.40625 C 69.9375,136.40625 69.433848,120.75 85.34375,120.75 C 101.25365,120.75 111.875,120.75 111.875,120.75 C 111.875,120.75 126.78125,120.99096 126.78125,106.34375 C 126.78125,91.696544 126.78125,82.125 126.78125,82.125 C 126.78125,82.124998 129.04443,67.46875 99.75,67.46875 z M 85,75.9375 C 87.661429,75.937498 89.8125,78.088571 89.8125,80.75 C 89.812502,83.411429 87.661429,85.5625 85,85.5625 C 82.338571,85.562502 80.1875,83.411429 80.1875,80.75 C 80.187498,78.088571 82.338571,75.9375 85,75.9375 z "\n        id="path8615" />\n    <path class="hcArea2"\n        id="path8620"\n        d="M 100.5461,177.31485 C 128.57784,177.31485 126.82735,165.1586 126.82735,165.1586 L 126.7961,152.56485 L 100.0461,152.56485 L 100.0461,148.7836 L 137.4211,148.7836 C 137.4211,148.7836 155.3586,150.81787 155.3586,122.53359 C 155.35861,94.249323 139.70235,95.252343 139.70235,95.252343 L 130.3586,95.252343 L 130.3586,108.37734 C 130.3586,108.37734 130.86226,124.03359 114.95235,124.03359 C 99.042448,124.03359 88.421098,124.03359 88.421098,124.03359 C 88.421098,124.03359 73.514848,123.79263 73.514848,138.43985 C 73.514848,153.08705 73.514848,162.6586 73.514848,162.6586 C 73.514848,162.6586 71.251668,177.31485 100.5461,177.31485 z M 115.2961,168.8461 C 112.63467,168.8461 110.4836,166.69503 110.4836,164.0336 C 110.4836,161.37217 112.63467,159.2211 115.2961,159.2211 C 117.95753,159.2211 120.1086,161.37217 120.1086,164.0336 C 120.10861,166.69503 117.95753,168.8461 115.2961,168.8461 z "\n        style="fill:#E1E2E3;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;marker:none;marker-start:none;marker-mid:none;marker-end:none;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;visibility:visible;display:inline;overflow:visible" />\n  </g>\n</symbol>\n\n<symbol id="visioVisual">\n  <rect x="0" y="0" width="400" height="300" style="fill:#f4f4f4" />\n  <g transform="translate(-99.772966,-149.88962)">\n    <rect x="345.18201" y="266.92099" transform="matrix(-0.7071,0.7071,-0.7071,-0.7071,794.8842,218.5744)" width="13.983" height="13.983" id="rect4171" style="fill:#a6a8ab" />\n    <path d="m 220,227.412 0,145.176 90.435,17.412 0,-180 L 220,227.412 Z m 50.302,108.264 -15.251,-0.554 -18.794,-70.533 14.875,0.18 11.474,48.627 c 0.146,0.602 0.275,1.183 0.391,1.746 0.129,-0.618 0.271,-1.243 0.421,-1.871 l 11.512,-48.217 14.851,0.177 -19.479,70.445 z" style="fill:#a6a8ab" />\n    <path d="m 338.261,306.957 0,13.912 10.435,0 0,-30.709 -11.029,-11.029 -20.274,0 0,24.348 17.391,0 c 1.921,0 3.477,1.555 3.477,3.478" style="fill:#a6a8ab" />\n    <path d="m 376.521,230.87 -59.13,0 0,41.304 16.797,0 16.756,-16.752 c 0.336,-0.343 0.781,-0.513 1.229,-0.513 0.445,0 0.894,0.17 1.236,0.513 l 17.256,17.262 c 0.679,0.676 0.679,1.783 0,2.459 l -15.014,15.021 0,34.185 c 0,1.923 -1.556,3.479 -3.479,3.479 l -13.913,0 0,10.435 c 0,1.923 -1.556,3.479 -3.479,3.479 l -17.391,0 0,27.392 58.797,0 c 2.106,0 3.812,-3.193 3.812,-5.299 l 0,-129.487 c 0.002,-2.11 -1.37,-3.478 -3.477,-3.478" style="fill:#a6a8ab" />\n    <polygon points="317.392,334.782 331.305,334.782 331.305,327.826 331.305,320.869 331.305,310.435 317.392,310.435 " style="fill:#a6a8ab" />\n  </g>\n</symbol>\n\n<symbol id="ribbon">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="74" x2="400" y2="74"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="148" x2="400" y2="148"/>\n  <line class="hcGridLine" fill="#D0D2D3" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" x1="0" y1="222" x2="400" y2="222"/>\n  <path class="hcOuterLine" opacity="0.6" fill="none" d="M64.642,247.169c0,0,1.199,0.312,3.219,0.09C65.837,246.993,64.642,247.169,64.642,247.169z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="none" d="M123.897,240.718c2.53,0.326,4.058,0.006,4.058,0.006S126.486,240.223,123.897,240.718z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="none" d="M233.476,235.959c0,0-1.221-0.088-3.23,0.25C232.257,236.296,233.476,235.959,233.476,235.959z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="none" d="M170.163,240.724c0,0,1.045,0.24,2.791,0.078C171.192,240.569,170.163,240.724,170.163,240.724z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#D0D2D3" d="M67.861,247.259c5.631-0.62,17.651-5.409,27.929-32.763\n    c-14.13-24.423-31.148-22.512-31.148-22.512H22.433v55.185h42.209C64.642,247.169,65.837,246.993,67.861,247.259z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#D0D2D3" d="M172.954,240.801c-1.746,0.163-2.791-0.078-2.791-0.078h-42.209c0,0-1.528,0.32-4.058-0.006\n    c-5.385,1.03-15.622,6.374-27.599,29.532c-0.28,0.541-0.559,1.073-0.837,1.595c0.28,0.533,0.559,1.072,0.837,1.628\n    c14.44,28.857,31.656,26.303,31.656,26.303h42.209c0,0,19.623,3.06,30.908-31.153l0,0\n    C190.339,245.761,178.283,241.505,172.954,240.801z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#BCBEBF" d="M335.358,213.967h42.209v85.808h-42.209l-59.674,0h-42.209c0,0-17.217,2.612-31.656-29.525\n    c-0.249-0.554-0.498-1.095-0.749-1.628c8.574-25.994,22.823-31.343,29.175-32.413c2.011,0.087,3.23-0.25,3.23-0.25h42.209\n    c0,0,21.015,0.295,29.437-10.848C313.543,213.967,335.358,213.967,335.358,213.967z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#BCBEBF" d="M67.861,247.259c-2.02,0.222-3.219-0.09-3.219-0.09H22.433v52.605h42.209\n    c0,0,13.485,4.616,30.819-27.93C85.031,252.002,73.372,247.984,67.861,247.259z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#BCBEBF" d="M123.897,240.718c2.589-0.495,4.058,0.006,4.058,0.006h42.209c0,0,1.029-0.155,2.791,0.078\n    c5.789-0.539,19.302-5.515,28.139-38.431v0c-12.263-23.359-30.929-23.363-30.929-23.363h-42.209c0,0-17.577-4.662-31.633,34.056\n    c-0.177,0.486-0.354,0.961-0.532,1.433c0.476,0.823,0.949,1.674,1.418,2.558C107.198,235.888,118.143,239.976,123.897,240.718z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#B2B2B2" d="M123.897,240.718c-5.754-0.741-16.699-4.83-26.689-23.663\n    c-0.469-0.884-0.942-1.735-1.418-2.558c-10.278,27.354-22.298,32.143-27.929,32.763c5.511,0.725,17.17,4.743,27.6,24.585\n    c0.278-0.522,0.557-1.054,0.837-1.595C108.275,247.091,118.512,241.747,123.897,240.718z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#B2B2B2" d="M230.246,236.209c-5.541-0.24-17.102-3.706-25.78-26.346\n    c-1.048-2.734-2.181-5.222-3.374-7.493v0c-8.836,32.916-22.35,37.892-28.139,38.431c5.33,0.703,17.386,4.959,28.117,27.82\n    C209.644,242.627,223.894,237.279,230.246,236.209z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#E1E2E3" d="M335.358,129.225h42.209V24.001h-42.209c0,0-22.303-0.416-31.726,21.046\n    s-27.948,18.54-27.948,18.54h-42.209c0,0-22.044,1.959-32.816,13.804c-10.772,11.845-30.497,12.829-30.497,12.829h-42.209\n    c0,0-18.557-0.045-32.423,10.911c-13.156,10.395-30.89,10.395-30.89,10.395H22.433v80.459h42.209c0,0,23.238-1.338,32.227-6.606\n    c11.174-6.547,31.086-6.372,31.086-6.372h42.209c0,0,20.992-0.409,29.512-7.828c12.867-11.204,33.8-8.966,33.8-8.966h42.209\n    c0,0,20.543,1.101,30.534-16.879S335.358,129.225,335.358,129.225z"/>\n  <path class="hcOuterLine" opacity="0.6" fill="#D0D2D3" d="M275.685,162.213c0,0,20.543,1.101,30.534-16.879s29.14-16.109,29.14-16.109h42.209v84.742\n    h-42.209c0,0-21.816,0-30.237,11.143c-8.421,11.143-29.437,10.848-29.437,10.848h-42.209c0,0-1.221-0.088-3.23,0.25\n    c-5.541-0.24-17.102-3.706-25.78-26.346c-1.048-2.734-2.181-5.222-3.374-7.493c11.502-42.844,32.384-40.157,32.384-40.157H275.685"/>\n  <rect class="hcOuterLine" x="22.433" y="111.525" fill="#DDDDDD" width="42.209" height="80.459"/>\n  <rect class="hcOuterLine" x="22.433" y="191.984" fill="#D0D2D3" width="42.209" height="55.185"/>\n  <rect class="hcOuterLine" x="22.433" y="247.169" fill="#BCBEBF" width="42.209" height="52.605"/>\n  <rect class="hcOuterLine" x="127.955" y="90.219" fill="#DDDDDD" width="42.209" height="88.788"/>\n  <rect class="hcOuterLine" x="127.955" y="179.007" fill="#BCBEBF" width="42.209" height="61.717"/>\n  <rect class="hcOuterLine" x="127.955" y="240.724" fill="#D0D2D3" width="42.209" height="59.051"/>\n  <rect class="hcOuterLine" x="233.476" y="63.586" fill="#DDDDDD" width="42.209" height="98.627"/>\n  <rect class="hcOuterLine" x="233.476" y="162.213" fill="#D0D2D3" width="42.209" height="73.746"/>\n  <rect class="hcOuterLine" x="233.476" y="235.959" fill="#BCBEBF" width="42.209" height="63.816"/>\n  <rect class="hcOuterLine" x="335.358" y="24.001" fill="#DDDDDD" width="42.209" height="105.224"/>\n  <rect class="hcOuterLine" x="335.358" y="129.225" fill="#D0D2D3" width="42.209" height="84.742"/>\n  <rect class="hcOuterLine" x="335.358" y="213.967" fill="#BCBEBF" width="42.209" height="85.808"/>\n</symbol>\n\n<symbol id="keyDrivers">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g style="transform: scale(15)">\n    <rect class="hcArea" x="0" y="2" opacity="0.8" fill="#D0D2D3" width="20" height="1"/>\n    <rect class="hcArea" x="0" y="6" opacity="0.8" fill="#D0D2D3" width="13" height="1"/>\n    <rect class="hcArea" x="0" y="10" opacity="0.8" fill="#D0D2D3" width="9" height="1"/>\n    <rect class="hcArea" x="0" y="14" opacity="0.8" fill="#D0D2D3" width="4" height="1"/>\n    <circle class="hcArea" fill="#898989" cx="21.5" cy="2.5" r="1.75"/>\n    <circle class="hcArea" fill="#ACACAC" cx="14.5" cy="6.5" r="1.75"/>\n    <circle class="hcArea" fill="#ACACAC" cx="10.5" cy="10.5" r="1.75"/>\n    <circle class="hcArea" fill="#ACACAC" cx="5.5" cy="14.5" r="1.75"/>\n    <g style="transform: translate(5px, -1px)">\n      <path class="hcArea" opacity="0.8" fill="#BEBEBE" d="M18,19h-1v-1h-1v1c0,0.136,0.026,0.265,0.078,0.387\n        s0.124,0.229,0.215,0.32s0.198,0.163,0.32,0.215S16.864,20,17,20h1c0.141,0,0.271-0.026,0.391-0.078s0.226-0.124,0.316-0.215\n        s0.163-0.196,0.215-0.316S19,19.141,19,19v-1h-1V19z"/>\n      <path class="hcArea" fill="#CBCBCB" d="M15.711,17.234c0.104,0.114,0.179,0.233,0.223,0.355S16,17.849,16,18h1h1h1\n        c0-0.297,0.099-0.555,0.297-0.773c0.224-0.25,0.397-0.515,0.52-0.793S20,15.844,20,15.5s-0.065-0.668-0.195-0.973\n        s-0.309-0.57-0.535-0.797s-0.492-0.405-0.797-0.535S17.844,13,17.5,13c-0.349,0-0.676,0.065-0.98,0.195s-0.569,0.308-0.793,0.531\n        s-0.401,0.488-0.531,0.793S15,15.151,15,15.5c0,0.344,0.062,0.655,0.184,0.934S15.481,16.979,15.711,17.234z"/>\n      <rect class="hcArea2" x="17" y="18" fill="#DBDBDB" width="1" height="1"/>\n    </g>\n  </g>\n</symbol>\n\n<symbol id="decompositionTree">\n  <rect class="hcOuterLine" x="0" y="0" fill="#F4F4F4" width="400" height="300"/>\n  <g style="transform: scale(10);">\n    <rect class="hcHide" style="fill:#f8f8f8;" width="40" height="30"/>\n    <path class="hcArea" style="fill:#bebebe;isolation:isolate;" d="M34.64,27.07H33.21V25.64H31.79v1.43a1.26,1.26,0,0,0,.11.55,1.31,1.31,0,0,0,.3.46,1.62,1.62,0,0,0,.46.31,1.5,1.5,0,0,0,.55.11h1.43a1.47,1.47,0,0,0,.56-.11,1.57,1.57,0,0,0,.45-.31,1.39,1.39,0,0,0,.31-.45,1.47,1.47,0,0,0,.11-.56V25.64H34.64Z"/>\n    <rect class="hcArea2" style="fill:#dbdbdb;" x="33.21" y="25.64" width="1.43" height="1.43"/>\n    <path class="hcArea" style="fill:#cbcbcb;" d="M31.37,24.55a1.41,1.41,0,0,1,.32.51,1.76,1.76,0,0,1,.1.58h4.28a1.56,1.56,0,0,1,.43-1.1,4.57,4.57,0,0,0,.74-1.13,3.41,3.41,0,0,0,.26-1.34,3.45,3.45,0,0,0-.28-1.39,3.49,3.49,0,0,0-1.9-1.9,3.62,3.62,0,0,0-2.79,0,3.54,3.54,0,0,0-1.89,1.89,3.47,3.47,0,0,0-.28,1.4,3.41,3.41,0,0,0,.26,1.34A4.31,4.31,0,0,0,31.37,24.55Z"/>\n    <path class="hcArea2" style="fill:none;stroke:#dbdbdb;stroke-miterlimit:10;stroke-width:0.83px;" d="M10.5,12.28c.68-.34,1.85.39,2.66,1.88.56,1,.87,1.78,1.45,3s1.18,3.09,2.89,3.09"/>\n    <path class="hcArea2" style="fill:none;stroke:#dbdbdb;stroke-miterlimit:10;stroke-width:0.83px;" d="M10.5,12.21c.68.35,1.85-.38,2.66-1.87.56-1,.87-1.78,1.45-3s1.18-3.09,2.89-3.09"/>\n    <line class="hcArea2" style="fill:none;stroke:#dbdbdb;stroke-miterlimit:10;stroke-width:0.83px;" x1="11.16" y1="12.25" x2="17.5" y2="12.25"/>\n    <rect class="hcArea" style="fill:#bebebe;" x="17.5" y="10.5" width="10" height="3.5"/>\n    <rect class="hcArea" style="fill:#bebebe;" x="1.5" y="10.5" width="10" height="3.5"/>\n    <rect class="hcArea" style="fill:#bebebe;" x="17.5" y="2.5" width="10" height="3.5"/>\n    <rect class="hcArea" style="fill:#bebebe;" x="17.5" y="18.5" width="10" height="3.5"/>\n  </g>\n</symbol>\n\n</svg>',O=t(73637),T=t(31264),V=t(33714),h=t(25956),M=t(18266),I=t(59312),b=t(70377),P=t(56339),g=t(78186),u=t(35380);function s(L,D){if(1&L&&(O.\u0275\u0275elementStart(0,"div",3),O.\u0275\u0275element(1,"i",4)(2,"span",5),O.\u0275\u0275elementEnd()),2&L){var m=O.\u0275\u0275nextContext();O.\u0275\u0275advance(2),O.\u0275\u0275propertyInterpolate("localize",m.emptyVisualMessageKey)}}var A="</svg>",S=function(){function L(D,m,v,l,y,d,w){this.domSanitizer=D,this.featureSwitchService=m,this.gettingStarted=v,this.localizationService=l,this.notificationBarService=y,this.explorationCapabilities=d,this.visualPlugin=w,this.emptyVisualMessageKey=m.featureSwitches.onObject?"Select_Fields_To_Populate_Visual_OnObject":"Select_Fields_To_Populate_Visual"}return L.prototype.ngOnInit=function(){var D=this;this.blankCanvasWatermarkEnabled=!this.explorationCapabilities.getCapabilities().disableBlankCanvasWatermark,this.isSchemaEmpty$=this.gettingStarted.currentState$.pipe((0,e.h)(function(m){return 0===m||2===m}),(0,n.b)(function(m){return D.updateDataWarningNotification(0===m)}),(0,f.U)(function(m){return 0===m})),this.updateWatermark(this.visualType)},L.prototype.ngOnDestroy=function(){this.notificationId&&this.notificationBarService.hide(this.notificationId)},L.prototype.updateDataWarningNotification=function(D){D?this.notificationId||this.displayMessageOnNotificationBar():this.notificationId&&(this.notificationBarService.hide(this.notificationId),this.notificationId=null)},L.prototype.displayMessageOnNotificationBar=function(){this.blankCanvasWatermarkEnabled&&(this.notificationId=this.notificationBarService.notify({message:this.localizationService.get("Need_Data_To_Build_Visual"),notificationType:6}))},L.prototype.ngOnChanges=function(D){D.visualType&&!D.visualType.firstChange&&this.updateWatermark(D.visualType.currentValue)},L.prototype.updateWatermark=function(D){var m=this.visualPlugin.getPlugin(D);this.svgVisualKey=m&&m.watermarkKey||"defaultWatermark";var v="\n                ".concat('<svg id="Layer_1" x="0px" y="0px" viewBox="0 0 400 300" enable-background="new 0 0 400 300" xml:space="preserve" ng-bind-html="$ctrl.innerSvgContent">',"\n                    ").concat(L.parseTemplateCacheToSVG(this.svgVisualKey,A,"</symbol>"),"\n                ").concat(A);this.svgContent=this.domSanitizer.bypassSecurityTrustHtml(v)},L.parseTemplateCacheToSVG=function(D,m,v){var l=i.indexOf('id="'+D),d=i.substring(l+(D.length+6),i.indexOf(m)),w=d.indexOf(v);return d.substring(0,w)},L.\u0275fac=function(m){return new(m||L)(O.\u0275\u0275directiveInject(T.H7),O.\u0275\u0275directiveInject(V.vZ),O.\u0275\u0275directiveInject(h.c),O.\u0275\u0275directiveInject(M.o),O.\u0275\u0275directiveInject(I.S),O.\u0275\u0275directiveInject(b.U),O.\u0275\u0275directiveInject(P.D))},L.\u0275cmp=O.\u0275\u0275defineComponent({type:L,selectors:[["visual-watermark"]],inputs:{visualType:"visualType"},features:[O.\u0275\u0275NgOnChangesFeature],decls:4,vars:5,consts:[[1,"visualWatermark"],["class","warning",4,"ngIf"],[1,"watermark",3,"innerHTML"],[1,"warning"],[1,"icon","glyphicon","pbi-glyph-info","glyph-small"],[3,"localize"]],template:function(m,v){1&m&&(O.\u0275\u0275elementStart(0,"div",0),O.\u0275\u0275template(1,s,3,1,"div",1),O.\u0275\u0275pipe(2,"async"),O.\u0275\u0275element(3,"div",2),O.\u0275\u0275elementEnd()),2&m&&(O.\u0275\u0275advance(1),O.\u0275\u0275property("ngIf",!O.\u0275\u0275pipeBind1(2,3,v.isSchemaEmpty$)&&v.blankCanvasWatermarkEnabled),O.\u0275\u0275advance(2),O.\u0275\u0275property("innerHTML",v.svgContent,O.\u0275\u0275sanitizeHtml),O.\u0275\u0275attribute("data-svg-visual-key",v.svgVisualKey))},dependencies:[g.NgIf,u.X,g.AsyncPipe],styles:['visual-watermark{width:100%;height:100%}visual-watermark .visualWatermark{display:flex;flex-direction:column;height:100%;background:var(--white-color, #FFF)}visual-watermark .visualWatermark .warning{display:flex;height:10%;margin:8px;color:var(--gray-180, #252423)}visual-watermark .visualWatermark .warning i.glyphicon{padding-right:8px}visual-watermark .visualWatermark .warning span{font-family:var(--fluent-font-family, "Segoe UI", "Segoe UI Web (West European)", -apple-system, BlinkMacSystemFont, Roboto, "Helvetica Neue", sans-serif);font-size:var(--sm-font-size, 12px);font-weight:var(--font-weight-regular, 400)}visual-watermark .visualWatermark .watermark{height:90%;z-index:1;flex-grow:1}visual-watermark .visualWatermark .watermark>svg{width:100%;height:100%}\n'],encapsulation:2}),L}()},40166:function(Ve,se,t){t.d(se,{y:function(){return N}});var e=t(7005),n=t(73637),f=t(26092),i=t(66859),O=t(29494),T=t(50187),V=t(6459),h=t(67721),M=t(752),I=t(56339),b=t(52725),P=t(27463),g=t(23196),u=t(33714),s=t(15338),p=t(40917),C=t(97622),A=t(28252),S=t(22584),L=t(28966),D=t(66592),m=t(61523),v=t(78186),l=t(68128),y=powerbi.visualHost.controllers.VisualComponentCore,d=powerbi.common.Watcher,w=["visualElement"],x=function(ne,Ce,he,Fe){return{customPadding:ne,"disable-events":Ce,"allow-deferred-rendering":he,"disable-events-format-mode":Fe}},N=function(){function X(ne,Ce,he,Fe,fe,ae,pe,ge,Me,ce,J,ie,G,j,F,E,k,R,z,Q,me){this.approvedResourceService=ne,this.publicCustomVisualService=Ce,this.eventBridge=he,this.featureSwitchService=Fe,this.ngZone=fe,this.moduleLoader=ae,this.es6PromiseFactory=pe,this.renderingSynchronizer=ge,this.telemetryService=Me,this.certifiedEventsService=ce,this.themeService=J,this.trustedVisual=ie,this.visualPlugin=G,this.visualSandbox=j,this.visualStylePresetService=F,this.visualWarningTelemetryService=E,this.svgProvider=k,this.ref=R,this.globalEventBridge=z,this.managedCustomVisualsService=Q,this.timeoutService=me,this.visualReady=new n.EventEmitter,this.useOnPushChangeDetection=!1,this.pendingChanges={},this.applyDeferredRenderingClass=!0,this.destroyed=!1}return X.prototype.ngOnChanges=function(ne){var Ce;!this.core||(ne.viewModel&&(this.core.viewModel=ne.viewModel.currentValue),ne.allowDeferredRendering&&(this.core.allowDeferredRendering=ne.allowDeferredRendering.currentValue,this.updateApplyDeferredRenderingClass(null===(Ce=this.viewModel)||void 0===Ce?void 0:Ce.type)),ne.currentZone&&(this.core.currentZone=ne.currentZone.currentValue),(ne.supportsKeyboardNavigation||ne.inheritFocusNavMode)&&this.manageKeyboardNavigation(),ne.subSelections&&this.core.onSubSelectionsChanged(this.subSelections),ne.formatMode&&this.core.onFormatModeChanged(this.formatMode),ne.pendingChanges&&this.core.setPendingChanges(this.pendingChanges))},X.prototype.manageKeyboardNavigation=function(){this.supportsKeyboardNavigation?(this.ariaHidden=void 0,this.focusNavMode=this.inheritFocusNavMode?void 0:"Group",this.keyboardShortcuts=this.inheritFocusNavMode?void 0:"ctrl-ArrowRight scoped"):(this.ariaHidden=this.supportsScreenReader?"false":"true",this.focusNavMode=void 0,this.keyboardShortcuts=void 0)},X.prototype.ngAfterViewInit=function(){this.initCore()},X.prototype.ngOnDestroy=function(){this.destroyed=!0,this.core&&this.core.$onDestroy()},X.prototype.ngDoCheck=function(){var ne=this;if(this.core){if(!this.watcher){this.watcher=new d;var Ce=function(Fe,fe,ae){ne.core&&!ae&&!ne.destroyed&&(ne.core.$onDestroy(),ne.core=void 0,ne.initCore())};this.watcher.add("type",function(){return ne.viewModel&&{type:ne.viewModel.type,themeCollection:ne.viewModel.themeCollection}},function(he,Fe,fe){ne.updateApplyDeferredRenderingClass(he.type),Ce(0,0,fe)},{mode:2}),this.watcher.add("viewModel",function(){return ne.viewModel},function(he,Fe,fe){!fe&&he&&Fe&&Fe.visualInitialized&&he.visual===Fe.visual?he.visualInitialized=!0:Ce(0,0,fe)})}this.watcher.doCheck(),this.core.$doCheck()}},X.prototype.updateApplyDeferredRenderingClass=function(ne){this.applyDeferredRenderingClass=!1!==this.allowDeferredRendering&&!(ne&&this.visualPlugin.isCustomVisual(ne))},Object.defineProperty(X.prototype,"supportsCustomPadding",{get:function(){var Ce;return null===(Ce=this.featureSwitchService)||void 0===Ce?void 0:Ce.featureSwitches.vcPadding},enumerable:!1,configurable:!0}),X.prototype.initCore=function(){var ne=this,he={approvedResourceService:this.approvedResourceService,publicCustomVisualService:this.publicCustomVisualService,eventBridge:this.eventBridge,featureSwitchService:this.featureSwitchService,globalEventBridge:this.globalEventBridge,managedCustomVisualsService:this.managedCustomVisualsService,moduleLoader:this.moduleLoader,run:this.visualZone?function(fe){return ne.visualZone.run(fe)}:this.ngZone&&function(Fe){return ne.ngZone.runOutsideAngular(Fe)},promiseFactory:this.es6PromiseFactory,renderingSynchronizer:this.renderingSynchronizer,svgProvider:this.svgProvider,telemetryService:this.telemetryService,certifiedEventsService:this.certifiedEventsService,themeService:this.themeService,timeoutService:this.timeoutService,trustedVisual:this.trustedVisual,visualPlugin:this.visualPlugin,visualSandbox:this.visualSandbox,visualStylePresetService:this.visualStylePresetService,visualWarningTelemetryService:this.visualWarningTelemetryService};this.core=new y($(this.visualElement.nativeElement),he,function(){return ne.visualReady.emit()}),this.core.viewModel=this.viewModel,this.core.allowDeferredRendering=this.allowDeferredRendering,this.core.currentZone=this.currentZone,this.core.formatMode=this.formatMode,this.manageKeyboardNavigation(),this.core.$onInit().then(function(){ne.useOnPushChangeDetection&&ne.ref.markForCheck()}),this.ref.detectChanges()},X.\u0275fac=function(Ce){return new(Ce||X)(n.\u0275\u0275directiveInject(T.E),n.\u0275\u0275directiveInject(V.B),n.\u0275\u0275directiveInject(g.J,8),n.\u0275\u0275directiveInject(u.vZ),n.\u0275\u0275directiveInject(n.NgZone),n.\u0275\u0275directiveInject(s.m),n.\u0275\u0275directiveInject(O.t),n.\u0275\u0275directiveInject(p.d),n.\u0275\u0275directiveInject(A.y0),n.\u0275\u0275directiveInject(h.R),n.\u0275\u0275directiveInject(S.f),n.\u0275\u0275directiveInject(M.t),n.\u0275\u0275directiveInject(I.D),n.\u0275\u0275directiveInject(b.s),n.\u0275\u0275directiveInject(P.A),n.\u0275\u0275directiveInject(C.n),n.\u0275\u0275directiveInject(L.g),n.\u0275\u0275directiveInject(n.ChangeDetectorRef),n.\u0275\u0275directiveInject(D.Z),n.\u0275\u0275directiveInject(i.D),n.\u0275\u0275directiveInject(m.X))},X.\u0275cmp=n.\u0275\u0275defineComponent({type:X,selectors:[["visual-modern"]],viewQuery:function(Ce,he){var Fe;(1&Ce&&n.\u0275\u0275viewQuery(w,5),2&Ce)&&(n.\u0275\u0275queryRefresh(Fe=n.\u0275\u0275loadQuery())&&(he.visualElement=Fe.first))},inputs:{viewModel:"viewModel",allowDeferredRendering:"allowDeferredRendering",currentZone:"currentZone",visualZone:"visualZone",supportsKeyboardNavigation:"supportsKeyboardNavigation",supportsScreenReader:"supportsScreenReader",focusNavMode:"focusNavMode",inheritFocusNavMode:"inheritFocusNavMode",keyboardShortcuts:"keyboardShortcuts",subSelections:"subSelections",formatMode:"formatMode",enablePointerEventsFormatMode:"enablePointerEventsFormatMode",useOnPushChangeDetection:"useOnPushChangeDetection",pendingChanges:"pendingChanges"},outputs:{visualReady:"visualReady"},features:[n.\u0275\u0275NgOnChangesFeature],decls:2,vars:12,consts:[[3,"keyboard-shortcuts","ngClass"],["visualElement",""]],template:function(Ce,he){1&Ce&&n.\u0275\u0275element(0,"div",0,1),2&Ce&&(n.\u0275\u0275classMapInterpolate1("visual visual-",he.core&&he.core.viewModel&&he.core.viewModel.type,""),n.\u0275\u0275property("keyboard-shortcuts",he.keyboardShortcuts)("ngClass",n.\u0275\u0275pureFunction4(7,x,he.supportsCustomPadding,he.core&&he.core.disableEvents,he.applyDeferredRenderingClass,he.formatMode&&!he.enablePointerEventsFormatMode)),n.\u0275\u0275attribute("aria-hidden",he.ariaHidden)("focus-nav-mode",he.focusNavMode))},dependencies:[v.NgClass,l.q],styles:[".exploreHost.landingController   .visualContainer.preventVisualScrolling[_nghost-%COMP%]     svg.svgScrollable, .exploreHost.landingController   .visualContainer.preventVisualScrolling   [_nghost-%COMP%]     svg.svgScrollable{pointer-events:none!important}.exploreHost.landingController[_nghost-%COMP%]   .visual.visual-PBI_CV_3C80B1F2_09AF_4123_8E99_C3CBC46B23E0[_ngcontent-%COMP%], .exploreHost.landingController   [_nghost-%COMP%]   .visual.visual-PBI_CV_3C80B1F2_09AF_4123_8E99_C3CBC46B23E0[_ngcontent-%COMP%]{overflow:hidden}@supports (-webkit-touch-callout: none){.exploreHost.landingController[_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container .scroll-element, .exploreHost.landingController   [_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container .scroll-element{display:none}}.exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   .mobileVisualContainerHeader:not(.popOut)   .vcBody[_nghost-%COMP%]     .slicer-header-wrapper, .exploreHost.landingController   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   .mobileVisualContainerHeader:not(.popOut)   .vcBody   [_nghost-%COMP%]     .slicer-header-wrapper{margin-right:30px}.exploreHost.landingController.phoneLandscapeLayout   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   .mobileVisualContainerHeader:not(.popOut)   .vcBody[_nghost-%COMP%]     .slicer-header-wrapper, .exploreHost.landingController.phoneLandscapeLayout   .explorationContainer   .exploration   .exploreCanvas.stylableVisualContainerHeader   .mobileVisualContainerHeader:not(.popOut)   .vcBody   [_nghost-%COMP%]     .slicer-header-wrapper{margin-right:45px}.exploreHost.landingController.inFocus.phonePortraitLayout[_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.phonePortraitLayout   [_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.phoneLandscapeLayout[_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.phoneLandscapeLayout   [_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.tabletPortraitLayout[_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen, .exploreHost.landingController.inFocus.tabletPortraitLayout   [_nghost-%COMP%]   .visual[_ngcontent-%COMP%]     .slicer-container.full-screen{height:calc(100% + 10px)!important;margin:-5px}"]}),(0,e.gn)([(0,f.CN)("ngOnChanges")],X.prototype,"ngOnChanges",null),(0,e.gn)([(0,f.CN)("ngAfterViewInit")],X.prototype,"ngAfterViewInit",null),(0,e.gn)([(0,f.CN)("ngDoCheck")],X.prototype,"ngDoCheck",null),X}()},70823:function(Ve,se,t){t.d(se,{I:function(){return i}});var e=t(7005),n=t(14789),f=t(73637),i=function(O){function T(V,h){return O.call(this,"visualizationPane",V,h)||this}return(0,e.ZT)(T,O),T.\u0275fac=function(h){return new(h||T)(f.\u0275\u0275directiveInject(f.ElementRef),f.\u0275\u0275directiveInject(f.Injector))},T.\u0275dir=f.\u0275\u0275defineDirective({type:T,selectors:[["visualization-pane"]],inputs:{viewModel:"viewModel"},features:[f.\u0275\u0275InheritDefinitionFeature]}),T}(n.iB)},58029:function(Ve,se,t){t.d(se,{s:function(){return n}});var e=t(73637),n=function(){function f(i,O){this.elementRef=i}return f.prototype.ngAfterContentInit=function(){var i=$(this.elementRef.nativeElement);this.applyStyle.addElement(i),this.applyStyle.apply(i)},f.prototype.ngOnDestroy=function(){this.applyStyle.removeElement($(this.elementRef.nativeElement))},f.\u0275fac=function(O){return new(O||f)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Injector))},f.\u0275dir=e.\u0275\u0275defineDirective({type:f,selectors:[["","apply-style",""]],inputs:{applyStyle:["apply-style","applyStyle"]}}),f}()},751:function(Ve,se,t){t.d(se,{o:function(){return n}});var e=t(73637),n=function(){function f(i,O){this.elementRef=i,this.injector=O}return f.prototype.ngAfterViewInit=function(){$(this.elementRef.nativeElement).data(powerbi.common.angularInjectorController,this.injector)},f.\u0275fac=function(O){return new(O||f)(e.\u0275\u0275directiveInject(e.ElementRef),e.\u0275\u0275directiveInject(e.Injector,1))},f.\u0275dir=e.\u0275\u0275defineDirective({type:f,selectors:[["","downgrade-injector-patcher",""]]}),f}()},33185:function(Ve,se,t){t.d(se,{Dx:function(){return i},HY:function(){return n},LW:function(){return f},Nn:function(){return b},O3:function(){return M},Px:function(){return I},Xr:function(){return O},Ys:function(){return e},al:function(){return V},hV:function(){return u},nb:function(){return P},nc:function(){return T},tH:function(){return h},xZ:function(){return g}});var e="AboutVisualDialog",n="ChangeDetectionMeasureDialog",f="DSVariablesDialog",i="ThemeDialog",O="QnaFeedbackDialog",T="TrySampleDatasetDialog",V="CheckboxDialog",h="DeleteCustomVisualsDialog",M="DeleteVisualWarningDialog",I="EsriConsentDialog",b="ConditionalFormattingDialog",P="SparklinesDialog",g="ExportDataDialogComponent",u="DataBarsDialog"},90969:function(Ve,se,t){t.d(se,{B:function(){return n}});var e=powerbi.data.SQExprUtils,n=function(){function f(i,O,T,V,h){this.setting=i,this.contract=O,this.sort=T,this.undoRedo=V,this.visualAuthoringOperations=h,this.sortDelay=500}return f.prototype.resetSortSettings=function(i,O,T){this.setting.defaultSortBehavior=T,this.setting.sortableFields=i,this.setting.sortGroups=O},f.prototype.toggleSortDirection=function(i,O,T){var V=this;this.executeSort("VisualContainerToggleSortDirection",function(){return V.applySortDirection(O,T),i&&!i.active&&(i.active=!0),V.applyActiveSortableFieldsToQuery(),!0})},f.prototype.toggleSort=function(i,O,T){var V=this;this.executeSort("VisualContainerToggleSort",function(){return O&&(i.sortDirection=O),V.toggleSortByField(i,T),!0})},f.prototype.applySortByFields=function(i){var O=this;this.sortPromise&&clearTimeout(this.sortPromise);var T=this.contract.config.singleVisual.query;if(!this.isSortSupported(T,i))return[];this.resetSortableFieldsStatus(this.setting.sortableFields,!0);var V=this.findMatchingSortableFields(i);return this.sortPromise=setTimeout(function(){O.undoRedo.register("VisualContainerApplySort",function(){for(var h=[],M=0,I=V;M<I.length;M++)for(var b=I[M],P=0,g=b.exprs;P<g.length;P++)h.push({expr:g[P].expr,direction:b.sortDirection});var s=O.contract;return O.sort.resetSort(T),O.visualAuthoringOperations.setOrderBy(s,h),O.sortPromise=void 0,!0})},this.sortDelay),V},f.prototype.isSortSupported=function(i,O){if(i.hasVisualCalcExpressions())for(var T=i.getUniqueQueryFields(),V=0,h=O;V<h.length;V++)for(var M=h[V],I=0,b=T;I<b.length;I++){var P=b[I];if(P.queryName&&P.queryName===M.queryName&&e.isMeasure(P.expr))return!1}return!0},f.prototype.executeSort=function(i,O){var T=this;this.sortPromise&&clearTimeout(this.sortPromise),this.sortPromise=setTimeout(function(){T.undoRedo.register(i,O),T.sortPromise=void 0},this.sortDelay)},f.prototype.applySortDirection=function(i,O){if(!_.isEmpty(O.fields))for(var T=0,V=O.fields;T<V.length;T++)V[T].sortDirection=i},f.prototype.toggleSortByField=function(i,O){var T=_.find(this.setting.sortGroups,function(h){return i.groupKey===h.key});if(T){var V=i.active;V?(this.visualAuthoringOperations.removeOrderBy(this.contract,i.exprs.map(function(h){return h.expr}),O),i.active=!1):(this.resetSortableFieldsStatus(T.fields,!1),i.active=!V,this.applyActiveSortableFieldsToQuery())}},f.prototype.findMatchingSortableFields=function(i){var O=[],T=this.setting.sortableFields;if(_.isEmpty(T)||_.isEmpty(i))return[];for(var V=0,h=T;V<h.length;V++){for(var M=h[V],I=!1,b=null,P=function(A){var S=_.findIndex(i,function(D){return D.queryName===A.name}),L=i[S];if(!L)return I=!1,"break";if(null==b)b=L.sortDirection;else if(b!==L.sortDirection)return I=!1,"break";I=!0,M.orderByIndex=S},g=0,u=M.exprs;g<u.length&&"break"!==P(u[g]);g++);I&&(M.sortDirection=b,M.active=!0,O.push(M))}return _.sortBy(O,function(C){return C.orderByIndex})},f.prototype.areAllSortDescriptorsIncluded=function(i,O){for(var T=0,V=i;T<V.length;T++){for(var h=V[T],M=!1,I=0,b=O;I<b.length;I++){for(var g=0,u=b[I].exprs;g<u.length;g++)if(u[g].name===h.queryName){M=!0;break}if(M)break}if(!M)return!1}return!0},f.prototype.resetSortableFieldsStatus=function(i,O){if(i)for(var T=0,V=i;T<V.length;T++){var h=V[T];h.active=!1,O&&(h.sortDirection=void 0)}},f.prototype.applyActiveSortableFieldsToQuery=function(){var i=this.buildOrderByFromActiveSortableFields();this.applyOrderByToQuery(i)},f.prototype.buildOrderByFromActiveSortableFields=function(){var i=[];if(!this.setting.sortGroups)return i;for(var O=0,T=this.setting.sortGroups;O<T.length;O++)for(var h=0,M=T[O].fields;h<M.length;h++){var I=M[h];I.active&&i.push.apply(i,this.sort.createSortDefinitions(I))}return i},f.prototype.applyOrderByToQuery=function(i){var O=this.contract;this.sort.resetSort(O.config.singleVisual.query),this.visualAuthoringOperations.setOrderBy(O,i)},f}()},65966:function(Ve,se,t){t.d(se,{J:function(){return ki}});var e=t(4890),n=t(78186),f=t(36358),i=t(17603),O=t(30411),T=t(45580),V=t(78469),h=t(91691),M=t(27826),I=t(8353),b=t(77582),P=t(49366),g=t(18601),u=t(6260),s=t(31226),p=t(19834),C=t(44323),A=t(18727),S=t(95278),L=t(90607),D=t(38297),m=t(81002),v=t(7005),l=t(45598),y=t(58494),d={loadChildren:function(){return t.e("performance-pane").then(t.bind(t,56936)).then(function(xe){return xe.PerformancePaneModule})}};y.E.addLazyLoadForLegacyMapping("@powerbi/ExploreUI/performance-pane.module#PerformancePaneModule",d.loadChildren);var w={loadChildren:function(){return t.e("user-emulation").then(t.bind(t,98238)).then(function(xe){return xe.UserEmulationModule})}};y.E.addLazyLoadForLegacyMapping("./lazy-modules/user-emulation/user-emulation.module#UserEmulationModule",w.loadChildren);var x={loadChildren:function(){return Promise.all([t.e(6),t.e("personalize-visual")]).then(t.bind(t,66792)).then(function(xe){return xe.PersonalizeVisualModule})}};y.E.addLazyLoadForLegacyMapping("./lazy-modules/personalize-visual/personalize-visual.module#PersonalizeVisualModule",x.loadChildren);var N={loadChildren:function(){return t.e("drill-through").then(t.bind(t,13048)).then(function(xe){return xe.DrillThroughModule})}};y.E.addLazyLoadForLegacyMapping("./lazy-modules/drill-through/drill-through.module#DrillThroughModule",N.loadChildren);var X={loadChildren:function(){return t.e("bookmark-on-load").then(t.bind(t,71292)).then(function(xe){return xe.BookmarkOnLoadModule})}};y.E.addLazyLoadForLegacyMapping("./lazy-modules/bookmark-on-load/bookmark-on-load.module#BookmarkOnLoadModule",X.loadChildren);var ne={loadChildren:function(){return t.e("visual-host-tooltip-actions-provider").then(t.bind(t,7632)).then(function(xe){return xe.VisualHostTooltipActionsProviderModule})}};y.E.addLazyLoadForLegacyMapping("./lazy-modules/visual-host-tooltip-actions-provider/visual-host-tooltip-actions-provider.module#VisualHostTooltipActionsProviderModule",ne.loadChildren);var Ce={loadChildren:function(){return t.e("field-picker-modern").then(t.bind(t,4724)).then(function(xe){return xe.FieldPickerModernModule})}};y.E.addLazyLoadForLegacyMapping("./lazy-modules/field-picker-modern/field-picker-modern.module#FieldPickerModernModule",Ce.loadChildren);var he={loadChildren:function(){return t.e("field-list").then(t.bind(t,34194)).then(function(xe){return xe.FieldListModule})}};y.E.addLazyLoadForLegacyMapping("./lazy-modules/field-list/field-list.module#FieldListModule",he.loadChildren);var Fe={loadChildren:function(){return t.e("visual-container-skittles").then(t.bind(t,28755)).then(function(xe){return xe.VisualContainerSkittlesModule})}};y.E.addLazyLoadForLegacyMapping("./lazy-modules/visual-container-skittles/visual-container-skittles.module#VisualContainerSkittlesModule",Fe.loadChildren);var fe={loadChildren:function(){return t.e("visual-recommendation-provider").then(t.bind(t,79129)).then(function(xe){return xe.VisualRecommendationProviderModule})}};y.E.addLazyLoadForLegacyMapping("./lazy-modules/visual-recommendation/visual-recommendation-provider.module#VisualRecommendationProviderModule",fe.loadChildren);var ae={loadChildren:function(){return t.e("pane-switcher").then(t.bind(t,7740)).then(function(xe){return xe.PaneSwitcherModule})}};y.E.addLazyLoadForLegacyMapping("@powerbi/ExploreUI/pane-switcher.module#PaneSwitcherModule",ae.loadChildren);var pe=(0,v.ev)([{path:"dummy-performance-pane",loadChildren:d.loadChildren},{path:"dummy-personalize-visual",loadChildren:x.loadChildren},{path:"dummy-drill-through",loadChildren:N.loadChildren},{path:"dummy-bookmark-on-load",loadChildren:X.loadChildren},{path:"dummy-user-emulation",loadChildren:w.loadChildren},{path:"dummy-visual-host-tooltip-actions-provider",loadChildren:ne.loadChildren},{path:"dummy-field-picker-modern",loadChildren:Ce.loadChildren},{path:"dummy-field-list",loadChildren:he.loadChildren},{path:"dummy-visual-container-skittles",loadChildren:Fe.loadChildren},{path:"dummy-visual-recommendation",loadChildren:fe.loadChildren},{path:"dummy-pane-switcher",loadChildren:ae.loadChildren}],l.r,!0),ge=t(85732),Me=t(54834),ce=t(13373),J=t(83919),ie=t(26092),G=t(96103),j=t(72283),F=t(71948),E=t(88617),k=t(24908),R=t(52453),z=t(73206),Q=t(84568),me=t(49903),le=t(28984),K=t(14260),q=t(28252),ye=t(47010),Le=t(50717),Ne=t(14452),be=t(20593),Y=t(35836),ue=t(33149),ot=(t(15377),t(2793),t(80409),t(19709)),De=(t(35784),t(25434),t(85217)),qe=(t(48621),t(71430),t(87460),t(71657)),je=t(65764),st=t(17607),Ue=(t(9256),t(86195),t(89663),t(86917),t(26632),t(23041)),B=(t(21923),t(13734),t(2819),t(74298),t(55176),t(80535)),U=t(85467),H=t(35228),oe=t(45656),te=t(69798),_e=t(4730),de=t(73637),Ee=t(58622);function we(Qe,xe){if(1&Qe&&de.\u0275\u0275element(0,"mat-icon",4),2&Qe){var He=de.\u0275\u0275nextContext();de.\u0275\u0275property("fontIcon","pbi-glyph-"+He.selectedOption.icon.glyph)}}function Se(Qe,xe){if(1&Qe&&de.\u0275\u0275element(0,"mat-icon",4),2&Qe){var He=de.\u0275\u0275nextContext().$implicit;de.\u0275\u0275property("fontIcon","pbi-glyph-"+He.icon.glyph)}}function Re(Qe,xe){if(1&Qe&&(de.\u0275\u0275elementStart(0,"mat-option",5),de.\u0275\u0275template(1,Se,1,1,"mat-icon",2),de.\u0275\u0275elementStart(2,"span"),de.\u0275\u0275text(3),de.\u0275\u0275elementEnd()()),2&Qe){var He=xe.$implicit;de.\u0275\u0275property("value",He),de.\u0275\u0275advance(1),de.\u0275\u0275property("ngIf",He.icon&&He.icon.glyph),de.\u0275\u0275advance(2),de.\u0275\u0275textInterpolate(He.displayName)}}var $e=function(xe){return{newPaneColors:xe,"property-pane-select-menu":!0,"pbi-modern-select-panel":!0,themeableElement:!0}},Ye=function(){function Qe(){this.selectionChange=new de.EventEmitter}return Qe.prototype.ngOnChanges=function(xe){var He=this;(xe.options||xe.selectedValue)&&(this.selectedOption=this.options.find(function(Je){return Je.value===He.selectedValue}))},Qe.prototype.onSelectionChange=function(xe){this.selectionChange.emit(xe.value.value)},Qe.\u0275fac=function(He){return new(He||Qe)},Qe.\u0275cmp=de.\u0275\u0275defineComponent({type:Qe,selectors:[["property-pane-select-menu"]],inputs:{disabled:"disabled",options:"options",selectedValue:"selectedValue",newPaneColors:"newPaneColors",labelId:"labelId"},outputs:{selectionChange:"selectionChange"},features:[de.\u0275\u0275NgOnChangesFeature],decls:6,vars:10,consts:[[1,"themeableElement","pbi-modern-select",3,"value","disabled","panelClass","aria-labelledby","disableOptionCentering","valueChange","selectionChange"],[1,"property-pane-select-menu-option"],["class","glyph-small",3,"fontIcon",4,"ngIf"],["class","property-pane-select-menu-option",3,"value",4,"ngFor","ngForOf"],[1,"glyph-small",3,"fontIcon"],[1,"property-pane-select-menu-option",3,"value"]],template:function(He,Je){1&He&&(de.\u0275\u0275elementStart(0,"mat-select",0),de.\u0275\u0275listener("valueChange",function(it){return Je.selectedOption=it})("selectionChange",function(it){return Je.onSelectionChange(it)}),de.\u0275\u0275elementStart(1,"mat-select-trigger",1),de.\u0275\u0275template(2,we,1,1,"mat-icon",2),de.\u0275\u0275elementStart(3,"span"),de.\u0275\u0275text(4),de.\u0275\u0275elementEnd()(),de.\u0275\u0275template(5,Re,4,3,"mat-option",3),de.\u0275\u0275elementEnd()),2&He&&(de.\u0275\u0275property("value",Je.selectedOption)("disabled",Je.disabled)("panelClass",de.\u0275\u0275pureFunction1(8,$e,Je.newPaneColors))("aria-labelledby",Je.labelId)("disableOptionCentering",!0),de.\u0275\u0275advance(2),de.\u0275\u0275property("ngIf",Je.selectedOption.icon&&Je.selectedOption.icon.glyph),de.\u0275\u0275advance(2),de.\u0275\u0275textInterpolate(Je.selectedOption.displayName),de.\u0275\u0275advance(1),de.\u0275\u0275property("ngForOf",Je.options))},dependencies:[n.NgForOf,n.NgIf,I.Hw,g.gD,g.$L,Ee.ey],styles:[".mat-select[_ngcontent-%COMP%]{height:24px;padding:4px 8px!important;display:flex;align-items:center}.mat-select[_ngcontent-%COMP%]     .mat-select-trigger{flex-grow:1}.mat-select[_ngcontent-%COMP%]     .mat-select-trigger .property-pane-select-menu-option{padding:0}.mat-select[_ngcontent-%COMP%]     .mat-select-trigger .property-pane-select-menu-option span{overflow:hidden;text-overflow:ellipsis}.mat-select[_ngcontent-%COMP%]     .mat-select-trigger .property-pane-select-menu-option .mat-icon{height:16px;line-height:16px;width:inherit;margin-right:8px;vertical-align:middle}  .mat-select-panel.property-pane-select-menu{padding-top:4px;padding-bottom:4px}  .mat-select-panel.property-pane-select-menu .property-pane-select-menu-option{padding-left:8px;padding-right:8px;height:28px}  .mat-select-panel.property-pane-select-menu .property-pane-select-menu-option .mat-option-text{line-height:initial}  .mat-select-panel.property-pane-select-menu .property-pane-select-menu-option .mat-icon{height:16px;line-height:16px;width:inherit;margin-right:8px;vertical-align:middle}"],changeDetection:0}),Qe}(),Mt=(t(47414),t(81996),t(84503),t(80681),t(6762),t(44099),t(40166)),bt=t(22478),tt=t(75995),Et=t(60040),Ft=t(25773),Tt=t(38838),Bt=t(64808),Ut=t(68572),Rt=t(23934),Gt=t(99273),Qt=t(17555),Nt=t(16850),Yt=t(70377),dn=t(46897),hn=t(18200),gn=t(78107),vn=t(9508),fn=jsCommon.FocusManager,mn=function(){function Qe(){this.focusManager=fn.getInstance()}return Qe.prototype.focusOnGroup=function(xe,He,Je,Ge,it){this.focusManager.focusOnGroupByIndex(xe,He,Je,Ge,it)},Qe.\u0275prov=de.\u0275\u0275defineInjectable({token:Qe,factory:Qe.\u0275fac=function(He){return new(He||Qe)},providedIn:"root"}),Qe}(),Cn=t(34429),_n=t(78359),yn=t(86479),Pn=t(13387),ln=t(48234),re=t(12029),W=t(74449),Z=t(77212),ee=t(95473),Te=t(92843),Ke=t(96935),Xe=t(3103),vt=t(77554),gt=t(81224),_t=t(5954),Wt=t(90207),$t=t(20522),Zt=t(8178),Jt=t(4104),en=t(85465),tn=t(73877),Xt=t(24708),nn=t(33185),on=t(22584),rn=t(46706),Dn=t(33714),jt=jsCommon.Color,wn=powerbi.data.DataViewTransform,zt=powerbi.explore.constants.ExploreCanvasConstants,An=powerbi.explore.FilterUtils,In=powerbi.visuals.Units.FontSize,sn=powerbi.Fill.isFill,Dt=powerbi.explore.contracts.Section.objectDescriptors,Tn=powerbi.explore.util.ThemeUtils,At=powerbi.explore.contracts.VisualContainer.CommonObjectDescriptors,Kn=powerbi.visuals.VisualBorderUtil,Vn=powerbi.explore.viewModels.VisualContainer,Gn=powerbi.explore.util.VisualTooltipStyleUtils,Qn={title:"ThemeDialog_Title",commit:"Apply",cancel:"Cancel_ButtonText",sections:[{name:"ThemeDialog_Section_Colors",subSections:[{name:"ThemeDialog_Section_Colors",subSections:[{name:"Name",description:"ThemeDialog_SubSection_Name_Desc"},{name:"ColorPicker_ThemeColors"},{name:"Waterfall_SentimentColors",description:"ThemeDialog_SubSection_SentimentColors_Desc"},{name:"ThemeDialog_SubSection_DivergentColors",description:"ThemeDialog_SubSection_DivergentColors_Desc"}]},{name:"Advanced",description:"ThemeDialog_SubSection_AdvancedColors_Desc"}]},{name:"Text",subSections:[{name:"Visual_General",description:"ThemeDialog_SubSection_General_Desc"},{name:"Title",description:"ThemeDialog_SubSection_Title_Desc"},{name:"ThemeDialog_SubSection_CardsKPIs",description:"ThemeDialog_SubSection_CardsKPIs_Desc"},{name:"ThemeDialog_SubSection_TabHeaders",description:"ThemeDialog_SubSection_TabHeaders_Desc"}]},{name:"Insert_Group_Visuals",subSections:[{name:"Visual_Background"},{name:"Visual_Border"},{name:"ThemeDialog_SubSection_Header",description:"ThemeDialog_SubSection_Header_Desc"},{name:"Tooltip",description:"ThemeDialog_SubSection_Tooltip_Desc"}]},{name:"Page",subSections:[{name:"PagePropertyPane_Outspace",description:"ThemeDialog_SubSection_Wallpaper_Desc"},{name:"PagePropertyPane_PageBackground",description:"ThemeDialog_SubSection_PageBackground_Desc"}]},{name:"Exploration_FilterPane",subSections:[{name:"Exploration_FilterPane",subSections:[{name:"Background_Color"},{name:"Transparency"},{name:"PagePropertyPane_OutspacePane_ForegroundColor"},{name:"ThemeDialog_SubSection_TitleFontSize",description:"ThemeDialog_SubSection_TitleFontSize_Desc"},{name:"Visual_Qna_HeaderFontSize",description:"ThemeDialog_SubSection_HeaderFontSize_Desc"},{name:"Checkbox_Apply_Color_Title",description:"Checkbox_Apply_Color_Description"}]},{name:"ThemeDialog_SubSection_AvailableFilterCards",description:"ThemeDialog_SubSection_AvailableFilterCards_Desc",subSections:[{name:"Background_Color"},{name:"Transparency"},{name:"PagePropertyPane_OutspacePane_ForegroundColor"},{name:"ThemeDialog_SubSection_FontSize"}]},{name:"ThemeDialog_SubSection_AppliedFilterCards",description:"ThemeDialog_SubSection_AppliedFilterCards_Desc",subSections:[{name:"Background_Color"},{name:"Transparency"},{name:"PagePropertyPane_OutspacePane_ForegroundColor"},{name:"ThemeDialog_SubSection_FontSize"}]}]}]},$n=function(){function Qe(xe,He,Je,Ge){this.telemetryService=xe,this.themeService=He,this.modernDialogService=Je,this.featureSwitchService=Ge,this._visualObjectDescriptors={background:{properties:{color:At.background.properties.color,transparency:At.background.properties.transparency}},border:{properties:{show:At.border.properties.show,color:At.border.properties.color,radius:At.border.properties.radius}},visualTooltip:{properties:{titleFontColor:At.visualTooltip.properties.titleFontColor,valueFontColor:At.visualTooltip.properties.valueFontColor,background:At.visualTooltip.properties.background,themedTitleFontColor:At.visualTooltip.properties.themedTitleFontColor,themedValueFontColor:At.visualTooltip.properties.themedValueFontColor,themedBackground:At.visualTooltip.properties.themedBackground,actionFontColor:At.visualTooltip.properties.actionFontColor}},visualHeader:{properties:{background:At.visualHeader.properties.background,border:At.visualHeader.properties.border,transparency:At.visualHeader.properties.transparency,foreground:At.visualHeader.properties.foreground}}},this._sectionObjectDescriptors={background:{properties:{color:Dt.background.properties.color,transparency:Dt.background.properties.transparency,image:Dt.background.properties.image}},outspace:{properties:{color:Dt.outspace.properties.color,transparency:Dt.outspace.properties.transparency,image:Dt.background.properties.image}},outspacePane:{properties:{backgroundColor:Dt.outspacePane.properties.backgroundColor,transparency:Dt.outspacePane.properties.transparency,foregroundColor:Dt.outspacePane.properties.foregroundColor,titleSize:Dt.outspacePane.properties.titleSize,headerSize:Dt.outspacePane.properties.headerSize,checkboxAndApplyColor:Dt.outspacePane.properties.checkboxAndApplyColor}},filterCard:{properties:{backgroundColor:Dt.filterCard.properties.backgroundColor,transparency:Dt.filterCard.properties.transparency,foregroundColor:Dt.filterCard.properties.foregroundColor,textSize:Dt.filterCard.properties.textSize}}},this.themeDialogToken=nn.Dx}return Qe.prototype.show=function(xe){var Je,He=this;this.customThemeName=null===(Je=xe.themeCollection.customTheme)||void 0===Je?void 0:Je.name;var Ge={bindings:{dataViewModel:this.generateViewModel(xe.themeCollection,xe.useEnhancedTooltips),dialogViewModel:this.buildDialogNavigationStructureViewModel()},dialogName:"ThemeDialog",componentName:this.themeDialogToken,config:{minWidth:750,panelClass:["hasNavigatableDialog"]}},it=this.modernDialogService.openHostDialog(Ge);return(0,Jt.D)(it).pipe((0,en.P)(),(0,tn.b)(function(rt){return rt.afterClosed()}),(0,Xt.U)(function(rt){if(He.sendThemeDialogClosedTelemetryEvent(rt),rt&&!_.isEmpty(rt))return He.updateCustomTheme(rt)}))},Qe.prototype.buildDialogNavigationStructureViewModel=function(){return Qn},Qe.prototype.generateViewModel=function(xe,He){var Je=this.themeService.getVisualStyle(xe),Ge=this.featureSwitchService.featureSwitches.baseThemeUpdate&&!Tn.isBaseThemeCurrent(xe),it=this.themeService.getVisualObjects(xe,"*",void 0,this.visualObjectDescriptors),rt=this.themeService.getVisualObjects(xe,"page",void 0,this.sectionObjectDescriptors),mt=wn.evaluateMetadataOnceDataViewObjectDefinitions(it,this.visualObjectDescriptors,Je,this.featureSwitchService.featureSwitches).dataViewObjects||{},Ct=wn.evaluateMetadataOnceDataViewObjectDefinitions(rt,Dt,Je,this.featureSwitchService.featureSwitches).dataViewObjects||{},Vt=powerbi.visuals.visualBackgroundHelper.getDefaultColor();Vt.solid.color=jsCommon.Color.normalizeToHexString(Vt.solid.color);var Lt=_.defaults(mt.background,{color:Vt,transparency:powerbi.visuals.visualBackgroundHelper.getDefaultTransparency()}),It=_.defaults(mt.border,Kn.getDefaultValues()),dt=this.generateTooltipStyles(Je,He,mt.visualTooltip),ut=jt.hexString(Vn.VisualHeaderBackgroundColor),Ot=_.defaults(mt.visualHeader,{background:{solid:{color:ut}},border:{solid:{color:ut}},foreground:{solid:{color:Je.colorPalette.foreground.value}},transparency:Vn.VisualHeaderTransparency}),St=Ct&&Ct.background;St&&sn(St.color)&&(St.color=St.color.solid.color);var xt=Ct&&Ct.outspace;xt&&sn(xt.color)&&(xt.color=xt.color.solid.color);var wt=Ct&&Ct.outspacePane;wt&&(sn(wt.backgroundColor)&&(wt.backgroundColor=wt.backgroundColor.solid.color),sn(wt.foregroundColor)&&(wt.foregroundColor=wt.foregroundColor.solid.color));var Kt=this.canvasBackground=_.defaults(Ct.background,{color:zt.DefaultCanvasBackgroundColor,transparency:zt.DefaultCanvasBackgroundTransparency}),On=_.defaults(Ct.outspace,{color:zt.DefaultCanvasOutspaceColor,transparency:zt.DefaultCanvasOutspaceTransparency}),pn=_.defaults(Ct.outspacePane,{backgroundColor:Je.colorPalette.background.value&&jsCommon.Color.normalizeToHexString(Je.colorPalette.background.value),transparency:zt.DefaultOutspacePaneTransparency,foregroundColor:Je.colorPalette.foreground.value&&jsCommon.Color.normalizeToHexString(Je.colorPalette.foreground.value),titleSize:zt.DefaultOutspacePaneTitleSizePt,headerSize:zt.DefaultOutspacePaneHeaderSizePt,checkboxAndApplyColor:zt.DefaultOutspacePaneCheckboxAndApplyColor}),bn=An.getFilterCardStyle(Ct,!0,Je),Sn=An.getFilterCardStyle(Ct,!1,Je);bn.fontSize=_.toString(In.createFromCSS(bn.fontSize).pt),Sn.fontSize=_.toString(In.createFromCSS(Sn.fontSize).pt);var xn={foreground:Je.colorPalette.foreground,foregroundNeutralSecondary:Je.colorPalette.foregroundNeutralSecondary,backgroundLight:Je.colorPalette.backgroundLight,foregroundNeutralTertiary:Je.colorPalette.foregroundNeutralTertiary,background:Je.colorPalette.background,backgroundNeutral:Je.colorPalette.backgroundNeutral};xn=_.mapValues(xn,function(Wi){return{value:jt.normalizeToHexString(Wi.value)}});var En=Je.colorPalette.dataColors,Fn=En.getGradientColors(),Ui={minColor:Fn.minColor,midColor:Fn.midColor,maxColor:Fn.maxColor},jn={baseThemeUpdateAvailable:Ge,dataColors:this.dataColors=En.getBaseColors(),themeColors:xn,gradientColors:Ui,sentimentColors:En.getSentimentColors(),textClasses:Je.textClasses,visualContainer:{background:Lt,border:It,tooltips:dt,header:Ot},page:{background:Kt,wallpaper:On,filterPane:pn,filterCards:{available:Sn,applied:bn}},useEnhancedTooltips:!!He};if(this.customThemeName){var Hn=this.themeService.getThemeJson(this.customThemeName).name;Hn!==Qe.defaultCustomThemeName&&(jn.name=Hn)}return jn},Object.defineProperty(Qe.prototype,"visualObjectDescriptors",{get:function(){return this._visualObjectDescriptors},enumerable:!1,configurable:!0}),Object.defineProperty(Qe.prototype,"sectionObjectDescriptors",{get:function(){return this._sectionObjectDescriptors},enumerable:!1,configurable:!0}),Qe.prototype.updateCustomTheme=function(xe){var He=_.keys(xe);if(this.featureSwitchService.featureSwitches.baseThemeUpdate&&1===He.length&&"updateBaseTheme"===_.first(He))return{customTheme:void 0,updateBaseTheme:!0};var Je=xe.name||Qe.defaultCustomThemeName,Ge=this.themeService.getThemeJson(this.customThemeName)||powerbi.common.parseCustomVisualTheme('{ "name": "'.concat(Je,'" }'));return null!=xe.name&&(Ge.name=Je),xe.textClasses&&(Ge.textClasses=_.merge(Ge.textClasses,this.generateTextClasses(xe.textClasses))),xe.dataColors&&(Ge.dataColors=this.mergeDataColors(xe.dataColors)),xe.themeColors&&_.assign(Ge,_.mapValues(xe.themeColors,function(rt){return rt&&rt.value})),xe.sentimentColors&&_.assign(Ge,_.mapValues(xe.sentimentColors,function(rt){return rt&&rt.value})),xe.gradientColors&&_.assign(Ge,this.generateGradientColors(xe.gradientColors)),(xe.page||xe.visualContainer)&&(Ge.visualStyles=_.mergeWith(Ge.visualStyles,this.generateVisualContainerObjects(xe.visualContainer),this.generatePageObjects(xe.page),function(mt,Ct){if(_.isArray(mt)&&_.isArray(Ct)){for(var Vt=function(Ot){var St=_.find(mt,function(xt){return xt.$id===Ot.$id});null==St?mt.push(Ot):_.merge(St,Ot)},Lt=0,It=Ct;Lt<It.length;Lt++)Vt(It[Lt]);return mt}})),{customTheme:_.omitBy(Ge,_.isNil),updateBaseTheme:xe.updateBaseTheme}},Qe.prototype.getPropertyCount=function(xe){return xe?_.keys(xe).length:0},Qe.prototype.getThemeSentimentAndGradientColorCount=function(xe){if(xe){var He=0;if(xe.dataColors){var Je=_.filter(xe.dataColors,function(Ge){return Ge&&void 0!==Ge.value});_.isEmpty(Je)||(He=Je.length)}return He+=this.getPropertyCount(xe.sentimentColors),(He+=this.getPropertyCount(xe.gradientColors))||void 0}},Qe.prototype.getTextFontPropertyCount=function(xe,He){if(xe&&xe.textClasses){var Je=0,Ge=xe.textClasses;return Ge.label&&Ge.label[He]&&Je++,Ge.title&&Ge.title[He]&&Je++,Ge.callout&&Ge.callout[He]&&Je++,Ge.header&&Ge.header[He]&&Je++,Je||void 0}},Qe.prototype.getVisualPropertyChangeCount=function(xe){if(xe&&xe.visualContainer){var He=xe.visualContainer,Je=0;return Je+=this.getPropertyCount(He.background),Je+=this.getPropertyCount(He.border),Je+=this.getPropertyCount(He.header),(Je+=this.getPropertyCount(He.tooltips))||void 0}},Qe.prototype.getPagePropertyCount=function(xe,He){if(xe&&xe.page){var Je=xe.page,Ge=0;return He?(Ge+=this.getPropertyCount(Je.wallpaper),Ge+=this.getPropertyCount(Je.background)):(Ge+=this.getPropertyCount(Je.filterPane),Je.filterCards&&(Ge+=this.getPropertyCount(Je.filterCards.applied),Ge+=this.getPropertyCount(Je.filterCards.available))),Ge||void 0}},Qe.prototype.sendThemeDialogClosedTelemetryEvent=function(xe){this.telemetryService.logEvent(powerbi.telemetry.EXThemeDialogClosed,{themeSentimentDivergentColorsCount:this.getThemeSentimentAndGradientColorCount(xe),advancedColorCount:xe&&xe.themeColors&&_.keys(xe.themeColors).length,textFontSizeCount:this.getTextFontPropertyCount(xe,"fontSize"),textFontFaceCount:this.getTextFontPropertyCount(xe,"fontFace"),textFontColorCount:this.getTextFontPropertyCount(xe,"color"),visualPropertyChangeCount:this.getVisualPropertyChangeCount(xe),pagePropertyChangeCount:this.getPagePropertyCount(xe,!0),filterPanePropertyChangeCount:this.getPagePropertyCount(xe,!1),isOldThemeTextClassesAccessed:xe&&xe.isOldThemeTextClassesAccessed})},Qe.prototype.generateTextClassesBySection=function(xe){var He={};return xe.color&&(He.color=xe.color.value),_.defaults(He,xe)},Qe.prototype.generateTextClasses=function(xe){if(xe){var He={};return xe.label&&(He.label=this.generateTextClassesBySection(xe.label)),xe.callout&&(He.callout=this.generateTextClassesBySection(xe.callout)),xe.title&&(He.title=this.generateTextClassesBySection(xe.title)),xe.header&&(He.header=this.generateTextClassesBySection(xe.header)),He}},Qe.prototype.mergeDataColors=function(xe){if(xe){var He=[];return _.assignWith(He,this.dataColors,xe,function(Je,Ge){return Ge||Je}),_.map(He,function(Je){return Je&&Je.value})}},Qe.prototype.generateGradientColors=function(xe){if(xe){var He={};for(var Je in xe){var Ge=xe[Je].value;switch(Je){case"minColor":He.minimum=Ge;break;case"midColor":He.center=Ge;break;case"maxColor":He.maximum=Ge}}return He}},Qe.prototype.generatePageObjects=function(xe){var He={};if(_.isEmpty(xe))return He;if((xe.background||xe.wallpaper)&&(He.page={"*":{}}),xe.background){var Je=xe.background.color;He.page["*"].background=[{color:Je&&{solid:{color:Je}},transparency:xe.background.transparency}]}if(xe.wallpaper){var Ge=xe.wallpaper.color;He.page["*"].outspace=[{color:Ge&&{solid:{color:Ge}},transparency:xe.wallpaper.transparency}]}var it=xe.filterPane,rt=xe.filterCards;if((rt||it)&&(He["*"]={"*":{}}),it){var mt=it.backgroundColor,Ct=it.foregroundColor,Vt=it.checkboxAndApplyColor;He["*"]["*"].outspacePane=[{backgroundColor:mt&&{solid:{color:mt}},transparency:it.transparency,foregroundColor:Ct&&{solid:{color:Ct}},titleSize:it.titleSize,headerSize:it.headerSize,checkboxAndApplyColor:Vt&&{solid:{color:Vt}}}]}if(rt){var Lt=He["*"]["*"].filterCard=[],It=rt.applied;if(It){var dt={$id:zt.Applied},Ot=void 0,St=It.foregroundColor;(ut=It.backgroundColor)&&!jt.isHexString(ut)&&(Ot=jt.getTransparencyFromString(ut),ut=jt.normalizeToHexString(ut)),dt.backgroundColor=ut&&{solid:{color:ut}},dt.foregroundColor=St&&{solid:{color:St}},null!=It.fontSize&&!isNaN(+It.fontSize)&&(dt.textSize=+It.fontSize),_.isNumber(Ot)&&(dt.transparency=Ot),Lt.push(dt)}var ut,xt=rt.available;if(xt)dt={$id:zt.Available},St=xt.foregroundColor,Ot=void 0,(ut=xt.backgroundColor)&&!jt.isHexString(ut)&&(Ot=jt.getTransparencyFromString(ut),ut=jt.normalizeToHexString(ut)),dt.backgroundColor=ut&&{solid:{color:ut}},dt.foregroundColor=St&&{solid:{color:St}},null!=xt.fontSize&&!isNaN(+xt.fontSize)&&(dt.textSize=+xt.fontSize),_.isNumber(Ot)&&(dt.transparency=Ot),Lt.push(dt)}return He},Qe.prototype.generateVisualContainerObjects=function(xe){var He={};if(_.isEmpty(xe))return He;He["*"]={"*":{}};var Je=He["*"]["*"],Ge=xe.background;Ge&&(Je.background=[{color:(it=Ge.color)&&{solid:{color:it.solid.color}},transparency:Ge.transparency}],He.page={"*":{background:[{color:{solid:{color:this.canvasBackground.color}},transparency:this.canvasBackground.transparency}]}});var rt=xe.border;if(rt){var mt=rt.color;Je.border=[{color:mt&&{solid:{color:mt.solid.color}},show:rt.show,radius:rt.radius}]}var Ct=xe.header;if(Ct){var Vt=Ct.background,Lt=Ct.foreground,It=Ct.border;Je.visualHeader=[{background:Vt&&{solid:{color:Vt.solid.color}},foreground:Lt&&{solid:{color:Lt.solid.color}},transparency:Ct.transparency,border:It&&{solid:{color:It.solid.color}}}]}var dt=xe.tooltips;if(dt){var it,ut=dt.titleFontColor,Ot=dt.valueFontColor,St=dt.themedTitleFontColor,xt=dt.themedValueFontColor,wt=dt.themedBackground,Kt=dt.actionFontColor;Je.visualTooltip=[{titleFontColor:ut&&{solid:{color:ut.solid.color}},valueFontColor:Ot&&{solid:{color:Ot.solid.color}},background:(it=dt.background)&&{solid:{color:it.solid.color}},themedTitleFontColor:St&&{solid:{color:St.solid.color}},themedValueFontColor:xt&&{solid:{color:xt.solid.color}},themedBackground:wt&&{solid:{color:wt.solid.color}},actionFontColor:Kt&&{solid:{color:Kt.solid.color}}}],Je.visualHeaderTooltip=[{titleFontColor:ut&&{solid:{color:ut.solid.color}},themedTitleFontColor:St&&{solid:{color:St.solid.color}},background:it&&{solid:{color:it.solid.color}},themedBackground:wt&&{solid:{color:wt.solid.color}}}]}return He},Qe.prototype.generateTooltipStyles=function(xe,He,Je){var Ge=Gn.getVisualTooltipStyles(xe,He,!1,Je),it={solid:{color:Ge.titleFontProperties.color}},rt={solid:{color:Ge.valueFontProperties.color}},Ct=Ge.background;return He?{themedTitleFontColor:it,themedValueFontColor:rt,themedBackground:Ct,actionFontColor:Ge.actionFontProperties?{solid:{color:Ge.actionFontProperties.color}}:void 0}:{titleFontColor:it,valueFontColor:rt,background:Ct}},Qe.defaultCustomThemeName=Tn.CustomThemeName,Qe.\u0275fac=function(He){return new(He||Qe)(de.\u0275\u0275inject(q.y0),de.\u0275\u0275inject(on.f),de.\u0275\u0275inject(rn.x),de.\u0275\u0275inject(Dn.vZ))},Qe.\u0275prov=de.\u0275\u0275defineInjectable({token:Qe,factory:Qe.\u0275fac,providedIn:"root"}),Qe}(),Zn=t(42),Jn=t(5801),Xn=t(58791),Bn=t(90085),Ln=t(18103),Rn=t(34480),kn=t(93838),Yn=t(29541),qn=t(9020),ei=t(78485),ti=function(){function Qe(){}return Qe.\u0275fac=function(He){return new(He||Qe)},Qe.\u0275mod=de.\u0275\u0275defineNgModule({type:Qe}),Qe.\u0275inj=de.\u0275\u0275defineInjector({providers:[(0,tt.tp)("bookmarkService",Et.F),(0,tt.te)("bookmarkPlay",{component:ot.d}),(0,tt.tp)("canvasKeyHandler",Ft.Z),(0,tt.tp)("canvasScale",Tt.Z),(0,tt.te)("canvasVisualHeaderIcon",{component:De.f}),(0,tt.tp)("canvasWheelHandler",Bt.H),(0,tt.tp)("changeDetectionMeasure",Ut.C),(0,tt.Y2)("commandStore",bt.D),(0,tt.tp)("deleteVisual",Rt.K),(0,tt.te)("dotGrid",{component:qe.L}),(0,tt.tp)("drillToDetails",Qt.M),(0,tt.tp)("dropdown",Nt.V),(0,tt.tp)("explorationCapabilities",Yt.U),(0,tt.Y2)("explorationExtensibilityService",dn.W),(0,tt.te)("downgradedExplorationFooterModern",{component:st.H}),(0,tt.te)("explorationPaneHeader",{component:Te.m}),(0,tt.te)("explorationPaneDowngraded",{component:ee.V}),(0,tt.te)("explorationPaneSectionDowngraded",{component:Ke.i}),(0,tt.Y2)("exportToExcelProxy",gn.U),(0,tt.tp)("formFactor",Cn.F),(0,tt.Y2)("favoriteVisualLoader",vn.W),(0,tt.Y2)("focus",mn),(0,tt.tp)("groupAuthoring",_n.RD),(0,tt.Y2)("highContrastThemeGenerationService",yn.S),(0,tt.te)("instancePickerModern",{component:ln.O}),(0,tt.tp)("importVisual",Pn.W),(0,tt.tp)("layoutAuthoring",re.U),(0,tt.Y2)("visualPaneSettingsService",Yn.R),(0,tt.te)("filterRestatement",{component:Ue.W}),(0,tt.te)("iconSetPicker",{component:B.V}),(0,tt.te)("iconSetPickerInput",{component:U.Z}),(0,tt.Y2)("modernScopedRootRegistrar",gt.v_),(0,tt.te)("downgradedOutspacePane",{component:H.t}),(0,tt.tp)("panesVisibility",Z.r),(0,tt.te)("paneSwitcherLazy",{component:oe.A}),(0,tt.te)("penAnnotation",{component:te.S}),(0,tt.te)("performancePaneLazy",{component:_e.C}),(0,tt.tp)("pinVisual",Xe.k),(0,tt.te)("propertyPaneSelectMenu",{component:Ye}),(0,tt.tp)("showValueAsService",Wt.P),(0,tt.Y2)("settingsService",_t.g),(0,tt.tp)("sparklinesService",$t.s),(0,tt.te)("svgUseSymbol",{component:Zt.k}),(0,tt.Y2)("themeDialogService",$n),(0,tt.fp)("upgradedInstancePicker",{bindings:{mode:"<",filter:"<",model:"="},template:'<instance-picker ng-model="$ctrl.model" mode="$ctrl.mode" filter="$ctrl.filter"></instance-picker>'}),(0,tt.tp)("viewModeState",Zn.kc),(0,tt.tp)("visualAuthoring",Jn.$),(0,tt.te)("visualContainerPinButton",{component:Bn.c}),(0,tt.te)("visualContainerRefreshButton",{component:Ln.Y}),(0,tt.te)("visualContainerRelationshipFilters",{component:Rn.Q}),(0,tt.te)("downgradedVisualHeaderItemContainer",{component:kn.Y}),(0,tt.te)("downgradedVisualModern",{component:Mt.y}),(0,tt.tp)("visualSync",qn.M),(0,tt.te)("visualTypesContainerModern",{component:ei.r}),(0,tt.te)("durationPicker",{component:je.w}),(0,tt.Y2)("layoutInsertionHelper",W.m),(0,tt.Y2)("resourcePackageCopyService",vt.V),(0,tt.tp)("exportData",hn.I),(0,tt.tp)("visualContainerCopy",Xn.w)],imports:[Gt.M]}),Qe}(),ni=t(87747),ii=t(29494),oi=new de.InjectionToken("ExplorationDataReaderExtensionCanEditSchemas"),ai={provide:ni.rc,useFactory:function(Qe,xe){var He=Qe.get(oi,!1),Je={};return powerbi.explore.dataReaderPlugins.registerExplorationDataReaderExtension(Je,xe,He),Je},deps:[de.Injector,ii.t]},li=t(27419),si=t(90645),Oi=(t(34109),t(77890),t(90020),t(20671),t(65909),t(75206),t(65129),t(97623),t(3977),t(76364),t(82012),t(92331),t(86715),t(18870),t(33791)),Si=(t(48579),t(48394)),xi=t(98949),Ei=t(63099),Fi=t(38281),Un=function(){function Qe(){}return Qe.\u0275fac=function(He){return new(He||Qe)},Qe.\u0275mod=de.\u0275\u0275defineNgModule({type:Qe}),Qe.\u0275inj=de.\u0275\u0275defineInjector({providers:[(0,tt.te)("iconPicker",{component:Fi.I})],imports:[n.CommonModule,J._,xi.Q,Ei.j,ge.v]}),Qe}(),an=t(67880),Ht=t(21810),qt=t(584),zn=t(89313),Wn=t(23920),Nn=t(60717),Di=t(37473),wi=t(28044),Ai=t(48007),Ii=t(98632),kt=t(80966),Ti=t(93171),Vi=t(874);function un(Qe){var He=Qe.parameters;return Qe.featureSwitches&&He&&He.powerBISpinnerImprovements}var Li=function(){function Qe(xe,He,Je){var Ge=this;this.contextActivityService=xe,this.spinnerStoreService=He,this.featureSwitchService=Je,this.initializeReportSpinnerActivity$=(0,e.GW)(function(){return Ge.contextActivityService.getActivityStream().pipe((0,an.n)(function(it){return!un(Ge.featureSwitchService)}),(0,e.l4)(kt.TV),(0,Ht.h)(function(it){var rt=it.properties;return"Open Report"===rt.name||"Get Conceptual Schema"===rt.name||"Get Exploration"===rt.name}),(0,qt.b)(function(it){null==Ge.loadingScreenActivity&&"Open Report"===it.properties.name&&(Ge.loadingScreenActivity=Ge.contextActivityService.createActivity({name:"Loading Screen"})),Ge.spinnerStoreService.addActivity(),"Open Report"===it.properties.name?(Ge.currentOpenReport=it.properties.rootId,Ge.spinnerStoreService.setProgressPercent(0),Ge.spinnerStoreService.showLoadingBar()):Ge.partOneComplete=!1}))},{dispatch:!1}),this.endSpinnerActivity$=(0,e.GW)(function(){return Ge.contextActivityService.getActivityStream().pipe((0,an.n)(function(it){return!un(Ge.featureSwitchService)}),(0,e.l4)(kt.TH,kt.xq,kt.Gb),(0,Ht.h)(function(it){var rt=it.properties;return("Get Conceptual Schema"===rt.name||"Get Exploration"===rt.name||"Render"===rt.name)&&rt.rootId===Ge.currentOpenReport}),(0,e.IC)(function(){return Ge.spinnerStoreService.activityState$}),(0,qt.b)(function(it){it[1].max>0&&Ge.spinnerStoreService.endActivity()}),(0,Xt.U)(function(it){return it[0]}),(0,Ht.h)(function(it){var rt=it.properties;return"Get Conceptual Schema"===rt.name||"Get Exploration"===rt.name}),(0,qt.b)(function(it){Ge.partOneComplete&&Ge.spinnerStoreService.setProgressPercent(30),Ge.partOneComplete=!0}))},{dispatch:!1}),this.endAllSpinnerActivities$=(0,e.GW)(function(){return Ge.contextActivityService.getActivityStream().pipe((0,an.n)(function(it){return!un(Ge.featureSwitchService)}),(0,e.l4)(kt.TH,kt.xq,kt.Gb),(0,Ht.h)(function(it){var rt=it.properties;return"Open Report"===rt.name&&rt.rootId===Ge.currentOpenReport}),(0,e.IC)(function(){return Ge.spinnerStoreService.activityState$}),(0,qt.b)(function(it){it[1].max>0&&Ge.endLoadingSession()}))},{dispatch:!1}),this.vcPrimerStartedActivity$=(0,e.GW)(function(){return Ge.contextActivityService.getActivityStream().pipe((0,an.n)(function(it){return!un(Ge.featureSwitchService)}),(0,e.l4)(kt.TV),(0,Ht.h)(function(it){var rt=it.properties;return"Visual Container Prerun Setup"===rt.name&&rt.rootId===Ge.currentOpenReport}),(0,Xt.U)(function(it){var rt=it.properties,mt=0,Ct=0;return rt.visualsToPrime>0&&(Ct=rt.visualsToPrime,mt=Math.floor(Ct*Ge.featureSwitchService.parameters.deferVCLoading_loadFinishThreshold),Ge.spinnerStoreService.addManyActivities(mt)),Ge.spinnerStoreService.endActivity(),(0===mt||0===Ct)&&Ge.endLoadingSession(mt,Ct),[mt,Ct]}),(0,Ht.h)(function(it){return it[0]>0&&it[1]>0}),(0,zn.zg)(function(it){var rt=it[0],mt=it[1];Ge.spinnerStoreService.showLoadingBar();var Ct=Ge.currentOpenReport,Vt=3*rt,Lt=Ge.contextActivityService.getActivityStream().pipe((0,e.l4)(kt.TH,kt.xq,kt.Gb),(0,Ht.h)(function(dt){var ut=dt.properties;return("Render"===ut.name||"Query"===ut.name||"Visual Container Module Load"===ut.name)&&ut.rootId===Ge.currentOpenReport}),(0,Wn.R)(function(dt){return dt+1},0),(0,e.IC)(function(){return Ge.spinnerStoreService.activityState$}),(0,qt.b)(function(dt){var ut=dt[0],St=30+ut/Vt*70;St>dt[1].progress&&Ge.spinnerStoreService.setProgressPercent(St),ut===Vt&&Ge.endLoadingSession(rt,mt)}),(0,Nn.o)(function(dt){return dt[0]<=Vt&&dt[1].loadingBarVisible&&Ge.currentOpenReport===Ct})),It=Ge.contextActivityService.getActivityStream().pipe((0,e.l4)(kt.TV),(0,Ht.h)(function(dt){var ut=dt.properties;return"Visual Container Primed"===ut.name&&ut.rootId===Ge.currentOpenReport}),(0,Wn.R)(function(dt){return dt+1},0),(0,an.n)(function(dt){return dt<mt}),(0,Di.q)(1),(0,zn.zg)(function(dt){var ut=Ge.featureSwitchService.parameters.deferVCLoading_timeoutLimit;if(0===ut)return Ge.endLoadingSession(rt,mt,!0),(0,wi.of)(void 0);var Ot=ut/7;Ot=Math.max(Ot,100);var St=ut/Ot;return(0,Ai.F)(Ot).pipe((0,e.IC)(function(){return Ge.spinnerStoreService.activityState$}),(0,Nn.o)(function(xt){return xt[1].loadingBarVisible&&xt[0]<=St&&Ge.currentOpenReport===Ct}),(0,qt.b)(function(xt){var wt=xt[0],pn=30+wt*Ot/ut*70;pn>xt[1].progress&&Ge.spinnerStoreService.setProgressPercent(pn),wt===St&&Ge.endLoadingSession(rt,mt,!0)}))}));return(0,Ii.aj)([Lt,It])}))},{dispatch:!1}),this.partOneComplete=!1}return Qe.prototype.endLoadingSession=function(xe,He,Je){this.spinnerStoreService.resetState(),this.currentOpenReport=void 0,this.loadingScreenActivity&&(this.loadingScreenActivity.setProperty("timeoutReached",Je),this.loadingScreenActivity.setProperty("primeThreshold",xe),this.loadingScreenActivity.setProperty("visualsToPrimeCount",He),this.loadingScreenActivity.resolve(),this.loadingScreenActivity=void 0)},Qe.\u0275fac=function(He){return new(He||Qe)(de.\u0275\u0275inject(Ti.r),de.\u0275\u0275inject(Vi.Y),de.\u0275\u0275inject(Dn.vZ))},Qe.\u0275prov=de.\u0275\u0275defineInjectable({token:Qe,factory:Qe.\u0275fac}),Qe}(),Ri=t(18266),ki=function(){function Qe(xe){this.subscription=xe.loaded$.subscribe(function(He){He&&powerbi.explore.services.VisualHostServices.initialize(xe)})}return Qe.prototype.ngOnDestroy=function(){this.subscription||this.subscription.unsubscribe()},Qe.\u0275fac=function(He){return new(He||Qe)(de.\u0275\u0275inject(Ri.o))},Qe.\u0275mod=de.\u0275\u0275defineNgModule({type:Qe}),Qe.\u0275inj=de.\u0275\u0275defineInjector({providers:[li.p7,si.xW,ai],imports:[n.CommonModule,p.S,Si.p,C.O,ti,f._t,e.sQ.forFeature([Li]),A.F,S.A3,O.u5,L.L,Un,D.InformationProtectionUICommonModule,m.N,m.N.withLazyScopedServices([{serviceName:"bookmarkOnLoad",modulePath:"./lazy-modules/bookmark-on-load/bookmark-on-load.module#BookmarkOnLoadModule"}]),m.N.withLazyScopedServices([{serviceName:"insightsAnalysisDefinitionBuilder",modulePath:"@powerbi/Insights/insights.module#InsightsModule"}]),m.N.withLazyScopedServices([{serviceName:"insightsAnalysisResultHandler",modulePath:"@powerbi/Insights/insights.module#InsightsModule"}]),m.N.withLazyScopedServices([{serviceName:"insightsAnalysisModern",modulePath:"@powerbi/Insights/insights.module#InsightsModule"}]),m.N.withLazyScopedServices([{serviceName:"insightsLauncher",modulePath:"@powerbi/InsightsUI/module#InsightsUIModule"}]),m.N.withLazyScopedServices([{serviceName:"insightsPaneStateManager",modulePath:"@powerbi/InsightsUI/module#InsightsUIModule"}]),m.N.withLazyScopedServices([{serviceName:"customVisualsStore",modulePath:"@powerbi/CustomVisualsGallery/modules/custom-visuals-store.module#CustomVisualsStoreModule"}]),m.N.withLazyScopedServices([{serviceName:"customVisualsStoreMetadata",modulePath:"@powerbi/CustomVisualsGallery/modules/custom-visuals-store.module#CustomVisualsStoreModule"}]),m.N.withLazyScopedServices([{serviceName:"drillthrough",modulePath:"./lazy-modules/drill-through/drill-through.module#DrillThroughModule"}]),m.N.withLazyScopedServices([{serviceName:"qnaPopoutBuilderModern",modulePath:"@powerbi/QnaReportContainer/module#QnaReportContainerModule"}]),m.N.withLazyScopedServices([{serviceName:"quickCalcModern",modulePath:"@powerbi/DaxTemplate/quick-calc.module#QuickCalcModule"}]),m.N.withLazyScopedServices([{serviceName:"persistentState",modulePath:"@powerbi/ExplorationPersistentState/exploration-persistent-state.module#ExplorationPersistentStateModule"}]),m.N.withLazyScopedServices([{serviceName:"originalExplorationState",modulePath:"@powerbi/ExplorationPersistentState/exploration-persistent-state.module#ExplorationPersistentStateModule"}]),m.N.withLazyScopedServices([{serviceName:"dirtyStateHandler",modulePath:"@powerbi/ExplorationPersistentState/exploration-persistent-state.module#ExplorationPersistentStateModule"}]),m.N.withLazyScopedServices([{serviceName:"personalBookmarks",modulePath:"@powerbi/WebBookmarks/web-bookmarks.module#WebBookmarksModule"}]),m.N.withLazyScopedServices([{serviceName:"visualRecommendationService",modulePath:"./lazy-modules/visual-recommendation/visual-recommendation-provider.module#VisualRecommendationProviderModule"}]),m.N.withLazyScopedServices([{serviceName:"authoringVisualRecommendationInterop",modulePath:"./lazy-modules/visual-recommendation/visual-recommendation-provider.module#VisualRecommendationProviderModule"}]),m.N.withLazyScopedServices([{serviceName:"smartNarrativesSummarization",modulePath:"@powerbi/SmartNarratives/smart-narratives.module#SmartNarrativesModule"}]),m.N.withLazyScopedServices([{serviceName:"smartNarratives",modulePath:"@powerbi/SmartNarratives/smart-narratives.module#SmartNarrativesModule"}]),m.N.withLazyScopedServices([{serviceName:"zIndexService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),m.N.withLazyScopedServices([{serviceName:"bookmarkAuthoringService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),m.N.withLazyScopedServices([{serviceName:"tabOrderService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),m.N.withLazyScopedServices([{serviceName:"canvasListOrderingService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),m.N.withLazyScopedServices([{serviceName:"conditionalFormattingDialogLauncherService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),m.N.withLazyScopedServices([{serviceName:"dataBarsDialogLauncherService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),m.N.withLazyScopedServices([{serviceName:"automatedInsightsQuery",modulePath:"@powerbi/AutomatedInsights/automated-insights-lazy.module#AutomatedInsightsLazyModule"}]),m.N.withLazyScopedServices([{serviceName:"visualHostTooltipActionsProvider",modulePath:"./lazy-modules/visual-host-tooltip-actions-provider/visual-host-tooltip-actions-provider.module#VisualHostTooltipActionsProviderModule"}]),m.N.withLazyScopedServices([{serviceName:"connectToDataService",modulePath:"@powerbi/ConnectToDataDialog/connect-to-data-dialog.module#ConnectToDataDialogModule"}]),m.N.withLazyScopedServices([{serviceName:"explorationAuthoring",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),m.N.withLazyScopedServices([{serviceName:"fieldWellModernService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),m.N.withLazyScopedServices([{serviceName:"exportVisualData",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-ui-authoring/explore-ui-authoring.module#ExploreUIAuthoringModule"}]),m.N.withLazyScopedServices([{serviceName:"userEmulationService",modulePath:"./lazy-modules/user-emulation/user-emulation.module#UserEmulationModule"}]),m.N.withLazyScopedServices([{serviceName:"visualContainerSkittlesService",modulePath:"./lazy-modules/visual-container-skittles/visual-container-skittles.module#VisualContainerSkittlesModule"}]),m.N.withLazyScopedServices([{serviceName:"formattingStore",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-formatting/explore-formatting.module#ExploreFormattingModule"}]),m.N.withLazyScopedServices([{serviceName:"formattingStoreLegacy",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-formatting/explore-formatting.module#ExploreFormattingModule"}]),m.N.withLazyScopedServices([{serviceName:"formattingModelService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-formatting/explore-formatting.module#ExploreFormattingModule"}]),m.N.withLazyScopedServices([{serviceName:"formattingService",modulePath:"@powerbi/ExploreUIAuthoring/lazy-modules/explore-formatting/explore-formatting.module#ExploreFormattingModule"}]),ge.v,h.ot,Me.x,M.p9,V.To,I.Ps,b.c,P.Fk,g.LD,u.dp,ce.d,ye.z,me.b,J._,ie.gd,G.U,j.b,E.K,F.x,k.Z,R.J,z.O,Q.Zz,O.UX,T.ym,i.Bz.forChild(pe),K.a,q.e3,Le.T6,Ne.g,s.xg,be.D,Oi.Q,Y.c,ue._,le.w,Un,le.w]}),Qe}()},49942:function(Ve,se,t){t.d(se,{H:function(){return Ee}});var e=t(7005),n=t(22084),f=t(73637),i=t(16660),O=t(18766),T=t(9161),V=t(18266),h=t(28252),M=t(5801),I=t(71442),b=t(56339),P=powerbi.data,g=powerbi.explore,s=powerbi.visuals,p=s.AnomalyDetectionObjectConstants,C=s.AnomalyDetectionTransformConstants,A=s.cartesianRoleNames,S=P.DataViewObjectDefinitions,L=s.ForecastHelper,D=P.ScalarKeyUtils.isScalarKeySupportedForRole,m=powerbi.visuals.AnomalyDetectionVisualPlugin.isSingleDateColumn,v=powerbi.visuals.plugins,l=s.referenceLineObjectName,y=g.util.VisualContainerUtils,d=function(){function we(Se,Re,$e,Ye,et,at,nt,pt){this.conceptualSchemaProxy=Se,this.dataSourcesService=Re,this.localizationService=$e,this.telemetryService=Ye,this.undoRedoService=et,this.visualAuthoringService=at,this.visualAuthoringOperations=nt,this.visualPluginService=pt}return we.prototype.supportsAnalyticsObject=function(Se,Re){return(0,e.mG)(this,void 0,void 0,function(){var $e,Ye,et;return(0,e.Jh)(this,function(at){switch(at.label){case 0:return at.trys.push([0,2,,3]),$e=this.dataSourcesService.get(),_.isEmpty($e)?[2,!1]:[4,this.conceptualSchemaProxy.get($e)];case 1:return Ye=at.sent(),[2,this.supportsAnalyticsAuthoring(Se,Re,Ye)];case 2:return et=at.sent(),this.telemetryService.logEvent(powerbi.telemetry.EXAnalyticsLoadSchemaError,{message:et}),[2,!1];case 3:return[2]}})})},we.prototype.addAnalyticsObject=function(Se,Re){var $e=this;if(Se&&Re){var Ye=y.getVisualQuery(Se),et=this.getCartesianYRoleName(Se);if(et){var at=Ye.getQueryRefByProjectionIndex(et,0);if(at){var pt={id:"1",metadata:at},ct=y.getObjectDefinitions(Se);ct&&S.getObjectDefinition(ct,p.capabilityObjectName,pt)||this.undoRedoService.register("addAnalyticsObject",function(){return $e.setAnalyticsObjectProperties(Se,pt,Re),$e.visualAuthoringService.raiseVisualContainerChanged(Se),!0})}}}},we.prototype.getCartesianYRoleName=function(Se){var Re=y.getVisualCapabilities(Se,this.visualPluginService),$e=_.find(Re.dataRoles,function(Ye){return 1===Ye.cartesianKind});if($e)return $e.name},we.prototype.setAnalyticsObjectProperties=function(Se,Re,$e){var Ye,et;switch($e){case p.capabilityObjectName:Ye={algorithm:C.transformPluginName,parameters:[{name:p.sensitivitySliceName,expr:P.SQExprBuilder.double(C.defaultSensitivityValue)}]},et=P.SQExprBuilder.text(P.getDisplayName(P.createDisplayNameGetter("Visual_AnomalyDetection"),this.localizationService)+" "+Re.id);break;case L.forecastObjectName:Ye={algorithm:"Forecast",parameters:[{name:"Unit",expr:P.SQExprBuilder.integer(7)},{name:"ForecastLength",expr:P.SQExprBuilder.integer(10)},{name:"IgnoreLast",expr:P.SQExprBuilder.integer(0)},{name:"ConfidenceLevel",expr:P.SQExprBuilder.double(.95)}]},et=P.SQExprBuilder.text(P.getDisplayName(P.createDisplayNameGetter("Visual_Forecast"),this.localizationService)+" "+Re.id)}this.visualAuthoringOperations.addProperty(Se,{objectName:$e,propertyName:C.transformPropertyName},Re,Ye),this.visualAuthoringOperations.addProperty(Se,{objectName:$e,propertyName:"show"},Re,P.SQExprBuilder.boolean(!0)),this.visualAuthoringOperations.addProperty(Se,{objectName:$e,propertyName:"displayName"},Re,et)},we.prototype.supportsAnalyticsAuthoring=function(Se,Re,$e){if(!(Se&&Re&&$e&&this.supportedAnalyticsVisualType(Se,Re)))return!1;var Ye=y.getObjectDefinitions(Se);switch(Re){case p.capabilityObjectName:if(Ye&&(Ye[L.forecastObjectName]||Ye[l]))return!1;break;case L.forecastObjectName:if(Ye&&Ye[p.capabilityObjectName])return!1}var et=y.getVisualQuery(Se);if(!et)return!1;var at=et.tryGetExprs(A.category);return m(at,$e)||D($e,et.defn,et.projections,A.category)},we.prototype.supportedAnalyticsVisualType=function(Se,Re){var $e=y.getVisualType(Se);switch(Re){case p.capabilityObjectName:case L.forecastObjectName:return $e===v.lineChart.name;default:return!1}},we.\u0275fac=function(Re){return new(Re||we)(f.\u0275\u0275inject(i.i),f.\u0275\u0275inject(O.D),f.\u0275\u0275inject(V.o),f.\u0275\u0275inject(h.y0),f.\u0275\u0275inject(T.z),f.\u0275\u0275inject(M.$),f.\u0275\u0275inject(I.Q),f.\u0275\u0275inject(b.D))},we.\u0275prov=f.\u0275\u0275defineInjectable({token:we,factory:we.\u0275fac}),we}(),w=t(54347),x=t(9662),N=t(60040),X=t(25773),ne=t(38838),Ce=t(64808),he=t(41541),Fe=t(68572),fe=t(33339),ae=t(69959),pe=t(16850),ge=t(49363),Me=t(23934),ce=t(17555),J=t(18200),ie=t(70377),G=t(33401),j=t(13034),F=t(18160),E=t(18179),k=t(34429),R=t(78359),z=t(13387),Q=t(58168),me=t(12029),le=t(67471),K=t(90645),q=t(28408),ye=t(3103),Le=t(99016),Ne=t(27419),be=t(62802),Y=t(33714),ue=t(31970),Pe=t(31854),Ae=t(25412),Ze=t(27700),lt={provide:Ae.b,useFactory:function(we,Se,Re,$e,Ye,et,at){var nt=et.get(Ae.m,null);return nt?f.Injector.create({providers:[nt],parent:et}).get(Ae.b):powerbi.explore.services.createScriptVisualsService(Re,we,Se,$e,at,Ye)},deps:[Y.vZ,V.o,b.D,Pe.a,ue.E,f.Injector,[new f.Optional,Ze.X]]},yt=t(90207),De=t(20522),Ie=t(42),Oe=t(35385),Be=t(58791),qe=t(27262),je=t(36670),st=t(848),ht=t(9195),Pt=t(23276),ze=t(9020),ke=t(80681),We=t(85867),Ue=t(84064),ve=t(25991),r=t(3822),o=t(25956),a=t(96426),c=t(8870),B=t(27416),U=t(6631),H=t(77212),oe=t(53270),te=t(35010),_e=t(46706),de=function(){function we(Se,Re,$e,Ye,et){this.dataSources=Se,this.dialogService=Re,this.explorationNavigation=$e,this.localizationService=Ye,this.visualAuthoring=et}return we.prototype.showMapConversionDialog=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function($e){switch($e.label){case 0:return[4,this.dialogService.showConfirmationDialog({title:this.localizationService.get("AzureMapVisual_ConversionDialog_Title"),message:this.localizationService.format("AzureMapVisual_ConversionDialog_Message",["<b>".concat(this.localizationService.get("AzureMapVisual_ConversionDialog_OK"),"</b>"),'<a class="link pbi-external-link"\n                        href="https://learn.microsoft.com/azure/azure-maps/power-bi-visual-migrate-from-bing-maps"\n                        target="_blank">'.concat(this.localizationService.get("Generic_LearnMore"),"</a>")]),okButtonText:this.localizationService.get("AzureMapVisual_ConversionDialog_OK"),cancelButtonText:this.localizationService.get("NoThanks")},{width:"500px",autoFocus:!0,disableClose:!0}).afterClosed().toPromise()];case 1:return 1===$e.sent()&&this.upgradeAllMapVisuals(),[2]}})})},we.prototype.hasMapOrFilledMapVisual=function(Se){if(!_.isEmpty(Se.sections))for(var Re=0,$e=Se.sections;Re<$e.length;Re++){var et=$e[Re].visualContainers;if(!_.isEmpty(et))for(var at=0,nt=et;at<nt.length;at++){var ct=nt[at].config.singleVisual.visualType;if("map"===ct||"filledMap"===ct)return!0}}return!1},we.prototype.upgradeAllMapVisuals=function(){var Re=(0,e.ev)((0,e.ev)([],this.explorationNavigation.getAllVisualContainers("map"),!0),this.explorationNavigation.getAllVisualContainers("filledMap"),!0);this.visualAuthoring.convertMultiple(Re,this.dataSources.get(),"azureMap")},we.\u0275fac=function(Re){return new(Re||we)(f.\u0275\u0275inject(O.D),f.\u0275\u0275inject(_e.x),f.\u0275\u0275inject(ve.z),f.\u0275\u0275inject(V.o),f.\u0275\u0275inject(M.$))},we.\u0275prov=f.\u0275\u0275defineInjectable({token:we,factory:we.\u0275fac}),we}(),Ee=(0,e.ev)((0,e.ev)((0,e.ev)((0,e.ev)((0,e.ev)((0,e.ev)((0,e.ev)([],Ue.K,!0),r.H,!0),c.t,!0),B.K,!0),te.W,!0),U.V,!0),[n.w,d,w.Z,x.G,de,N.F,X.Z,ne.Z,Ce.H,he.w,{provide:he.Z,useValue:ke.f},Fe.C,fe.e,ae.L,Me.K,ce.M,pe.V,J.I,ie.U,G.I,{provide:ve.z,useExisting:G.I},j.j,Ne.L_,K.z_,ge.Sn,F.x,E.I,k.F,o.c,a.eE,R.wG,z.W,Q.Y,me.U,K.tC,q.F,H.r,ye.k,Le.I,le.H,be.cW,lt,yt.P,De.s,oe._,Ie.kc,I.Q,{provide:Oe.t,useExisting:M.$},M.$,Be.w,je.p,qe.s,ht.k,st.K,Pt.z,ze.M,We.g],!1)},22084:function(Ve,se,t){t.d(se,{w:function(){return S}});var e=t(7005),n=t(37899),f=t(73637),i=t(16660),O=t(97186),T=t(18766),V=t(59897),h=t(33714),M=t(22584),I=t(56339),b=powerbi.visuals.dataQueryVisualRoles,P=powerbi.data.DataViewObjectDefinitions,g=powerbi.data.DataViewTransform,u=powerbi.data.InlineSubqueryRewriter,s=powerbi.data.SemanticQuery,p=powerbi.data.SQExprBuilder,C=powerbi.explore.contracts.VisualQuery,A=powerbi.visuals.plugins.dataQueryVisual.name,S=function(){function D(m,v,l,y,d,w,x){this.conceptualSchemaProxy=m,this.dataProxy=v,this.dataSources=l,this.featureSwitchService=y,this.themeService=d,this.visualPlugin=w,this.visualQueryGenerator=x}return D.prototype.getValues=function(m,v){return(0,e.mG)(this,void 0,void 0,function(){var l,y,d,w,x,N;return(0,e.Jh)(this,function(ne){switch(ne.label){case 0:return(l=v&&v.executionOptions&&v.executionOptions.performanceActivity)&&(y=l.createChildActivity({name:"Query",component:n.I})),[4,this.generateQuery(m,v,y)];case 1:return(d=ne.sent()).error?(null==y||y.reject(),[2,{error:d.error}]):[4,this.runQuery(d,v,y)];case 2:return(w=ne.sent()).error?(null==y||y.reject(),[2,{error:w.error}]):(y&&y.resolve(),(x=this.generateDataView(l,w.result,d)).error?[2,{error:x.error}]:[2,{result:(N=x.result).table.rows,columns:N.table.columns}])}})})},D.prototype.generateDataQuery=function(m,v){return(0,e.mG)(this,void 0,void 0,function(){var l;return(0,e.Jh)(this,function(y){switch(y.label){case 0:return[4,this.generateQuery(m,v)];case 1:return[2,{query:(l=y.sent()).options&&l.options.query&&l.options.query.command,error:l.error,warnings:l.warnings}]}})})},D.prototype.generateQuery=function(m,v,l){return(0,e.mG)(this,void 0,void 0,function(){var y,d,w,x,N,X,ne,he,Fe,fe,pe,Me,ce,G,j,F;return(0,e.Jh)(this,function(k){switch(k.label){case 0:for(y=s.create(),d=0,w=m;d<w.length;d++)y=y.addSelect(w[d]);for(x=new u(y),y=x.rewrite(),N=new C(y,{},[]),X=0,ne=y.select();X<ne.length;X++)N.add(ne[X].expr,b.values);if(v&&v.sort&&N.orderBy(v.sort),he={visualType:A,query:N,objects:{}},v&&null!=v.top){if(!_.isInteger(v.top)||v.top<=0)return[2,{options:void 0,error:new L}];P.setValue(he.objects,powerbi.visuals.dataQueryVisualOverrideDataReductionIdentifier,null,p.integer(v.top))}if(v&&v.suppressJoinPredicate)for(Fe=0,fe=v.suppressJoinPredicate;Fe<fe.length;Fe++)pe=N.defn.selectNameOf(fe[Fe]),P.setValue(he.objects,powerbi.visuals.dataQueryVisualSuppressJoinPredicateIdentifier,{metadata:pe},p.boolean(!0));Me=this.dataSources.get(),k.label=1;case 1:return k.trys.push([1,3,,4]),[4,this.conceptualSchemaProxy.get(Me)];case 2:return ce=k.sent(),[3,4];case 3:return[2,{options:void 0,error:k.sent()}];case 4:j={config:he,dataSources:Me,schema:ce,additionalFilters:v&&v.filters,executionMetricsKind:G=v&&v.executionOptions&&v.executionOptions.performanceActivity?3:0,performanceActivity:l},k.label=5;case 5:return k.trys.push([5,7,,8]),[4,this.visualQueryGenerator.execute((0,e.pi)((0,e.pi)({},j),{executionMetricsKind:G}))];case 6:if((F=k.sent()).error)throw F.error;return[2,F];case 7:return[2,{options:void 0,error:k.sent()}];case 8:return[2]}})})},D.prototype.runQuery=function(m,v,l){return(0,e.mG)(this,void 0,void 0,function(){var y;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return x.trys.push([0,2,,3]),y=v&&v.executionOptions?(0,e.pi)((0,e.pi)({},m.options),{query:(0,e.pi)((0,e.pi)((0,e.pi)({},m.options.query),v.executionOptions),{performanceActivity:l})}):m.options,[4,this.dataProxy.execute(y)];case 1:return[2,{result:x.sent()}];case 2:return[2,{error:x.sent()}];case 3:return[2]}})})},D.prototype.generateDataView=function(m,v,l){var y;m&&(y=m.createChildActivity({name:"Data View Transform",component:n.I}));try{var d=this.visualPlugin.capabilities(A),w=g.apply({prototype:v.dataReaderResult.dataView,objectDescriptors:d.objects,dataViewMappings:d.dataViewMappings,dataRoles:d.dataRoles,drillCapabilities:d.drilldown,expandCollapseCapabilties:d.expandCollapse,transforms:l.transforms,colorAllocatorFactory:powerbi.visuals.createColorAllocatorFactory(),visualStyle:this.themeService.getVisualStyle(void 0),featureSwitches:this.featureSwitchService.featureSwitches});return y&&y.resolve(),{result:w.dataViews[0]}}catch(x){return y&&y.reject(),{error:x}}},D.\u0275fac=function(v){return new(v||D)(f.\u0275\u0275inject(i.i),f.\u0275\u0275inject(O.d),f.\u0275\u0275inject(T.D),f.\u0275\u0275inject(h.vZ),f.\u0275\u0275inject(M.f),f.\u0275\u0275inject(I.D),f.\u0275\u0275inject(V.S))},D.\u0275prov=f.\u0275\u0275defineInjectable({token:D,factory:D.\u0275fac}),D}(),L=function(){function D(){this.code="INVALID_DATA_REDUCTION"}return D.prototype.getDetails=function(){},D}()},54347:function(Ve,se,t){t.d(se,{Z:function(){return ne}});var e=t(7005),n=t(98864),f=t(33275),i=t(33156),O=t(48007),T=t(46122),V=t(19461),h=t(11378),M=t(64489),I=t(20466),b=t(73637),P=t(46706),g=t(23196),u=t(25991),s=t(11032),p=t(33714),C=t(34429),A=t(12029),S=t(56339),L=t(59312),D=t(18266),m=t(42),v=t(28252),l=powerbi.visuals.ActionButtonType,y=powerbi.explore.contracts,d=powerbi.data.DataViewObjectDefinitions,w=powerbi.data.DataViewObjectDescriptors,x=powerbi.explore.services.events,N=powerbi.explore.util.VisualContainerUtils,X=powerbi.explore.contracts.VisualLink,ne=function(){function Ce(he,Fe,fe,ae,pe,ge,Me,ce,J,ie,G,j,F,E){var k=this;if(this.dialogService=he,this.eventBridge=Fe,this.explorationNavigationService=fe,this.featureSwitchService=ae,this.formFactorProvider=pe,this.layoutAuthoringService=ge,this.visualPlugin=Me,this.notificationBarService=ce,this.localizationService=J,this.viewModeStateService=ie,this.runningVisualService=G,this.telemetryService=j,this.reportViewSettingsService=F,this.standardizedEventsService=E,this.notificationShowing=!1,this.notificationDismissed=!1,this.canDisplayModal=!1,this.haveUnfilteredChanges=!1,this.applyAllSlicersEnabled$=new n.X(this.buttonExists()),this.applyAllSlicers$=new f.xQ,this.clearAllSlicers$=new f.xQ,this.destroy$=new i.t,this.standardizedTelemetryFeatureNames=["ApplyAllSlicersButton"],this.featureSwitchService.featureSwitches.applyAllSlicersButton){this.subscriptionManager=Fe.createChannelSubscriptionManager(),this.subscriptionManager.subscribe(x.sectionChanged,function(){return(0,e.mG)(k,void 0,void 0,function(){return(0,e.Jh)(this,function(Q){switch(Q.label){case 0:return[4,this.update(!0)];case 1:return[2,Q.sent()]}})})}),this.subscriptionManager.subscribe(x.createActionButton,function(Q,me){return(0,e.mG)(k,void 0,void 0,function(){var le,K;return(0,e.Jh)(this,function(q){switch(q.label){case 0:return me.iconType===l.applyAllSlicers&&(le=this.telemetryService.logEvent(h.$s),this.standardizedEventsService&&this.standardizedEventsService.logEvent(le,this.standardizedTelemetryFeatureNames,!0)),me.iconType===l.clearAllSlicers&&(K=this.telemetryService.logEvent(h.zc),this.standardizedEventsService&&this.standardizedEventsService.logEvent(K,this.standardizedTelemetryFeatureNames,!0)),[4,this.update()];case 1:return q.sent(),[2]}})})}),this.subscriptionManager.subscribe(x.applyAllSlicersClicked,function(){return k.apply()});var R=new f.xQ;if(R.pipe((0,T.D)(function(){return(0,O.F)(10)}),(0,V.R)(this.destroy$)).subscribe(function(){return(0,e.mG)(k,void 0,void 0,function(){return(0,e.Jh)(this,function(Q){switch(Q.label){case 0:return[4,this.update()];case 1:return[2,Q.sent()]}})})}),this.subscriptionManager.subscribe(x.visualContainerChanged,function(){return R.next()}),this.subscriptionManager.subscribe(x.deleteVisualContainer,function(){return R.next()}),this.subscriptionManager.subscribe(x.undoRedoStackUpdated,function(){return R.next()}),this.reportViewSettingsService){var z=this.reportViewSettingsService.getReportViewSettings({reportSettings:!1,userSettings:!1}).userSettings;this.canDisplayModal=!(null==z||!z.showModalApplyAllSlicers)}}}return Ce.prototype.ngOnDestroy=function(){var he;null===(he=this.subscriptionManager)||void 0===he||he.unsubscribeAll(),this.destroy$.next(),this.destroy$.complete()},Ce.prototype.apply=function(){if(this.enabled()){this.applyAllSlicers$.next(!0);var he=this.telemetryService.logEvent(h.o_);this.standardizedEventsService&&this.standardizedEventsService.logEvent(he,this.standardizedTelemetryFeatureNames,!0)}},Ce.prototype.apply$=function(){return this.applyAllSlicers$},Ce.prototype.clear=function(){this.clearAllSlicers$.next(!0);var he=this.telemetryService.logEvent(h.$);this.standardizedEventsService&&this.standardizedEventsService.logEvent(he,this.standardizedTelemetryFeatureNames,!0)},Ce.prototype.clear$=function(){return this.clearAllSlicers$},Ce.prototype.enabled=function(){return this.applyAllSlicersEnabled$.getValue()},Ce.prototype.enabled$=function(){return this.applyAllSlicersEnabled$},Ce.prototype.buttonExists=function(){var he=this.explorationNavigationService.getCurrentSection();if(_.isEmpty(he)||_.isEmpty(he.visualContainers))return!1;var Fe=this.layoutAuthoringService.visualsInLayout(he,this.formFactorProvider.getCurrentLayout());if(_.isEmpty(Fe))return!1;for(var fe=0,ae=Fe;fe<ae.length;fe++){var pe=ae[fe];if(this.visualHasApplyAllSlicersVisualLink(pe)&&this.visualIsVisible(pe)&&this.visualIsInVisibleGroup(pe,he.visualContainerGroups))return!0}return!1},Ce.prototype.shouldButtonsBeEnabled=function(){var he,Fe=this.getVisualContainersInCurrentLayout();if(_.isEmpty(Fe))return!1;for(var fe=0,ae=Fe;fe<ae.length;fe++){var pe=ae[fe];if(this.visualIsSlicer(pe)&&(null===(he=this.runningVisualService.getVisual(pe))||void 0===he?void 0:he.getHasUnappliedFilterChanges()))return!0}return!1},Ce.prototype.update=function(he){return(0,e.mG)(this,void 0,void 0,function(){var Fe,fe;return(0,e.Jh)(this,function(ae){switch(ae.label){case 0:return Fe=this.buttonExists(),fe=this.individualApplyButtonEnabled(),this.shouldShowNotificationBanner(Fe,fe)&&this.showNotificationBanner(),!this.enabled()||Fe||fe||!this.isEditMode()||he?[3,2]:[4,this.showSlicerBehaviorWarningDialog(he)];case 1:ae.sent(),this.apply(),ae.label=2;case 2:return this.enabled()&&!Fe&&fe&&this.clearNotificationBanner(),this.applyAllSlicersEnabled$.next(Fe),[2]}})})},Ce.prototype.individualApplyButtonEnabled=function(){var he,Fe=this.explorationNavigationService.getCurrentExploration();return null===(he=null==Fe?void 0:Fe.slowDataSourceSettings)||void 0===he?void 0:he.isSlicerSelectionsButtonEnabled},Ce.prototype.isEditMode=function(){return 1===this.viewModeStateService.getMode()},Ce.prototype.showNotificationBanner=function(){var he=this;this.notificationId=this.notificationBarService.notify({message:this.localizationService.get("ReportAppBar_ApplyAllSlicers_NotificationSuggestion"),notificationType:6,onDismiss:function(){return he.clearNotificationBanner()}}),this.notificationShowing=!0},Ce.prototype.clearNotificationBanner=function(){this.notificationBarService.hide(this.notificationId),this.notificationDismissed=!0,this.notificationShowing=!1},Ce.prototype.shouldShowNotificationBanner=function(he,Fe){return!this.notificationShowing&&!this.enabled()&&he&&Fe&&!this.notificationDismissed&&this.isEditMode()},Ce.prototype.showSlicerBehaviorWarningDialog=function(he){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(ae){switch(ae.label){case 0:return!this.canDisplayModal||he?[2]:[4,this.dialogService.showConfirmationDialog({title:this.localizationService.get("ApplyAllSlicers_WarningDialog_Title"),message:this.localizationService.get("ApplyAllSlicers_WarningDialog_Message"),okButtonText:this.localizationService.get("ModalDialogButtonText_Ok"),cancelButtonText:this.localizationService.get("Paused_Visual_Dont_Show_Again")},{autoFocus:!0}).afterClosed().toPromise()];case 1:return 2===ae.sent()&&this.disableWarningDialog(),[2]}})})},Ce.prototype.disableWarningDialog=function(){this.reportViewSettingsService&&this.reportViewSettingsService.getUserSettingService().setShowModalApplyAllSlicers(!1),this.canDisplayModal=!1},Ce.prototype.visualIsSlicer=function(he){var Fe=N.getSingleVisualConfig(he),fe=this.visualPlugin.capabilities(null==Fe?void 0:Fe.visualType);return null!==w.findFilterOutput(null==fe?void 0:fe.objects)},Ce.prototype.visualHasApplyAllSlicersVisualLink=function(he){var Fe=N.getContainerObjectDefinitions(he),fe=d.getValue(Fe,{objectName:"visualLink",propertyName:"type"},void 0),ae=d.getValue(Fe,{objectName:"visualLink",propertyName:"show"},void 0);return(null==fe?void 0:fe.value)===X.ApplyAllSlicers&&(null==ae?void 0:ae.value)},Ce.prototype.visualIsVisible=function(he){var Fe,fe=N.getSingleVisualConfig(he);return"hidden"!==(null===(Fe=null==fe?void 0:fe.display)||void 0===Fe?void 0:Fe.mode)&&0!==(null==he?void 0:he.visibility)},Ce.prototype.visualIsInVisibleGroup=function(he,Fe){var fe=!0;return y.traverseVisualContainerGroups(Fe,function(ae,pe){fe&&y.isVisualContainerGroup(ae)&&pe&&ae.children.find(function(ge){return ge.name===he.name})&&(fe=!1)}),fe},Ce.prototype.getVisualContainersInCurrentLayout=function(){var he=this.explorationNavigationService.getCurrentSection();if(_.isEmpty(he)||_.isEmpty(he.visualContainers))return[];var Fe=this.layoutAuthoringService.visualsInLayout(he,this.formFactorProvider.getCurrentLayout());return _.isEmpty(Fe)?[]:Fe},Ce.\u0275fac=function(Fe){return new(Fe||Ce)(b.\u0275\u0275inject(P.x),b.\u0275\u0275inject(g.J),b.\u0275\u0275inject(u.z),b.\u0275\u0275inject(p.vZ),b.\u0275\u0275inject(C.F),b.\u0275\u0275inject(A.U),b.\u0275\u0275inject(S.D),b.\u0275\u0275inject(L.S),b.\u0275\u0275inject(D.o),b.\u0275\u0275inject(m.kc),b.\u0275\u0275inject(s.s),b.\u0275\u0275inject(v.y0),b.\u0275\u0275inject(M.a,8),b.\u0275\u0275inject(I.S,8))},Ce.\u0275prov=b.\u0275\u0275defineInjectable({token:Ce,factory:Ce.\u0275fac}),Ce}()},60040:function(Ve,se,t){t.d(se,{F:function(){return D}});var e=t(7005),n=t(98864),f=t(73637),i=t(16660),O=t(18766),T=t(23196),V=t(25991),h=t(9161),M=t(13034),I=t(28252),b=t(42),P=powerbi.explore,g=P.services,u=P.contracts,s=powerbi.telemetry,p=u.BookmarkExtensions,C=u.BookmarkActions,A=powerbi.explore.services.events,S=powerbi.ItemGroupingManager,L=powerbi.PbiPromise,D=function(){function m(v,l,y,d,w,x,N,X){var ne=this;this.conceptualSchemaProxy=v,this.dataSources=l,this.eventBridge=y,this.explorationNavigation=d,this.explorationStateApplier=w,this.telemetryService=x,this.undoRedoService=N,this.viewModeState=X,this.bookmarkActionValues=Object.values(C),this.undoRedoService.registerSideEffect({run:function(he){(_.isEmpty(he)||!ne.isBookmarkAction(he))&&null!=ne.getActiveBookmark()&&ne.setActiveBookmark(null)}}),this.bookmarksSubject=new n.X([]),this.activeBookmarkSubject=new n.X(null),this.bookmarks$=this.bookmarksSubject.asObservable(),this.activeBookmark$=this.activeBookmarkSubject.asObservable(),this.eventBridge.createChannelSubscriptionManager().subscribe(A.explorationLoaded,function(){var Ce=ne.explorationNavigation.getCurrentExploration();ne.activeBookmarkSubject.next(Ce.activeBookmark?Ce.activeBookmark:null),ne.emitUpdatedBookmarks()}),this.emitUpdatedBookmarks()}return m.prototype.isBookmarkAction=function(v){return this.bookmarkActionValues.includes(v)},m.prototype.getBookmarks=function(){var v=this.explorationNavigation.getCurrentExploration();return null==v?[]:(null==v.bookmarks&&(v.bookmarks=[]),v.bookmarks)},m.prototype.setBookmarks=function(v){this.explorationNavigation.getCurrentExploration().bookmarks=v,this.emitUpdatedBookmarks()},m.prototype.getActiveBookmark=function(){var v=this.explorationNavigation.getCurrentExploration();return v?v.activeBookmark:null},m.prototype.setActiveBookmark=function(v){var l=this.explorationNavigation.getCurrentExploration();l&&(l.activeBookmark=v),this.activeBookmarkSubject.next(v)},m.prototype.getAllBookmarks=function(){return S.flattenItems(this.getBookmarks(),p.isStateBookmark)},m.prototype.getBookmarkGroups=function(){return this.getBookmarks().filter(p.isBookmarkGroup)},m.prototype.apply=function(v){return(0,e.mG)(this,void 0,L,function(){var l,y,d,w=this;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return y=this.getBookmark(v),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return d=x.sent(),this.undoRedoService.register(C.Apply,function(){w.setActiveBookmark(y),l=w.applyBookmarkState(y,d)}),[2,l]}})})},m.prototype.applyBookmark=function(v,l){return(0,e.mG)(this,void 0,L,function(){var y,d,w=this;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return d=x.sent(),this.undoRedoService.register(C.Apply,function(){y=w.applyBookmarkState(v,d,l)}),[2,y]}})})},m.prototype.applyByName=function(v){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var l;return(0,e.Jh)(this,function(y){switch(y.label){case 0:return(l=S.find(v,this.getBookmarks()))&&p.isStateBookmark(l)?[4,this.apply(l)]:[3,2];case 1:return[2,y.sent()];case 2:return[2,null]}})})},m.prototype.setPlayMode=function(v){var y=this.viewModeState.getViewState();v&&0===y.bookmarkView||!v&&null==y.bookmarkView||(v?(y.bookmarkView=0,this.telemetryService.logEvent(s.EXBookmarkPlay)):y.bookmarkView=void 0,this.eventBridge.publishToChannel(g.events.bookmarkViewStateChanged))},m.prototype.getBookmarkListToPlay=function(v){var l=this.getParentBookmarkList(v);return S.flattenItems(l,p.isStateBookmark)},m.prototype.emitUpdatedBookmarks=function(){this.bookmarksSubject.next(this.getAllBookmarks())},m.prototype.getBookmark=function(v){return"number"==typeof v?this.getBookmarks()[v]:v},m.prototype.applyBookmarkState=function(v,l,y){var d={clearUnmatchedData:!0,suppressDataSourceVariables:!0};if(_.assign(d,y),!p.isBookmarkGroup(v)){v.options&&(d.suppressData=v.options.suppressData,d.suppressActiveSection=v.options.suppressActiveSection,d.suppressDisplay=v.options.suppressDisplay,v.options.applyOnlyToTargetVisuals&&(d.targetVisualNames=v.options.targetVisualNames));var w=this.applyState(v.explorationState,l,d);return this.eventBridge.publishToChannel(g.events.bookmarkApplied,{bookmarkName:v.name}),this.telemetryService.logEvent(s.EXBookmarkApply,{bookmarkName:v.name}),w}},m.prototype.applyState=function(v,l,y){return this.explorationStateApplier.applyDirty(v,l,y)},m.prototype.getParentBookmarkList=function(v){var l=this.getBookmarks();if(v){var y=S.getSiblingList(v,this.getBookmarks());y&&(l=y)}return l},m.\u0275fac=function(l){return new(l||m)(f.\u0275\u0275inject(i.i),f.\u0275\u0275inject(O.D),f.\u0275\u0275inject(T.J),f.\u0275\u0275inject(V.z),f.\u0275\u0275inject(M.j),f.\u0275\u0275inject(I.y0),f.\u0275\u0275inject(h.z),f.\u0275\u0275inject(b.kc))},m.\u0275prov=f.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac}),m}()},25773:function(Ve,se,t){t.d(se,{Z:function(){return C}});var e=t(33275),n=t(73637),f=t(17273),i=t(23196),O=t(33892),T=t(9161),V=t(97850),h=t(33714),M=t(34429),I=t(12029),b=t(28252),P=t(42),g=t(5801),u=t(41541),s=jsCommon.BrowserUtils,p=powerbi.explore.util.CanvasDisplayUtility,C=function(){function A(S,L,D,m,v,l,y,d,w,x,N,X){this.canvasZoomService=X,this.fullScreenShortcutPressed$=new e.xQ,this.service=powerbi.explore.services.createCanvasKeyHandlerService(S,l,D,w,d,x,L,N,m,v,y)}return A.prototype.getVisualInteractivityDisabled=function(){return this.service.getVisualInteractivityDisabled()},A.prototype.setVisualInteractivityDisabled=function(S){this.service.setVisualInteractivityDisabled(!!S)},A.prototype.getFullScreenShortcutPressed$=function(){return this.fullScreenShortcutPressed$.asObservable()},A.prototype.onKeyDown=function(S,L){if(this.isOnlyCtrlOrMeta(S)&&this.isTargetDisplayAreaContainer(S))switch(S.which){case 187:return this.canvasZoomService.zoomIn(),this.preventStopAndReturnFalse(S);case 189:return this.canvasZoomService.zoomOut(),this.preventStopAndReturnFalse(S)}if(this.isCtrlOrMetaShift(S))switch(S.which){case 49:return this.canvasZoomService.fitToPage(),this.preventStopAndReturnFalse(S);case 50:return this.canvasZoomService.actualSize(),this.preventStopAndReturnFalse(S);case 51:return this.canvasZoomService.fitToWidth(),this.preventStopAndReturnFalse(S);case 70:return this.fullScreenShortcutPressed$.next(),this.preventStopAndReturnFalse(S)}return this.service.onKeyDown(S,L)},A.prototype.preventStopAndReturnFalse=function(S){return S&&(S.preventDefault(),S.stopPropagation()),!1},A.prototype.isOnlyCtrlOrMeta=function(S){return s.isCtrlOrMeta(S)&&!S.altKey&&!S.shiftKey},A.prototype.isCtrlOrMetaShift=function(S){return s.isCtrlOrMeta(S)&&!S.altKey&&S.shiftKey},A.prototype.isTargetDisplayAreaContainer=function(S){var L=S.target;return L&&$(L).closest(p.DisplayAreaContainerNameSelector.selector).length>0},A.\u0275fac=function(L){return new(L||A)(n.\u0275\u0275inject(f.Yv),n.\u0275\u0275inject(i.J),n.\u0275\u0275inject(h.vZ),n.\u0275\u0275inject(M.F),n.\u0275\u0275inject(I.U),n.\u0275\u0275inject(O.z),n.\u0275\u0275inject(b.y0),n.\u0275\u0275inject(T.z),n.\u0275\u0275inject(P.kc),n.\u0275\u0275inject(g.$),n.\u0275\u0275inject(V.w),n.\u0275\u0275inject(u.w))},A.\u0275prov=n.\u0275\u0275defineInjectable({token:A,factory:A.\u0275fac}),A}()},38838:function(Ve,se,t){t.d(se,{Z:function(){return M}});var e=t(73637),n=t(23196),f=t(25991),i=t(97850),O=t(33714),T=t(34429),V=t(73109),h=t(42),M=function(){function I(b,P,g,u,s,p,C){this.legacyService=powerbi.explore.services.createCanvasScaleService(b,P,g,u,C,p,s)}return I.prototype.setDisplayAreaScaleFactor=function(b){return this.legacyService.setDisplayAreaScaleFactor(b)},I.prototype.setWallpaperScaleFactor=function(b){return this.legacyService.setWallpaperScaleFactor(b)},I.prototype.getDisplayAreaScaleFactor=function(){return this.legacyService.getDisplayAreaScaleFactor()},I.prototype.getWallpaperScaleFactor=function(){return this.legacyService.getWallpaperScaleFactor()},I.prototype.getDisplayOption=function(){return this.legacyService.getDisplayOption()},I.prototype.setDisplayOption=function(b){return this.legacyService.setDisplayOption(b)},I.prototype.setCanvasZoom=function(b){return this.legacyService.setCanvasZoom(b)},I.prototype.getCanvasZoom=function(){return this.legacyService.getCanvasZoom()},Object.defineProperty(I.prototype,"overrideDisplayOption",{get:function(){return this.legacyService.overrideDisplayOption},set:function(P){this.legacyService.overrideDisplayOption=P},enumerable:!1,configurable:!0}),I.\u0275fac=function(P){return new(P||I)(e.\u0275\u0275inject(n.J),e.\u0275\u0275inject(f.z),e.\u0275\u0275inject(O.vZ),e.\u0275\u0275inject(T.F),e.\u0275\u0275inject(V.F),e.\u0275\u0275inject(h.kc),e.\u0275\u0275inject(i.w))},I.\u0275prov=e.\u0275\u0275defineInjectable({token:I,factory:I.\u0275fac}),I}()},64808:function(Ve,se,t){t.d(se,{H:function(){return O}});var e=t(73637),n=t(41541),f=jsCommon.BrowserUtils,i=powerbi.explore.util.CanvasDisplayUtility,O=function(){function T(V){this.canvasZoomService=V}return T.prototype.onMouseWheel=function(V){this.isTargetDisplayAreaContainer(V)&&(this.isZoomInWheelEvent(V)&&(this.preventStop(V),this.canvasZoomService.zoomIn()),this.isZoomOutWheelEvent(V)&&(this.preventStop(V),this.canvasZoomService.zoomOut()))},T.prototype.preventStop=function(V){V.preventDefault(),V.stopPropagation()},T.prototype.isZoomInWheelEvent=function(V){return this.isOnlyCtrlOrMeta(V)&&V.deltaY<0},T.prototype.isZoomOutWheelEvent=function(V){return this.isOnlyCtrlOrMeta(V)&&V.deltaY>0},T.prototype.isOnlyCtrlOrMeta=function(V){return f.isCtrlOrMeta(V)&&!V.altKey&&!V.shiftKey},T.prototype.isTargetDisplayAreaContainer=function(V){var h=V.target;return h&&$(h).closest(i.DisplayAreaContainerNameSelector.selector).length>0},T.\u0275fac=function(h){return new(h||T)(e.\u0275\u0275inject(n.w))},T.\u0275prov=e.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T}()},41541:function(Ve,se,t){t.d(se,{Z:function(){return V},w:function(){return h}});var e=t(73637),n=t(98864),f=t(23196),i=t(33714),O=t(34429),T=powerbi.explore.services.events,V=new e.InjectionToken("canvasZoomServiceInjectionToken"),h=function(){function M(I,b,P,g){this.eventBridge=I,this.featureSwitchService=b,this.formFactorProvider=P,this.canvasZoomConfig=g,this.zoomScale$=new n.X(this.canvasZoomConfig.midZoomScale)}return M.prototype.getZoomScale=function(){return this.zoomScale$.asObservable()},M.prototype.getCurrentZoomLevel=function(){return this.zoomScale$.value},M.prototype.zoomIn=function(){var I=this.canvasZoomConfig.zoomScaleStepAmount,b=this.zoomScale$.getValue(),P=Math.floor(10*b)/10+I;this.setZoomScale(P)},M.prototype.zoomOut=function(){var I=this.canvasZoomConfig.zoomScaleStepAmount,b=this.zoomScale$.getValue(),P=Math.ceil(10*b)/10-I;this.setZoomScale(P)},M.prototype.fitToPage=function(){this.eventBridge.publishToChannel(T.canvasDisplayChanged,1)},M.prototype.fitToWidth=function(){this.eventBridge.publishToChannel(T.canvasDisplayChanged,2)},M.prototype.actualSize=function(){this.eventBridge.publishToChannel(T.canvasDisplayChanged,3)},M.prototype.resetZoomScale=function(){this.setZoomScale(this.canvasZoomConfig.midZoomScale)},M.prototype.setZoomScale=function(I,b){if(void 0===b&&(b=!0),this.featureSwitchService.featureSwitches.newZoomControl&&0===this.formFactorProvider.getCurrentLayout()){var g=this.canvasZoomConfig,u=g.minZoomScale,s=g.maxZoomScale,p=Math.round(100*I)/100;p>=u&&p<=s&&(this.zoomScale$.next(p),b&&this.eventBridge.publishToChannel(T.canvasZoomChanged,p))}},M.\u0275fac=function(b){return new(b||M)(e.\u0275\u0275inject(f.J),e.\u0275\u0275inject(i.vZ),e.\u0275\u0275inject(O.F),e.\u0275\u0275inject(V))},M.\u0275prov=e.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac}),M}()},68572:function(Ve,se,t){t.d(se,{C:function(){return g}});var e=t(7005),n=t(5150),f=t(33185),i=t(73637),O=t(16660),T=t(18766),V=t(31701),h=t(9072),M=t(46706),I=t(18266),b=t(10378),P=powerbi.data.SQExpr,g=function(){function u(s,p,C,A,S,L,D,m){this.conceptualSchemaProxy=s,this.dataSources=p,this.dialogService=C,this.localizationService=A,this.screenReaderService=S,this.displayNameService=L,this.dataSourcesSerializer=D,this.modelAuthoring=m}return u.prototype.showDialog=function(s){return(0,e.mG)(this,void 0,void 0,function(){var p,C,A;return(0,e.Jh)(this,function(D){switch(D.label){case 0:return[4,this.getFirstEditableSchema()];case 1:if(p=D.sent(),!this.modelAuthoring||!p)return[2];C=p?p.name:"",D.label=2;case 2:return D.trys.push([2,5,,6]),[4,this.dialogService.openHostDialog({bindings:{selectedMeasure:s&&P.isMeasure(s)?s:void 0,dataSources:this.dataSourcesSerializer.serializeDataSources(this.getDsrDataSource())},componentName:f.HY,config:{minWidth:"720px",panelClass:["no-padding"]},dialogName:"ChangeDetectionMeasureDialog"})];case 3:return[4,D.sent().afterClosed().toPromise()];case 4:return A=D.sent(),[3,6];case 5:return D.sent(),[3,6];case 6:return A?(A.schemaName=C,[4,this.applyChangeDetectionMeasure(A)]):[3,8];case 7:D.sent(),D.label=8;case 8:return[2]}})})},u.prototype.hasExistingChangeDetectionMeasure=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(s){switch(s.label){case 0:return[4,this.getChangeDetectionEntity()];case 1:return[2,!!s.sent()]}})})},u.prototype.supportsChangeDetectionMeasure=function(){return(0,e.mG)(this,void 0,void 0,function(){var s;return(0,e.Jh)(this,function(p){switch(p.label){case 0:return[4,this.getFirstEditableSchema()];case 1:return[2,(s=p.sent())&&s.capabilities.supportsFastRefresh]}})})},u.prototype.getChangeDetectionEntity=function(){return this.getFirstEditableSchema().then(function(s){return s?s.entities.find(function(p){return p.properties&&p.properties.find(function(C){return C.measure&&C.measure.changeDetectionMetadata})}):void 0})},u.prototype.getFirstEditableSchema=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(C){switch(C.label){case 0:if(!this.dataSources||!this.dataSources.get())return[2,void 0];C.label=1;case 1:return C.trys.push([1,3,,4]),[4,this.conceptualSchemaProxy.get(this.getDsrDataSource())];case 2:return[2,C.sent().schemas.find(function(A){return A.capabilities.canEditChangeDetectionMeasure})];case 3:return C.sent(),[2,void 0];case 4:return[2]}})})},u.prototype.getDsrDataSource=function(){if(this.dataSources&&this.dataSources.get())return this.dataSources.get().filter(function(s){return s.type===powerbi.common.constants.dsrDataReaderType})},u.prototype.applyChangeDetectionMeasure=function(s){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(p){switch(p.label){case 0:return s.isNew?[4,this.createNewChangeDetectionMeasure(s.schemaName,s.entityName,s.measureName,s.expression,s.duration)]:[3,2];case 1:return p.sent(),[3,4];case 2:return[4,this.updateExistingChangeDetectionMetadata(s.schemaName,s.entityName,s.measureName,s.duration)];case 3:p.sent(),p.label=4;case 4:return[2]}})})},u.prototype.createNewChangeDetectionMeasure=function(s,p,C,A,S){return(0,e.mG)(this,void 0,void 0,function(){var v,l;return(0,e.Jh)(this,function(y){switch(y.label){case 0:return[4,this.applyModelAuthoringChanges({changes:[{newMeasureCreated:{schema:s,entity:p,name:C,expression:A}},{setChangeDetectionMetadata:{schema:s,entity:p,measureName:C,refreshInterval:S}}]},!0)];case 1:return y.sent(),[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 2:return v=y.sent(),l=powerbi.data.SQExprBuilder.fieldExpr({measure:{schema:s,entity:p,name:C}}),this.screenReaderService.alert(this.localizationService.format("CreatedItem",this.displayNameService.getDisplayName(l,v,void 0))),[2]}})})},u.prototype.updateExistingChangeDetectionMetadata=function(s,p,C,A){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(D){switch(D.label){case 0:return[4,this.applyModelAuthoringChanges({changes:[{setChangeDetectionMetadata:{schema:s,entity:p,measureName:C,refreshInterval:A}}]},!0)];case 1:return D.sent(),[2]}})})},u.prototype.applyModelAuthoringChanges=function(s,p){return void 0===p&&(p=!1),(0,e.mG)(this,void 0,void 0,function(){var C;return(0,e.Jh)(this,function(A){switch(A.label){case 0:return A.trys.push([0,2,,6]),[4,this.modelAuthoring.apply(s)];case 1:return A.sent(),[3,6];case 2:return C=A.sent(),p?[4,this.applyModelAuthoringChanges(s)]:[3,4];case 3:return A.sent(),[3,5];case 4:throw C;case 5:return[3,6];case 6:return[2]}})})},u.\u0275fac=function(p){return new(p||u)(i.\u0275\u0275inject(O.i),i.\u0275\u0275inject(T.D),i.\u0275\u0275inject(M.x),i.\u0275\u0275inject(I.o),i.\u0275\u0275inject(b.g),i.\u0275\u0275inject(V.O),i.\u0275\u0275inject(h._),i.\u0275\u0275inject(n.S,8))},u.\u0275prov=i.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac}),u}()},49363:function(Ve,se,t){t.d(se,{$O:function(){return i},GO:function(){return n},Sn:function(){return T},c9:function(){return f}});var e=t(73637),n=new e.InjectionToken("ScopedChangeDetectionRefreshServiceOverrideToken"),f=function(){function V(){}return V.\u0275prov=e.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac=function(M){return new(M||V)}}),V}(),i=function(){function V(){}return V.prototype.resumeAsync=function(){return Promise.resolve()},V.prototype.stop=function(){},Object.defineProperty(V.prototype,"autoRefreshKind",{get:function(){return 0},enumerable:!1,configurable:!0}),V.prototype.getRefreshStats=function(){return{adminConfig:void 0,effectiveRefreshInterval:0,lastRefreshTimestamp:void 0}},V}(),T={provide:f,useFactory:function(V){var h=V.get(n,null);return h?e.Injector.create([h],V).get(f):new i},deps:[e.Injector]}},69959:function(Ve,se,t){t.d(se,{L:function(){return s},W:function(){return g}});var e=t(7005),n=t(73637),f=t(16660),i=t(18766),O=t(66830),T=t(9161),V=t(70377),h=t(5801),M=powerbi.visuals.decompositionTreeRoles,I=powerbi.Promise,b=powerbi.data.SQExpr,P=powerbi.explore.util.VisualContainerUtils;function g(p,C,A){return function(p,C){if(!p||!b.isMeasure(p)&&!b.isAggregation(p))return!1;var A=p.getTargetEntity().schema;if(C.schema(A).isExtensionSchema)return!1;var L=p.getMetadata(C);return!(!L||!L.type||!L.type.numeric&&!L.type.integer)}(p,A)&&(!!C.insights||!!C.analysisVisuals)&&_.every(A.schemas,function(S){var L;return(null===(L=S.capabilities.insights)||void 0===L?void 0:L.supportsDecomposition)&&!S.capabilities.supportsDataSourceVariables})}var s=function(){function p(C,A,S,L,D,m){this.conceptualSchemaProxy=C,this.dataSources=A,this.decompositionAuthoringCore=S,this.explorationCapabilities=L,this.undoRedoService=D,this.visualAuthoringService=m}return p.prototype.isSupported=function(){return(0,e.mG)(this,void 0,I,function(){var C;return(0,e.Jh)(this,function(A){switch(A.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return C=A.sent(),_.some(C.schemas,function(S){return!S.capabilities.supportsInstanceFilters||S.isMultiDimensionalModel})?[2,!1]:[2,!0]}})})},p.prototype.isDecompositionAnalysisSupported=function(C){return(0,e.mG)(this,void 0,I,function(){var A,S,L,D;return(0,e.Jh)(this,function(m){switch(m.label){case 0:return(A=P.getVisualQuery(C))?(S=A.tryGetExpr(M.analyze,0),L=this.explorationCapabilities.getCapabilities(),[4,this.conceptualSchemaProxy.get(this.dataSources.get())]):[2,!1];case 1:return D=m.sent(),[2,g(S,L,D)]}})})},p.prototype.isTopNPerLevelSupported=function(){return(0,e.mG)(this,void 0,I,function(){var C;return(0,e.Jh)(this,function(A){switch(A.label){case 0:return[4,this.conceptualSchemaProxy.get(this.dataSources.get())];case 1:return C=A.sent(),[2,_.every(C.schemas,function(S){return S.capabilities&&S.capabilities.supportsTopNPerLevel})]}})})},p.prototype.addLevelAndExpandNode=function(C,A,S){var L=this;this.updateVisualContainer(C,function(){var D=L.decompositionAuthoringCore.getDecompositionRole(C);L.decompositionAuthoringCore.clearAILevelsInformation(C,D),L.decompositionAuthoringCore.appendLevelAndExpandNode(C,D,S,A),"Could not expand to ".concat(S)},"ExpandToNewLevel")},p.prototype.addAILevelAndExpandNode=function(C,A,S,L){var D=this;this.updateVisualContainer(C,function(){var m=D.decompositionAuthoringCore.getDecompositionRole(C),v=D.decompositionAuthoringCore.getPinnedLevelsCount(C,m),l=_.first(A.metadata),y=-1;l&&-1===(y=D.decompositionAuthoringCore.findProjectionIndex(C,m,l))||y<v-1||D.decompositionAuthoringCore.expandNode(C,m,A)&&(L&&D.decompositionAuthoringCore.setFirstActiveAILevel(C,m,y+1),D.decompositionAuthoringCore.setAILevelInformation(C,m,y+1,S))},"ExpandToAILevel")},p.prototype.updateLevel=function(C,A,S){var L=this,D=this.decompositionAuthoringCore.getDecompositionRole(C);this.updateVisualContainer(C,function(){return L.decompositionAuthoringCore.replaceLevel(C,D,A,S)},"UpdateLevel")},p.prototype.updateAILevel=function(C,A,S){var L=this,D=this.decompositionAuthoringCore.getDecompositionRole(C),m=this.decompositionAuthoringCore.findProjectionIndex(C,D,A),v=this.decompositionAuthoringCore.getExpansionStateLevel(C,D,m);v&&(v.isLocked||v.AIInformation&&this.updateVisualContainer(C,function(){var l=L.decompositionAuthoringCore.getFirstActiveAILevel(C,D);L.decompositionAuthoringCore.setAILevelInformation(C,D,m,S),L.decompositionAuthoringCore.setFirstActiveAILevel(C,D,Math.max(Math.min(m,l),0))},"UpdateAIMethod"))},p.prototype.removeLevel=function(C,A){var S=this,L=this.decompositionAuthoringCore.getDecompositionRole(C),D=this.decompositionAuthoringCore.findProjectionIndex(C,L,A),m=this.decompositionAuthoringCore.getExpansionStateLevel(C,L,D);m&&(m.isLocked||this.updateVisualContainer(C,function(){S.decompositionAuthoringCore.removeLevel(C,L,A),"Cannot remove level ".concat(A)},"RemoveLevel"))},p.prototype.toggleLockedLevels=function(C,A){var S=this,L=this.decompositionAuthoringCore.getDecompositionRole(C),D=this.decompositionAuthoringCore.findProjectionIndex(C,L,A),m=this.decompositionAuthoringCore.getExpansionStateLevel(C,L,D);m&&this.updateVisualContainer(C,function(){m.isLocked?S.decompositionAuthoringCore.unlockLevels(C,L,D):S.decompositionAuthoringCore.lockLevels(C,L,D+1)},"LockLevels")},p.prototype.toggleNode=function(C,A){var S=this,L=this.decompositionAuthoringCore.getDecompositionRole(C);this.updateVisualContainer(C,function(){return S.decompositionAuthoringCore.toggleNode(C,L,A)},"ToggleNode")},p.prototype.clearAILevels=function(C,A){var S=this,L=this.decompositionAuthoringCore.getDecompositionRole(C),D=this.decompositionAuthoringCore.findProjectionIndex(C,L,A);-1!==D&&this.updateVisualContainer(C,function(){return S.decompositionAuthoringCore.clearAILevelsInformation(C,L,D)},"ClearAILevels")},p.prototype.updateVisualContainer=function(C,A,S){S?this.undoRedoService.register(S,A):A(),this.visualAuthoringService.raiseVisualContainerChanged(C)},p.\u0275fac=function(A){return new(A||p)(n.\u0275\u0275inject(f.i),n.\u0275\u0275inject(i.D),n.\u0275\u0275inject(O.e),n.\u0275\u0275inject(V.U),n.\u0275\u0275inject(T.z),n.\u0275\u0275inject(h.$))},p.\u0275prov=n.\u0275\u0275defineInjectable({token:p,factory:p.\u0275fac}),p}()},23934:function(Ve,se,t){t.d(se,{K:function(){return b}});var e=t(7005),n=t(73637),f=t(46706),i=t(23196),O=t(9161),T=t(28252),V=t(752),h=t(56339),M=powerbi.explore.services.events,I=powerbi.explore.viewModels.ViewModelFactory,b=function(){function P(g,u,s,p,C,A){this.dialogService=g,this.eventBridge=u,this.telemetryService=s,this.trustedVisualService=p,this.visualPluginService=C,this.undoRedoService=A}return P.prototype.deleteCustomVisuals=function(g){return(0,e.mG)(this,void 0,void 0,function(){var u,s,C=this;return(0,e.Jh)(this,function(A){switch(A.label){case 0:return u=_.filter(I.getCustomVisualTypes(this.visualPluginService.getConvertibleVisuals()),function(S){var L=S.plugin;return!C.trustedVisualService.isAutomaticallyImportedVisual(L.name)&&void 0===L.favoriteId}),this.getCustomVisualsTileCounts(g,u),[4,this.selectVisualsToDelete(u)];case 1:return(s=A.sent())&&s.length>0?[4,this.confirm(s)]:[3,3];case 2:A.sent()&&this.deleteVisuals(g,s),A.label=3;case 3:return[2]}})})},P.prototype.selectVisualsToDelete=function(g){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(p){switch(p.label){case 0:return[4,this.dialogService.openHostDialog({dialogName:"DeleteCustomVisualsDialog",componentName:"DeleteCustomVisualsDialog",bindings:g,config:{panelClass:["delete-custom-visuals"],width:"750px",minWidth:500}})];case 1:return[4,p.sent().afterClosed().toPromise()];case 2:return[2,p.sent()]}})})},P.prototype.confirm=function(g){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(p){switch(p.label){case 0:return[4,this.dialogService.openHostDialog({dialogName:"DeleteVisualWarningDialog",componentName:"DeleteVisualWarningDialog",bindings:g,config:{panelClass:["delete-visual-warning-dialog"],width:"650px",minWidth:500}})];case 1:return[4,p.sent().afterClosed().toPromise()];case 2:return[2,p.sent()]}})})},P.prototype.deleteVisuals=function(g,u){var s=this;this.undoRedoService.register("DeleteCustomVisual",function(){u.forEach(function(p){var C=p.plugin.name;s.telemetryService.logEvent(powerbi.telemetry.EXDeleteCustomViz,{customVisualName:C}),s.visualPluginService.removePlugin(C),_.remove(g.resourcePackages,function(A){return A.name===C}),_.remove(g.publicCustomVisuals,function(A){return A===C}),s.eventBridge.publishToChannel(M.deleteCustomVisual,{visual:p.plugin})}),s.eventBridge.publishToChannel(M.visualPluginsChanged)})},P.prototype.getCustomVisualsTileCounts=function(g,u){u.forEach(function(s){s.tileCount=0,g.sections.forEach(function(p){for(var C=0,A=p.visualContainers;C<A.length;C++)A[C].config.singleVisual.visualType===s.plugin.name&&(s.tileCount+=1)}),s.selected=!1})},P.\u0275fac=function(u){return new(u||P)(n.\u0275\u0275inject(f.x),n.\u0275\u0275inject(i.J),n.\u0275\u0275inject(T.y0),n.\u0275\u0275inject(V.t),n.\u0275\u0275inject(h.D),n.\u0275\u0275inject(O.z))},P.\u0275prov=n.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}()},17555:function(Ve,se,t){t.d(se,{M:function(){return P}});var e=t(73637),n=t(16660),f=t(78144),i=t(23196),O=t(25991),T=t(32130),V=t(97850),h=t(33892),M=t(9161),I=t(56339),b=t(71442),P=function(){function g(u,s,p,C,A,S,L,D,m,v){this.legacyService=powerbi.drillDetailsModuleFactory().create(u,s,m,D,L,C,S,p,A,v)}return g.prototype.drillToDetails=function(u,s,p){this.legacyService.drillToDetails(u,s,p)},g.prototype.generateDetailsTable=function(u,s,p,C){return this.legacyService.generateDetailsTable(u,s,p,C)},g.prototype.getDetailsTableTargetMeasures=function(u){return this.legacyService.getDetailsTableTargetMeasures(u)},g.prototype.clear=function(){this.legacyService.clear()},g.prototype.getContext=function(){return this.legacyService.getContext()},g.prototype.setContext=function(u){this.legacyService.setContext(u)},g.prototype.hasContext=function(){return this.legacyService.hasContext()},g.prototype.clearContext=function(){this.legacyService.clearContext()},g.\u0275fac=function(s){return new(s||g)(e.\u0275\u0275inject(n.i),e.\u0275\u0275inject(f.L),e.\u0275\u0275inject(i.J),e.\u0275\u0275inject(O.z),e.\u0275\u0275inject(T.r),e.\u0275\u0275inject(V.w),e.\u0275\u0275inject(h.z),e.\u0275\u0275inject(M.z),e.\u0275\u0275inject(I.D),e.\u0275\u0275inject(b.Q))},g.\u0275prov=e.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac}),g}()},16850:function(Ve,se,t){t.d(se,{V:function(){return i}});var e=t(7005),n=t(73637),f=t(83603),i=function(){function O(T){this.dropdown=new jsCommon.Lazy(function(){return T.getService("dropdown")})}return O.prototype.showContextMenu=function(T,V,h,M,I,b,P,g){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(u){switch(u.label){case 0:return[4,this.dropdown.getValue()];case 1:return u.sent().showContextMenu(T,V,h,M,I,b,P,g),[2]}})})},O.prototype.hide=function(T){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(V){switch(V.label){case 0:return[4,this.dropdown.getValue()];case 1:return V.sent().hide(T),[2]}})})},O.prototype.showMenu=function(T,V,h,M,I,b,P){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(g){switch(g.label){case 0:return[4,this.dropdown.getValue()];case 1:return[2,g.sent().showMenu(T,V,h,M,I,b,P)]}})})},O.prototype.hideAll=function(T){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(V){switch(V.label){case 0:return[4,this.dropdown.getValue()];case 1:return V.sent().hideAll(T),[2]}})})},O.prototype.isDropdownRegistered=function(T){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(V){switch(V.label){case 0:return[4,this.dropdown.getValue()];case 1:return[2,V.sent().isDropdownRegistered(T)]}})})},O.\u0275fac=function(V){return new(V||O)(n.\u0275\u0275inject(f.H))},O.\u0275prov=n.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac,providedIn:"root"}),O}()},70377:function(Ve,se,t){t.d(se,{U:function(){return T}});var e=t(808),n=t(33156),f=t(73637),i=t(31854),O=t(33714),T=function(){function V(h,M,I){this.capabilitiesSubject=new n.t(1),this.capabilities$=this.capabilitiesSubject.asObservable(),this.service=powerbi.explore.services.createExplorationCapabilitiesService(h,M),I&&this.setCapabilities(I)}return V.prototype.setCapabilities=function(h){this.service.setCapabilities(h),this.capabilitiesSubject.next(this.getCapabilities())},V.prototype.getCapabilities=function(){return this.service.getCapabilities()},V.\u0275fac=function(M){return new(M||V)(f.\u0275\u0275inject(i.a),f.\u0275\u0275inject(O.vZ),f.\u0275\u0275inject(e.m,8))},V.\u0275prov=f.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}()},46897:function(Ve,se,t){t.d(se,{W:function(){return n}});var e=t(73637),n=function(){function f(){this.commandsDisplayOverride={}}return f.prototype.setExtensions=function(i){this.extensions=i},f.prototype.getExtensions=function(){return this.extensions},f.prototype.getGroups=function(){var i;return(null===(i=this.extensions)||void 0===i?void 0:i.groups)||[]},f.prototype.getCommandExtensions=function(){var i;return(null===(i=this.extensions)||void 0===i?void 0:i.commands)||[]},f.prototype.executeCustomCommand=function(i,O,T,V){i.publishToChannel(powerbi.explore.services.events.visualCustomCommand,{visualContainer:O,command:T,dataPointsDescriptions:V})},f.prototype.getCommandsDisplayOptions=function(i){return this.commandsDisplayOverride[i]||{}},f.prototype.setCommandDisplayOption=function(i,O,T){this.commandsDisplayOverride[i]=this.commandsDisplayOverride[i]||{},this.commandsDisplayOverride[i][O]=T},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac=function(O){return new(O||f)},providedIn:"root"}),f}()},33401:function(Ve,se,t){t.d(se,{I:function(){return b}});var e=t(7005),n=t(98864),f=t(25991),i=t(73637),O=t(93171),T=t(23196),V=t(33892),h=t(26076),M=t(34429),I=t(28252),b=function(P){function g(u,s,p,C,A,S){var L=P.call(this)||this;return L.legacyService=powerbi.explore.services.createExplorationNavigationService(u,s,p,C,A,S,new n.X([]),new n.X(null)),L}return(0,e.ZT)(g,P),g.prototype.registerExplorationViewModel=function(u){this.legacyService.registerExplorationViewModel(u)},g.prototype.updateActiveSection=function(u){return this.legacyService.updateActiveSection(u)},g.prototype.updateExplorationActiveSectionIndex=function(u){this.legacyService.updateExplorationActiveSectionIndex(u)},g.prototype.goto=function(u,s){this.legacyService.goto(u,s)},g.prototype.getCurrentSection=function(){return this.legacyService.getCurrentSection()},g.prototype.getAllSections=function(){return this.legacyService.getAllSections()},g.prototype.getAllVisualContainers=function(u){return this.legacyService.getAllVisualContainers(u)},g.prototype.getCurrentExploration=function(){return this.legacyService.getCurrentExploration()},g.prototype.getCurrentExploreCanvas=function(){return this.legacyService.getCurrentExploreCanvas()},g.prototype.getSectionByName=function(u){return this.legacyService.getSectionByName(u)},g.prototype.loadExploration=function(u,s,p){this.legacyService.loadExploration(u,s,p)},g.prototype.startExplorationSession=function(u){this.legacyService.startExplorationSession(u)},g.prototype.updateExplorationTelemetryData=function(u){this.legacyService.updateExplorationTelemetryData(u)},g.prototype.getExplorationTelemetryData=function(){return this.legacyService.getExplorationTelemetryData()},g.prototype.showExplorationMask=function(){this.legacyService.showExplorationMask()},g.prototype.hideExplorationMask=function(){this.legacyService.hideExplorationMask()},g.prototype.back=function(){this.legacyService.back()},g.prototype.getCurrentZone=function(){return this.legacyService.getCurrentZone()},Object.defineProperty(g.prototype,"sections$",{get:function(){return this.legacyService.sections$},enumerable:!1,configurable:!0}),g.prototype.emitUpdatedSections=function(){this.legacyService.emitUpdatedSections()},Object.defineProperty(g.prototype,"currentSection$",{get:function(){return this.legacyService.currentSection$},enumerable:!1,configurable:!0}),g.\u0275fac=function(s){return new(s||g)(i.\u0275\u0275inject(O.r),i.\u0275\u0275inject(T.J),i.\u0275\u0275inject(V.z),i.\u0275\u0275inject(M.F),i.\u0275\u0275inject(I.y0),i.\u0275\u0275inject(h.Z))},g.\u0275prov=i.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac}),g}(f.z)},13034:function(Ve,se,t){t.d(se,{j:function(){return h}});var e=t(73637),n=t(97186),f=t(82195),i=t(25991),O=t(9020),T=powerbi.common.constants.dsrDataReaderType,V=powerbi.explore.util.VisualContainerUtils,h=function(){function M(I,b,P,g){this.dataProxy=I,this.explorationStateManager=b,this.explorationNavigation=P,this.visualSyncService=g}return M.prototype.applyDirty=function(I,b,P){if(I){P.stopDataQueries&&this.dataProxy.stopCommunication(T);try{var g=this.explorationStateManager.apply(I,b,P);if(this.syncFilterState(g),P.clearQueryCaches){var u=this.explorationNavigation.getCurrentExploration();V.clearExplorationQueryCaches(u)}return g}finally{P.stopDataQueries&&this.dataProxy.resumeCommunication(T)}}},M.prototype.syncFilterState=function(I){if(I)for(var b=0,P=I.visualContainers;b<P.length;b++){var g=P[b];g.config.singleVisual.syncGroup&&this.visualSyncService.syncFilterState(g)}},M.\u0275fac=function(b){return new(b||M)(e.\u0275\u0275inject(n.d),e.\u0275\u0275inject(f.J),e.\u0275\u0275inject(i.z),e.\u0275\u0275inject(O.M))},M.\u0275prov=e.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac}),M}()},27419:function(Ve,se,t){t.d(se,{K3:function(){return M},L_:function(){return g},p7:function(){return I}});var e=t(73637),n=t(90547),f=t(33714),i=t(12954),O=t(29494),T=t(56339),V=t(52725);function h(u,s,p,C){var A=u.get(i.m,null),S=u.get(V.s,null);return powerbi.explore.services.createExplorationVisualPluginService(s,p,C,A,S)}function M(u,s,p,C){return h(u,p,C,s)}var I={provide:T.D,useFactory:M,deps:[e.Injector,n.bh,f.vZ,O.t]},b=new e.InjectionToken("ScopedExplorationVisualPluginServiceOverrideToken"),g={provide:T.D,useFactory:function(u,s,p,C){var A=u.get(b,null);return A?e.Injector.create([A],u).get(T.D):h(u,s,p,C)},deps:[e.Injector,f.vZ,O.t,n.l6]}},62802:function(Ve,se,t){t.d(se,{H$:function(){return A},cW:function(){return L}});var e=t(7005),n=t(73637),f=t(66859),i=t(50187),O=t(70377),T=t(33714),V=t(13109),h=t(18266),M=t(18840),I=t(40262),b=t(99876),P=t(25991),g=t(43612),u=t(752),s=t(56339),p=t(62282),C=function(){function D(m,v,l,y,d,w,x,N,X,ne,Ce,he,Fe){this.legacyService=(0,p.I)(l,X,x,d,y,N,m,w,v,ne,Ce,he,Fe)}return D.prototype.validate=function(m,v,l){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(y){return[2,this.legacyService.validate(m,v,l)]})})},D.prototype.shouldBlockVisualQuery=function(m){return this.legacyService.shouldBlockVisualQuery&&this.legacyService.shouldBlockVisualQuery(m)},D.\u0275fac=function(v){return new(v||D)(n.\u0275\u0275inject(i.E),n.\u0275\u0275inject(O.U),n.\u0275\u0275inject(T.vZ),n.\u0275\u0275inject(h.o),n.\u0275\u0275inject(M.h),n.\u0275\u0275inject(I.o),n.\u0275\u0275inject(b.k),n.\u0275\u0275inject(u.t),n.\u0275\u0275inject(s.D),n.\u0275\u0275inject(f.D),n.\u0275\u0275inject(P.z),n.\u0275\u0275inject(g.o),n.\u0275\u0275inject(V.U,8))},D.\u0275prov=n.\u0275\u0275defineInjectable({token:D,factory:D.\u0275fac}),D}(),A=new n.InjectionToken("ScopedVisualValidatorServiceOverrideToken"),L={provide:p.R,useFactory:function(D,m,v,l,y,d,w,x,N,X,ne,Ce,he,Fe){var fe=D.get(A,null);return fe?n.Injector.create([fe],D).get(p.R):new C(m,v,l,y,d,w,x,N,X,ne,Ce,he,Fe)},deps:[n.Injector,i.E,O.U,T.vZ,h.o,M.h,I.o,b.k,u.t,s.D,f.D,P.z,g.o,[V.U,new n.Optional]]}},66555:function(Ve,se,t){t.d(se,{G:function(){return O}});var e=t(7005),n=t(73637),f=t(46706),i=t(18266),O=function(){function T(V,h){this.modernDialogService=V,this.localizationService=h}return T.prototype.show=function(V,h,M,I,b,P,g,u,s){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var p,A;return(0,e.Jh)(this,function(D){switch(D.label){case 0:return p=this.create(V,h,M,I,b,P,g,u,s),A={dialogName:"ExportData",componentName:"ExportDataDialogComponent",bindings:{viewModel:p},config:{width:"652px",height:"600px",maxHeight:"100%",maxWidth:"100%",minHeight:256,minWidth:320,autoFocus:!0,panelClass:["no-padding","no-border"],ariaLabel:this.localizationService.get("ModalDialog_ExportDataTitleTwo")}},[4,this.modernDialogService.openHostDialog(A)];case 1:return[4,D.sent().afterClosed().toPromise()];case 2:return[2,D.sent()]}})})},T.prototype.create=function(V,h,M,I,b,P,g,u,s){var p=0===M,C=[this.localizationService.get("ModalDialog_ExportDataSummarized"),this.localizationService.get("ModalDialog_ExportDataUnderlying")];return b&&C.push(this.localizationService.get("ModalDialog_ExportDataMatrixVisual")),{options:C,isExlFormatDisabled:!(p&&h),hasMeasuresForUnderlyingData:I,isExportMatrixVisualDataSupported:b,exportDataMode:P,isCsvFormatDisabled:!V,exportXlsxUnsupportedType:M,isExploreAuthorized:g,artifactId:u,model:s}},T.\u0275fac=function(h){return new(h||T)(n.\u0275\u0275inject(f.x),n.\u0275\u0275inject(i.o))},T.\u0275prov=n.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac,providedIn:"root"}),T}()},18200:function(Ve,se,t){t.d(se,{I:function(){return A}});var e=t(21654),n=t(29494),f=t(73637),i=t(39478),O=t(18266),T=t(16660),V=t(56339),h=t(74850),M=t(31701),I=t(33714),b=t(86777),P=t(67471),g=t(17555),u=powerbi.data.services.SemanticQuerySerializer,s=powerbi.explore.QueryProjectionBuilderCoreUtils,p=powerbi.common.constants.onPremiseVSName,C=new Map([["MipClientLabelDisabled","ExportData_FailureMessage_DisabledLabel"],["MipClientBadInput","ExportData_FailureMessage_DeletedLabel"],["MipClientServiceDisabled","ExportData_FailureMessage_LabelServiceInternalError"],["MipClientUnsupportedProtection","ExportData_FailureMessage_AdHocLabel"],["MipClientInternalError","ExportData_FailureMessage_LabelServiceInternalError"]]),A=function(){function S(L,D,m,v,l,y,d,w,x,N,X){this.notificationToastService=D,this.localizationService=m,this.conceptualSchemaProxy=v,this.visualPluginService=l,this.visualPluginOps=y,this.featureSwitchService=d,this.displayNameService=w,this.fileSaver=x,this.lazyScoped=N,this.drillToDetails=X,this.promiseFactory=L}return S.prototype.exportTileDataToCsv=function(L){var D=this,m=L.contract,v=L.config,l=powerbi.dataServices.TileUtils.getVisualType(v),y=this.getDataSources(L),d=this.promiseFactory.defer(),w=this.localizationService,x=this.notificationToastService,N=x.notify({title:w.get("ExportData_LoadingTitle"),message:w.get("ExportData_LoadingMessage"),notificationType:3});return this.conceptualSchemaProxy.get(y).then(function(X){x.hide(N);var ne=powerbi.dataServices.ContractUtils.convertToSemanticQueryWithDataShapeBinding(m.query),Ce=u.deserializeQuery(ne.defn),he=v.visualContainer.elements,Fe=he&&he.length>0?he[0].DataRoles:null,fe=D.visualPluginService.getPlugin(l),ae=s.createProjectionBuilderFromDataRoles(fe,Fe,Ce,X);if(D.visualPluginService.capabilities(l)){var Me={objects:v.visualContainer.$visualContainer.config.singleVisual.objects,visualType:l,query:new powerbi.explore.contracts.VisualQuery(Ce,ae.build(ne.shape),[])};D.exportVisualDataToCsv(v.visualContainer.heading1,{data:L.visual.data,dataTransforms:L.visual.dataTransforms},y,D.mockVisualContainer(Me),null).then(function(ce){d.resolve(ce)},function(ce){d.reject(ce)})}},function(){x.hide(N)}),d.promise},S.prototype.exportVisualDataToCsv=function(L,D,m,v,l){var y=this.localizationService,w=this.notificationToastService.notify({title:y.get("ExportData_LoadingTitle"),message:y.get("ExportData_LoadingMessage"),notificationType:3,sticky:!0}),x=this.lazyScoped.get("exportVisualData").then(function(N){return N.exportToCsv(L,D,m,v,l)});return this.handleExportDataResult(x,w,"Csv")},S.prototype.exportVisualDataToExcel=function(L,D,m,v,l,y,d,w){var x=this,N=this.localizationService,X=this.notificationToastService,ne=this.promiseFactory.defer(),Ce=X.notify({title:N.get("ExportData_LoadingTitle"),message:N.get("ExportData_LoadingMessage"),notificationType:3,sticky:!0});return this.conceptualSchemaProxy.get(m).then(function(he){var fe=v;if(1===y){var ae=x.drillToDetails.generateDetailsTable(v.config.singleVisual,he,d,!0);if(!ae)return void ne.reject({blob:null,errorDetails:{errorType:4}});fe=x.mockVisualContainer(ae)}x.promiseFactory.resolve(powerbi.dataServices.utils.generateFiltersDescription(he,l,fe.config.singleVisual,x.visualPluginService,x.displayNameService,x.localizationService)).then(function(pe){x.lazyScoped.get("exportVisualData").then(function(ge){return ge.exportToExcel(L,D,m,fe,l,pe,y,w)}).then(function(ge){ne.resolve(ge)},function(ge){ne.reject(ge)})},function(){ne.reject({blob:null,errorDetails:{errorType:5}})})},function(){ne.reject({blob:null,errorDetails:{errorType:3}})}),this.handleExportDataResult(ne.promise,Ce,"Xlsx")},S.prototype.mockVisualContainer=function(L){var D={name:jsCommon.Utility.generateGuid(),config:{singleVisual:L},layouts:jsCommon.ArrayExtensions.createWithId(),filters:[]};return D.layouts.push({id:0,position:{x:0,y:0,width:0,height:0}}),D},S.prototype.canExportTileData=function(L){if(!this.featureSwitchService.featureSwitches.exportToCsvEnabled||L.contract.type!==powerbi.dataServices.contracts.TileType.composite)return!1;var m=L.visual.type;if(!this.visualPluginService.getPlugin(m)||!L.data||!this.visualPluginOps.isQueryVisual(m))return!1;try{var d=powerbi.dataServices.ContractUtils.convertToSemanticQueryWithDataShapeBinding(L.contract.query).defn;if(!d||!d.Version||d.Version<powerbi.data.SemanticQueryVersions.Version2)return!1}catch(w){return!1}return!0},S.prototype.getExportDataToExcelUnsupportedType=function(L,D){var m=L.config.singleVisual,v=m.objects,d=this.featureSwitchService.featureSwitches.insightApps;return v&&v.forecast?3:v&&v.clustering?2:this.visualPluginService.isScriptVisual(m.visualType)?4:e.CI.isActionAllowed(D,d,8)?0:5},S.prototype.areExploreOperationsAuthorized=function(L){return!!L&&e.CI.areExploreOperationsAuthorized(L)},S.prototype.isDataModelASOnPremises=function(L){return L&&L.vsName&&L.vsName===p},S.prototype.getDataSources=function(L){var D=L.contract,m=powerbi.explore.contracts.createDataSourceArray();m.push({type:"dsr",id:D.modelId,name:D.modelName,dsr:{schemaName:D.modelName,vsName:L.dataSet.vsName,dbName:L.dataSet.dbName,modelId:D.modelId}});var l=powerbi.explore.constants.ExplorationSchemaName,y={type:powerbi.explore.dataReaderPlugins.ExplorationDataReaderType,id:D.id,name:l,extends:D.modelName,exploration:{schemaName:l,extends:D.modelName,getModelExtensions:function(){return L.config.visualContainer.$modelExtensions},getDataSourceVariables:function(){return L.config.visualContainer.dataSourceVariables}}};return m.push(y),m},S.prototype.saveResult=function(L){switch(L.format){case 0:this.fileSaver.saveAs(L.blob,L.fileName,{type:"text/csv;charset=utf-8;"});break;case 1:this.fileSaver.saveAs(L.blob,L.fileName,{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;"})}},S.prototype.handleExportDataResult=function(L,D,m){var v=this,l=this.promiseFactory.defer(),y=this.localizationService,d=this.notificationToastService;return L.then(function(w){null!=w.errorDetails?(d.notify({title:y.get("ExportData_FailureTitle"),message:y.get("ExportData_FailureMessage_default_".concat(m)),notificationType:2}),l.reject(w)):(d.notify(w.isPartialResult?{title:y.get("ExportData_PartialDataTitle"),message:y.get("ExportData_PartialDataMessage"),notificationType:5}:{title:y.get("ExportData_Success_Header"),message:y.get("ExportData_Success"),notificationType:4,duration:8e3}),v.saveResult(w),l.resolve(w))},function(w){var x=null==w?void 0:w.errorDetails,N="ExportData_FailureMessage_default_".concat(m),X=null;_.isEmpty(x)?"Unexpected export error: ".concat(JSON.stringify(w,Object.getOwnPropertyNames(w))):x.errorCode&&C.get(w.errorDetails.errorCode)?N=C.get(w.errorDetails.errorCode):6===x.errorType?N="ExportData_EmptyColumnName":3===x.errorType?N="ExportData_SchemaLoadingFailure":0===x.errorType?N="ExportData_QueryGenerationFailure":5===x.errorType?N="ExportData_GenerateFiltersDescriptionFailure":4===x.errorType?N="ExportData_GenerateDetailsTableFailure":1===x.errorType?N="ExportData_NoData":2===x.errorType?N="ExportData_QueryError":7===x.errorType?(N="ExportData_UnhandledExtensionSchema",X={displayText:y.get("Generic_LearnMore"),href:"https://go.microsoft.com/fwlink/?linkid=2227980"}):"NetworkConnectionIssue"===x.errorMessage&&0===x.status&&(N="ServerError_NetworkConnectionIssue"),d.notify({title:y.get("ExportData_ExportFailureTitle"),message:y.get(N),notificationType:2,learnMoreLink:X}),l.reject(w)}).finally(function(){return d.hide(D)}),l.promise},S.\u0275fac=function(D){return new(D||S)(f.\u0275\u0275inject(n.t),f.\u0275\u0275inject(i.Q),f.\u0275\u0275inject(O.o),f.\u0275\u0275inject(T.i),f.\u0275\u0275inject(V.D),f.\u0275\u0275inject(h.f),f.\u0275\u0275inject(I.vZ),f.\u0275\u0275inject(M.O),f.\u0275\u0275inject(b.m),f.\u0275\u0275inject(P.H),f.\u0275\u0275inject(g.M))},S.\u0275prov=f.\u0275\u0275defineInjectable({token:S,factory:S.\u0275fac}),S}()},78107:function(Ve,se,t){t.d(se,{U:function(){return n}});var e=t(73637),n=function(){function f(){}return f.prototype.exportToExcel=function(i,O){},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac=function(O){return new(O||f)},providedIn:"root"}),f}()},9508:function(Ve,se,t){t.d(se,{W:function(){return b}});var e=t(86726),n=t(72607),f=t(29494),i=t(28252),O=t(73637),T=t(29541),V=t(33714),h=t(6459),M=t(40262),I=powerbi.common.contracts.FavoriteType,b=function(){function P(g,u,s,p,C,A,S,L){this.promiseFactory=g,this.telemetryService=u,this.favoritesHttpService=s,this.orgStoreCustomVisualsService=p,this.visualPaneSettingsService=C,this.featureSwitchService=A,this.publicCustomVisualService=S,this.resourcePackagesService=L}return P.prototype.reset=function(g){_.forEach(g.getVisuals(),function(u){if(u.custom){var s=u;s.favoriteId=void 0,s.resourcePackageId=void 0,s.isOutOfBox=!1}})},P.prototype.ensureFavoriteVisualResources=function(g){var p,C,u=this,s=[];if(this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps){var A=this.visualPaneSettingsService.getFavoritePublicCustomVisuals().then(function(L){p=L});s.push(A)}var S=this.ensureFavoritesLoaded().then(function(L){C=L});return s.push(S),this.promiseFactory.allSettled(s).then(function(){return u.ensureFavoriteVisualResourcesWithPublicCvs(C,g,p)})},P.prototype.ensureFavoriteVisualResourcesWithPublicCvs=function(g,u,s){var p=_.map(g,function(A){return A.favoriteObject}),C=this.getResourcePackagesToRegister(p,s);return this.telemetryService.logEvent(powerbi.telemetry.SettingsFavoriteResourcePackages,{favoriteResourcePackageAction:"Get",favoriteResourcePackagePayload:_.join(_.map(p,function(A){return A.name}))}),this.resourcePackagesService.registerPackages(C),u.ensurePlugins(C).then(function(){for(var A=0,S=g;A<S.length;A++){var L=S[A],D=L.favoriteObject,m=u.getPlugin(D.name);m.favoriteId=L.id,m.resourcePackageId=D.id}})},P.prototype.ensureOutOfBoxVisuals=function(g){var u=this;return this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps?this.orgStoreCustomVisualsService.getOrgCustomVisuals().then(function(s){return u.ensureOutOfBoxVisualsWithPublicCvs(g,u.getPublicOutOfBoxVisualsFromGalleryItems(s))}):this.ensureOutOfBoxVisualsWithPublicCvs(g)},P.prototype.getPublicOutOfBoxVisualsFromGalleryItems=function(g){return _.map(_.filter(g,function(u){return u.customVisualContract.isOutOfBox&&u.customVisualContract.isPublicVisual}),function(u){return u.customVisualContract.name})},P.prototype.ensureOutOfBoxVisualsWithPublicCvs=function(g,u){var s=this;return this.favoritesHttpService.getOutOfBoxVisuals(null).then(function(C){var A=s.getResourcePackagesToRegister(C,u);return s.telemetryService.logEvent(powerbi.telemetry.SettingsOutOfBoxVisuals,{outOfBoxVisuals:_.join(_.map(A,function(S){return S.name}))}),s.resourcePackagesService.registerPackages(A),g.ensurePlugins(A).then(function(){for(var S=0,L=A;S<L.length;S++){var D=L[S],m=g.getPlugin(D.name);m.isOutOfBox=!0,m.resourcePackageId=D.id}})})},P.prototype.getResourcePackagesToRegister=function(g,u){var s=g;if(u&&u.length>0){var p=this.publicCustomVisualService.createPublicResourcePackagesByName(u);s=p;for(var C=function(v){var l=_.find(s,function(y){return y.name===v.name});l?A.featureSwitchService.featureSwitches.stopPublicRpsPopulation||(_.remove(s,function(y){return y.name===v.name}),l.id=v.id,s.push(l)):s.push(v)},A=this,S=0,L=g;S<L.length;S++)C(L[S])}return s},P.prototype.addVisualToFavorites=function(g){var u=this,s=[];if(this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps){var p=this.publicCustomVisualService.getPublicVisualTypes([g.name]).then(function(S){if(S[0])return u.visualPaneSettingsService.addFavoritePublicCustomVisual(g)});s.push(p)}if(g.resourcePackageId<0)return this.promiseFactory.all(s);var C=this.telemetryService.startEvent(powerbi.telemetry.SettingsFavoriteResourcePackages,{favoriteResourcePackageAction:"Add",favoriteResourcePackagePayload:g.name}),A=this.favoritesHttpService.addFavoriteResourcePackage(g.resourcePackageId,g.name,C.event).then(function(S){g.favoriteId=S.id,u.favoritesLoaded=!1,C.resolve()}).catch(function(){C.reject()});return s.push(A),this.promiseFactory.allSettled(s)},P.prototype.removeVisualFromFavorites=function(g){var u=this,s=[];if(this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps){var p=this.publicCustomVisualService.getPublicVisualTypes([g.name]).then(function(L){if(L[0])return u.visualPaneSettingsService.removeFavoritePublicCustomVisual(g)});s.push(p)}if(g.resourcePackageId<0)return this.promiseFactory.all(s);var C={id:g.favoriteId,favoriteType:I.ResourcePackage,uniqueId:void 0,getPermissions:void 0},A=this.telemetryService.startEvent(powerbi.telemetry.SettingsFavoriteResourcePackages,{favoriteResourcePackageAction:"Remove",favoriteResourcePackagePayload:g.name}),S=this.favoritesHttpService.deleteFavorite(C,A.event).then(function(){g.favoriteId=void 0,u.favoritesLoaded=!1,A.resolve()}).catch(function(){A.reject()});return s.push(S),this.promiseFactory.allSettled(s)},P.prototype.isFavoriteVisual=function(g){return this.isFavoriteResourcePackage(g.resourcePackageId)},P.prototype.isFavoriteResourcePackage=function(g){return this.ensureFavoritesLoaded().then(function(u){return _.some(u,function(s){return s.favoriteId===g})})},P.prototype.isOutOfBoxVisual=function(g){return this.isOutOfBoxResourcePackage(g.resourcePackageId)},P.prototype.isOutOfBoxResourcePackage=function(g){return this.ensureOutOfBoxVisualsLoaded().then(function(u){return _.some(u,function(s){return s.id===g})})},P.prototype.ensureFavoritesLoaded=function(){var g=this;return this.favoritesLoaded||this.favoritesLoadInProgress||(this.favoritesLoadInProgress=!0,this.favoritesPromise=this.promiseFactory.defer(),this.favoritesHttpService.getFavoriteResourcePackages(null).then(function(u){g.favoritesLoaded=!0,g.favoritesPromise.resolve(u)}).catch(function(){g.favoritesLoaded=!1,g.favoritesPromise.reject()}).finally(function(){g.favoritesLoadInProgress=!1})),this.favoritesPromise.promise},P.prototype.ensureOutOfBoxVisualsLoaded=function(){var g=this;return this.outOfBoxLoaded||this.outOfBoxLoadInProgress||(this.outOfBoxLoadInProgress=!0,this.outOfBoxPromise=this.promiseFactory.defer(),this.favoritesHttpService.getOutOfBoxVisuals(null).then(function(u){g.outOfBoxLoaded=!0,g.outOfBoxPromise.resolve(u)}).catch(function(){g.outOfBoxLoaded=!1,g.outOfBoxPromise.reject()}).finally(function(){g.outOfBoxLoadInProgress=!1})),this.outOfBoxPromise.promise},P.\u0275fac=function(u){return new(u||P)(O.\u0275\u0275inject(f.t),O.\u0275\u0275inject(i.y0),O.\u0275\u0275inject(e.R),O.\u0275\u0275inject(n.T),O.\u0275\u0275inject(T.R),O.\u0275\u0275inject(V.vZ),O.\u0275\u0275inject(h.B),O.\u0275\u0275inject(M.o))},P.\u0275prov=O.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac,providedIn:"root"}),P}()},18160:function(Ve,se,t){t.d(se,{x:function(){return h}});var e=t(7005),n=t(73637),f=t(16660),i=t(18766),O=t(33714),T=t(18266),V=powerbi.explore.viewModels,h=function(){function M(I,b,P,g){this.conceptualSchemaProxy=I,this.dataSources=b,this.featureSwitchService=P,this.localizationService=g}return M.prototype.getViewModel=function(I,b,P){return void 0===I&&(I=this.dataSources.get()),void 0===b&&(b=!0),void 0===P&&(P=!1),(0,e.mG)(this,void 0,void 0,function(){var g;return(0,e.Jh)(this,function(u){switch(u.label){case 0:return b||this.conceptualSchemaProxy.clearCache(),[4,this.conceptualSchemaProxy.get(I)];case 1:return g=u.sent(),[2,V.FieldListViewModelMerger.mergeModel(void 0,g,V.createFieldListViewModelFactory(this.localizationService,this.featureSwitchService,P),void 0,!1,!0,!0)]}})})},M.\u0275fac=function(b){return new(b||M)(n.\u0275\u0275inject(f.i),n.\u0275\u0275inject(i.D),n.\u0275\u0275inject(O.vZ),n.\u0275\u0275inject(T.o))},M.\u0275prov=n.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac}),M}()},18179:function(Ve,se,t){t.d(se,{I:function(){return V}});var e=t(73637),n=t(31701),f=t(32130),i=t(56339),O=powerbi.explore.services.FilterBuilder,T=powerbi.explore.util.VisualContainerUtils,V=function(){function h(M,I,b){this.displayNameService=M,this.filterGenerator=I,this.visualPlugin=b}return h.prototype.getContextualFilterRestatements=function(M,I){if(_.isEmpty(I.filters))return[];for(var b=new O(I),P=0,g=I.filters;P<g.length;P++){var s=g[P].filter;s&&b.addVisualFilter({filter:s})}var p=b.getFilters();return this.getFilterRestatementResult(M,I,p)},h.prototype.getVisualFilterRestatements=function(M,I,b,P){var g=this.filterGenerator.calculateVisualContainerFilter(M,I,P,b,!1,!0);return this.getFilterRestatementResult(b,P,g)},h.prototype.getFilterRestatement=function(M,I,b,P){return this.displayNameService.getFilterRestatementForOverlay(M,I,b,null,P)},h.prototype.getFilterRestatementResult=function(M,I,b){var P=this,g=T.getVisualCapabilities(I,this.visualPlugin);return _.chain(b.dataFiltersUnmerged).concat(b.highlightFiltersUnmerged).without(void 0).filter(function(u){return!u.isHidden}).map(function(u){var s;return P.getFilterRestatement(u,M,g,null===(s=I.config)||void 0===s?void 0:s.singleVisual)}).flatten().without(void 0).sortBy("fieldName").value()},h.\u0275fac=function(I){return new(I||h)(e.\u0275\u0275inject(n.O),e.\u0275\u0275inject(f.r),e.\u0275\u0275inject(i.D))},h.\u0275prov=e.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac}),h}()},34429:function(Ve,se,t){t.d(se,{F:function(){return P}});var e=t(7005),n=t(98864),f=t(73637),i=t(23196),O=t(33892),T=t(73229),V=t(33714),h=t(67471),M=t(28252),I=t(42),b=powerbi.common.helpers.TelemetryHelper,P=function(){function g(u,s,p,C,A,S,L){this.eventBridge=u,this.featureSwitchService=s,this.lazyScoped=p,this.selection=C,this.servicePauser=A,this.telemetry=S,this.viewModeState=L,this.canvasLayout$=new n.X(0),this.canvasLayoutCapabilities=this.initializeLayoutCapabilities()}return Object.defineProperty(g.prototype,"currentLayout$",{get:function(){return this.canvasLayout$.asObservable()},enumerable:!1,configurable:!0}),g.prototype.getCurrentLayout=function(){return this.canvasLayout$.value},g.prototype.getCurrentLayoutCapabilities=function(){return this.canvasLayoutCapabilities[this.canvasLayout$.value]},g.prototype.changeFormFactor=function(u,s,p){return void 0===p&&(p=!0),(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(C){switch(C.label){case 0:return this.canvasLayout$.value===u?[3,2]:(this.telemetry.logEvent(powerbi.telemetry.EXChangeCanvasLayout,{sourceLayout:b.getTelemetryCanvasLayout(this.canvasLayout$.value),targetLayout:b.getTelemetryCanvasLayout(u),viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode())}),p&&this.selection.clearSelection(),[4,this.applyFormFactor(u,s)]);case 1:C.sent(),C.label=2;case 2:return[2]}})})},g.prototype.applyFormFactor=function(u,s){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(C){switch(C.label){case 0:return this.isMobileFormattingSupported()?[4,this.applyAuthoringMobileState(u,s)]:[3,2];case 1:C.sent(),C.label=2;case 2:return this.setCurrentLayout(u),this.updateExploreCanvas(s),this.updateViewModeState(),this.eventBridge.publishToChannel(powerbi.explore.services.events.formFactorChanged,{layout:u}),[2]}})})},g.prototype.isMobileFormattingSupported=function(){return this.featureSwitchService.featureSwitches.mobileAuthoringFormattingUI&&1===this.viewModeState.getMode()},g.prototype.updateExploreCanvas=function(u){var s=u.exploration.contract;u.exploration.exploreCanvas=powerbi.explore.viewModels.ViewModelFactory.convertSectionToExploreCanvas(s,s.sections[s.activeSectionIndex],this.canvasLayout$.value)},g.prototype.applyAuthoringMobileState=function(u,s){return(0,e.mG)(this,void 0,void 0,function(){var p,A;return(0,e.Jh)(this,function(S){switch(S.label){case 0:return[4,this.lazyScoped.get("mobileVcObjectsProxy")];case 1:return(p=S.sent()).isSupported()?1!==u?[3,4]:[4,this.lazyScoped.get("mobileStateAuthoringService")]:[2];case 2:return[4,S.sent().load(s.exploration.contract)];case 3:return S.sent(),s.exploration.contract=p.wrap(s.exploration.contract),[3,5];case 4:A=p.unwrap(),s.exploration.contract=null!=A?A:s.exploration.contract,S.label=5;case 5:return[2]}})})},g.prototype.setCurrentLayout=function(u){this.canvasLayout$.next(u),0===u?this.servicePauser.resume():this.servicePauser.pause()},g.prototype.updateViewModeState=function(){var u=this.getCurrentLayoutCapabilities();this.viewModeState.updateConfig(function(s){s.displayOptions.showMobilePane=u.canShowMobilePageVisualsPane()})},g.prototype.initializeLayoutCapabilities=function(){var u,s=this,p=function(){return 1===s.viewModeState.getMode()},A=((u={})[0]={canMoveMultipleVisuals:_.stubTrue,canShowCanvasBackground:_.stubTrue,canShowCanvasBackdrop:_.stubFalse,canShowCanvasOutspace:_.stubTrue,canShowCodePane:_.stubTrue,canShowVisualContainerHeader:_.stubTrue,canShowVisualContainerHeaderInset:_.stubFalse,canShowMobilePageVisualsPane:_.stubFalse,canShowLayoutGrid:p,canRemoveVisualFromLayout:_.stubFalse,canCutCopyPaste:_.stubTrue,canDelete:_.stubTrue,canPassUnhandledKeysToSelectedVisual:_.stubTrue,canAddRemoveSections:p,canShowVisualToolbar:p},u[1]={canMoveMultipleVisuals:p,canShowCanvasBackground:_.stubTrue,canShowCanvasBackdrop:p,canShowCanvasOutspace:_.stubTrue,canShowCodePane:_.stubFalse,canShowVisualContainerHeader:function(){return 0===s.viewModeState.getMode()},canShowVisualContainerHeaderInset:_.stubTrue,canShowMobilePageVisualsPane:p,canShowLayoutGrid:p,canRemoveVisualFromLayout:p,canCutCopyPaste:_.stubFalse,canDelete:_.stubFalse,canPassUnhandledKeysToSelectedVisual:_.stubTrue,canAddRemoveSections:_.stubFalse,canShowVisualToolbar:p},u[2]={canMoveMultipleVisuals:_.stubFalse,canShowCanvasBackground:_.stubTrue,canShowCanvasBackdrop:_.stubTrue,canShowCanvasOutspace:_.stubTrue,canShowCodePane:_.stubFalse,canShowVisualContainerHeader:_.stubFalse,canShowVisualContainerHeaderInset:_.stubFalse,canShowMobilePageVisualsPane:_.stubTrue,canShowLayoutGrid:_.stubFalse,canRemoveVisualFromLayout:_.stubTrue,canCutCopyPaste:_.stubFalse,canDelete:_.stubFalse,canPassUnhandledKeysToSelectedVisual:_.stubTrue,canAddRemoveSections:_.stubFalse,canShowVisualToolbar:_.stubFalse},u);return jsCommon.FreezeUtility.deepFreeze(A),A},g.\u0275fac=function(s){return new(s||g)(f.\u0275\u0275inject(i.J),f.\u0275\u0275inject(V.vZ),f.\u0275\u0275inject(h.H),f.\u0275\u0275inject(O.z),f.\u0275\u0275inject(T._),f.\u0275\u0275inject(M.y0),f.\u0275\u0275inject(I.kc))},g.\u0275prov=f.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac}),g}()},78359:function(Ve,se,t){t.d(se,{RD:function(){return i},wG:function(){return I}});var e=t(73637),n=t(28252),f=powerbi.telemetry,i=function(){function b(P){this.telemetryService=P,this.visual=new O,this.telemetry=new T(this.telemetryService),this.core=new V}return b.prototype.openGroupDialog=function(P){},b.\u0275fac=function(g){return new(g||b)(e.\u0275\u0275inject(n.y0))},b.\u0275prov=e.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b}(),O=function(){function b(){}return b.prototype.canGroup=function(P,g,u){return!1},b.prototype.group=function(P,g,u,s,p){return null},b}(),T=function(){function b(P){this.telemetryService=P}return b.prototype.logGroupActionTelemetry=function(P,g,u,s,p){},b.prototype.logBinBySizeActionTelemetry=function(P,g,u,s,p){},b.prototype.logBinByCountActionTelemetry=function(P,g,u,s,p,C){},b.prototype.logGroupsErrorTelemetry=function(P,g,u,s){},b.prototype.logGroupsDeleteTelemetry=function(P,g,u){},b.prototype.logGroupsUsageTelemetry=function(P,g,u,s,p,C){var A=this;P.then(function(S){var L=g.getConceptualProperty(S);if(L){var D=g.getTargetEntity().entity,m=powerbi.explore.utils.GroupUtils.getGroupMode(D,L,null);0!==m&&A.telemetryService.logEvent(f.EXGroupsUsage,{visualType:u,role:s,sourceRole:p,action:C,groupType:2===m?"Bin":"List"})}})},b}(),V=function(){function b(){}return b.prototype.validateGroupDefinition=function(P,g){return!1},b.prototype.validateGroupCount=function(P,g){return!1},b.prototype.applyModelChanges=function(P,g,u){return new powerbi.Promise(function(s,p){return p(void 0)})},b}(),h=new e.InjectionToken("GroupAuthoringServiceOverrideToken"),I={provide:i,useFactory:function(b,P){var g=b.get(h,null);return g?e.Injector.create([g],b).get(i):new i(P)},deps:[e.Injector,n.y0]}},86479:function(Ve,se,t){t.d(se,{S:function(){return V}});var e=t(73637),n=t(70242),f=t(24267),O="foreground",T="background",V=function(){function h(M,I){this.themeServiceBase=M,this.highContrastCssGenerationService=I}return h.prototype.applyHighContrastStyle=function(M){var I=M.name;if(this.themeServiceBase.isThemeLoaded(I)){var b=this.themeServiceBase.getVisualStyle({highContrastTheme:M});this.highContrastCssGenerationService.applyHighContrastTheme(I,{foregroundColor:b.colorPalette[O].value,backgroundColor:b.colorPalette[T].value,linkColor:b.colorPalette.hyperlink.value,buttonBackgroundColor:b.colorPalette[T].value,buttonForegroundColor:b.colorPalette.foregroundButton.value,disabledTextColor:(b.colorPalette.disabledText||b.colorPalette[O]).value,selectedBackgroundColor:b.colorPalette.foregroundSelected.value,selectedForegroundColor:b.colorPalette[T].value})}},h.prototype.removeHighContrastStyle=function(){this.highContrastCssGenerationService.removeHighContrastStyle()},h.\u0275fac=function(I){return new(I||h)(e.\u0275\u0275inject(n.T),e.\u0275\u0275inject(f.g))},h.\u0275prov=e.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"}),h}()},85867:function(Ve,se,t){t.d(se,{g:function(){return h}});var e=t(7005),n=t(73637),f=t(42),i=t(46706),O=t(33714),T=t(18266),V=jsCommon.FocusGroupNavigation,h=function(){function M(I,b,P,g,u){this.viewModeState=I,this.dialogService=b,this.zone=P,this.featureSwitchService=g,this.localizationService=u}return M.prototype.startListening=function(){var I=this;this.zone.runOutsideAngular(function(){return $(document).on("keypress",$.proxy(I.onKeypress,I))})},M.prototype.stopListening=function(){$(document).off("keypress",this.onKeypress)},M.prototype.show=function(){var I={title:this.localizationService.get("HotkeyDialog_Title"),modulePath:"@powerbi/ExploreUIDialogs/hotkey-dialog.module#HotkeyDialogModule",componentId:"HotkeyDialogComponentId",inputArgs:{viewMode:this.viewModeState.getMode(),useNewControls:this.featureSwitchService.featureSwitches.accessibilityTopLevelNav},hideCancelButton:!0,hideOkButton:!0};return this.dialogService.openHostDialog({bindings:I,componentName:"SimpleTemplateDialogComponent",config:{hasBackdrop:!0,autoFocus:!0},dialogName:"SimpleTemplateDialogComponent"})},M.prototype.onKeypress=function(I){return(0,e.mG)(this,void 0,void 0,function(){var P;return(0,e.Jh)(this,function(u){switch(u.label){case 0:return"?"!==String.fromCharCode(I.charCode)||V.canHandleKeyEvents(I.target)?[2]:(P=document.activeElement,[4,this.show()]);case 1:return u.sent().afterClosed().subscribe(function(){P&&P.nodeType===Node.ELEMENT_NODE&&P.focus()}),[2]}})})},M.\u0275fac=function(b){return new(b||M)(n.\u0275\u0275inject(f.kc),n.\u0275\u0275inject(i.x),n.\u0275\u0275inject(n.NgZone),n.\u0275\u0275inject(O.vZ),n.\u0275\u0275inject(T.o))},M.\u0275prov=n.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac}),M}()},13387:function(Ve,se,t){t.d(se,{W:function(){return D}});var e=t(7005),n=t(73637),f=t(10527),i=t(5066),O=t(23196),T=t(46706),V=t(18266),h=t(39478),M=t(28252),I=t(56339),b=t(5896),P=t(50187),g=t(87530),u=t(15827),s=t(33714),p=powerbi.contracts.ResourcePackageItemType,C=powerbi.explore.util.ResourcePackageUtils,A=powerbi.explore.services.events,D=function(){function m(v,l,y,d,w,x,N,X,ne,Ce,he,Fe,fe){this.localFileService=v,this.eventBridge=l,this.modernDialogService=y,this.localizationService=d,this.notificationToast=w,this.telemetryService=x,this.upload=N,this.visualPluginService=X,this.promiseFactory=ne,this.httpService=Ce,this.featureSwitchService=he,this.pbivizFileService=Fe,this.approvedResourceService=fe}return m.prototype.importWithDialog=function(v){var l=this,y=this.promiseFactory.defer(),d=y.promise.then(function(w){return l.handleImport(v,w)});return this.localFileService.chooseLocalFile(y,".pbiviz"),d},m.prototype.handleImport=function(v,l){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var y,d,w;return(0,e.Jh)(this,function(x){switch(x.label){case 0:return this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps?[4,this.pbivizFileService.getVisualTypeFromFile(l)]:[3,8];case 1:return d=x.sent(),!this.featureSwitchService.featureSwitches.checkPbivizFileContentOnImport||d?this.approvedResourceService&&this.approvedResourceService.isApprovedResource(d)?[4,this.pbivizFileService.getPublicResourcePackageFromFile(l,d)]:[3,5]:[3,7];case 2:return y=x.sent(),this.featureSwitchService.featureSwitches.stopPublicRpsPopulation?[3,4]:[4,this.postFile(l)];case 3:w=x.sent(),y?y.id=w.id:y=w,x.label=4;case 4:return[3,7];case 5:return[4,this.postFile(l)];case 6:y=x.sent(),x.label=7;case 7:return[3,10];case 8:return[4,this.postFile(l)];case 9:y=x.sent(),x.label=10;case 10:return y?(powerbi.localStorageService.getData("VISUAL_DEVELOPER_MODE_ENABLED")?this.showImportFromFileOptionDialog(y,v):this.import(v,y),[2]):(this.showImportErrorDialog(),[2])}})})},m.prototype.showImportFromFileOptionDialog=function(v,l){var y=this,d=this.promiseFactory.defer(),w=this.localizationService;return this.approvedResourceService&&!this.approvedResourceService.isApprovedResource(v.name)?(this.import(l,v).then(function(){return d.resolve()}),d.promise):(this.featureSwitchService.featureSwitches.consumePublicCvsWithoutRps&&(v.isPublic=!0),this.modernDialogService.promptHostSimpleDialog("ImportVisualWarning",{title:w.get("ImportCustomVisualCdnOverrideTitle"),message:w.get("ImportCustomVisualCdnOverrideBody"),okButtonText:w.get("ImportCustomVisualCdnOverrideFromFile"),cancelButtonText:w.get("ImportCustomVisualCdnOverrideFromAppsource"),additionalMessages:[w.get("ImportCustomVisualCdnOverrideVersion"),w.get("ImportCustomVisualCdnOverrideWarning")]}).then(function(x){1===x&&(v.developerModeVisual=!0,y.telemetryService.logEvent(powerbi.telemetry.EXCdnVisualOverride,{customVisualName:v.name})),y.import(l,v).then(function(){return d.resolve()})}),d.promise)},m.prototype.showImportErrorDialog=function(){var v=this.localizationService;this.modernDialogService.promptHostSimpleDialog("ImportVisualError",{title:v.get("ImportVisual_ErrorDialogHeader"),message:v.get("ImportVisual_ErrorDialogMessage"),okButtonText:v.get("ImportVisual_Close")})},m.prototype.import=function(v,l,y){var d=this;return y||(y=l),this.visualPluginService.ensurePlugins([l],!0).then(function(){l.isPublic?(C.ensurePublicCustomVisuals(v),_.remove(v.publicCustomVisuals,function(x){return x===l.name}),v.publicCustomVisuals.push(l.name),d.featureSwitchService.featureSwitches.stopPublicRpsPopulation||(C.ensureResourcePackages(v),_.remove(v.resourcePackages,function(x){return x.name===y.name}),v.resourcePackages.push(y))):(C.ensureResourcePackages(v),_.remove(v.resourcePackages,function(x){return x.name===l.name}),v.resourcePackages.push(l)),d.eventBridge.publishToChannel(A.addCustomVisual,l),d.eventBridge.publishToChannel(A.visualPluginsChanged),d.notificationToast.hide(d.toastNotificationId),d.toastNotificationId=void 0;var w=d.promiseFactory.defer();return w.resolve(),w.promise})},m.prototype.notifyWhenLoadingCustomVisual=function(v,l,y){this.toastNotificationId=this.notificationToast.notify({title:this.localizationService.get(v),message:this.localizationService.get(y),notificationType:3})},m.prototype.postFile=function(v){var l=this,y=this.httpService.powerbiRequestOptions();y.retryCount=0,y.headers[powerbi.common.constants.uploadFileSizeHeaderName]=v.size.toString(),this.notifyWhenLoadingCustomVisual("ImportCustomVisualLoadingTitle",0,"PleaseWaitUntilReady");var d=this.telemetryService.startEvent(powerbi.telemetry.EXImportCustomViz,{fileName:v.name,resourcePackageId:-1,resourcePackageName:""});return this.upload.post("/powerbi/content/visual",[v],y).then(function(w){var x=w.data;null==x.type&&(x.type=0);for(var N=0,X=x.items;N<X.length;N++){var ne=X[N];null==ne.type&&(ne.type=p.CustomVisualJavascript)}return d.event.info.resourcePackageId=x.id,d.event.info.resourcePackageName=x.name,d.resolve(),x},function(w){l.showImportErrorDialog();var N={errorCode:"Import of custom visual failed -> code: ".concat(w&&w.error?w.error.code:"-1")};return d.reject(N),null})},m.\u0275fac=function(l){return new(l||m)(n.\u0275\u0275inject(f.W),n.\u0275\u0275inject(O.J),n.\u0275\u0275inject(T.x),n.\u0275\u0275inject(V.o),n.\u0275\u0275inject(h.Q),n.\u0275\u0275inject(M.y0),n.\u0275\u0275inject(i.g),n.\u0275\u0275inject(I.D),n.\u0275\u0275inject(g.O),n.\u0275\u0275inject(u.M),n.\u0275\u0275inject(s.vZ),n.\u0275\u0275inject(b.L),n.\u0275\u0275inject(P.E))},m.\u0275prov=n.\u0275\u0275defineInjectable({token:m,factory:m.\u0275fac}),m}()},58168:function(Ve,se,t){t.d(se,{Y:function(){return L}});var e=t(73637),n=t(93171),f=t(23196),i=t(9161),O=t(33714),T=t(18266),V=t(28252),h=t(42),M=powerbi.DataViewScopeIdentity,I=powerbi.explore.FilterExpressionMetadataUtils,b=powerbi.explore.contracts.FilterType,P=powerbi.explore.FilterUtils,g=powerbi.explore.services.IncludeExcludeSQExprVisitor,u=powerbi.data.Selector,s=powerbi.data.SemanticFilter,p=powerbi.data.SQExpr,C=powerbi.data.SQExprBuilder,A=powerbi.data.SQExprUtils,S=powerbi.explore.util.VisualContainerUtils,L=function(){function D(m,v,l,y,d,w,x){this.contextActivityService=m,this.eventBridge=v,this.featureSwitchService=l,this.localizationService=y,this.telemetry=d,this.undoRedo=w,this.viewModeState=x}return D.prototype.setFilter=function(m,v,l,y){var X,d=this,w=_.map(v,function(Ce){return u.convertSelectorsByColumnToSelector(Ce)}),x=_.find(l.filters,function(Ce){return Ce.howCreated===m}),N=2;y&&l.config&&l.config.singleVisual&&(X=I.getSelectorsByColumnMetadata(v,l.config.singleVisual,y)),x||(x={howCreated:m,name:P.getNextFilterName(l.filters),type:3===m?b.Include:b.Exclude,filterExpressionMetadata:X},N=1);var ne=x.filter;3===m?ne=this.getIncludeFilter(w):(ne=this.getExcludeFilter(ne,w),2===N&&(X||x.filterExpressionMetadata)&&(x.filterExpressionMetadata=I.mergeFilterExpressionMetadata(x.filterExpressionMetadata,X))),this.undoRedo.register("UpdateIncludeExcludeFilter",function(){x.filter=ne;var he,Ce={container:l,scopeType:0};1===N&&(P.add(Ce.container,x),d.telemetry.logEvent(powerbi.telemetry.EXAddFilter,{filterType:3===m?"Include":"Exclude",filterScopeType:"Visual",fieldKind:"Entity",drillToDetailsMode:S.hasGroupByItemsInQuery(l),viewMode:powerbi.explore.util.getTelemetryViewMode(d.viewModeState.getMode())})),d.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(he=P.createChangeFilterActivity(d.contextActivityService,"Include Exclude Filter")),P.notifyFilterContainerChangedByUser(d.eventBridge,{filter:x,changeType:N,scope:Ce,changeFilterActivity:he}),he&&he.resolve()})},D.prototype.buildViewModel=function(m,v,l,y,d){for(var x=[],N=0,X=m?m.where():[];N<X.length;N++){var Ce=X[N].condition,he=new g(l,y,d);Ce.accept(he),x.push.apply(x,he.dataPoints||[])}return{points:x,filter:m,displayName:P.getDisplayNameForIncludeExcludeFilters(this.localizationService,v,x.length),restatement:this.getRestatement(x)}},D.prototype.updateFilterContainer=function(m,v){var l=this,y=m.contract,w=this.buildFilter(v,y.type);this.undoRedo.register("UpdateIncludeExcludeFilter",function(){var N,x=m.getFilterContainerScope();y.filter=w,l.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(N=P.createChangeFilterActivity(l.contextActivityService,"Include Exclude Filter")),P.notifyFilterContainerChangedByUser(l.eventBridge,{filter:y,changeType:2,scope:x,changeFilterActivity:N}),N&&N.resolve()})},D.prototype.isIncludeExcludeSupported=function(m,v,l){if(l)for(var d=0,w=_.map(l,function(j){return u.convertSelectorsByColumnToSelector(j)});d<w.length;d++)for(var X=0,ne=u.toScopeIdentities(w[d]);X<ne.length;X++)if(p.isNot(ne[X].expr))return!1;if(m&&m.config&&m.config.singleVisual){var fe=m.config.singleVisual.query;if(fe){if(v){var ae=v.schema(void 0);if(ae&&ae.capabilities&&ae.capabilities.supportsMultiTableTupleFilters)return!0}for(var ge=void 0,Me=0,ce=fe.defn.select();Me<ce.length;Me++){var ie=ce[Me].expr;if(!A.isMeasure(ie)){var G=(ie=powerbi.data.VariationRewriter.run(ie,v)).getTargetEntity();if(ge){if(!p.equals(ge,G))return!1}else ge=G}}return!0}}return!1},D.prototype.buildFilter=function(m,v){for(var l,y=m.points[0],d=C.inValues(y.columns,[y.values]),w=1;w<m.points.length;w++)l=C.inValues((y=m.points[w]).columns,[y.values]),d=C.or(d,l);return v===b.Exclude&&(d=C.not(d)),s.fromSQExpr(d)},D.prototype.getRestatement=function(m){for(var v=[],l=0,y=m;l<y.length;l++)v.push(y[l].text);return v.join(this.localizationService.get("ListJoin_Separator"))},D.prototype.getIncludeFilter=function(m){var v=u.filterExprsFromSelectors(m);return M.filterFromExprs(v,!1)},D.prototype.getExcludeFilter=function(m,v){var l=u.filterExprsFromSelectors(v);if(m){var y=_.find(m.where(),function(Ce){return 16===Ce.condition.kind});if(y){for(var w=y.condition.arg,x=0,N=l;x<N.length;x++){var ne=powerbi.data.ScopeIdentityExtractor.getInExpr(N[x]);w=C.or(w,ne)}return w=C.not(w),s.fromSQExpr(w)}}return M.filterFromExprs(l,!0)},D.\u0275fac=function(v){return new(v||D)(e.\u0275\u0275inject(n.r),e.\u0275\u0275inject(f.J),e.\u0275\u0275inject(O.vZ),e.\u0275\u0275inject(T.o),e.\u0275\u0275inject(V.y0),e.\u0275\u0275inject(i.z),e.\u0275\u0275inject(h.kc))},D.\u0275prov=e.\u0275\u0275defineInjectable({token:D,factory:D.\u0275fac}),D}()},12029:function(Ve,se,t){t.d(se,{A:function(){return ge},U:function(){return Me}});var e=t(7005),n=t(73637),f=jsCommon.EnumExtensions,i=powerbi.visuals.shapes.Rect;function I(ce,J){if(u(J,ce)){var ie=i.bottom(J),G=ie-ce.top;ce.top=ie,ce.height-=G}}function b(ce,J){u(ce,J)&&(ce.height=J.top-ce.top)}function P(ce,J){if(s(ce,J)){var ie=i.right(J),G=ie-ce.left;ce.left=ie,ce.width-=G}}function g(ce,J){s(J,ce)&&(ce.width=J.left-ce.left)}function u(ce,J){return i.containsPoint(ce,i.topRight(J),!0)||i.containsPoint(ce,i.topLeft(J),!0)||i.containsPoint(J,i.bottomRight(ce),!0)||i.containsPoint(J,i.bottomLeft(ce),!0)}function s(ce,J){return i.containsPoint(ce,i.bottomRight(J),!0)||i.containsPoint(ce,i.topRight(J),!0)||i.containsPoint(J,i.topLeft(ce),!0)||i.containsPoint(J,i.bottomLeft(ce),!0)}var p=t(5801),C=t(23196),A=t(33892),S=t(9161),L=t(70377),D=t(33401),m=t(34429),v=t(28252),y=(powerbi,powerbi.explore),d=y.services.selectionUtils,w=powerbi.telemetry,x=y.contracts.traverseVisualContainerGroups,N=y.viewModels,X=y.util.CanvasDisplayUtility,ne=y.constants.ExploreCanvasConstants,Ce=y.services,he=powerbi.ItemGroupingManager,Fe=N.ViewModelFactory,fe=y.util.VisualContainerUtils,ae=y.contracts.isVisualContainer,pe=y.contracts.isVisualContainerGroup,ge=new n.InjectionToken("groupingLayoutManagers"),Me=function(){function ce(J,ie,G,j,F,E,k,R,z){var Q=this;this.eventBridge=J,this.explorationCapabilities=ie,this.explorationNavigation=G,this.formFactorProvider=j,this.selectionService=F,this.telemetryService=E,this.undoRedo=k,this.injector=R,this.groupingLayoutManagersLazy=_.map(z,function(me){return new jsCommon.Lazy(function(){return new me(Q)})}),this.visualAuthoringLazyLoader=new jsCommon.Lazy(function(){return Q.injector.get(p.$)})}return Object.defineProperty(ce.prototype,"visualAuthoring",{get:function(){return this._visualAuthoring||this.visualAuthoringLazyLoader.getValue()},enumerable:!1,configurable:!0}),ce.prototype.groupCanvasItems=function(J){var ie=this.formFactorProvider.getCurrentLayout();if(J&&!(J.length<2)&&1!==ie){var G=this.explorationNavigation.getCurrentExploreCanvas(),j=this.visualAuthoring.groupVisualContainers(G,J);this.getGroupingLayoutManager(j.contract.groupMode).onCreateGroup(j)}},ce.prototype.ungroupCanvasItems=function(J){var ie=this.explorationNavigation.getCurrentExploreCanvas(),G=this.visualAuthoring.ungroupVisualContainers(ie,J);this.getGroupingLayoutManager(G.contract.groupMode).onUngroup(G)},ce.prototype.canMergeCanvasItems=function(){var J=this,ie=d.getSelectedCanvasItems(this.selectionService),G=ie.filter(function(F){return pe(F)});return!(_.isEmpty(G)||ie.length<2)&&_.every(ie,function(F){if(ae(F)){for(var E=F.parentGroup;E;){if(_.includes(G,E))return!1;E=E.parentGroup}return!0}var k=!1;return x(F.children,function(R){return k=k||d.isCanvasItemSelected(R,J.selectionService)}),!k})},ce.prototype.mergeCanvasItemContainers=function(J){var ie=_.find(J,function(j){return y.contracts.isVisualContainerGroup(j)}),G=[];_.forEach(J,function(j){j!==ie&&(y.contracts.isVisualContainerGroup(j)?G.push.apply(G,j.children):G.push(j))}),this.moveCanvasItemsInTree(G,_.last(ie.children),!0,!0)},ce.prototype.moveCanvasItemInTree=function(J,ie,G,j){void 0===j&&(j=!1),this.moveCanvasItemsInTree([J],ie,G,j)},ce.prototype.moveCanvasItemsInTree=function(J,ie,G,j){void 0===j&&(j=!1);for(var F=this.explorationNavigation.getCurrentExploreCanvas(),E=_.map(J,function(q){return q.parentGroup&&q.parentGroup.name}),k=_.map(E,function(q){return q&&he.find(q,F.visualContainerGroups)}),R=this.visualAuthoring.moveCanvasItemsInTree(F,J,ie,G,j),z=0;z<R.length;z++){var Q=R[z],me=Q.parentGroup&&Q.parentGroup.name;if(E[z]!==me){if(E[z]){var le=he.find(E[z],F.visualContainerGroups);le?N.isVisualContainerGroup(le)&&this.removeCanvasItemFromGroup(le,Q):this.getGroupingLayoutManager(k[z].contract.groupMode).onRemoveChild(k[z],Q,!1)}if(me){var K=he.find(me,F.visualContainerGroups);N.isVisualContainerGroup(K)&&this.addCanvasItemToGroup(K,Q,z===R.length-1)}}}},ce.prototype.addLayoutToVisualContainer=function(J,ie,G){var j=this.formFactorProvider.getCurrentLayout();ie.layouts.push({id:j,position:G});var F=Fe.convertVisualContainer(this.explorationNavigation.getCurrentExploration(),J.contract,ie,j);J.visualContainers.push(F),J.visualContainerGroups=(0,e.ev)((0,e.ev)([],J.visualContainerGroups,!0),[F],!1)},ce.prototype.removeLayoutFromSelectedVisuals=function(J){var ie=this;this.undoRedo.register("RemoveLayoutFromSelectedVisuals",function(){for(var G=_.map(ie.selectionService.getSelectedElements(),function(R){return R.canvasItem}),j=ie.formFactorProvider.getCurrentLayout(),F=0,E=G;F<E.length;F++)ce.removeLayoutFromOneVisualContainer(j,J,E[F]);ie.selectionService.clearSelection(),ie.eventBridge.publishToChannel(Ce.events.canvasChanged)})},ce.prototype.removeLayoutFromVisualContainer=function(J,ie){var G=this;this.undoRedo.register("RemoveLayoutFromVisualContainer",function(){var j=G.formFactorProvider.getCurrentLayout();ce.removeLayoutFromOneVisualContainer(j,J,ie),_.find(G.selectionService.getSelectedElements(),function(E){return E.canvasItem===ie})&&G.selectionService.clearSelection(),G.eventBridge.publishToChannel(Ce.events.canvasChanged)})},ce.prototype.removeLayoutFromSection=function(J,ie,G){var j=this,F=0,E=J.visualContainers;this.undoRedo.register("RemoveLayoutsFromVisualContainers",function(){for(var k=0,R=E;k<R.length;k++)_.remove(R[k].layouts,function(Q){return Q.id===ie}).length>0&&F++;j.selectionService.clearSelection(),j.eventBridge.publishToChannel(Ce.events.sectionLayoutRemoved)}),1===ie&&this.telemetryService.logEvent(w.EXRemoveMobileCanvasVisuals,{reportId:G.reportId,numberOfVisualsRemoved:F})},ce.prototype.moveCanvasItemFromContract=function(J,ie){var G=this.explorationNavigation.getCurrentExploreCanvas(),j=he.find(J.name,G.visualContainerGroups);N.isVisualContainerGroup(j)&&this.updateGroupSize(j,{width:ie.width,height:ie.height},!1),this.moveCanvasItem(j,ie)},ce.prototype.moveCanvasItem=function(J,ie,G){void 0===G&&(G=!1),J.position=ie,J.updateViewState();var j=this.formFactorProvider.getCurrentLayout();!G&&J.parentGroup&&0===j&&this.getGroupingLayoutManager(J.parentGroup.contract.groupMode).onUpdateGroupChildren(J.parentGroup);var F=J.contract;this.eventBridge.publishToChannel(Ce.events.canvasItemContainerPositionChanged,{affectContainer:function(k){return k===F},changedItems:[F]})},ce.prototype.updateGroupSize=function(J,ie,G){this.getGroupingLayoutManager(J.contract.groupMode).onUpdateGroup(J,ie,G)},ce.prototype.addCanvasItemToGroup=function(J,ie,G){this.getGroupingLayoutManager(J.contract.groupMode).onAddChild(J,ie,G)},ce.prototype.removeCanvasItemFromGroup=function(J,ie){this.getGroupingLayoutManager(J.contract.groupMode).onRemoveChild(J,ie)},ce.prototype.alignSelectedVisuals=function(J,ie,G){1===G.length?this.alignSingleVisualContainer(J,ie,G[0]):this.alignMultipleVisualContainers(J,ie,G)},ce.prototype.visualsInLayout=function(J,ie){return _.filter(J.visualContainers,function(G){return _.some(G.layouts,function(j){return j.id===ie})})},ce.prototype.getLayoutForNewVisualContainer=function(J,ie,G){var j=this.formFactorProvider.getCurrentLayout(),F=X.getAutoLayoutVisualVCHeader(this.formFactorProvider,this.explorationCapabilities),E=_.map(J,function(R){var z=X.visualPositionToRect(R.layouts.withId(j).position);return z.top-=F,z.height+=F,z}),k=this.getLayoutForNewVisualContainerWithRects(E,ie,G);return k.top+=F,k.height-=F,X.rectToVisualPosition(k)},ce.prototype.getLayoutForNewVisualContainerWithRects=function(J,ie,G){return function(ce,J,ie,G,j,F,E,k){var R,z,Q,me;if(!_.isEmpty(ce))for(var le=0,K=ce;le<K.length;le++){var q=K[le],ye=i.bottom(q),Le=i.right(q);q.top<=J.y&&ye>=J.y?Le<J.x?R=!R||Le>i.right(R)?q:R:q.left>J.x&&(z=!z||q.left<z.left?q:z):q.left<=J.x&&Le>=J.x&&(ye<J.y?Q=!Q||ye>i.bottom(Q)?q:Q:q.top>J.y&&(me=!me||q.top<me.top?q:me))}var Ne=function(ce,J,ie,G,j,F,E,k,R){var Q,z={left:0,top:0,width:0,height:0},me=!1;return J&&ie?(z.left=Math.max(i.right(J),ie.left),z.top=Math.max(J.top,i.bottom(ie)),z.width=i.right(ie)-z.left,z.height=i.bottom(J)-z.top,Q=10,me=!!G):J&&j?(z.left=Math.max(i.right(J),j.left),z.top=J.top,z.width=i.right(j)-z.left,z.height=Math.min(i.bottom(J),j.top)-z.top,Q=6,me=!!G):G&&ie?(z.left=ie.left,z.top=Math.max(G.top,i.bottom(ie)),z.width=Math.min(G.left,i.right(ie))-z.left,z.height=i.bottom(G)-z.top,Q=9):G&&j?(z.left=j.left,z.top=G.top,z.width=Math.min(G.left,i.right(j))-z.left,z.height=Math.min(i.bottom(G),j.top)-z.top,Q=5):J?(z.left=Math.max(i.right(J)+R,ce.x-J.width/2),z.top=J.top,z.width=J.width,z.height=J.height,Q=14,me=!!G):ie?(z.left=ie.left,z.top=Math.max(i.bottom(ie)+R,ce.y-ie.height/2),z.width=ie.width,z.height=ie.height,Q=11):G?(z.left=Math.min(G.left-R,ce.x+G.width/2)-G.width,z.top=G.top,z.width=G.width,z.height=G.height,Q=13):j?(z.left=j.left,z.top=Math.min(j.top-R,ce.y+j.height/2)-j.height,z.width=j.width,z.height=j.height,Q=7):(z.left=ce.x,ce.x+E>F.width&&(z.left=F.width-E),z.top=ce.y,ce.y+k>F.height&&(z.top=F.height-k),z.width=E,z.height=k,Q=15),z.height=Math.min(i.bottom(F)-z.top,z.height),z.width=Math.min(i.right(F)-z.left,z.width),{result:z,flexibleDirection:Q,trimHorizontally:me}}(J,R,Q,z,me,ie,F,E,k),be=Ne.result,Y=Ne.flexibleDirection;return function(ce,J,ie){if(!_.isEmpty(ce))for(var G=0,j=ce;G<j.length;G++){var F=j[G];ie?(P(J,F),g(J,F),I(J,F),b(J,F)):(I(J,F),b(J,F),P(J,F),g(J,F))}}(ce,be,Ne.trimHorizontally),function(ce,J,ie,G){var j=f.hasFlag(J,1),F=f.hasFlag(J,2),E=f.hasFlag(J,4),k=f.hasFlag(J,8);if(ce.width<ie){var R=ie-ce.width;ce.width=ie,j&&F?ce.left-=R/2:j&&(ce.left-=R)}ce.height<G&&(R=G-ce.height,ce.height=G,E&&k?ce.top-=R/2:E&&(ce.top-=R))}(be,Y,G,j),function(ce,J,ie,G){ce.left=Math.max(J.left,ce.left),i.right(ce)>J.width&&(ce.width=J.width-ce.left,ce.width<ie&&(ce.left=Math.max(J.left,J.width-ie),ce.width=Math.min(J.width,ie))),ce.top=Math.max(ce.top,J.top),i.bottom(ce)>J.height&&(ce.height=J.height-ce.top,ce.height<G&&(ce.top=Math.max(J.top,J.height-G),ce.height=Math.min(J.height,G)))}(be,ie,G,j),be}(J,ie,{left:0,top:0,width:G.width,height:G.height},ne.AutoLayoutMinSpaceWidth,ne.AutoLayoutMinSpaceHeight,ne.AutoLayoutMaxSpaceWidth,ne.AutoLayoutMaxSpaceHeight,ne.AutoLayoutVisualPadding)},ce.prototype.getAbsolutePositionToCanvas=function(J){var ie=this.formFactorProvider.getCurrentLayout(),G=J.contract.parentGroup,j=G&&G.layouts.withId(ie);return fe.getAbsoluteVisualContainerPosition(J.position,ie,G=j?G:void 0)},ce.prototype.getRelativePositionToParentGroup=function(J,ie){var G=this.formFactorProvider.getCurrentLayout();return fe.getGroupRelativeVisualContainerPosition(J,ie.contract,G)},ce.prototype.alignMultipleVisualContainers=function(J,ie,G){var j=this;this.undoRedo.register("AlignMultipleVisualContainers",function(){var F=_.map(G,function(q){return j.getAbsolutePositionToCanvas(q)});switch(J){case 3:var E=_.min(_.map(F,function(q){return q.y}));j.moveContainersHelper(G,function(q){return q.y=ce.clampYValue(E,q.height,ie)},!0);break;case 4:var R=_.sumBy(F,function(q){return q.y+q.height/2})/F.length;j.moveContainersHelper(G,function(q){return q.y=ce.clampYValue(R-q.height/2,q.height,ie)},!0);break;case 5:var z=_.max(_.map(F,function(q){return q.y+q.height}));j.moveContainersHelper(G,function(q){return q.y=ce.clampYValue(z-q.height,q.height,ie)},!0);break;case 0:var Q=_.min(_.map(F,function(q){return q.x}));j.moveContainersHelper(G,function(q){return q.x=ce.clampXValue(Q,q.width,ie)},!0);break;case 1:var le=_.sumBy(F,function(q){return q.x+q.width/2})/F.length;j.moveContainersHelper(G,function(q){return q.x=ce.clampXValue(le-q.width/2,q.width,ie)},!0);break;case 2:var K=_.max(_.map(F,function(q){return q.x+q.width}));j.moveContainersHelper(G,function(q){return q.x=ce.clampXValue(K-q.width,q.width,ie)},!0);break;case 6:j.distributeSpace(G,F,!0,ie);break;case 7:j.distributeSpace(G,F,!1,ie)}})},ce.prototype.alignSingleVisualContainer=function(J,ie,G){var j=this;this.undoRedo.register("AlignSingleVisualContainer",function(){var F=G.position,E=ie.width,k=ie.height;if(G.parentGroup){var R=G.parentGroup.position;R&&(E=R.width,k=R.height)}switch(J){case 3:j.moveContainersHelper([G],function(K){return K.y=0},!1);break;case 4:case 7:var z=k/2-F.height/2;j.moveContainersHelper([G],function(K){return K.y=z},!1);break;case 5:var Q=k-F.height;j.moveContainersHelper([G],function(K){return K.y=Q},!1);break;case 0:j.moveContainersHelper([G],function(K){return K.x=0},!1);break;case 1:case 6:var me=E/2-F.width/2;j.moveContainersHelper([G],function(K){return K.x=me},!1);break;case 2:var le=E-F.width;j.moveContainersHelper([G],function(K){return K.x=le},!1)}})},ce.prototype.distributeSpace=function(J,ie,G,j){for(var F=this,E=G?"x":"y",k=G?"width":"height",R=G?ce.clampXValue:ce.clampYValue,z=_.min(_.map(ie,function(Y){return Y[E]})),Q=_.max(_.map(ie,function(Y){return Y[E]+Y[k]})),le=_.reduce(ie,function(Y,ue){return Y-ue[k]},Q-z)/(J.length-1),q=z,ye=0,Le=_.sortBy(J,function(Y){return F.getAbsolutePositionToCanvas(Y)[E]});ye<Le.length;ye++){var Ne=Le[ye],be=this.getAbsolutePositionToCanvas(Ne);be[E]=R(q,be[k],j),q+=be[k]+le,be=this.getRelativePositionToParentGroup(be,Ne),this.moveCanvasItem(Ne,be)}},ce.prototype.moveContainersHelper=function(J,ie,G){for(var j=0,F=J;j<F.length;j++){var E=F[j],k=G?this.getAbsolutePositionToCanvas(E):E.position;ie(k),G&&(k=this.getRelativePositionToParentGroup(k,E)),this.moveCanvasItem(E,k)}},ce.prototype.getGroupingLayoutManager=function(J){return this.groupingLayoutManagersLazy[J].getValue()},ce.clampXValue=function(J,ie,G){return J<0?0:ie+J>G.width?G.width-ie:J},ce.clampYValue=function(J,ie,G){return J<0?0:ie+J>G.height?G.height-ie:J},ce.removeLayoutFromOneVisualContainer=function(J,ie,G){var j=_.find(ie.visualContainers,function(F){return F.contract===G});if(j)return G.layouts.withId(J),_.pull(ie.visualContainers,j),ie.visualContainerGroups=_.without(ie.visualContainerGroups,j),_.remove(G.layouts,function(F){return F.id===J}).length>0},ce.\u0275fac=function(ie){return new(ie||ce)(n.\u0275\u0275inject(C.J),n.\u0275\u0275inject(L.U),n.\u0275\u0275inject(D.I),n.\u0275\u0275inject(m.F),n.\u0275\u0275inject(A.z),n.\u0275\u0275inject(v.y0),n.\u0275\u0275inject(S.z),n.\u0275\u0275inject(n.Injector),n.\u0275\u0275inject(ge,8))},ce.\u0275prov=n.\u0275\u0275defineInjectable({token:ce,factory:ce.\u0275fac}),ce}()},74449:function(Ve,se,t){t.d(se,{m:function(){return n}});var e=t(73637),n=function(){function f(){this.service=powerbi.explore.services.createLayoutInsertionHelper()}return f.prototype.getEmptySpaces=function(i,O){return this.service.getEmptySpaces(i,O)},f.prototype.getNonOverlapingRects=function(i,O){return this.service.getNonOverlapingRects(i,O)},f.prototype.getIntersectingRectangle=function(i,O){return this.service.getIntersectingRectangle(i,O)},f.\u0275prov=e.\u0275\u0275defineInjectable({token:f,factory:f.\u0275fac=function(O){return new(O||f)},providedIn:"root"}),f}()},90645:function(Ve,se,t){t.d(se,{LD:function(){return V},tC:function(){return b},xW:function(){return h},z_:function(){return I}});var e=t(73637),n=t(71854),f=t(23196),i=t(28252),O=t(11378),V=new e.InjectionToken("LoadProgressNotificationConfigurationInjectionToken"),h={provide:n.W,useFactory:function(g){return{decrementDelayInMilliseconds:1e3,ignoreShouldTrackLoadProgressCheck:!1,loadProgressNotificationActions:{completionFn:function(){return g.publishToChannel(powerbi.common.events.printSectionReady)},cancelFn:function(){}}}},deps:[f.J]},I={provide:n.W,useFactory:function(P,g){var u=P.get(V,null);return u?e.Injector.create([u],P).get(n.W):{decrementDelayInMilliseconds:1e3,ignoreShouldTrackLoadProgressCheck:!1,loadProgressNotificationActions:{completionFn:function(){return g.publishToChannel(powerbi.common.events.printSectionReady)},cancelFn:function(){}}}},deps:[e.Injector,f.J,i.y0]},b=function(){function P(g,u,s){this.ngZone=g,this.config=u,this.telemetryService=s,this.counter=0,this.decrementDelayInMilliseconds=u.decrementDelayInMilliseconds,this.ignoreShouldTrackLoadProgressCheck=u.ignoreShouldTrackLoadProgressCheck,this.loadProgressLogsEnabled=!!u.loadProgressLogsEnabled,this.reset()}return P.prototype.beginLoad=function(g,u){this.counter++,this.loadProgressLogsEnabled&&g&&this.telemetryService.logEvent(O.tJ,{visualType:u,visualName:g,isBeginLoad:!0,counterValue:this.counter})},P.prototype.endLoad=function(g,u){var s=this;this.trackableHost&&!this.shouldTrackProgress&&this.counter>0&&(this.shouldTrackProgress=this.ignoreShouldTrackLoadProgressCheck||this.trackableHost.shouldTrackLoadProgress()),(this.shouldTrackProgress||this.counter>0)&&this.ngZone.runOutsideAngular(function(){setTimeout(function(){s.counter--,s.loadProgressLogsEnabled&&g&&s.telemetryService.logEvent(O.tJ,{visualType:u,visualName:g,isBeginLoad:!1,counterValue:s.counter}),0===s.counter&&s.shouldTrackProgress&&s.ngZone.run(function(){return s.invokeCompletionCallback()})},s.decrementDelayInMilliseconds,!1)})},P.prototype.reset=function(){this.trackableHost?(this.shouldTrackProgress=this.ignoreShouldTrackLoadProgressCheck||this.trackableHost.shouldTrackLoadProgress(),this.shouldTrackProgress||this.invokeCompletionCallback()):this.shouldTrackProgress=!1,this.loadProgressLogsEnabled&&this.telemetryService.logEvent(O.Iw,{counterValue:this.counter})},P.prototype.cancelTracking=function(){this.loadProgressLogsEnabled&&this.telemetryService.logEvent(O.qd),this.config.loadProgressNotificationActions.cancelFn()},P.prototype.register=function(g){var u=this,s={};return this.trackableHost=g,this.registerTrackableHostContext=s,function(){u.registerTrackableHostContext===s?(u.trackableHost=void 0,u.registerTrackableHostContext=void 0):"De-registered a loadProgressNotification trackableHost when ".concat(u.registerTrackableHostContext?"another":"none"," is registered")}},P.prototype.invokeCompletionCallback=function(){this.config.loadProgressNotificationActions.completionFn()},P.\u0275fac=function(u){return new(u||P)(e.\u0275\u0275inject(e.NgZone),e.\u0275\u0275inject(n.W),e.\u0275\u0275inject(i.y0))},P.\u0275prov=e.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}()},77212:function(Ve,se,t){t.d(se,{r:function(){return b}});var e=t(98864),n=t(11378),f=t(73637),i=t(41541),O=t(23196),T=t(33714),V=t(34429),h=t(18266),M=t(28252),b=function(){function g(u,s,p,C,A,S){this.canvasZoom=u,this.eventBridge=s,this.featureSwitchService=p,this.formFactor=C,this.localizationService=A,this.telemetryService=S,this.visiblePanesCount=0,this.panes$=new e.X({}),this.stateToRestore=[],this.paneSelectors={},this.alwaysDockSidebar$=new e.X(!1)}return g.prototype.getPanes$=function(){return this.panes$.asObservable()},g.prototype.showPaneSwitcher=function(){var u=this.alwaysDockSidebar$.value;return!(!this.isPaneSwitcherSupported()||!u)||!(!this.isPaneSwitcherSupported()||0===this.visiblePanesCount)&&(this.visiblePanesCount>1||!_.find(this.panes$.value,function(p){return p.isPaneVisible}).isPaneExpanded)},g.prototype.registerPaneContainer=function(u){this.paneContainerSelector=u},g.prototype.registerPane=function(u,s,p,C){var A=this;void 0===C&&(C=!1);var S=this.panes$.value,L=S[u];if(L){if(!C)return;L.isPaneVisible!==s.isPaneVisible&&(this.visiblePanesCount+=s.isPaneVisible?1:-1)}else s.isPaneVisible&&this.visiblePanesCount++;s.optionsSetting={showOptions:!1},this.featureSwitchService.featureSwitches.onObject&&(s.optionsSetting={showOptions:!0,getDropdownItems:function(){return A.getPaneDropdownItems(u,s.title)},clickHandler:function(m){A.performPaneAction(u,m)}},s.disableClose=!this.allowUserClose(u)),S[u]=s,this.panes$.next(S),this.paneSelectors[P(u)]=p},g.prototype.togglePaneExpansion=function(u,s){if(void 0===s&&(s=!0),void 0!==this.isPaneVisible(u)){var C=!this.getPaneExpansion(u);return C&&this.saveState(),this.setPaneExpansion(u,C,s),C||this.saveState(),C}},g.prototype.togglePaneVisibility=function(u,s){void 0===s&&(s=!1);var p=this.isPaneVisible(u);void 0!==p&&this.setPaneVisibility(u,!p,s)},g.prototype.allowUserClose=function(u){return 0!==u&&1!==u},g.prototype.closePane=function(u){this.isPaneVisible(u)&&this.setPaneVisibility(u,!1),this.logPaneStatus()},g.prototype.isPaneExpanded=function(u){if(this.panes$.value[u])return this.getPaneExpansion(u)},g.prototype.isPaneVisible=function(u){var s=this.panes$.value;if(s[u])return s[u].isPaneVisible},g.prototype.updatePaneTitle=function(u,s){var p=this.panes$.value;!p[u]||(p[u].title=s,this.panes$.next(p))},g.prototype.addToPaneSwitcher=function(u,s){void 0===s&&(s=!1);var p=this.panes$.value;if(p[u]){var C=!!p[u].isDisabled!=!!s;if(p[u].isDisabled=s,p[u].isPaneVisible){if(s&&p[u].isPaneExpanded)p[u].isPaneExpanded=!1;else if(!C)return}else p[u].isPaneExpanded=!1,p[u].isPaneVisible=!0,this.visiblePanesCount++;this.panes$.next(p),this.logPaneStatus()}},g.prototype.setPaneDisabledState=function(u,s){if(void 0!==this.isPaneVisible(u)){var C=this.panes$.value;C[u].isDisabled!==s&&(C[u].isDisabled=s,s&&(C[u].isPaneExpanded=!1),this.panes$.next(C))}},g.prototype.setPaneExpansion=function(u,s,p){void 0===p&&(p=!1);var C=this.panes$.value;if(s&&!C[u].isPaneVisible&&this.setPaneVisibility(u,!0),this.isPaneSwitcherSupported()&&s&&p){var A=this.panes$.value;for(var S in A)A[S].isPaneExpanded=!1;this.panes$.next(A)}C[u].isPaneExpanded=s,this.panes$.next(C),this.logPaneStatus()},g.prototype.setPaneVisibility=function(u,s,p,C){void 0===p&&(p=!1),void 0===C&&(C=!0);var A=this.panes$.value;if("".concat(P(u)," pane not registered"),this.isPaneVisible(u)!==s){if(s&&this.saveState(),this.isPaneSwitcherSupported()&&s&&C){var S=this.panes$.value;for(var L in S)S[L].isPaneExpanded=!1}A[u].isPaneVisible=s,this.featureSwitchService.featureSwitches.onObject&&s&&!p&&(A[u].isPaneExpanded=!0),s?this.visiblePanesCount++:this.visiblePanesCount--,this.panes$.next(A),s||this.ensureState(),this.notifyPaneVisibilityChanged(u,s),this.logPaneStatus()}},g.prototype.getPaneOptionsSetting=function(u){var s=this.panes$.value,p=null==s?void 0:s[u];return null==p?void 0:p.optionsSetting},g.prototype.isPaneSwitcherSupported=function(){return this.featureSwitchService.featureSwitches.onObject&&1!==this.formFactor.getCurrentLayout()},g.prototype.setAlwaysDockSidebar=function(u){this.alwaysDockSidebar$.next(u)},g.prototype.getAlwaysDockSidebar$=function(){return this.alwaysDockSidebar$},g.prototype.getPaneDropdownItems=function(u,s){var C=[],A=this.isPaneExpanded(u),S=this.localizationService.get(s),L=this.alwaysDockSidebar$.value;return C.push({actionId:"ExpandAndReplace",text:this.localizationService.format("Pane_Switcher_ExpandAndReplace",S),isDisabled:A}),C.push({actionId:"Expand",text:this.localizationService.format("Pane_Switcher_Expand",S),isDisabled:A}),C.push({actionId:"Collapse",text:this.localizationService.get("Collapse"),isDisabled:!A}),C.push({actionId:"Close",text:this.localizationService.get("Close"),isDisabled:!this.allowUserClose(u)}),C.push({actionId:"AlwaysDockSidebar",text:this.localizationService.get("Always_Show_Sidebar"),checkable:!0,checked:L}),C},g.prototype.performPaneAction=function(u,s){var p=this.alwaysDockSidebar$.value;switch(s){case"ExpandAndReplace":case"Collapse":this.togglePaneExpansion(u,!0);break;case"Expand":this.togglePaneExpansion(u,!1);break;case"Close":this.setPaneVisibility(u,!1);break;case"AlwaysDockSidebar":this.setAlwaysDockSidebar(!p)}},g.prototype.getPaneExpansion=function(u){return this.panes$.value[u].isPaneExpanded},g.prototype.saveState=function(){if(this.isPaneSwitcherSupported()){var u=this.panes$.value,s=[];for(var p in u)u[p].isPaneExpanded&&u[p].isPaneVisible&&s.push(parseInt(p,10));this.stateToRestore.unshift(s),this.stateToRestore.length>50&&this.stateToRestore.pop()}},g.prototype.ensureState=function(){if(this.isPaneSwitcherSupported()){var u=this.panes$.value;for(var s in u)if(u[s].isPaneVisible&&u[s].isPaneExpanded)return;var p=_.filter(u,function(m){return m.isPaneVisible});if(1===p.length)p[0].isPaneExpanded=!0;else for(;this.stateToRestore.length>0;){var C=this.stateToRestore.shift();if(_.isEmpty(C)||_.some(C,function(m){return u[m].isPaneVisible})){for(var S=0,L=C;S<L.length;S++){var D=L[S];u[D].isPaneVisible&&(u[D].isPaneExpanded=!0)}break}}this.panes$.next(u)}},g.prototype.notifyPaneVisibilityChanged=function(u,s){this.eventBridge.publishToChannel(powerbi.explore.services.events.togglePaneVisibility,{pane:u,show:s})},g.prototype.logPaneStatus=function(){var u=this;setTimeout(function(){var s=document.querySelector(u.paneContainerSelector.selector),p=null==s?void 0:s.getBoundingClientRect().width,C=_.mapValues(u.paneSelectors,function(S){var L,D;return null===(D=null===(L=document.querySelector("".concat(u.paneContainerSelector.selector," ").concat(S.selector)))||void 0===L?void 0:L.getBoundingClientRect())||void 0===D?void 0:D.width}),A=u.panes$.value;u.telemetryService.logEvent(n.$k,{visibleCount:_.filter(A,function(S){return S.isPaneVisible}).length,expandedCount:_.filter(A,function(S){return S.isPaneVisible&&S.isPaneExpanded}).length,paneSwitcherVisible:u.showPaneSwitcher(),windowWidth:p,paneWidths:JSON.stringify(C),canvasZoom:u.canvasZoom.getCurrentZoomLevel()})})},g.\u0275fac=function(s){return new(s||g)(f.\u0275\u0275inject(i.w),f.\u0275\u0275inject(O.J),f.\u0275\u0275inject(T.vZ),f.\u0275\u0275inject(V.F),f.\u0275\u0275inject(h.o),f.\u0275\u0275inject(M.y0))},g.\u0275prov=f.\u0275\u0275defineInjectable({token:g,factory:g.\u0275fac}),g}();function P(g){switch(g){case 2:return"Data";case 3:return"Format";case 4:return"Insights";case 5:return"Reflex";case 6:return"QuickMeasures";case 7:return"Performance";case 8:return"Bookmarks";case 9:return"SyncSlicers";case 10:return"CanvasItems";case 0:return"BuildSkittle";case 1:return"ChartElementsSkittle";case 11:return"QuickExplore";case 12:return"AssistedCreation";case 13:return"ReportCreationCopilot"}}},28408:function(Ve,se,t){t.d(se,{F:function(){return l}});var e=t(98864),n=t(24708),f=t(17350),i=t(21810),O=t(23920),T=t(60717),V=t(4890),h=t(80966),M=t(38573),I=t(64489),b=t(73637),P=t(23196),g=t(25991),u=t(61278),s=t(70377),p=t(18266),C=t(59312),A=t(33714),S=t(93171),L=powerbi.explore.services.events,m="slowBannerNotificationId",v="refreshVisualNotificationId",l=function(){function y(d,w,x,N,X,ne,Ce,he,Fe){var fe,pe,ge,ae=this;this.eventBridge=d,this.capabilitiesService=w,this.localizationService=x,this.navigationService=N,this.notificationBarService=X,this.reportRefreshService=ne,this.featureSwitchesService=Ce,this.contextActivityService=he,this.reportViewSettingsService=Fe,this.canDisplayPrompt=!1,this.timeouts={},this.notificationsList=((fe={})[v]="",fe[m]="",fe),this.featureSwitchesService.featureSwitches.optimizeTabRibbon&&(this.capabilitiesSubscription=this.capabilitiesService.capabilities$.pipe((0,n.U)(function(Me){return Me.allowPauseQueries}),(0,f.x)()).subscribe(function(Me){ae.allowPauseQueries=Me,ae.setDisplayPromptStatus()})),this.pauseQueries$=new e.X(!!this.allowPauseQueries&&!(null===(ge=null===(pe=this.navigationService.getCurrentExploration())||void 0===pe?void 0:pe.settings)||void 0===ge||!ge.pauseQueries)),this.channelSubscriptionManager=this.eventBridge.createChannelSubscriptionManager(),this.channelSubscriptionManager.subscribe(L.explorationSettingsLoaded,function(Me,ce){var J,ie;ce.pauseQueriesChanged&&ae.setPauseQueries(!(null===(ie=null===(J=ae.navigationService.getCurrentExploration())||void 0===J?void 0:J.settings)||void 0===ie||!ie.pauseQueries))}).subscribe(L.explorationLoaded,function(){var Me,ce;ae.setPauseQueries(!(null===(ce=null===(Me=ae.navigationService.getCurrentExploration())||void 0===Me?void 0:Me.settings)||void 0===ce||!ce.pauseQueries))})}return y.prototype.setDisplayPromptStatus=function(){if(this.reportViewSettingsService){var d=this.reportViewSettingsService.getReportViewSettings({reportSettings:!1,userSettings:!1}).userSettings;this.canDisplayPrompt=!(null==d||!d.showPromptBannerPauseQueries),this.allowPauseQueries&&this.canDisplayPrompt&&this.detectPerformanceForPrompt()}},y.prototype.detectPerformanceForPrompt=function(){var d=this,w=new M.YM(this.localizationService);this.performanceObservable$=this.contextActivityService.getActivityStream().pipe((0,V.l4)(h.TV,h.Gb,h.xq,h.TH),(0,i.h)(function(x){var N=x.properties;return"Visual Container Lifecycle"===N.name||"Execute Change Detection"===N.name||"User Action"===N.name}),(0,n.U)(function(x){return x.properties}),(0,i.h)(function(x){return!!x.visualContainerName}),(0,O.R)(function(x,N){return N?w.logsUpdate({direction:M.wN.Ascending,type:M.aV.Chronological},[N],[]):[]},[]),(0,T.o)(function(){return d.isPromptEnabled()})).subscribe(function(x){if(x.length){var N=x[0],X=N.performanceLog.visualContainerName;0===N.performanceLog.status?d.timeouts[X]=setTimeout(function(){d.isPromptEnabled()&&d.showPromptBanner()},5e3):(clearTimeout(d.timeouts[X]),d.timeouts[X]=0)}})},y.prototype.isPromptEnabled=function(){return!this.isReportPaused()&&!this.notificationsList[m]&&this.canDisplayPrompt},y.prototype.canPauseQueries=function(){return this.allowPauseQueries},y.prototype.isReportPaused=function(){return this.pauseQueries$.getValue()},y.prototype.isReportPaused$=function(){return this.pauseQueries$.asObservable()},y.prototype.refreshVisuals=function(d,w){this.eventBridge.publishToChannel(L.visualContainerChanged,{affectContainer:function(N){return!d||N.name===d},refreshVisual:!w})},y.prototype.setPauseQueries=function(d){var w=this.navigationService.getCurrentExploration();!this.allowPauseQueries||!w||d===this.isReportPaused()||(w.settings?w.settings.pauseQueries=d:w.settings={pauseQueries:d},this.reportRefreshService.setRefreshPaused(d),this.pauseQueries$.next(d),this.canDisplayPrompt&&(this.clearNotification(m),this.disablePrompt()),d?(this.eventBridge.publishToChannel(L.cancelVisualQuery,{affectContainer:function(){return!0}}),this.showNotificationBar()):(this.refreshVisuals(void 0,!0),this.clearNotification(v)))},y.prototype.ngOnDestroy=function(){var w,d=this;this.channelSubscriptionManager.unsubscribeAll(),null===(w=this.capabilitiesSubscription)||void 0===w||w.unsubscribe(),this.performanceObservable$&&(this.performanceObservable$.unsubscribe(),Object.keys(this.timeouts).forEach(function(x){return d.timeouts[x]&&clearTimeout(d.timeouts[x])}))},y.prototype.clearNotification=function(d){""!==this.notificationsList[d]&&(this.notificationBarService.hide(this.notificationsList[d]),this.notificationsList[d]="")},y.prototype.showNotificationBar=function(){var d=this;this.notificationsList[v]=this.notificationBarService.notify({message:this.localizationService.get("Pause_Visual_Query_Info"),notificationType:6,secondaryLink:{displayText:this.localizationService.get("TenantSetting_AdminApisIncludeExpressions_DescriptionLink"),urlString:"https://go.microsoft.com/fwlink/?linkid=2204703&clcid=0x409"},actions:[{displayText:this.localizationService.get("Refresh"),action:function(){return d.refreshVisuals()}},{displayText:this.localizationService.get("Resume_Visual_Query"),action:function(){d.setPauseQueries(!1)}}]})},y.prototype.showPromptBanner=function(){var d=this;this.notificationsList[m]=this.notificationBarService.notify({message:this.localizationService.get("Paused_Visual_Query_Tip_Details"),notificationType:9,secondaryLink:{displayText:this.localizationService.get("TenantSetting_AdminApisIncludeExpressions_DescriptionLink"),urlString:"https://go.microsoft.com/fwlink/?linkid=2204703&clcid=0x409"},messageLabel:this.localizationService.get("Paused_Visual_Query_Tip"),onDismiss:function(){return d.clearNotification(m)},actions:[{displayText:this.localizationService.get("ReportAppBar_PauseVisual"),action:function(){d.setPauseQueries(!0),d.clearNotification(m)}},{displayText:this.localizationService.get("Paused_Visual_Dont_Show_Again"),action:function(){d.disablePrompt(),d.clearNotification(m)}}]})},y.prototype.disablePrompt=function(){this.reportViewSettingsService.getUserSettingService().setShowPromptBannerPauseQueries(!1),this.canDisplayPrompt=!1},y.\u0275fac=function(w){return new(w||y)(b.\u0275\u0275inject(P.J),b.\u0275\u0275inject(s.U),b.\u0275\u0275inject(p.o),b.\u0275\u0275inject(g.z),b.\u0275\u0275inject(C.S),b.\u0275\u0275inject(u.F),b.\u0275\u0275inject(A.vZ),b.\u0275\u0275inject(S.r),b.\u0275\u0275inject(I.a,8))},y.\u0275prov=b.\u0275\u0275defineInjectable({token:y,factory:y.\u0275fac}),y}()},74444:function(Ve,se,t){t.d(se,{J:function(){return g}});var e=t(7005),n=t(33275),f=t(19461),i=t(73637),O=t(23196),T=t(9508),V=t(33714),h=t(66592),M=t(29541),I=t(56339),b=powerbi.explore.services.events,P=powerbi.host.global.events,g=function(){function u(s,p,C,A,S,L){var D=this;this.eventBridge=s,this.favoriteVisualLoader=p,this.featureSwitchService=C,this.globalEventBridge=A,this.visualPaneSettingsService=S,this.visualPluginService=L,this.destroy$=new n.xQ,this.featureSwitchService.featureSwitches.onObject&&(this.eventBridge.on(b.preparePersonalVisuals).pipe((0,f.R)(this.destroy$)).subscribe(function(m){D.preparePersonalVisualizationPane()}),this.globalEventBridge.on(P.SignInStatusChangedEvent).pipe((0,f.R)(this.destroy$)).subscribe(function(m){D.favoriteVisualLoader.reset(D.visualPluginService),D.visualPaneSettingsService.reset(),D.preparePersonalVisualizationPane()}),this.preparePersonalVisualizationPane())}return u.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},u.prototype.preparePersonalVisualizationPane=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(s){switch(s.label){case 0:if(!this.featureSwitchService.featureSwitches.onObject)return[2];s.label=1;case 1:return s.trys.push([1,,3,4]),[4,this.preparePersonalVisualizationPaneServices()];case 2:return s.sent(),[3,4];case 3:return this.eventBridge.publishToChannel(b.visualPluginsChanged),[7];case 4:return[2]}})})},u.prototype.preparePersonalVisualizationPaneServices=function(){return(0,e.mG)(this,void 0,void 0,function(){var s;return(0,e.Jh)(this,function(p){switch(p.label){case 0:if(s=[],this.featureSwitchService.featureSwitches.userFavoriteResourcePackagesEnabled&&s.push(this.favoriteVisualLoader.ensureFavoriteVisualResources(this.visualPluginService)),this.featureSwitchService.featureSwitches.tenantOutOfBoxVisualsEnabled&&s.push(this.favoriteVisualLoader.ensureOutOfBoxVisuals(this.visualPluginService)),_.isEmpty(s))return[2];p.label=1;case 1:return p.trys.push([1,,3,6]),[4,Promise.allSettled(s)];case 2:return p.sent(),[3,6];case 3:return this.featureSwitchService.featureSwitches.personalVisualizationPaneEnabled?[4,this.visualPaneSettingsService.updateVisuals()]:[3,5];case 4:p.sent(),p.label=5;case 5:return[7];case 6:return[2]}})})},u.\u0275fac=function(p){return new(p||u)(i.\u0275\u0275inject(O.J),i.\u0275\u0275inject(T.W),i.\u0275\u0275inject(V.vZ),i.\u0275\u0275inject(h.Z),i.\u0275\u0275inject(M.R),i.\u0275\u0275inject(I.D))},u.\u0275prov=i.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac}),u}()},3103:function(Ve,se,t){t.d(se,{k:function(){return g}});var e=t(73637),n=t(16660),f=t(83406),i=t(31701),O=t(59897),T=t(74850),V=t(12321),h=t(40262),M=t(56339),I=t(33714),b=powerbi.explore.util.VisualContainerUtils,P=powerbi.data.SQExpr,g=function(){function u(s,p,C,A,S,L,D,m,v){this.visualPluginService=L,this.visualPluginOps=D,this.visualCapabilitiesService=m,this.legacyService=powerbi.explore.services.createPinVisualService(s,p,C.create(),v,A,S,L,D,m)}return u.prototype.setHandler=function(s){this.legacyService.setHandler(s)},u.prototype.pinVisualContainer=function(s,p,C,A,S,L){this.legacyService.pinVisualContainer(s,p,C,A,S,L)},u.prototype.canPinVisualType=function(s){return powerbi.explore.services.canPinVisualType(this.visualPluginService,this.visualPluginOps,this.visualCapabilitiesService,s)},u.prototype.getPinData=function(s,p,C,A,S,L,D,m,v,l){return this.legacyService.getPinData(s,p,C,A,S,L,D,m,v,l)},u.prototype.getPinDataAsync=function(s,p,C,A,S,L){return this.legacyService.getPinDataAsync(s,p,C,A,S,L)},u.prototype.canPin=function(s){if(!s||b.hasGroupByItemsInQuery(s.contract))return!1;var p,C=s.getVisualType();p=this.canPinVisualType(C);var A=b.getSelectExprs(s.contract);return!_.some(A,function(S){return P.isSparklineData(S.expr)})&&p&&!s.showWatermark&&!!s.canPin},u.\u0275fac=function(p){return new(p||u)(e.\u0275\u0275inject(n.i),e.\u0275\u0275inject(i.O),e.\u0275\u0275inject(f.U),e.\u0275\u0275inject(h.o),e.\u0275\u0275inject(O.S),e.\u0275\u0275inject(M.D),e.\u0275\u0275inject(T.f),e.\u0275\u0275inject(V.N),e.\u0275\u0275inject(I.vZ))},u.\u0275prov=e.\u0275\u0275defineInjectable({token:u,factory:u.\u0275fac}),u}()},9662:function(Ve,se,t){t.d(se,{G:function(){return i}});var e=t(49363),n=t(73637),f=powerbi.explore.contracts.AutoPageRefreshOption,i=function(){function O(T){this.changeDetectionRefreshService=T,this.noopPageRefreshStrategy=new e.$O}return O.prototype.create=function(T){switch(T){case 2:return this.changeDetectionRefreshService;case 0:case 1:return this.noopPageRefreshStrategy;default:return"autoPageRefreshStrategyKind=".concat(T," has not been implemented."),this.noopPageRefreshStrategy}},O.prototype.getActiveAutoRefreshStrategy=function(T){return T.evaluatedObjects&&T.evaluatedObjects.pageRefresh&&T.evaluatedObjects.pageRefresh.show?T.evaluatedObjects.pageRefresh.refreshType?this.toAutoRefreshStrategyKind(T.evaluatedObjects.pageRefresh.refreshType):1:0},O.prototype.toAutoRefreshStrategyKind=function(T){switch(T){case f.CDM:return 2;case f.APR:return 1;default:return"AutoPageRefreshStrategy: ".concat(T," has not been implemented"),0}},O.\u0275fac=function(V){return new(V||O)(n.\u0275\u0275inject(e.c9))},O.\u0275prov=n.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac}),O}()},99016:function(Ve,se,t){t.d(se,{I:function(){return u}});var e=t(7005),n=t(49363),f=t(73637),i=t(28252),O=t(23196),T=t(25991),V=t(18766),h=t(22898),M=t(97186),I=t(9662),b=powerbi.common.constants,P=powerbi.explore.contracts.DataSource,g=powerbi.explore.services.events,u=function(){function s(p,C,A,S,L,D,m){this.telemetryService=p,this.eventBridge=C,this.explorationNavigation=A,this.dataSourcesService=S,this.dataProxy=L,this.visualTimeSynchronizationService=D,this.autoRefreshStrategyFactory=m,this.visualsRefreshing=!0,this.pageId="-1",this.refreshDelayedCount=0,this.refreshPaused=!1,this.autoRefreshStrategy=new n.$O,this.subscriptionManager=C.createChannelSubscriptionManager()}return s.prototype.init=function(){this.subscribeEvents()},s.prototype.destroy=function(){this.autoRefreshStrategy.stop(),this.subscriptionManager.unsubscribeAll()},s.prototype.refreshData=function(){var p=P.dataReaderDataSources(P.queried(this.dataSourcesService.get(),null));!p||(this.dataProxy.clearCache(b.dsrDataReaderType,p),this.eventBridge.publishToChannel(g.visualContainerChanged,{affectContainer:function(){return!0}}))},s.prototype.setRefreshPaused=function(p){this.refreshPaused=p},s.prototype.getRefreshStats=function(){return this.autoRefreshStrategy.getRefreshStats()},Object.defineProperty(s.prototype,"refreshStrategy",{get:function(){return this.autoRefreshStrategy.autoRefreshKind},enumerable:!1,configurable:!0}),s.prototype.subscribeEvents=function(){var p=this;this.subscriptionManager.subscribe(g.sectionChanged,function(){return p.onSectionChanged()}).subscribe(g.sectionObjectsEvaluated,function(){return p.onSectionsObjectsChanged()}).subscribe(powerbi.common.events.printSectionReady,function(){return p.onVisualsLoaded()}).subscribe(g.autoPageRefreshTriggered,function(){return p.onAutoPageRefreshTriggered()})},s.prototype.onSectionsObjectsChanged=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(p){switch(p.label){case 0:return[4,this.updateRefreshStrategy()];case 1:return p.sent(),[2]}})})},s.prototype.onSectionChanged=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(p){switch(p.label){case 0:return this.lastRefreshTime=void 0,[4,this.updateRefreshStrategy()];case 1:return p.sent(),[2]}})})},s.prototype.onVisualsLoaded=function(){this.visualsRefreshing=!1},s.prototype.onAutoPageRefreshTriggered=function(){this.triggerRefresh()},s.prototype.updateRefreshStrategy=function(){return(0,e.mG)(this,void 0,void 0,function(){var p,C,A;return(0,e.Jh)(this,function(S){switch(S.label){case 0:return(p=this.explorationNavigation.getCurrentSection())?(C=this.autoRefreshStrategy&&this.autoRefreshStrategy.autoRefreshKind,A=this.autoRefreshStrategyFactory.getActiveAutoRefreshStrategy(p),p.objectId!==this.pageId||A!==C?(this.pageId=p.objectId,this.autoRefreshStrategy.stop(),this.autoRefreshStrategy=this.autoRefreshStrategyFactory.create(A),[4,this.autoRefreshStrategy.resumeAsync()]):[3,2]):[2];case 1:S.sent(),S.label=2;case 2:return[2]}})})},s.prototype.calculateEffectiveInterval=function(){return this.lastRefreshTime?(new Date).getTime()-this.lastRefreshTime.getTime():void 0},s.prototype.triggerRefresh=function(){if(this.visualsRefreshing)return++this.refreshDelayedCount,void this.logTriggerRefresh(this.refreshDelayedCount);this.refreshPaused||(this.refreshDelayedCount=0,this.logTriggerRefresh(this.refreshDelayedCount),this.effectiveRefreshInterval=this.calculateEffectiveInterval(),this.lastRefreshTime=new Date,this.visualTimeSynchronizationService.setAnchorTimeToNow(),this.eventBridge.publishToChannel(g.dataRefreshTriggered),this.visualsRefreshing=!0)},s.prototype.logTriggerRefresh=function(p){var C=this.explorationNavigation.getCurrentExploration();if(C){var A=C.report,S=this.explorationNavigation.getExplorationTelemetryData(),L="",D=-1,m="",v="-1",l="-1";if(A&&A.model){var y=A.model;L=y.dbName,m=A.objectId,D=y.id}S&&(v=S.exid,l=S.exsid),this.telemetryService.logEvent(powerbi.telemetry.TriggerRefresh,{reportId:m,pageId:this.pageId,dbName:L,modelId:D,interval:this.effectiveRefreshInterval,delayCount:p,exid:v,exsid:l})}},s.\u0275fac=function(C){return new(C||s)(f.\u0275\u0275inject(i.y0),f.\u0275\u0275inject(O.J),f.\u0275\u0275inject(T.z),f.\u0275\u0275inject(V.D),f.\u0275\u0275inject(M.d),f.\u0275\u0275inject(h.a),f.\u0275\u0275inject(I.G))},s.\u0275prov=f.\u0275\u0275defineInjectable({token:s,factory:s.\u0275fac}),s}()},77554:function(Ve,se,t){t.d(se,{V:function(){return V}});var e=t(29494),n=t(66859),f=t(73637),i=t(33714),O=t(9508),T=t(22847),V=function(){function h(M,I,b,P,g){this.promiseFactory=M,this.managedCustomVisualsService=I,this.featureSwitchService=b,this.favoriteVisualLoader=P,this.resourcePackageHttp=g}return h.prototype.copyResourcePackageIfNeeded=function(M,I,b){var P=this,g=[],u=!1,s=!1;if(this.featureSwitchService.featureSwitches.userFavoriteResourcePackagesEnabled){g.push(this.favoriteVisualLoader.isFavoriteResourcePackage(M).then(function(S){return u=S}));var p=this.promiseFactory.defer();this.managedCustomVisualsService.isOrgVisualByResourcePackageId(M).then(function(S){return p.resolve(S)}).catch(function(){return p.reject()}),g.push(p.promise.then(function(S){return s=S}))}var C=!1;if(this.featureSwitchService.featureSwitches.manageMarketplaceVisuals){var A=this.promiseFactory.defer();this.managedCustomVisualsService.isPublicManagedVisualById(M).then(function(S){return A.resolve(S)}).catch(function(){return A.reject()}),g.push(A.promise.then(function(S){return C=S}))}return this.promiseFactory.all(g).then(function(S){return u&&!s||C?P.resourcePackageHttp.copyResourcePackage(M,I,b):P.promiseFactory.resolve(null)})},h.\u0275fac=function(I){return new(I||h)(f.\u0275\u0275inject(e.t),f.\u0275\u0275inject(n.D),f.\u0275\u0275inject(i.vZ),f.\u0275\u0275inject(O.W),f.\u0275\u0275inject(T.v))},h.\u0275prov=f.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"}),h}()},87325:function(Ve,se,t){t.d(se,{ed:function(){return h}});var e=t(7005),n=t(73637),f=t(12555),i="__@ngrx/effects_create__",T=function(){function M(I){this.instance=I,this.subscription=new f.w;for(var b=function(M){return Object.getOwnPropertyNames(M).filter(function(b){return M[b]&&M[b].hasOwnProperty(i)}).map(function(b){return(0,e.pi)({propertyName:b},M[b][i])})}(I),g=0,u=b.map(function(p){return I[p.propertyName]});g<u.length;g++)this.subscription.add(u[g].subscribe())}return M.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},M.\u0275fac=function(b){n.\u0275\u0275invalidFactory()},M.\u0275prov=n.\u0275\u0275defineInjectable({token:M,factory:M.\u0275fac}),M}(),V=new n.InjectionToken("SCOPED_EFFECT_TOKEN");function h(M){return{token:V,providers:[M,{provide:V,useClass:T,deps:[M]}]}}},81224:function(Ve,se,t){t.d(se,{Eo:function(){return V},v_:function(){return O}});var e=t(73637),n=t(26092),f=t(23196),i={},O=function(){function h(){this.scopes=[]}return h.prototype.addScopedRoot=function(M){var I=_.find(this.scopes,function(b){return b.injector===M});I?++I.count:this.scopes.push({injector:M,count:1})},h.prototype.removeScopedRoot=function(M){var I=_.findIndex(this.scopes,function(b){return b.injector===M});-1!==I&&--this.scopes[I].count<=0&&this.scopes.splice(I,1)},h.prototype.getTheScopedService=function(M){if(this.scopes.length){var g=this.scopes[0].injector.get(M,i);if(g!==i)return g}},h.prototype.sendChannelEvent=function(M,I){var b=this.getTheScopedService(f.J);return!!b&&(b.publishToChannel(M,I),!0)},h.\u0275prov=e.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac=function(I){return new(I||h)},providedIn:"root"}),h}();function T(h,M){return M.addScopedRoot(h),{update:function(){},destroy:function(){return M.removeScopedRoot(h)}}}function V(h){return(0,n.HZ)(h,{provide:T,useFactory:T,deps:[e.Injector,O]})}},5954:function(Ve,se,t){t.d(se,{g:function(){return i}});var e=t(98864),n=t(73637),i=function(){function O(){this.settingChangedInternal$=new e.X(void 0),this.showGridlines=!1,this.showGridlinesMobile=!0,this.snapToGrid=!1,this.snapToGridMobile=!0,this.lockObjects=!1,this.lockObjectsMobile=!1}return Object.defineProperty(O.prototype,"settingChanged$",{get:function(){return this.settingChangedInternal$.asObservable()},enumerable:!1,configurable:!0}),O.prototype.getShowGridlines=function(){return this.showGridlines},O.prototype.setShowGridlines=function(T,V){this.setValueAndNotify("ShowGridlines",T)},O.prototype.getShowGridlinesMobile=function(){return this.showGridlinesMobile},O.prototype.setShowGridlinesMobile=function(T,V){this.setValueAndNotify("ShowGridlinesMobile",T)},O.prototype.getShowQnaVisualBanner=function(){return this.showQnaVisualBanner},O.prototype.setShowQnaVisualBanner=function(T){this.setValueAndNotify("ShowQnaVisualBanner",T)},O.prototype.getShowSmartGuides=function(){return this.showSmartGuides},O.prototype.setShowSmartGuides=function(T){this.setValueAndNotify("ShowSmartGuides",T)},O.prototype.getSnapToGrid=function(){return this.snapToGrid},O.prototype.setSnapToGrid=function(T,V){this.setValueAndNotify("SnapToGrid",T)},O.prototype.getSnapToGridMobile=function(){return this.snapToGridMobile},O.prototype.setSnapToGridMobile=function(T,V){this.setValueAndNotify("SnapToGridMobile",T)},O.prototype.getDefaultSectionVerticalAlignment=function(){return this.sectionVerticalAlignment},O.prototype.setDefaultSectionVerticalAlignment=function(T){this.setValueAndNotify("SectionVerticalAlignment",T)},O.prototype.getLockObjects=function(){return this.lockObjects},O.prototype.setLockObjects=function(T){this.setValueAndNotify("LockObjects",T)},O.prototype.getLockObjectsMobile=function(){return this.lockObjectsMobile},O.prototype.setLockObjectsMobile=function(T){this.setValueAndNotify("LockObjectsMobile",T)},O.prototype.getSuggestVisualByDefault=function(){return this.suggestVisualByDefault},O.prototype.setSuggestVisualByDefault=function(T){this.setValueAndNotify("suggestVisualByDefault",T)},O.prototype.getShowAllVisualTypeByDefault=function(){return this.showAllVisualTypeByDefault},O.prototype.setShowAllVisualTypeByDefault=function(T){this.setValueAndNotify("showAllVisualTypeByDefault",T)},O.prototype.setValueAndNotify=function(T,V){var M=T.substr(0,1).toLowerCase().concat(T.substring(1)),b=this[M];this[M]=V,_.isEqual(b,V)||this.settingChangedInternal$.next(T)},O.\u0275prov=n.\u0275\u0275defineInjectable({token:O,factory:O.\u0275fac=function(V){return new(V||O)},providedIn:"root"}),O}()},90207:function(Ve,se,t){t.d(se,{P:function(){return V}});var e=t(29494),n=t(73637),f=t(18266),i=t(28252),O=t(5801),T=t(56339),V=function(){function h(M,I,b,P,g){this.legacyService=powerbi.explore.services.createShowValueAsService(M,I,b,P,g)}return h.prototype.createShowValueAsMenuItems=function(M,I,b){return this.legacyService.createShowValueAsMenuItems(M,I,b)},h.prototype.applyShowValueAs=function(M,I,b){return this.legacyService.applyShowValueAs(M,I,b)},h.\u0275fac=function(I){return new(I||h)(n.\u0275\u0275inject(f.o),n.\u0275\u0275inject(e.t),n.\u0275\u0275inject(i.y0),n.\u0275\u0275inject(O.$),n.\u0275\u0275inject(T.D))},h.\u0275prov=n.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac}),h}()},20522:function(Ve,se,t){t.d(se,{s:function(){return S}});var e=t(7005),n=t(33185),f=t(11378),i=t(73637),O=t(16660),T=t(46706),V=t(18766),h=t(33892),M=t(9072),I=t(18266),b=t(28252),P=t(5801),g=powerbi.data.services.SemanticQuerySerializer,u=powerbi.data.SQExpr,s=powerbi.data.SQExprBuilder,C=(powerbi,powerbi.explore.util.VisualContainerUtils),S=function(){function L(D,m,v,l,y,d,w,x){this.conceptualSchemaProxy=D,this.dialogService=m,this.dataSources=v,this.localizationService=l,this.selectionService=y,this.telemetryService=d,this.visualAuthoringService=w,this.dataSourcesSerializerService=x}return L.prototype.showCreateDialog=function(D){var m;return(0,e.mG)(this,void 0,void 0,function(){var v,l;return(0,e.Jh)(this,function(d){switch(d.label){case 0:return(v=this.getSingleSelectedVisualContainer())?(l=C.getSelectExprs(v),(null===(m=_.filter(l,function(w){return u.isSparklineData(w.expr)}))||void 0===m?void 0:m.length)<5?[2,this.showDialog(D,void 0,!1)]:[3,1]):[2];case 1:return[4,this.showErrorDialog()];case 2:d.sent(),d.label=3;case 3:return[2]}})})},L.prototype.showEditDialog=function(D){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(m){return u.isSparklineData(D)?[2,this.showDialog(D.measure,_.first(D.grouping),!0)]:[2]})})},L.prototype.addSparklinesToVisual=function(D,m,v){return(0,e.mG)(this,void 0,void 0,function(){var l;return(0,e.Jh)(this,function(y){return l=s.sparklineData(D,[m]),[2,this.visualAuthoringService.addFieldToVisual(l,this.dataSources.get(),v)]})})},L.prototype.updateSparklinesExpr=function(D,m,v,l,y){return(0,e.mG)(this,void 0,void 0,function(){var d;return(0,e.Jh)(this,function(w){return d=s.sparklineData(D,[m]),[2,this.visualAuthoringService.replaceField(d,l,y,v,this.dataSources.get())]})})},L.prototype.showDialog=function(D,m,v){return(0,e.mG)(this,void 0,void 0,function(){var l,y,d,w,x;return(0,e.Jh)(this,function(ne){switch(ne.label){case 0:l=this.telemetryService.startEvent(f.wJ,{isEdit:v}),ne.label=1;case 1:return ne.trys.push([1,4,5,7]),d=this.dataSources.get(),w={selectedMeasure:D?g.serializeExpr(D):void 0,selectedGrouping:m?g.serializeExpr(m):void 0,dataSources:this.dataSourcesSerializerService.serializeDataSources(d)},x={title:this.localizationService.get(v?"Sparkline_EditOption":"Sparkline_AddOption"),input:w,hideOkButton:!1,hideCancelButton:!v,okButtonDisabled:!v,okButtonText:v?void 0:this.localizationService.get("Create_ButtonText"),isDraggable:!0,focusInitialCloseButton:!0},[4,this.dialogService.showTemplateDialog(n.nb,x,{width:"452px"})];case 2:return[4,ne.sent().afterClosed().toPromise()];case 3:return y=ne.sent(),[3,7];case 4:return ne.sent(),[3,7];case 5:return[4,this.resolveEvent(l,y)];case 6:return ne.sent(),[7];case 7:return[2,y]}})})},L.prototype.showErrorDialog=function(){return(0,e.mG)(this,void 0,void 0,function(){return(0,e.Jh)(this,function(D){return this.telemetryService.logEvent(f.Sw),this.dialogService.showSimpleInfoDialog({title:this.localizationService.get("Sparkline_Dialog_ErrorTitle"),message:this.localizationService.get("Sparkline_Dialog_ErrorMessage"),okButtonText:this.localizationService.get("ModalDialogButtonText_GotIt"),titleIcon:"pbi-glyph-error"}),[2]})})},L.prototype.resolveEvent=function(D,m){return(0,e.mG)(this,void 0,void 0,function(){var v,l,y,d,w,N;return(0,e.Jh)(this,function(X){switch(X.label){case 0:return D.event.info.dialogCloseAction=m?"Apply":"Close",m?[4,this.conceptualSchemaProxy.get(this.dataSources.get())]:[3,2];case 1:v=X.sent(),l=g.deserializeExpr(m.grouping),y=g.deserializeExpr(m.measure),d=s.sparklineData(y,[l]),w=powerbi.explore.util.SparklinesUtil.getFieldCharacteristics(d,v),N=w.measureType,D.event.info.groupingType=w.groupingType,D.event.info.measureType=N,X.label=2;case 2:return D.resolve(),[2]}})})},L.prototype.getSingleSelectedVisualContainer=function(){var D=this.selectionService.getSelectedElements();if(1===D.length){var m=D[0].canvasItem;return powerbi.explore.contracts.isVisualContainer(m)?m:void 0}},L.\u0275fac=function(m){return new(m||L)(i.\u0275\u0275inject(O.i),i.\u0275\u0275inject(T.x),i.\u0275\u0275inject(V.D),i.\u0275\u0275inject(I.o),i.\u0275\u0275inject(h.z),i.\u0275\u0275inject(b.y0),i.\u0275\u0275inject(P.$),i.\u0275\u0275inject(M._))},L.\u0275prov=i.\u0275\u0275defineInjectable({token:L,factory:L.\u0275fac}),L}()},53270:function(Ve,se,t){t.d(se,{Q:function(){return I},_:function(){return M}});var e=t(20373),n=t(73637),f=t(25991),i=t(42),O=t(22584),T=t(33714),V=powerbi.explore.util.VisualTooltipStyleUtils,h=powerbi.explore.util.VisualContainerUtils,M=function(){function b(P,g,u,s){this.explorationNavigation=P,this.viewModeState=g,this.themeService=u,this.featureSwitchService=s}return b.prototype.getTooltipStyle=function(P){var g,u,s=this.explorationNavigation.getCurrentExploration(),p=this.viewModeState.getConfig().displayOptions.enableMobileTooltipActions,C=null===(g=null==s?void 0:s.settings)||void 0===g?void 0:g.useEnhancedTooltips,A=this.themeService.getVisualStyle(null==s?void 0:s.themeCollection),S=null===(u=h.getSingleVisualConfig(P))||void 0===u?void 0:u.evaluatedObjects;return!S&&P&&(S=h.evaluateObjectDefinitions((null==s?void 0:s.themeCollection)||{},this.themeService,P,this.featureSwitchService.featureSwitches).dataViewObjects),V.getVisualTooltipStyles(A,C,p,S&&S.visualTooltip,this.featureSwitchService.featureSwitches.newMobileTooltip)},b.\u0275fac=function(g){return new(g||b)(n.\u0275\u0275inject(f.z),n.\u0275\u0275inject(i.kc),n.\u0275\u0275inject(O.f),n.\u0275\u0275inject(T.vZ))},b.\u0275prov=n.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b}(),I={provide:e.e,useClass:M}},42:function(Ve,se,t){t.d(se,{kc:function(){return h}});var e=t(98864),n=t(73637),f=t(93171),i=jsCommon.FreezeUtility,h=function(){function b(P){this.contextActivityService=P,this.config$=new e.X(void 0),this.viewMode$=new e.X(void 0),this.config={supportsPinning:void 0,supportsDeletion:void 0,enablePenAnnotation:!1,visualDoubleClickEnabled:!1,displayOptions:{canShowCanvasWatermark:!1,showVisualBordersInViewMode:!1,hideVisualizationPane:!1,hideTileMenu:!1,hideNavigationPane:!1,disableFadeout:!1,showExportDataPane:!1,showMobilePane:!1,hideInFocusBar:!1,hideInFocusTileMenu:!1,visualMouseoverDisabled:!1,hideCanvasSwipeHandles:!1,extendBackgroundToWholeCanvas:!1,hideOutspaceFormatting:!1,hideOutspaceImage:!1,hideBackgroundImage:!1,showMobileScorecardVisualBanner:!1,showVisualAccessibleData:!1,showDetailVisualOnFullScreen:!1,disableSpotlight:!1,enableMobileTooltipActions:!1,enableTooltipActions:!0,showDrillthroughFilters:!1,useMobileExplorationFooter:!1,showTooltipAboveClick:!1,showMobileVisualContainerHeader:!1,preserveScrollPositionOnResize:!1,mobileBookmarksMenuDisplay:0,enableMobileFilters:!1,disablePixelValueRounding:!1,scaleBackgroundImageToWidth:!1,enableMobileInsights:!1,showVisualOnSelectFadeOut:!1,hideNewCanvasScrollbar:!1,hideInsightsPane:!1,mobileInsightsDisplayOption:void 0,hideQuickExplorePane:!1,forceCenteredVerticalAlignment:!1,scaleTooltipWithCanvasZoom:!1},touchOptions:{deselectVisualOnCanvasScroll:!1,disableCanvasScrollOnSelectedVisual:!1,disableTouchZoom:!1,isCanvasSwipeable:!0,swipeOnlyFromEdge:!1,swipeEdgeThreshold:void 0,touchEventsOnSelectedVisualOnly:!1,disableCanvasPinch:!0,disableTouchendOnTooltip:!1,dataMultiSelectMode:0},penProperties:{strokeStyle:"#939598",lineWidth:20,opacity:1},printProperties:{useSectionDisplayOption:!1}},this.freeze(),this.syncConfig$(),this.state={},this.formatModeSubject=new e.X(!1),this.formatMode$=this.formatModeSubject}return b.prototype.getViewState=function(){return this.state},b.prototype.getMode=function(){return this.mode},b.prototype.getMode$=function(){return this.viewMode$.asObservable()},b.prototype.setMode=function(P){this.mode=P,this.viewMode$.next(P)},b.prototype.getConfig=function(){return this.frozenConfig},b.prototype.getConfig$=function(){return this.config$.asObservable()},b.prototype.updateConfig=function(P){P&&(P(this.config),this.config.displayOptions.showMobilePane&&(this.state.bookmarkView=void 0),this.freeze()),this.syncConfig$()},b.prototype.getBookmarkViewState=function(){return this.state.bookmarkView},b.prototype.setBookmarkViewState=function(P){this.state.bookmarkView=P},b.prototype.setFormatMode=function(P,g){var s=function(b,P,g){return P.createActivity({name:b,data:{source:g}})}(P?"Switch To Format Mode":"Switch From Format Mode",this.contextActivityService,g);this.formatModeSubject.next(P),s.resolve()},b.prototype.getFormatMode=function(){return this.formatModeSubject.value},b.prototype.freeze=function(){var P=_.cloneDeep(this.config);i.deepFreeze(P),this.frozenConfig=P},b.prototype.syncConfig$=function(){this.config$.next(this.getConfig())},b.\u0275fac=function(g){return new(g||b)(n.\u0275\u0275inject(f.r))},b.\u0275prov=n.\u0275\u0275defineInjectable({token:b,factory:b.\u0275fac}),b}()},71442:function(Ve,se,t){t.d(se,{Q:function(){return ze}});var e=t(7005),n=t(33015),f=t(83834),i=t(73637),O=t(56339),T=t(74850),V=t(31701),h=t(25991),M=t(33892),I=t(29038),b=t(78144),P=t(23196),g=t(40314),u=t(86191),s=t(26326),p=t(33993),C=t(32130),A=t(14135),S=t(11032),L=t(76186),D=t(93171),m=t(28252),v=t(33714),l=t(59279),y=t(34429),d=t(18266),w=t(42),x=t(12029),N=t(70377),X=t(5954),ne=powerbi.visuals.ActionButtonType,Ce=jsCommon.ArrayExtensions,he=powerbi.explore.util.CanvasVisualsUtility,Fe=powerbi.explore.constants,fe=powerbi.data.DataBoundExprExtractor,ae=powerbi.data.DataViewObjectDefinitions,pe=powerbi.data.DataViewRoleWildcard,ge=powerbi.explore.util.DrillUtils,Me=powerbi.explore.services.events,ce=powerbi.explore.constants.ExploreCanvasConstants,J=powerbi.data.FieldExprPattern,ie=powerbi.explore.contracts.FilterType,G=powerbi.explore.FilterUtils,j=powerbi.explore.util.getTelemetryFieldKind,F=powerbi.explore.util.HierarchyUtils,E=powerbi.visuals.horizontalAlignment,k=powerbi.ItemGroupingManager,R=powerbi.visuals.plugins,z=powerbi.explore.PodUtils,Q=powerbi.PrimitiveTypeNames,me=powerbi.Prototype,le=powerbi.data.QueryProjectionsByRole,K=powerbi.contracts.ResourcePackageItemType,q=powerbi.ScriptResultUtil,ye=powerbi.explore.services.selectionUtils,Le=powerbi.data.SemanticFilter,Ne=powerbi.visuals.SmallMultiplesUtils,be=powerbi.explore.util.SparklinesUtil,Y=powerbi.data.SQExpr,ue=powerbi.data.SQExprBuilder,Pe=powerbi.data.SQExprConverter,Ae=powerbi.data.SQExprHierarchyToHierarchyLevelConverter,Ze=powerbi.data.SQExprUtils,ot=powerbi.data.SQHierarchyExprUtils,lt=powerbi.data.SQScopedEvalExpr,yt=powerbi.visuals.TablixProperties,De=powerbi.telemetry,Ie=powerbi.ValueType,Oe=powerbi.explore.viewModels,Be=powerbi.explore.contracts.VisualContainer,qe=powerbi.explore.contracts.VisualContainerGroup,je=powerbi.explore.util.VisualContainerUtils,st=powerbi.VisualDataRoleKind,ht=powerbi.explore.contracts.VisualLink,Pt=powerbi.explore.contracts.VisualQuery,ze=function(){function ve(r,o,a,c,B,U,H,oe,te,_e,de,Ee,we,Se,Re,$e,Ye,et,at,nt,pt,ct,ft,Mt,bt,tt,Et){void 0===Et&&(Et=new n.I);var Ft=this;this.visualPluginService=r,this.pluginOps=o,this.displayNameService=a,this.contextActivityService=c,this.telemetry=B,this.explorationNavigationService=U,this.selectionService=H,this.geotaggingAnalyzerService=oe,this.explorationSerializer=te,this.eventBridge=_e,this.featureSwitchService=de,this.sortService=Ee,this.visualRelationshipService=we,this.drill=Se,this.expandCollapse=Re,this.filterGenerator=$e,this.aggrOps=Ye,this.resourceRegistration=et,this.formFactorProvider=at,this.localizationService=nt,this.viewModeState=pt,this.layoutAuthoring=ct,this.explorationCapabilities=ft,this.runningVisualService=Mt,this.visualAuthoringCustomizeOperations=bt,this.settingsService=tt,this.linguisticSchemaProxy=Et,this.updateFilterState=function(Tt,Bt,Ut,Rt,Gt,Qt,Nt){var Yt=Ft.core.updateFilterState(Tt,Bt,Ut,Rt,Gt,Qt);Yt.clearOrDefault?Ft.notifyVisualContainers([Bt],"UserAction_ChangeFilter",!0,Tt):Ft.notifyVisualContainers([Bt],"UserAction_ChangeFilter",Yt.updateAll,Tt,void 0,Nt)},this.core=powerbi.explore.services.createVisualAuthoringCore(r,oe,Ye,de,bt,a)}return ve.prototype.logSmallMultiplesTelemetry=function(r,o,a,c,B){var U,H,oe=null===(U=r.config)||void 0===U?void 0:U.singleVisual;if(oe&&c===powerbi.visuals.cartesianRoleNames.rows&&Ne.supportsSmallMultiplesDataViewMapping(null==a?void 0:a.dataViewMappings)){var te=null===(H=oe.query)||void 0===H?void 0:H.projections;te&&te[powerbi.visuals.cartesianRoleNames.rows]&&1===te[powerbi.visuals.cartesianRoleNames.rows].all().length&&this.telemetry.logEvent(De.EXSmallMultiplesFirstField,{source:B,targetVisualType:o,visualName:r.name})}},ve.prototype.updateVisualCalculation=function(r,o,a,c,B){var U,oe=null===(U=r.config.singleVisual)||void 0===U?void 0:U.query;if(!oe)return!1;var te=oe.getQueryRef(a,{fieldIndex:o}),de=oe.defn.select().withName(te).nativeReferenceName===c?c:f.ND(oe,c);return this.core.updateVisualCalculation(r.config,o,a,de,B)},ve.prototype.toggleFieldHidden=function(r,o,a,c,B){var H=a.config.singleVisual.query;if(!H)return!1;var oe=H.tryGetExpr(r,o);if(!oe||!Ze.isMeasure(oe))return!1;if(this.core.toggleHidden(H,r,o),this.isVisualRecommendationAllowed(a)){var te=B.updateWithRecommendation(a,void 0,c);null!=te&&a.config.singleVisual.visualType!==te&&(a.config.singleVisual.autoSelectVisualType=!0,a.config.singleVisual.visualType=te)}return!0},ve.prototype.switchQueryParameter=function(r,o,a,c,B){var te,_e,U=o.config.singleVisual.query,H=U.tryGetFieldExprs(c)[a],oe=H.isFieldParameter;if(oe)te=null==(_e=U.getParameterByFieldIndex(a,c))?void 0:_e.expr;else if(Y.isAggregation(H.expr)&&(te=H.expr.arg.getTargetColumnRef(r)),te||(te=H.expr),!Ze.shouldUseAsFieldParameter(this.featureSwitchService.featureSwitches.fieldParametersAuthoring,r,te,this.featureSwitchService.featureSwitches.fieldParameterDynamicSlicer||!this.filterGenerator.supportsFilterOutput(o),this.isAnalysisVisual(o)))return!1;return!(!te||!this.removeFieldFromRole({role:c,projOptions:{fieldIndex:a,parameter:_e}},r,o)||!this.addFieldInRole(r,te,c,o,a,!1,!1,oe?2:3)||(this.isVisualRecommendationAllowed(o)&&(null==B||B.updateWithRecommendation(o,void 0,r)),this.telemetry.logEvent(De.EXSwitchQueryParameter,{fromMetadataToData:oe,visualType:je.getVisualType(o),visualName:o.name,role:c}),0))},ve.prototype.addFieldToVisual=function(r,o,a,c,B,U){var H;if(!a)return!1;var oe=Ze.shouldUseAsFieldParameter(this.featureSwitchService.featureSwitches.fieldParametersAuthoring,r,o,!this.filterGenerator.supportsFilterOutput(a),this.isAnalysisVisual(a)),te=oe?"FieldParameter":j(o),_e=this.contextActivityService.createActivity({name:"UpdateField",visualName:a.name,data:{fieldKinds:[te],operationType:"Add",source:"CheckboxTickedInFieldList"===B?"FieldList":"DraggedToFieldWell"===B?"FieldWell":"Visual"}});this.core.ensureFiltersArrayIsValid(a.filters);var Re,de=a.config.singleVisual,Ee=de.query,we=this.visualPluginService.capabilities(de.visualType),Se={visualContainer:a,isFieldParameter:oe,expr:o,capabilities:we,schema:r,hideOnOverflow:U},$e=this.core.captureCurrentActiveProjectionsByRole(a);oe?(Re=this.addExpressionToVisual(Se),this.isVisualRecommendationAllowed(a)&&Re&&(null==c||c.updateWithRecommendation(a,void 0,r))):Re=this.isVisualRecommendationAllowed(a)?null!=(Ye=null==c?void 0:c.updateWithRecommendation(a,{toAdd:o},r)):this.addHierarchyLevelToExistingHierarchiesInVisual(Se)||this.addExpressionToVisualWithoutAggregation(Se)||this.addExpressionToVisualForcingAggregation(Se)||this.addExpressionToVisual(Se);var et=o.getConceptualProperty(r),at=et&&et.measure&&et.measure.template&&et.measure.template.name;if(Re){var nt=null===(H=de.query)||void 0===H?void 0:H.getRoleNameForExpr(o);if(void 0===nt&&"CheckboxTickedInFieldList"===B&&(nt=this.getTargetRoleAndExpressionsForAdd(r,a,o).targetRole),this.runAddFieldValidation(a,r,o,oe,void 0,nt,$e,B),void 0!==B){var Ye=je.getVisualType(a);this.telemetry.logEvent(De.EXAddField,{source:B,targetVisualType:Ye,fieldKind:te,drillToDetailsMode:je.hasGroupByItemsInQuery(a),success:!0,quickMeasureTemplateName:at,visualName:a.name}),this.logSmallMultiplesTelemetry(a,Ye,we,nt,B)}return _e.resolve(),!0}return a.config.singleVisual.query=Ee,void 0!==B&&this.telemetry.logEvent(De.EXAddField,{source:B,targetVisualType:je.getVisualType(a),fieldKind:te,drillToDetailsMode:je.hasGroupByItemsInQuery(a),success:!1,quickMeasureTemplateName:at,visualName:a.name}),_e.reject(),!1},ve.prototype.addFieldInRole=function(r,o,a,c,B,U,H,oe,te,_e){var de;switch(void 0===oe&&(oe=1),this.core.ensureFiltersArrayIsValid(c.filters),oe){case 1:de=Ze.shouldUseAsFieldParameter(this.featureSwitchService.featureSwitches.fieldParametersAuthoring,r,o,!this.filterGenerator.supportsFilterOutput(c),this.isAnalysisVisual(c));break;case 2:de=!1;break;case 3:de=!0}var Se,Ee=de?"FieldParameter":j(o),we=this.contextActivityService.createActivity({name:"UpdateField",visualName:c.name,data:{fieldKinds:[Ee],operationType:"Add",source:"FieldWell"}}),Re=this.core.captureCurrentActiveProjectionsByRole(c);if(this.isVisualRecommendationAllowed(c)&&null==a)de?(Se=this.addExpressionToVisual({schema:r,visualContainer:c,expr:o,isFieldParameter:de,hideOnOverflow:_e}),null==te||te.updateWithRecommendation(c,void 0,r)):Se=!(null==te||!te.updateWithRecommendation(c,{toAdd:o},r));else{var $e=void 0,Ye=this.getVisualDataRole(c,a);!de&&!this.shouldPreferGroupToAggregate(r,o,de,c,Ye)&&(U||(o=this.createExprWithAggregate(o,r,!0,Ye),$e=!0));var et=void 0;if(de)et=o;else{var at=this.canHierarchyLevelJoinExistingGroup(r,c.config.singleVisual.query,a,o,B),nt=this.getTargetRoleAndExpressionsForAdd(r,c,o,a,H);et=$e||at?o:nt&&nt.expressions}(Se=this.core.add({expr:et,schema:r,targetRole:a,projOptions:{fieldIndex:B},hideOnOverflow:_e},c.config,de))&&(je.getSingleVisualConfig(c).autoSelectVisualType=void 0)}var ct=o.getConceptualProperty(r),ft=ct&&ct.measure&&ct.measure.template&&ct.measure.template.name;if(Se){this.runAddFieldValidation(c,r,o,de,void 0,a,Re);var Mt=je.getVisualType(c);this.telemetry.logEvent(De.EXAddField,{source:"DraggedToFieldWell",targetVisualType:Mt,fieldKind:Ee,drillToDetailsMode:je.hasGroupByItemsInQuery(c),success:!0,quickMeasureTemplateName:ft,visualName:c.name});var bt=this.visualPluginService.capabilities(Mt);return this.logSmallMultiplesTelemetry(c,Mt,bt,a,"DraggedToFieldWell"),we.resolve(),!0}return this.telemetry.logEvent(De.EXAddField,{source:"DraggedToFieldWell",targetVisualType:je.getVisualType(c),fieldKind:Ee,drillToDetailsMode:je.hasGroupByItemsInQuery(c),success:!1,quickMeasureTemplateName:ft,visualName:c.name}),we.reject(),!1},ve.prototype.resolveParameters=function(r,o,a){var c=this.core.resolveParameters(r,o,a,this.drill,this.sortService,this.setDisplayNameAlias.bind(this)),B=c.queryChange,U=c.aliasChange,oe=c.totalAddAttemptCount,te=c.totalAddSuccessCount,_e=c.totalRemoveAttemptCount,de=c.totalRemoveSuccessCount,Ee=c.totalSuccessColumnCount,we=c.totalSuccessDateHierarchyCount,Se=c.totalSuccessMeasureCount;if(B){c.outputFilterChange&&this.notifyVisualContainers([o],void 0,!0,r,2);var Re=je.getVisualType(o);this.telemetry.logEvent(De.EXResolveParameters,{targetVisualType:Re,addSuccessTotalCount:te,addAttemptTotalCount:oe,addSuccessTotalColumnCount:Ee,addSuccessTotalDateHierarchyCount:we,addSuccessTotalMeasureCount:Se,removeSuccessCount:de,removeAttemptCount:_e,visualName:o.name})}return{aliasChange:U,queryChange:B}},ve.prototype.setDisplayNameAlias=function(r,o,a,c){var B=r.config.singleVisual,U=B.query,H=B.columnProperties;if(!U||U.getParameterByFieldIndex(o.fieldIndex,a))return!1;var Se,oe=U.getQueryRef(a,o);if(c){var te=U.defn.select(),_e=te.withName(oe);if("While renaming the target field, ".concat(oe," does not exist in the visual"),_e&&Y.isNativeVisualCalc(_e.expr)){var de=_e.expr,Ee=de.name;return!!this.updateVisualCalculation(r,o.fieldIndex,a,c,de.expression)&&Ee!==c}B.columnProperties||(B.columnProperties=H={}),(Se=H[oe])||(H[oe]=Se={});var Re=Se.displayName;Se.displayName=c;var $e=Se.displayName!==Re;if(null!=(null==_e?void 0:_e.nativeReferenceName)&&$e){var Ye=f.ND(U,c),et=Ce.indexWithName(te,oe);U.setNativeReferenceNameAt(et,Ye)}return $e}return H?!!(Se=H[oe])&&(Re=Se.displayName,delete Se.displayName,void 0!==Re):void 0},ve.prototype.runAddFieldValidation=function(r,o,a,c,B,U,H,oe){c?this.notifyVisualContainers([r],"UserAction_EditVisual",!1,o,1):this.core.runAddFieldValidation(r,o,a,this.drill,this.sortService,this.updateFilterState,B,U,H,oe)},ve.prototype.expandHierarchy=function(r,o,a,c,B){var U=(o.config.singleVisual.query.tryGetExprs(a)||[]).slice(c,c+B);if(_.isEmpty(U))return!1;var H=U[0];if(Y.isHierarchyLevel(H)){var te=ot.expandExpr(r,H.arg);if(_.isArray(te)){var _e=te.length;if(B<_e){for(var de=o.config.singleVisual.query,Ee=!1,we=0;we<_e;we++)if(!Y.equals(de.tryGetExpr(a,c+we),te[we])){if(!this.core.add({expr:te[we],schema:r,targetRole:a,projOptions:{fieldIndex:c+we}},o.config,!1))break;this.core.setMatchingFilterToAuto(te[we],o),Ee=!0}return Ee&&this.notifyVisualContainers([o]),Ee}}}return!1},ve.prototype.removeFieldFromAllRoles=function(r,o,a,c){var B;B=c||ye.getSelectedVisualContainers(this.selectionService);var U=!1,H=this.tryGetParameterExprs(r,B);if(!_.isEmpty(H))for(var oe=0,te=H;oe<te.length;oe++){var _e=te[oe];U=this.removeFieldImpl(_e.exprs,B,o,a,"FieldParameter",_e.parameter)||U}U=this.removeFieldImpl(r,B,o,a,j(r))||U;var we=ot.expandExpr(o,r,!0);return _.isArray(we)&&!_.isEmpty(we)&&(U=this.removeFieldImpl(we,B,o,a,"HierarchyLevel")||U),U},ve.prototype.tryGetParameterExprs=function(r,o){for(var a=[],c=o.length-1;c>-1;c--){var H=o[c].config.singleVisual.query;if(H){var oe=H.getParameterProjectionExprs(r);a.push.apply(a,oe)}}return a},ve.prototype.removeFieldFromRole=function(r,o,a,c){var B=a;if(B){var U=r.role,H=B.config.singleVisual.query,oe=r.projOptions,te=oe.fieldIndex,_e=oe.parameter||H.getParameterByFieldIndex(te,U),de=!!_e,Ee=(0,e.pi)((0,e.pi)({},r),{projOptions:(0,e.pi)((0,e.pi)({},r.projOptions),{parameter:_e}),shouldRemoveParameter:de}),we=void 0;if(de)we=["FieldParameter"];else{var Se=H.tryGetExpr(U,te);we=[j(Se)]}return this.invokeRemoveOnSelectedVisuals(Ee,[B],o,c,we)}return!1},ve.prototype.removeInvalidExpressions=function(r,o,a){var c=o.config.singleVisual;if(!c||!c.query)return!1;for(var B=[],U=c.query.defn.select(),H=0,oe=U;H<oe.length;H++){var _e=oe[H].expr;_.isEmpty(_e.validate(r,this.aggrOps))||B.push(_e)}for(var de=0,Ee=B;de<Ee.length;de++)this.removeFiltersWithExpr(Ee[de],o);return this.removeFieldImpl(B,[o],r,a,"Other"),this.removeInvalidDataBoundProperty(c.vcObjects,r,U),this.removeInvalidDataBoundProperty(c.objects,r,U),!0},ve.prototype.removeInvalidDataBoundProperty=function(r,o,a){if(r){var B=function(U){var H=function(de){var Ee=r[de];if(!_.isEmpty(Ee))for(var we=function(at){var nt=at.properties,pt=at.selector,ct=function(tt){var Ft=fe.getDataBoundExprs(nt[tt],pt,a);if(!_.isEmpty(Ft))for(var Tt=0,Bt=Ft;Tt<Bt.length;Tt++){var Ut=Bt[Tt];if(null==Ut.expr||!_.isEmpty(Ut.expr.validate(o,U)))return{value:function(){ae.deleteProperty(r,de,pt,tt)}}}};for(var ft in nt){var Mt=ct(ft);if("object"==typeof Mt)return Mt}},Se=0,Re=Ee;Se<Re.length;Se++){var Ye=we(Re[Se]);if("object"==typeof Ye)return Ye}};for(var oe in r){var te=H(oe);if("object"==typeof te)return te.value}}(this.aggrOps);B&&(B(),this.eventBridge.publishToChannel(Me.visualContainerChanged,{affectContainer:function(){return!0}}))}},ve.prototype.moveField=function(r,o,a,c,B,U,H,oe){var te=H||ye.getSelectedVisual(this.selectionService);if(!te)return!1;var _e,de=te.config.singleVisual.query,Ee=de.getParameterByFieldIndex(c,o),we=[];if(null!=Ee)we.push("FieldParameter");else for(var Se=0;Se<U;Se++){var Re=de.tryGetExpr(o,c+Se);we.push(j(Re))}var $e=this.contextActivityService.createActivity({name:"UpdateField",visualName:te.name,data:{fieldKinds:we,operationType:"Move",source:"FieldWell"}});if(!Ee&&o!==a){var Ye=this.getVisualDataRole(te,a),et=F.getHierarchyReplacementExpressions(te.config,o,c,U,Ye);if(_.isEmpty(et))return $e.reject(),!1;_e=et}var at={sourceRole:o,targetRole:a,sourceIndex:c,targetIndex:B,sourceCount:U,replacementExpressions:_e,schema:r,allowPartialReplace:!0,hideOnOverflow:oe},nt=ge.getDrillFilterRemovalInfoList(de,at,1),pt={projOptions:{fieldIndex:c,parameter:Ee},role:o,count:U},ct=this.core.captureCurrentActiveProjectionsByRole(H);if(this.core.removeAutoFilterFromContract(te,pt),this.core.move(at,te.config)){this.core.setDefaultExpandLevel(te,this.visualPluginService,a,this.drill,ct,1),this.core.ensureValidDrillState(te,nt,this.drill),this.core.setDefaultSort(te,r,this.sortService,this.visualPluginService),je.setQueryKeepProjectionOrder(te),this.updateFilterState(r,te,!0,!0,!0);var Mt=te.config.singleVisual.query.tryGetExpr(a,B);if(this.logReportMeasureMoveTelemetry(r,te,o,a,Mt),_e&&_e.length>0)for(var bt=0,tt=_e;bt<tt.length;bt++)this.core.setMatchingFilterToAuto(Re=tt[bt],te);var Et=je.getVisualType(te),Ft=this.visualPluginService.capabilities(Et);return this.logSmallMultiplesTelemetry(te,Et,Ft,a,"DraggedToFieldWell"),$e.resolve(),!0}return $e.reject(),!1},ve.prototype.drillDownLevel=function(r,o,a){if(o){var c=je.getVisualType(o),B=this.telemetry.startEvent(De.EXInteractionExpand,{sourceVisualType:c,isInlineHierarchyEnabled:2===a,visualName:o.name}),U=o.config.singleVisual,H=_.isEmpty(r)?[]:[r];if(_.isEmpty(H)){var oe=this.visualPluginService.capabilities(U.visualType);H=ge.getDrillableRoles(oe)}if(!_.isEmpty(H))for(var te=function($e){if($e){var Ye=_e.core.changeActiveProjection($e,U,a);if(Ye)return 2===a&&_e.expandCollapse.isEnabled(o,[$e])&&_e.expandCollapse.expandLevel(o,[$e],Ye.length-2,!0),_e.notifyVisualContainers([o],"UserAction_Drill"),B.resolve(),{value:void 0}}},_e=this,de=0,Ee=H;de<Ee.length;de++){var Se=te(Ee[de]);if("object"==typeof Se)return Se.value}B.reject()}},ve.prototype.replaceField=function(r,o,a,c,B,U,H){var oe=this.getTargetRoleAndExpressionsForAdd(r,B,o,a).expressions,te=this.contextActivityService.createActivity({name:"UpdateField",visualName:B.name,data:{fieldKinds:_.map(jsCommon.ArrayExtensions.ensureArray(oe),function(Re){return j(Re)}),operationType:"Replace",source:"FieldWell"}}),_e={sourceRole:a,targetRole:a,sourceIndex:c,targetIndex:c,sourceCount:null!=U?U:1,replacementExpressions:jsCommon.ArrayExtensions.ensureArray(oe),schema:r},Ee={projOptions:{fieldIndex:c,parameter:B.config.singleVisual.query.getParameterByFieldIndex(c,a)},role:a};this.core.removeAutoFilterFromContract(ye.getSelectedVisual(this.selectionService),Ee);var we=this.core.captureCurrentActiveProjectionsByRole(B);if(this.core.move(_e,B.config)){this.resetSearchProperties(B);var Se=Ze.shouldUseAsFieldParameter(this.featureSwitchService.featureSwitches.fieldParametersAuthoring,r,o,this.featureSwitchService.featureSwitches.fieldParameterDynamicSlicer||!this.filterGenerator.supportsFilterOutput(B),this.isAnalysisVisual(B));return this.runAddFieldValidation(B,r,o,Se,void 0,a,we),this.isVisualRecommendationAllowed(B)&&(null==H||H.updateWithRecommendation(B,void 0,r)),te.resolve(),!0}return te.reject(),!1},ve.prototype.drillDown=function(r,o,a,c){var B=je.getVisualType(a),U=this.telemetry.startEvent(De.EXInteractionDrill,{sourceVisualType:B,isDrillDown:!0,visualName:a.name}),H=a.config.singleVisual;if(this.runningVisualService.getVisual(a).clearSelectedDatapoints(),_.isEmpty(o)||_.isEmpty(o[0].dataMap))return!1;a.filters||(a.filters=[]);var te=o[0].dataMap,_e=H.query,de=_.isEmpty(c)?[]:[c];if(_.isEmpty(de)){var Ee=this.visualPluginService.capabilities(H.visualType);de=ge.getDrillableRoles(Ee)}if(!_.isEmpty(de))for(var we=function(nt){var pt=_e.projections[nt],ct=pt&&pt.activeProjectionRefs,ft=_.filter(te,function(Ut,Rt){return _.includes(ct,Rt)});if(!_.isEmpty(ft)){var Mt=_e.currentDrillMode(nt)||2,bt=Se.core.changeActiveProjection(nt,H,Mt);if(bt){if(2===Mt&&Se.expandCollapse.isEnabled(a,[nt])){var tt=_.uniq(bt);Se.expandCollapse.expandLevel(a,[nt],tt.length-2,!0)}for(var Et=0,Ft=ft;Et<Ft.length;Et++)Se.core.addDrillFilter(r,a.filters,_e,ct,ve.chooseRepetitionSelectorForDrill(Ft[Et]));var Bt=Se.explorationNavigationService.getCurrentSection();return Se.filterGenerator.updateCrossFilterOnDrill(Bt,a),Se.notifyVisualContainers([a],"UserAction_Drill"),U.resolve(),{value:!0}}}},Se=this,Re=0,$e=de;Re<$e.length;Re++){var et=we($e[Re]);if("object"==typeof et)return et.value}return U.reject(),!1},ve.chooseRepetitionSelectorForDrill=function(r){if(1===(r=Ce.ensureArray(r)).length)return r[0];for(var o,a=0,c=r;a<c.length;a++){var B=c[a];o||(o=B),B.key.length>o.key.length&&(o=B)}return o},ve.prototype.drillUp=function(r,o){if(o){var a=je.getVisualType(o),c=this.telemetry.startEvent(De.EXInteractionDrill,{sourceVisualType:a,isDrillDown:!1,visualName:o.name}),B=o.config.singleVisual,U=B.query,H=_.isEmpty(r)?[]:[r];if(_.isEmpty(H)){var oe=this.visualPluginService.capabilities(o.config.singleVisual.visualType);H=ge.getDrillableRoles(oe)}if(!_.isEmpty(H))for(var te=0,_e=H;te<_e.length;te++){var de=_e[te],Ee=this.core.changeActiveProjection(de,B,1);if(!_.isEmpty(Ee)){var we=_.last(Ee),Se=U.defn.select().withName(we).expr;if(2===(U.currentDrillMode(de)||2)&&this.expandCollapse.isEnabled(o,[de])){var $e=_.uniq(Ee);this.expandCollapse.collapseLevel(o,[de],$e.length-1)}if(this.core.removeDrillFilter(o.filters,Se)){var et=this.explorationNavigationService.getCurrentSection();this.filterGenerator.updateCrossFilterOnDrill(et,o)}return this.notifyVisualContainers([o],"UserAction_Drill"),void c.resolve()}}c.reject()}},ve.prototype.setDrillFilterOtherVisualsSetting=function(r){var o=ye.getSelectedVisual(this.selectionService);!o||this.setVisualDrillFilterOtherVisualsSetting(o,r)},ve.prototype.drillToDetails=function(r,o,a,c,B,U){var oe,te,H=a;do{if(!(oe=this.drillToDetailsCore(r,o,H,c,B,U)))return;!oe.targetQueryHasColumns&&H.length>1?(H=H.slice(0,-1),te=!0):te=!1}while(te);return oe.targetVisualContainer},ve.prototype.drillToDetailsCore=function(r,o,a,c,B,U){var H=!1;if(_.some(a)&&(H=Y.isAggregation(_.head(a))&&1===a.length||_.every(a,function(nt){return Y.isMeasure(nt)})),H){var oe=Be.clone(B,this.explorationSerializer);this.addDrillToDetailsFilters(o,oe,c);var te=oe.config.singleVisual,_e={name:r,config:{singleVisual:te},layouts:B.layouts,filters:oe.filters};if(te.visualType!==powerbi.visuals.plugins.tableEx.name&&!this.convert(o,_e,powerbi.visuals.plugins.tableEx.name))return;((te=_e.config.singleVisual).vcObjects=te.vcObjects||{}).stylePreset=[{properties:{name:ue.text("Default")}}];var we=te.objects={};ae.setValue(we,yt.PropTotalTableExTotals,void 0,ue.boolean(!1));for(var Se=te.query,Re=0,$e=a;Re<$e.length;Re++){var Ye=$e[Re],et=Ye.getTargetEntity();Y.isAggregation(Ye)?(this.removeAggregatesAndMeasures(o,_e,!1),this.removeTableReferences(_e),this.addDetailTableProperties(o,et,_e),Se.defn=Se.defn.addGroupBy(et)):(this.addDetailTableProperties(o,et,_e,!0,U),this.removeAggregatesAndMeasures(o,_e,!0),this.removeTableReferences(_e));var at=je.getVisualType(B);this.telemetry.logEvent(De.EXDrillToDetails,{sourceVisualType:at,targetExprKind:j(Ye),visualName:B.name})}return{targetVisualContainer:_e,targetQueryHasColumns:Se.defn.select().length>0}}},ve.prototype.isAnalysisVisual=function(r){return r&&r.config&&r.config.singleVisual&&this.pluginOps.isAnalysisVisual(r.config.singleVisual.visualType)},ve.prototype.removeAggregatesAndMeasures=function(r,o,a){for(var c=o.config.singleVisual.query,U=function(de){var Ee=de.expr;if(Ze.isMeasure(Ee)&&!1===a||Y.isAggregation(Ee)&&!0===a){var we=c.getRoleNameForExpr(Ee),Se=le.getRole(c.projections,we),Re=_.findIndex(Se.all(),function($e){return $e.queryRef===de.name});c.removeAggregate(we,Re)}Y.isMeasure(Ee)&&!1===a&&c.removeExpr(Ee,!1)},H=0,oe=c.defn.select();H<oe.length;H++)U(oe[H])},ve.prototype.removeTableReferences=function(r){for(var o=r.config.singleVisual.query,c=0,B=o.defn.select();c<B.length;c++){var U=B[c];Y.isEntity(U.expr)&&o.removeExpr(U.expr,!1)}},ve.prototype.addDetailTableProperties=function(r,o,a,c,B){for(var U=a.config.singleVisual.query,H=Ze.getConceptualEntity(o,r),te=0,_e=U.defn.select();te<_e.length;te++){var Ee=_e[te].expr,we=Ee.getTargetEntity();_.isEqual(o,we)||Ze.isRelatedOneToOne(r,o,we,0)||Ze.isRelatedToMany(r,we,o,0)||U.removeExpr(Ee,!1)}for(var et=0,at=H.properties;et<at.length;et++){var nt=at[et];if(!nt.hidden&&(1!==nt.kind||!B)&&(1!==nt.kind&&!nt.type.integer&&!nt.type.numeric||c)&&(!nt.type.dateTime||!nt.column||_.isEmpty(nt.column.variations))){var pt;pt=1===nt.kind?ue.measureRef(o,nt.name):ue.columnRef(o,nt.name),U.defn.selectNameOf(pt)||this.addFieldToVisual(r,pt,a)}}},ve.prototype.setAggregate=function(r,o,a,c,B,U){var H,oe,we,te=null===(H=je.getVisualQuery(B))||void 0===H?void 0:H.tryGetExpr(o,a),_e=null===(oe=null==te?void 0:te.getMetadata(r))||void 0===oe?void 0:oe.type,de=this.contextActivityService.createActivity({name:"ChangeAggregation",visualName:B.name,data:{aggregation:c,dataType:_e?powerbi.ExtendedTypeNames[_e.extendedType]:void 0}}),Ee={projOptions:{fieldIndex:a},role:o};return this.core.removeAutoFilterFromContract(ye.getSelectedVisual(this.selectionService),Ee),this.isVisualRecommendationAllowed(B)?we=null!=U.updateWithRecommendation(B,{toUpdate:{role:o,index:a,aggregateToUse:c}},r):(we=this.core.setAggregate({role:o,index:a,newAggregate:c,schema:r},B.config))&&(this.core.setDefaultSort(B,r,this.sortService,this.visualPluginService),je.setQueryKeepProjectionOrder(B)),we?(this.notifyVisualContainers([B]),de.resolve()):de.reject(),we},ve.prototype.removeAggregate=function(r,o,a,c,B){var U,H,Ee,oe=null===(U=je.getVisualQuery(c))||void 0===U?void 0:U.tryGetExpr(o,a),te=null===(H=null==oe?void 0:oe.getMetadata(r))||void 0===H?void 0:H.type,_e=this.contextActivityService.createActivity({name:"ChangeAggregation",visualName:c.name,data:{aggregation:void 0,dataType:te?powerbi.ExtendedTypeNames[te.extendedType]:void 0}}),de={projOptions:{fieldIndex:a},role:o};return this.core.removeAutoFilterFromContract(ye.getSelectedVisual(this.selectionService),de),this.isVisualRecommendationAllowed(c)?Ee=null!=B.updateWithRecommendation(c,{toUpdate:{role:o,index:a,aggregateToUse:void 0}},r):(Ee=this.core.removeAggregate({role:o,index:a,schema:r},c.config))&&(this.core.setDefaultSort(c,r,this.sortService,this.visualPluginService),je.setQueryKeepProjectionOrder(c)),Ee?(this.notifyVisualContainers([c]),_e.resolve()):_e.reject(),Ee},ve.prototype.setPercentOfGrandTotal=function(r,o,a,c){var B=this.contextActivityService.createActivity({name:"ChangeShowFieldAs",visualName:c.name,data:{operationType:"SetPercentOfGT"}});return this.core.setPercentOfGrandTotal({role:o,index:a,schema:r},c.config)?(this.core.setDefaultSort(c,r,this.sortService,this.visualPluginService),this.core.ensureValidDrillMode(c,this.drill),this.notifyVisualContainers([c]),B.resolve(),!0):(B.reject(),!1)},ve.prototype.removePercentOfGrandTotal=function(r,o,a,c){var B=this.contextActivityService.createActivity({name:"ChangeShowFieldAs",visualName:c.name,data:{operationType:"RemovePercentOfGT"}});return this.core.removePercentOfGrandTotal({role:o,index:a,schema:r},c.config)?(this.core.setDefaultSort(c,r,this.sortService,this.visualPluginService),this.notifyVisualContainers([c]),B.resolve(),!0):(B.reject(),!1)},ve.prototype.setPercentOfRoleTotal=function(r,o,a,c,B){var U=this.contextActivityService.createActivity({name:"ChangeShowFieldAs",visualName:B.name,data:{operationType:"SetPercentOfRT"}});return this.core.setPercentOfRoleTotal({roleRefs:o,role:a,index:c,schema:r},B.config)?(this.core.setDefaultSort(B,r,this.sortService,this.visualPluginService),this.core.ensureValidDrillMode(B,this.drill),this.notifyVisualContainers([B]),U.resolve(),!0):(U.reject(),!1)},ve.prototype.removePercentOfRoleTotal=function(r,o,a,c){var B=this.contextActivityService.createActivity({name:"ChangeShowFieldAs",visualName:c.name,data:{operationType:"RemovePercentOfGT"}});return this.core.removePercentOfRoleTotal({role:o,index:a,schema:r},c.config)?(this.core.setDefaultSort(c,r,this.sortService,this.visualPluginService),this.notifyVisualContainers([c]),B.resolve(),!0):(B.reject(),!1)},ve.prototype.setVariation=function(r,o,a,c,B,U){U=U||1;var H=Y.isHierarchy(a),oe=this.contextActivityService.createActivity({name:"ChangeShowFieldAs",visualName:o.name,data:{operationType:H?"UseVariations":"RemoveVariations"}});if(B<0)return oe.reject(),!1;for(var te=[],_e=0;_e<U;_e++)if(te[_e]=o.config.singleVisual.query.tryGetExpr(c,B+_e),!te[_e])return oe.reject(),!1;var de=[a];if(H&&!(de=Ae.convert(a,r)))return oe.reject(),!1;var Ee=this.getVisualDataRole(o,c),we=F.getHierarchyReplacementExpressions(o.config,c,B,U,Ee,de);if(_.isEmpty(we))return oe.reject(),!1;var Se=we,Re={sourceRole:c,targetRole:c,sourceIndex:B,targetIndex:B,sourceCount:te.length,replacementExpressions:Se,schema:r,allowPartialReplace:!0},Ye=ge.getDrillFilterRemovalInfoList(o.config.singleVisual.query,{count:te.length,projOptions:{fieldIndex:B},role:c},0),et={count:U,projOptions:{fieldIndex:B},role:c};this.core.removeAutoFilterFromContract(ye.getSelectedVisual(this.selectionService),et);var at=this.core.captureCurrentActiveProjectionsByRole(o),nt=this.core.move(Re,o.config);if(nt&&(this.core.setDefaultExpandLevel(o,this.visualPluginService,c,this.drill,at,1),this.core.ensureValidDrillState(o,Ye,this.drill),this.core.setDefaultSort(o,r,this.sortService,this.visualPluginService),je.setQueryKeepProjectionOrder(o),this.notifyVisualContainers([o]),Se&&Se.length>0))for(var pt=0,ct=Se;pt<ct.length;pt++)this.core.setMatchingFilterToAuto(ct[pt],o);return nt?oe.resolve():oe.reject(),nt},ve.prototype.toggleShowAll=function(r,o){!o||(this.core.toggleShowAll(r,o.config),je.setQueryKeepProjectionOrder(o),this.notifyVisualContainers([o]))},ve.prototype.createVisualContainerConfig=function(r,o,a){return this.createVisualContainerConfigCore(o,r,a)},Object.defineProperty(ve.prototype,"featureSwitches",{get:function(){return this.featureSwitchService.featureSwitches},enumerable:!1,configurable:!0}),ve.prototype.addDrillToDetailsFilters=function(r,o,a){if(!_.isEmpty(a)&&a[0]&&!_.isEmpty(a[0].dataMap)){var c=je.getVisualQuery(o);if(c){var B=[];if(c.projections)for(var U in c.projections)_.isEmpty(c.projections[U].activeProjectionRefs)||B.push(c.projections[U].activeProjectionRefs);var oe,H=a[0].dataMap;for(oe in o.filters=o.filters||[],H){var te=_.find(B,function(_e){return _.includes(_e,oe)});this.core.addDrillToDetailsFilter(r,o.filters,c,te||[oe],ve.chooseRepetitionSelectorForDrill(H[oe]))}}}},ve.prototype.findCompatibleRole=function(r,o,a,c){var B=o.config.singleVisual,U=B.query||new Pt(powerbi.data.SemanticQuery.create(),{},[]),H=this.visualPluginService.capabilities(B.visualType),oe=U&&U.projections;if(H&&oe){var te=powerbi.visualCapabilitiesHelperModuleFactory().create(H,this.geotaggingAnalyzerService),_e=te&&te.findCompatibleRole({queryProjections:oe,schema:r,expr:a,roleToExprMap:new powerbi.explore.utils.SQExprToRoleDictionary(powerbi.explore.util.HierarchyUtils.hierarchyLevelComparer),preferDrillableRoles:!1,isFieldParameter:c});return _e&&_e.role}},ve.prototype.getMaxNumberOfExpressionsAllowedInRole=function(r,o,a){var c=o.config.singleVisual,B=c.query||new Pt(powerbi.data.SemanticQuery.create(),{},[]),U=this.visualPluginService.capabilities(c.visualType);if(U&&B&&B.projections){var oe=powerbi.visualCapabilitiesHelperModuleFactory().create(U,this.geotaggingAnalyzerService),te=ge.getDrillableRoles(U);if(_.includes(te,a))return Number.MAX_VALUE;var de=oe.getNumberRangesForRoles(B)[a];if(de&&de.max)return de.max}return 0},ve.prototype.getTargetRoleAndExpressionsForAdd=function(r,o,a,c,B){var U=a;if(ot.isHierarchyOrVariation(r,a)&&!this.shouldUseOriginalColumn(o,r,a,!1,c)&&(U=ot.expandExpr(r,a,B),_.isArray(U))){var H=U;if(!c){var oe=this.findCompatibleRole(r,o,H[0],!1);oe&&(c=oe.name)}if(c){var te=this.getMaxNumberOfExpressionsAllowedInRole(r,o,c);te!==Number.MAX_VALUE&&(U=1===te&&Y.isColumn(a)?a:Y.isHierarchy(a)||Y.isColumn(a)?H.slice(0,te):H.slice(H.length-te,H.length))}}return{targetRole:c,expressions:U}},ve.prototype.shouldUseOriginalColumn=function(r,o,a,c,B){if(!B){var U=this.findCompatibleRole(o,r,a,c);U&&(B=U.name)}if(!B)return!1;var H=this.getVisualDataRole(r,B);if(H){var oe=a.getConceptualProperty(o);if(oe&&oe.column&&(oe.type===Ie.fromExtendedType(518)||oe.type===Ie.fromExtendedType(519))&&H.preferDateColumn)return!0}return!1},ve.prototype.addExpressionToVisualWithoutAggregation=function(r){var o=r.schema,a=r.expr,c=r.visualContainer,B=r.hideOnOverflow,U=r.capabilities,H=U&&q.findScriptResultMapping(U.dataViewMappings),oe=this.getTargetRoleAndExpressionsForAdd(o,c,a);return(!oe.targetRole||U.dataRoles[oe.targetRole]===st.Measure)&&(oe.expressions instanceof Array&&(oe.expressions=a),!H&&!this.shouldPreferGroupToAggregate(o,a,!1,c)&&(oe.expressions=this.createExprWithAggregate(oe.expressions,o,!1))),this.core.add({expr:oe.expressions,schema:o,targetRole:oe.targetRole,hideOnOverflow:B},c.config,!1)},ve.prototype.addExpressionToVisualForcingAggregation=function(r){var o=this.createExprWithAggregate(r.expr,r.schema,!0);return this.core.add({expr:o,schema:r.schema,hideOnOverflow:r.hideOnOverflow},r.visualContainer.config,!1)},ve.prototype.addExpressionToVisual=function(r){return this.core.add(r,r.visualContainer.config,r.isFieldParameter)},ve.prototype.createVisualContainerConfigCore=function(r,o,a){var c,H,B=r.expr,U=function(we){return we instanceof Array};r.allowAggregate&&!U(B)&&!this.shouldPreferGroupToAggregate(o,B,!1)&&(B=this.createExprWithAggregate(B,o,!1)),H=U(B)?B[0]:B;var oe=this.shouldAutoSelectVisualType(r.visualType);if(oe&&null!=H){var te={name:"dummyContainer",config:{singleVisual:{visualType:void 0,autoSelectVisualType:!0}}};return null==a||a.updateWithRecommendation(te,{toAdd:null!==(c=r.expandedFromExpr)&&void 0!==c?c:H},o),te.config}var _e=r.visualType||We.getVisualDefaultType(H,o,this.geotaggingAnalyzerService,this.featureSwitches);return this.core.create({expr:B,visualType:_e,schema:o,autoSelectVisualType:oe,inFilterVisualContainer:r.inFilterVisualContainer})},ve.prototype.addVisualContainerImageFromData=function(r,o,a){var c="data:image/png;base64,".concat(o),B=this.resourceRegistration.add(a,1,K.Image,{content:c});this.addVisualContainerImage(r,B)},ve.prototype.addVisualContainerImage=function(r,o){var a={singleVisual:{visualType:"image",objects:{general:[{properties:{imageUrl:o}}]}}},c=me.inherit(r),B=this.formFactorProvider.getCurrentLayout();c.position=ve.getPositionForAddedVisual(r.exploreCanvas,B,r.position),this.createVisualFromConfig(c,a,void 0,"InsertVisualButton")},ve.prototype.addVisualContainerBasicShapeVisual=function(r,o){var a=me.inherit(r),c=this.formFactorProvider.getCurrentLayout();a.position=ve.getPositionForAddedVisual(r.exploreCanvas,c,r.position);var B={singleVisual:{visualType:R.basicShape.name,objects:{general:[{properties:{shapeType:ue.text(o)}}]}}};this.createVisualFromConfig(a,B,void 0,"InsertVisualButton")},ve.prototype.addVisualContainerShapeVisual=function(r,o){var a,c=me.inherit(r),B=this.formFactorProvider.getCurrentLayout();c.position=ve.getPositionForAddedVisual(r.exploreCanvas,B,r.position);var U={singleVisual:{visualType:R.shape.name,objects:{shape:[{properties:{tileShape:ue.text(o.shapeType)}}],rotation:[{properties:{shapeAngle:ue.integer(null!==(a=o.shapeRotation)&&void 0!==a?a:0)}}]}}};this.createVisualFromConfig(c,U,void 0,"InsertVisualButton")},ve.prototype.addVisualContainerActionButtonVisual=function(r,o){var a=me.inherit(r),c=this.formFactorProvider.getCurrentLayout();if(o===ne.applyAllSlicers||o===ne.clearAllSlicers){var B=_.cloneDeep(r.position);B.height=50,B.width=200,a.position=ve.getPositionForAddedVisual(r.exploreCanvas,c,B)}else a.position=ve.getPositionForAddedVisual(r.exploreCanvas,c,r.position);var U={icon:[{properties:{shapeType:ue.text(o)},selector:{id:"default"}}]},H={properties:{show:ue.boolean(!0)}};switch(o){case ne.back:H.properties.type=ue.text(ht.Back);break;case ne.qna:H.properties.type=ue.text(ht.Qna);break;case ne.bookmarks:H.properties.type=ue.text(ht.Bookmark);break;case ne.applyAllSlicers:H.properties.type=ue.text(ht.ApplyAllSlicers),H.properties.tooltipPlaceholderText=ue.text(this.localizationService.get("ReportAppBar_ApplyAllSlicers_TooltipDefaultText")),this.setSlicerActionButtonDefaults(U,"ReportAppBar_ApplyAllSlicers");break;case ne.clearAllSlicers:H.properties.type=ue.text(ht.ClearAllSlicers),H.properties.tooltipPlaceholderText=ue.text(this.localizationService.get("ReportAppBar_ClearAllSlicers_TooltipDefaultText")),this.setSlicerActionButtonDefaults(U,"ReportAppBar_ClearAllSlicers");break;default:H=void 0}var oe={singleVisual:{visualType:R.actionButton.name,objects:U}};H&&(oe.singleVisual.vcObjects={},oe.singleVisual.vcObjects.visualLink=[H]),this.createVisualFromConfig(a,oe,void 0,"InsertVisualButton")},ve.prototype.setSlicerActionButtonDefaults=function(r,o){r.icon[1]={properties:{show:ue.boolean(!1)}},r.text=[{properties:{show:ue.boolean(!0)}},{properties:{text:ue.text(this.localizationService.get(o)),horizontalAlignment:ue.text(E.center)},selector:{id:"default"}}]},ve.prototype.addVisualContainerNavigatorVisual=function(r,o){var a=this.formFactorProvider.getCurrentLayout();r.position=ve.getPositionForAddedVisual(r.exploreCanvas,a,r.position);var c={singleVisual:{visualType:void 0}};switch(o){case"page":c.singleVisual.visualType=R.pageNavigator.name;break;case"bookmark":c.singleVisual.visualType=R.bookmarkNavigator.name}this.createVisualFromConfig(r,c,void 0,"InsertVisualButton")},ve.prototype.applyConfigOptions=function(r,o){return r.visualLink&&(o.singleVisual.vcObjects=o.singleVisual.vcObjects||{},o.singleVisual.vcObjects.visualLink=[r.visualLink]),o},ve.prototype.addVisualContainer=function(r,o,a,c,B,U){var H=this.formFactorProvider.getCurrentLayout();U=ve.getPositionForAddedVisual(c,H,U),o=(0,e.pi)((0,e.pi)({},o),{expandedFromExpr:o.expr,expr:ot.expandExpr(r,o.expr)});var oe=this.createVisualContainerConfig(r,o,B);if(oe)return this.createVisualFromConfig({sections:a,exploreCanvas:c,position:U,postProcessing:o.postProcessing,selectedVisualContainers:o.selectedVisualContainers},oe)},ve.prototype.addEmptyVisualContainer=function(r,o,a,c,B,U){var H=this.formFactorProvider.getCurrentLayout();c=ve.getPositionForAddedVisual(o,H,c);var oe=this.shouldAutoSelectVisualType(a),_e={singleVisual:{visualType:null!=a?a:powerbi.visuals.plugins.columnChart.name}};return oe&&(_e.singleVisual.autoSelectVisualType=!0),this.createVisualFromConfig({sections:r,exploreCanvas:o,position:c,postProcessing:U,selectedVisualContainers:B},_e)},ve.prototype.addVisualContainerFromConfig=function(r,o,a,c,B,U,H,oe){return void 0===oe&&(oe=!1),B||(B=ve.getPositionForAddedVisual(c,null)),this.createVisualFromConfig({sections:a,exploreCanvas:c,position:B,select:U},r,o,H,oe)},ve.prototype.shouldAutoSelectVisualType=function(r){if(this.featureSwitchService.featureSwitches.onObject&&this.settingsService.getSuggestVisualByDefault())return null==r},ve.prototype.groupVisualContainers=function(r,o){for(var a=this,c=r.contract.visualContainerGroups,B=1,U=je.getVisualContainerGroups(c),H=this.formFactorProvider.getCurrentLayout(),oe=r.contract,te=_.isEmpty(oe.visualContainerGroups)?oe.visualContainers:oe.visualContainerGroups,_e=ve.getDefaultVisualContainerPosition(te,H,oe),de=this.formFactorProvider.getCurrentLayout();_.some(U,function(Re){return powerbi.explore.contracts.isVisualContainerGroup(Re)&&Re.displayName==="".concat(a.localizationService.get("Group")," ").concat(B)});)B++;var Ee={name:je.uniqueName(c),displayName:"".concat(this.localizationService.get("Group")," ").concat(B),groupMode:0,layouts:jsCommon.ArrayExtensions.extendWithId([{id:de,position:_e}]),children:o};r.contract.visualContainerGroups=k.group(Ee,c);var we=he.findCanvasItemViewModels(r.visualContainerGroups,Ee.children),Se=Oe.ViewModelFactory.convertVisualContainerGroup(Ee,we,de);return Se&&(r.visualContainerGroups=k.group(Se,r.visualContainerGroups),he.syncCanvasItemViewModelsWithContracts(r.visualContainerGroups,r.contract.visualContainerGroups)),ye.selectCanvasItem(Ee,this.selectionService),Se},ve.prototype.ungroupVisualContainers=function(r,o){r.contract.visualContainerGroups=k.ungroup(o,r.contract.visualContainerGroups);var a=k.find(o.name,r.visualContainerGroups);if(Oe.isVisualContainerGroup(a))return r.visualContainerGroups=k.ungroup(a,r.visualContainerGroups),he.syncCanvasItemViewModelsWithContracts(r.visualContainerGroups,r.contract.visualContainerGroups),ye.unselectCanvasItem(o,this.selectionService),a},ve.prototype.moveCanvasItemsInTree=function(r,o,a,c,B){void 0===B&&(B=!1),r.contract.visualContainerGroups=k.move(o,a,r.contract.visualContainerGroups,c);var U=he.findCanvasItemViewModels(r.visualContainerGroups,o),H=k.find(a.name,r.visualContainerGroups);if(r.visualContainerGroups=k.move(U,H,r.visualContainerGroups,c),he.syncCanvasItemViewModelsWithContracts(r.visualContainerGroups,r.contract.visualContainerGroups),B){if(a.parentGroup){var oe=k.find(a.parentGroup.name,r.contract.visualContainerGroups);oe?ye.selectCanvasItem(oe,this.selectionService):this.selectionService.clearSelection()}}else ye.selectCanvasItem(o[0],this.selectionService);return U},ve.prototype.updateContainerListOrders=function(r,o,a){for(var c=this.formFactorProvider.getCurrentLayout(),B=[],U=[],H=0,oe=r;H<oe.length;H++){var te=oe[H],_e=o[te.name];null!=_e&&(_e=Math.floor(_e))!==te.layouts.withId(c).position[a]&&("z"===a?this.setZIndex(te,_e):this.setTabOrder(te,_e),powerbi.explore.contracts.isVisualContainer(te)?B.push(te):U.push(te))}_.isEmpty(B)||this.notifyVisualContainers(B),_.isEmpty(U)||this.notifyVisualContainerGroups(U)},ve.prototype.createVisualFilters=function(r,o,a,c){for(var B=Oe.ViewModelFactory.createVisualFilters(r,o,c,this.displayNameService,this.visualPluginService,this.pluginOps,this.filterGenerator,this.aggrOps,this.localizationService),U=0,H=B;U<H.length;U++){var oe=H[U];oe.updateFilterProperties(c,this.visualPluginService,this.aggrOps),oe.canVisualize()&&(oe.isInvalid()||this.createFilterVisualContainerConfig(oe.contract,a,c,!1))}return B},ve.prototype.moveFilter=function(r,o,a,c){var B=G.getFiltersContainer(o,this.selectionService,this.explorationNavigationService);return this.setFilterSortType(r,o,3),!(B&&B.filters&&null!=B.filters[c]||(this.moveFilterContainer(B.filters,c,a),0))},ve.prototype.setFilterSortType=function(r,o,a){var c=G.getFiltersContainer(o,this.selectionService,this.explorationNavigationService);return c.filterSortOrder!==a&&(this.telemetry.logEvent(De.EXToggleFilterCardSort,{sortType:powerbi.explore.util.getTelemetryFilterCardSortType(a)}),3===a?(this.sortFiltersByCurrentSortType(r,c,o),this.updateFilterOrdinal(c.filters)):c.filters&&c.filters.forEach(function(U){null!=U&&(U.ordinal=void 0)}),c.filterSortOrder=a),!0},ve.prototype.sortFiltersByCurrentSortType=function(r,o,a){var c=this;void 0===o.filterSortOrder&&(o.filterSortOrder=1);var B=o.filters.filter(function(te){return G.getFilterCapabilities(te).canSort}),U=o.filters.filter(function(te){return!G.getFilterCapabilities(te).canSort});if(1===o.filterSortOrder||2===o.filterSortOrder){var H=ye.getSelectedVisual(this.selectionService),oe=je.getVisualCapabilities(H,this.visualPluginService);B.sort(function(te,_e){var de=te.displayName||c.getDisplayName(te,r,oe,a,H&&H.config.singleVisual)||"",Ee=_e.displayName||c.getDisplayName(_e,r,oe,a,H&&H.config.singleVisual)||"";return de.localeCompare(Ee)}),2===o.filterSortOrder&&B.reverse()}else 3===o.filterSortOrder&&B.sort(function(te,_e){return te.ordinal-_e.ordinal});o.filters=B.concat(U)},ve.prototype.moveFilterContainer=function(r,o,a){o<a&&(a-=1);var c=r[o];r.splice(o,1),r.splice(a,0,c),this.updateFilterOrdinal(r)},ve.prototype.updateFilterOrdinal=function(r){r.forEach(function(o,a){null!=o&&(o.ordinal=a,null==o.name&&(o.name=G.getNextFilterName(r)))})},ve.prototype.getDisplayName=function(r,o,a,c,B){var U;if(r.type===ie.Include||r.type===ie.Exclude){var H=new powerbi.explore.services.IncludeExcludeSQExprVisitor(o,this.displayNameService);U=G.getDisplayNameForIncludeExcludeFilters(this.localizationService,r.type,H.dataPoints.length)}else if(r.type===ie.Passthrough)U=r.restatement;else{var oe=r.expression&&Pe.asFieldPattern(r.expression),_e=void 0,de=void 0;r.expression&&B&&(_e=B.query&&B.query.defn.selectNameOf(r.expression),de=B.columnProperties),U=this.displayNameService.getDisplayName(r.expression,o,a,_e,0===c?de:void 0,{includeVariationSource:!0})||(oe?J.getFieldExprName(oe):void 0)}return U},ve.prototype.addFilter=function(r,o,a,c,B,U){var H=ye.getSelectedVisual(this.selectionService);if(G.canAdd(H,o,r,a,B,this.pluginOps)){this.core.ensureFiltersArrayIsValid(a.container.filters);var Ee,oe=B?5:1,te=G.getDefaultFilterType(o,r,oe),_e={name:G.getNextFilterName(a.container.filters),expression:o,type:te,howCreated:oe},de=_.isEmpty(G.validate(_e,r,this.aggrOps));if(_e.expanded=G.canExpandManually(oe,!1,o,de,te),powerbi.data.SQExprUtils.isMeasure(o)||this.createFilterVisualContainerConfig(_e,c,r),G.add(a.container,_e),3===a.container.filterSortOrder&&this.moveFilterContainer(a.container.filters,a.container.filters.length-1,U),this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(Ee=G.createChangeFilterActivity(this.contextActivityService,"Add Filter")),G.notifyFilterContainerChangedByUser(this.eventBridge,{filter:_e,changeType:1,scope:a,changeFilterActivity:Ee}),Ee&&Ee.resolve(),B){powerbi.explore.util.logDrillthroughFilterUpdateTelemetry(this.telemetry,"Add",a.container,void 0);var Se=this.explorationNavigationService.getCurrentExploration(),Re=a.container;if(null!=Se&&null!=Re){var $e=G.determineIsLinkedAsAggregation(_e,r,this.aggrOps),Ye={filterName:_e.name,type:0,isCausedByCode:!1,fieldExpr:_e.expression,asAggregation:$e,isLegacySingleSelection:!1};z.addParameter(Se,Re.name,_e.name,_e.expression,Ye.asAggregation,!1,z.determineType(Re,this.featureSwitchService.featureSwitches.onObject)),this.eventBridge.publishToChannel(Me.podParameterChanged,Ye)}}else Ze.isMeasure(o)&&this.telemetry.logEvent(De.EXAddFilter,{filterType:powerbi.explore.util.getTelemetryFilterType(te),filterScopeType:powerbi.explore.util.getTelemetryFilterScopeType(a.scopeType),fieldKind:j(o),drillToDetailsMode:je.hasGroupByItemsInQuery(H),viewMode:powerbi.explore.util.getTelemetryViewMode(this.viewModeState.getMode())});return _e.name}},ve.prototype.addFilterContainers=function(r,o){this.core.ensureFiltersArrayIsValid(r);for(var a=0,c=r;a<c.length;a++){var B=c[a];G.add(o.container,B);var U=void 0;this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(U=G.createChangeFilterActivity(this.contextActivityService,"Add Filter")),G.notifyFilterContainerChangedByUser(this.eventBridge,{filter:B,changeType:1,scope:o,changeFilterActivity:U}),U&&U.resolve()}},ve.prototype.removeFilter=function(r,o,a,c){return this.removeFilterImpl(r,o,a,c)},ve.prototype.toggleSlicerVisualSearch=function(r,o,a){var c=powerbi.explore.util.VisualContainerUtils.getVisualCapabilities(r,a),B=this.filterGenerator.tryGetSelfFilterEnabledProperty(c);if(!B)return!1;var U=r.config.singleVisual;U.objects||(U.objects={});var H=powerbi.data.DataViewObjectDefinitions.getValue(U.objects,B,null);if(H&&H.value){powerbi.data.DataViewObjectDefinitions.deleteProperty(U.objects,B.objectName,null,B.propertyName);var te=o.tryGetSelfFilterProperty(c);te&&powerbi.data.DataViewObjectDefinitions.deleteProperty(U.objects,te.objectName,null,te.propertyName)}else powerbi.data.DataViewObjectDefinitions.setValue(U.objects,B,null,powerbi.data.SQExprBuilder.boolean(!0));return!0},ve.prototype.assignSyncGroup=function(r,o){r.config.singleVisual.syncGroup=(0,e.pi)({},o),r.config.singleVisual.conversionSourceContext=void 0},ve.prototype.clearSyncGroup=function(r){r.config.singleVisual.syncGroup=void 0,r.config.singleVisual.conversionSourceContext=void 0},ve.prototype.enableSearchInFilterCard=function(r,o){var c=this.filterGenerator.tryGetSelfFilterEnabledProperty(R.slicer.capabilities),B=powerbi.visuals.visualStyles.create().colorPalette,U=powerbi.visuals.slicerProps.searchBox,H=this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign,oe=H?ce.FilterCardSearchBoxBorderColor:B.foregroundNeutralDark.value,te=H?ce.FilterCardSearchBoxBackgroundColor:B.foregroundNeutralSecondary.value;this.ensureObjectDefinitionProperty(r,o,c,null,powerbi.data.SQExprBuilder.boolean(!0)),this.ensureObjectDefinitionProperty(r,o,U.borderColor,null,{solid:{color:powerbi.data.SQExprBuilder.text(oe)}}),this.featureSwitches.outlineDropdownToCheckboxes?this.ensureObjectDefinitionProperty(r,o,U.outlineStyle,null,powerbi.data.SQExprBuilder.integer(0)):this.ensureObjectDefinitionProperty(r,o,U.outline,null,powerbi.data.SQExprBuilder.text(powerbi.visuals.outline.none)),this.ensureObjectDefinitionProperty(r,o,U.background,null,{solid:{color:powerbi.data.SQExprBuilder.text(te)}})},ve.prototype.createFilterVisualContainerConfig=function(r,o,a,c){var B;void 0===c&&(c=!0);var U=r.expression;if(!Y.isTransformOutputRoleRef(U)){var H=Ze.discourageAggregation(U,a),oe=Pe.asFieldPattern(U),te=oe.column||oe.groupingColumn||oe.hierarchyLevel,_e={expr:U,dataSources:o,allowAggregate:!1,visualType:powerbi.visuals.plugins.filterSlicer.name,inFilterVisualContainer:!0};if(!Ze.isMeasure(U)){var de=c?null===(B=r.config)||void 0===B?void 0:B.singleVisual.objects:void 0,Ee=this.createVisualContainerConfigCore(_e,a);if(Ee){var we=Ee.singleVisual.objects;we||(Ee.singleVisual.objects=we={});var Re=5===r.howCreated&&!r.isTransient,$e=!Re,Ye=powerbi.visuals.slicerProps.selection.selectAllCheckboxEnabled,et=powerbi.visuals.slicerProps.selection.singleSelect,at=powerbi.visuals.slicerProps.header.show,nt=powerbi.visuals.slicerProps.data.mode,pt=powerbi.visuals.slicerProps.general.filter,ct=powerbi.visuals.slicerProps.data.isInvertedSelectionMode;this.ensureObjectDefinitionProperty(we,de,nt,null,ue.text(powerbi.visuals.slicerMode.basic)),this.ensureObjectDefinitionProperty(we,de,Ye,null,ue.boolean($e)),this.ensureObjectDefinitionProperty(we,de,et,null,ue.boolean(Re)),this.ensureObjectDefinitionProperty(we,de,at,null,ue.boolean(!1)),this.enableSearchInFilterCard(we,de);var ft=this.featureSwitchService.featureSwitches.paneColorRefresh||this.explorationCapabilities.getCapabilities().showFluentDesign,Mt=powerbi.visuals.visualStyles.create().colorPalette,bt=powerbi.visuals.slicerProps.items.textSize,tt=powerbi.visuals.slicerProps.items.fontColor,Et=ft?ce.FilterCardFontColor:Mt.foregroundLight.value;if(this.ensureObjectDefinitionProperty(we,de,bt,null,ue.integer(Fe.smallFontSizeInPoint)),this.ensureObjectDefinitionProperty(we,de,tt,null,{solid:{color:powerbi.data.SQExprBuilder.text(Et)}}),!H&&te){var Ft=ue.entity(te.schema,te.entity,te.entityVar),Tt=ue.aggregate(Ft,2),Bt=powerbi.visuals.slicerProps.general.count,Ut=Ee.singleVisual.query.getRoleNameForExpr(U),Rt={data:[pe.fromRoles([Ut])]};this.ensureObjectDefinitionProperty(we,de,Bt,Rt,Tt)}var Gt=0===r.howCreated&&!Le.isDefaultFilter(r.filter);if(this.core.ensureDefaultFilterApplied(a,Ee.singleVisual,Gt)&&null==r.filter){var Qt=oe.column||oe.groupingColumn?U.getKeyColumns(a):[U];r.filter=Le.getDefaultValueFilter(Qt)}r.filter&&this.ensureObjectDefinitionProperty(we,de,pt,null,r.filter);var Nt=ae.getValue(r.objects,{objectName:"general",propertyName:"isInvertedSelectionMode"},void 0);null!=Nt&&this.ensureObjectDefinitionProperty(we,de,ct,null,Nt),r.config=Ee}}}},ve.prototype.ensureObjectDefinitionProperty=function(r,o,a,c,B){var U=o?ae.getValue(o,a,c):void 0;ae.setValue(r,a,c,U||B)},ve.prototype.notifyVisualContainers=function(r,o,a,c,B,U){var H=this;void 0===o&&(o="UserAction_EditVisual");var oe=this.explorationNavigationService.getCurrentSection(),te=_.map(r,function(_e){return a?je.filterAffects(_e,oe,H.visualRelationshipService,c):je.contractEqualityComparator(_e)});this.eventBridge.publishToChannel(Me.visualContainerChanged,{affectContainer:function(de){return _.some(te,function(Ee){return Ee(de)})},sourceLabelKey:o,visualContainerChangeType:B,fieldSource:U})},ve.prototype.notifyVisualContainerGroups=function(r){this.eventBridge.publishToChannel(Me.visualContainerGroupChanged,{affectContainer:function(a){return _.includes(r,a)}})},ve.prototype.convert=function(r,o,a,c,B,U,H,oe){var te=je.getVisualType(o),_e=!!je.isVisualTypeAutoSelect(o),de=null==a;o.config.singleVisual.autoSelectVisualType=de;var we,Se,Ee=this.telemetry.startEvent(De.EXInteractionVisualConversion,{sourceVisualType:te,targetVisualType:a,visualName:o.name});if(we=this.contextActivityService.createActivity(_e&&te===a||!_e&&de?{name:"ChangeAutoVisual",visualName:o.name,data:{initialAutoVisualValue:_e}}:{name:"ChangeVisualType",visualName:o.name,data:{targetVisualType:a,sourceVisualType:te}}),_e&&de||!_e&&!de&&te===a)return Ee.resolve(),we.resolve(),!1;if(_e&&!de&&te===a)return o.config.singleVisual.autoSelectVisualType=void 0,Ee.resolve(),we.resolve(),this.eventBridge.publishToChannel(Me.visualTypeChanged,{changedItems:[o]}),!0;U&&(o.postProcessing=U({outputVisualContainer:o,selectedVisualContainers:B})),this.visualAuthoringCustomizeOperations.requiresCustomizeConvert(o)&&this.visualAuthoringCustomizeOperations.customizeConvert(o),null!=a&&(Se=this.customizeConvertTo(o,a));var Re=o.config.singleVisual.query;if(!de){var $e=this.visualPluginService.capabilities(a);Re&&_.isEmpty($e.dataRoles)&&(o.config.singleVisual.query=void 0,Re=void 0)}if(Re){if(!de&&!H){this.resetSearchProperties(o);var Ye=powerbi.explore.contracts.SingleVisualConfig.clone(o.config.singleVisual),et=this.core.convert({schema:r,source:Ye,target:a,skipRoleMapping:null==Se?void 0:Se.skipRoleMapping});if(!et)return we.reject(),Ee.reject();o.config.singleVisual=Ye,this.core.ensureFiltersArrayIsValid(o.filters),Ee.resolve(),we.resolve();var at=this.visualPluginService.capabilities(te),nt=this.filterGenerator.tryGetFilterPropertyIdentifier(at);if(!nt){var pt=this.visualPluginService.capabilities(a);nt=this.filterGenerator.tryGetFilterPropertyIdentifier(pt)}this.core.ensureValidDrillMode(o,this.drill),this.ensurePercentRoleTotal(o,a),this.updateFilterState(r,o,!1,!0,!0,nt);var ct=o.filters;return _.isEmpty(ct)||G.supportsVisualFilters(o,this.pluginOps)||(o.filters=[]),this.removeUnsupportedDataBoundProperties(o,a),this.core.setDefaultSort(o,r,this.sortService,this.visualPluginService),_.remove(ct,function(Mt){return null==Mt||0===Mt.howCreated&&void 0===Mt.filter}),o.config.singleVisual.autoSelectVisualType=void 0,this.eventBridge.publishToChannel(Me.visualTypeChanged,{changedItems:[o]}),et}null!=(a=null==c?void 0:c.updateWithRecommendation(o,H?{visualType:a}:void 0,r))&&(o.config.singleVisual.autoSelectVisualType=!0)}else de&&(a=te,o.config.singleVisual.autoSelectVisualType=!0);return o.config.singleVisual.visualType=a,Ee.resolve(),we.resolve(),this.notifyVisualContainers([o]),this.eventBridge.publishToChannel(Me.visualTypeChanged,{changedItems:[o]}),!0},ve.prototype.setOrderBy=function(r,o){var a=r.config.singleVisual;a.query.orderBy(o),a.hasDefaultSort=_.isEmpty(o),this.notifyVisualContainers([r],"UserAction_Sorting")},ve.prototype.removeOrderBy=function(r,o,a){for(var c=0,B=o;c<B.length;c++)r.config.singleVisual.query.removeOrderBy(B[c]);this.core.setDefaultSort(r,a,this.sortService,this.visualPluginService),this.notifyVisualContainers([r])},ve.prototype.deleteVisualRelationships=function(r,o){_.remove(r.relationships,function(a){return a.source===o||a.target===o})},ve.prototype.addProperty=function(r,o,a,c){var B=r.config.singleVisual,U=B.objects;U||(B.objects=U={}),ae.setValue(U,o,a,c)},ve.prototype.removeProperty=function(r,o,a){ae.deleteProperty(r.config.singleVisual.objects,o.objectName,a,o.propertyName)>1&&this.telemetry.logEvent(De.EXDefnsDuplicateSelector)},ve.prototype.setVisibility=function(r,o,a){if(Be.setHidden(r.config.singleVisual,o),o){var B=this.explorationNavigationService.getCurrentSection();this.filterGenerator.clearCrossHighlightForVisualContainers(B,[r]),a||ye.unselectCanvasItem(r,this.selectionService)}},ve.prototype.clearCrossHighlightsForGroup=function(r,o,a){var B,c=[];return powerbi.explore.contracts.traverseVisualContainerGroups([r],function(H){powerbi.explore.contracts.isVisualContainer(H)&&_.some(a,function(oe){return oe.sourceVisualContainer===H})&&c.push(H)}),_.isEmpty(c)||(this.filterGenerator.clearCrossHighlightForVisualContainers(o,c),B=this.clearCrossHighlightsForVisuals(c,o)),B||[]},ve.prototype.ensureNativeReferenceName=function(r,o){var a=this,c=o.config.singleVisual,B=c.query;if(null!=B){var U=je.getVisualCapabilities(o,this.visualPluginService),H=_.partition(B.defn.select(),function(de){return null!=de.nativeReferenceName}),oe=H[0];if(!_.isEmpty(H[1])){var _e=Object.assign.apply(Object,(0,e.ev)([{}],oe.map(function(de){var Ee;return(Ee={})[de.nativeReferenceName]=!0,Ee}),!1));_.forEach(B.defn.select(),function(de,Ee){if(null==de.nativeReferenceName){var we=a.displayNameService.getDisplayName(de.expr,r,U,de.name,c.columnProperties,{includeVariationSource:!0,hierarchyNameDelimiter:" "}),Se=StringExtensions.findUniqueName(_e,we);_e[Se]=!0,B.setNativeReferenceNameAt(Ee,Se)}})}}},ve.prototype.clearCrossHighlightsForVisuals=function(r,o){var a=(0,e.ev)([],r||[],!0);return a.push.apply(a,this.filterGenerator.clearCrossHighlightForVisualContainersOperation(o,r)||[]),_.uniq(a)},ve.prototype.setVisualContainerGroupVisibility=function(r,o,a){if(qe.setHidden(r,o),o){var c=this.explorationNavigationService.getCurrentSection();this.clearCrossHighlightsForGroup(r,c,c&&c.crossFilterSource&&c.crossFilterSource.highlight)}a||ye.unselectCanvasItem(r,this.selectionService)},ve.prototype.setVisualContainerGroupDisplayName=function(r,o){qe.setDisplayName(r,o)},ve.prototype.setZIndex=function(r,o){var a=this.formFactorProvider.getCurrentLayout();r.layouts.withId(a).position.z=o},ve.prototype.setTabOrder=function(r,o){var a=this.formFactorProvider.getCurrentLayout();r.layouts.withId(a).position.tabOrder=o},ve.prototype.setVisualRelationship=function(r,o,a,c){if(o!==a){r.relationships=r.relationships||[];var B=this.visualRelationshipService.relationship(r,o,a);B?B.type=c:(_.includes(r.visualContainers,o),_.includes(r.visualContainers,a),r.relationships.push({source:o,target:a,type:c}))}},ve.prototype.persistProperties=function(r,o,a){var c=o.objects||{},B=this.visualPluginService.capabilities(o.visualType);return!!powerbi.explore.services.applyPropertyChanges(r,B?B.objects:void 0,c,a)&&(o.objects=c,o.autoSelectVisualType=void 0,!0)},ve.prototype.persistVCProperties=function(r,o){var a=o.vcObjects||{};return!!powerbi.explore.services.applyPropertyChanges(r,Be.CommonObjectDescriptors,a)&&(o.vcObjects=a,!0)},ve.prototype.removeUnsupportedDataBoundProperties=function(r,o){if(this.visualPluginService.isScriptVisual(o)||this.pluginOps.isAnalysisVisual(o)){var c=r.config.singleVisual.vcObjects;if(c){var B=r.config.singleVisual.query.defn.select(),U=[];_.forEach(c,function(H,oe){_.forEach(H[0].properties,function(_e,de){fe.getDataBoundExprs(_e,null,B).length>0&&U.push(function(){ae.deleteProperty(c,oe,null,de)})})}),_.forEach(U,function(H){H()})}}},ve.prototype.ensurePercentRoleTotal=function(r,o){if(!this.visualPluginService.capabilities(o).dataRoleTotals){var c=new ke,B=new powerbi.explore.schemaRewriterUtils.VisualQueryExprRewriter(c),U=new powerbi.explore.util.VisualContainerRewriter([B]);powerbi.explore.util.traverseVisualContainer(r,U,this.visualPluginService)}},ve.prototype.getVisualDataRole=function(r,o){var a=je.getDataRolesForVisual(r,this.visualPluginService);if(!_.isEmpty(a))return Ce.findItemWithName(a,o)},ve.prototype.removeFieldImpl=function(r,o,a,c,B,U){return this.invokeRemoveOnSelectedVisuals({expr:r,ignoreAggregates:!0,fieldParameter:U,shouldRemoveParameter:!0},o,a,c,[B])},ve.prototype.removeFilterImpl=function(r,o,a,c){if(!o||!o.container||!o.container.filters)return!1;for(var B={filter:r,changeType:0,scope:o,parentActivity:a,changeFilterActivity:c},U=0;U<o.container.filters.length;U++)if(o.container.filters[U]===r){if(o.container.filters.splice(U,1),3===o.container.filterSortOrder&&this.updateFilterOrdinal(o.container.filters),G.notifyFilterContainerChangedByUser(this.eventBridge,B),5===r.howCreated&&!r.isTransient&&1===o.scopeType||z.isPodEnabled(r,o)){var oe=this.explorationNavigationService.getCurrentExploration(),te=o.container;null!=oe&&null!=te&&(z.deleteParameter(oe,te.name,r.name,this.linguisticSchemaProxy),this.eventBridge.publishToChannel(Me.podParameterChanged,{filterName:r.name,type:1}))}return!0}return!1},ve.prototype.removeFiltersWithExpr=function(r,o){var a=o.filters;if(!a)return!1;for(var c,B=a.length-1;B>=0;B--){var U=a[B];Y.equals(U.expression,r)&&(c=this.removeFilterImpl(U,{scopeType:0,container:o},void 0,void 0))}return c},ve.prototype.invokeRemoveOnSelectedVisuals=function(r,o,a,c,B){for(var U=!1,H=[],oe=o.length-1;oe>-1;oe--){var te=o[oe],de=te.config.singleVisual.query;if(de){var Ee=this.contextActivityService.createActivity({name:"UpdateField",visualName:te.name,data:{fieldKinds:B,operationType:"Remove",source:Ue(r)?"FieldList":"FieldWell"}});this.checkSparklineRemovedAndLog(de,r,a);var we=ge.getDrillFilterRemovalInfoList(de,r,0),Se=this.core.getRemoveOptionsQueryRefs(r,de),$e=this.core.removeWithValidation(de,Se,[r],te,a,we,this.drill,this.sortService,this.updateFilterState).removeSuccessCount>0;U=U||$e,$e&&(H.push(te),this.isVisualRecommendationAllowed(te)&&(null==c||c.updateWithRecommendation(te,void 0,a))),U?Ee.resolve():Ee.reject()}}return _.isEmpty(H)||this.notifyVisualContainers(H),U},ve.prototype.buildVisualContainerFromConfig=function(r,o,a){return this.core.ensureFiltersArrayIsValid(a),{name:r,config:o,filters:a||[]}},ve.prototype.createVisualFromConfig=function(r,o,a,c,B){void 0===B&&(B=!0),o=this.applyConfigOptions(r,o);var U=this.formFactorProvider.getCurrentLayout(),H=_.flatMap(r.sections,function(at){return at.visualContainerGroups}),oe=je.uniqueName(H),te=this.buildVisualContainerFromConfig(oe,o,a);te.layouts=jsCommon.ArrayExtensions.extendWithId([{id:U,position:r.position}]);var _e=this.explorationNavigationService.getCurrentExploration();_e.defaultDrillFilterOtherVisuals&&(te.drillFilterOtherVisuals=!0);var de=r.exploreCanvas,Ee=de.contract,we=ye.getSelectedCanvasItems(this.selectionService),Se=we&&we[0],Re=we&&1===we.length&&powerbi.explore.contracts.isVisualContainerGroup(Se);r.postProcessing&&(te.postProcessing=r.postProcessing({outputVisualContainer:te,selectedVisualContainers:r.selectedVisualContainers||Ee.visualContainers})),Ee.visualContainers.push(te),Ee.visualContainerGroups=Re&&powerbi.explore.contracts.isVisualContainerGroup(Se)?k.addToGroup(te,Se,Ee.visualContainerGroups):k.add(Ee.visualContainerGroups,te),B&&this.eventBridge.publishToChannel(Me.visualContainerAdded,{visualName:te.name});var $e=Oe.ViewModelFactory.convertVisualContainer(_e,Ee,te,U);if($e){if(de.visualContainers.push($e),Re){var Ye=k.find(Se.name,de.visualContainerGroups);Oe.isVisualContainerGroup(Ye)&&(de.visualContainerGroups=k.addToGroup($e,Ye,de.visualContainerGroups)),he.syncCanvasItemViewModelsWithContracts(de.visualContainerGroups,Ee.visualContainerGroups);var et=k.find(Se.name,de.visualContainerGroups);Oe.isVisualContainerGroup(et)&&this.layoutAuthoring.addCanvasItemToGroup(et,$e,!0)}else de.visualContainerGroups=k.add(de.visualContainerGroups,$e);return!1!==r.select&&ye.selectCanvasItem(te,this.selectionService,0,!0),this.telemetry.logEvent(De.EXCreateVisual,{source:c,visualType:je.getVisualType(te),visualName:te.name}),te}},ve.prototype.createExprWithAggregate=function(r,o,a,c){if(Ze.discourageAggregation(r,o))return r;var B=this.getPreferredAggregate(o,r,c);return this.aggrOps.createExprWithAggregate(r,o,a,c?c.requiredTypes:null,B)},ve.getPositionForAddedVisual=function(r,o,a){var c=r.contract,B=c.visualContainerGroups;if(!a)return ve.getDefaultVisualContainerPosition(B,o,c);if(null!=a.z)return a;var U=_.cloneDeep(a);return U.z=he.getZIndexForNewCanvasItem(B,o),U},ve.getDefaultVisualContainerPosition=function(r,o,a){return{height:0,width:0,x:0,y:0,z:he.getZIndexForNewCanvasItem(r,o),tabOrder:he.getTabOrderForNewVisual(a,!0,o)}},ve.prototype.shouldPreferGroupToAggregate=function(r,o,a,c,B){if(c){var U=B||this.findCompatibleRole(r,c,o,!1);if(U&&U.kind===st.GroupingOrMeasure&&1===U.kindPreference)return!0}if(B&&B.kind===st.GroupingOrMeasure){var H=this.isRoleOrExprLatLong(r,o,B);if(H){if(!c)return!0;var oe=je.getVisualQuery(c);if(oe&&oe.projections){var te=this.visualPluginService.capabilities(c.config.singleVisual.visualType),_e=powerbi.visualCapabilitiesHelperModuleFactory().create(te,this.geotaggingAnalyzerService),de=void 0;H&&(de=_e.getNonLatLongRoles());for(var Ee=0,we=de;Ee<we.length;Ee++)if(oe.projections[we[Ee]])return!1}}else{if(!Ze.isExprValidForAggregation(o)||a)return!0;var Re=o.getMetadata(r);if(We.isNumericMeasure(o,Re,r))return 1===(null==Re?void 0:Re.defaultAggregate)}}return!B&&1===(null==(Re=o.getMetadata(r))?void 0:Re.defaultAggregate)||B&&B.kind!==st.Measure},ve.prototype.getPreferredAggregate=function(r,o,a){if(this.isRoleOrExprLatLong(r,o,a))return 1},ve.prototype.isRoleOrExprLatLong=function(r,o,a){var c=powerbi.visualCapabilitiesHelperModuleFactory().isValueTypeDescriptorLatLong;if(a){var B=a.preferredTypes;if(c(_.isEmpty(B)?void 0:B[0]))return!0}var H=o.getMetadata(r);return!!c(H?H.type:void 0)},ve.prototype.canHierarchyLevelJoinExistingGroup=function(r,o,a,c,B){var U=o&&o.projections[a];if(Y.isHierarchyLevel(c)&&U&&U.all().length>0){var H=c,oe=U.all(),te=ot.expandExpr(r,H.arg),_e=_.isNumber(B)?B-1:oe.length-1;if(_e>=0&&ot.areHierarchyLevelsOrdered(te,o.tryGetExpr(a,_e),H)||_.isNumber(B)&&B<oe.length&&ot.areHierarchyLevelsOrdered(te,H,o.tryGetExpr(a,B)))return!0}return!1},ve.prototype.addHierarchyLevelToExistingHierarchiesInVisual=function(r){var c=r.visualContainer,B=r.hideOnOverflow,H=!1,oe=F.getOptionsToAddHierarchyLevelToExistingHierarchies(r.schema,r.capabilities,c.config.singleVisual.query,r.expr);if(oe)for(var te=0,_e=oe;te<_e.length;te++){var de=_e[te];de.hideOnOverflow=B,H=this.core.add(de,c.config,!1)||H}return H},ve.prototype.resetSearchProperties=function(r){var o=je.getObjectDefinitions(r);if(o){var a=je.getVisualCapabilities(r,this.visualPluginService),c=this.filterGenerator.tryGetSelfFilterEnabledProperty(a);c&&ae.deleteProperty(o,c.objectName,null,c.propertyName);var B=this.filterGenerator.tryGetSelfFilterProperty(a);B&&ae.deleteProperty(o,B.objectName,null,B.propertyName)}},ve.prototype.logReportMeasureMoveTelemetry=function(r,o,a,c,B){if(a!==c){var U=B&&B.getTargetEntity();if(U&&U.schema===Fe.ExplorationSchemaName){var H=B.getConceptualProperty(r);if(H){var oe=this.getVisualDataRole(o,a),te=this.getVisualDataRole(o,c),_e=JSON.stringify(oe.requiredTypes),de=JSON.stringify(te.requiredTypes);_e!==de&&this.telemetry.logEvent(De.EXReportMeasureMoveRoleKind,{dataType:Q[H.type.primitiveType],sourceTypes:_e,targetTypes:de})}}}},ve.prototype.setVisualDrillFilterOtherVisualsSetting=function(r,o){r.drillFilterOtherVisuals!==o&&(r.drillFilterOtherVisuals=o,this.eventBridge.publishToChannel(Me.visualDrillFilterOtherVisualsSettingChanged,{visualContainer:r,on:o}))},ve.prototype.customizeConvertTo=function(r,o){var a=r.config.singleVisual,c=this.visualPluginService.getCustomizeConvertTo(a.visualType,o,this.featureSwitchService.featureSwitches);if(c&&c.objects){a.objects||(a.objects={});var B=a.objects,U=a.mobileObjects,H=this.visualPluginService.capabilities(a.visualType),oe=this.visualPluginService.capabilities(o);for(var te in c.objects){var _e=c.objects[te],de=oe.objects[te];for(var Ee in"CustomizeConvert: There exists no property ".concat(te),_e){var we=_e[Ee],Se=de.properties[Ee];"CustomizeConvert: There exists no property ".concat(te," ").concat(Ee);var Re=Se.type;this.customizeConvertProperty(B,H,we,Re,{objectName:te,propertyName:Ee}),U&&this.customizeConvertProperty(U,H,we,Re,{objectName:te,propertyName:Ee})}}return c}},ve.prototype.customizeConvertProperty=function(r,o,a,c,B){var U,H=[];if(a.transformArgs)for(var oe=0,te=a.transformArgs;oe<te.length;oe++){var _e=te[oe],de=_e.identifier,Ee=de.objectName,we=de.propertyName,Se=this.getVisualObjectPropertyDefinition(r,_e.identifier,_e.selector),Re=o.objects[Ee].properties[we].type,Ye=void 0;Re.fill&&Re.fill.solid?Ye=Se&&Se.solid&&Se.solid.color:Se instanceof Y?Ye=Se:null==Se||"CustomizeConvert: no implementation for unwrapping arg type, ".concat(Ee," ").concat(we),H.push(Ye)}var bt,at=B.objectName,nt=B.propertyName,ct=(a.transform||_.identity).apply(void 0,H),ft=c;ct?c.fill&&c.fill.solid?(!Y.isConstantText(ct)&&Y.isThemeDataColor(ct),U={solid:{color:ct}}):ft.bool||ft.numeric||ft.integer||ft.text||ft.enumeration||ft.formatting?U=ct:"CustomizeConvert: no implementation for wrapping target type,\n                ".concat(at," ").concat(nt):U=void 0,void 0!==U?(bt=this.getOrCreateDataViewObjectDefinition(r,B,a.targetSelector)).properties[nt]=U:(bt=this.getDataViewObjectDefinition(r[at],a.targetSelector))&&bt.properties[nt]&&delete bt.properties[nt]},ve.prototype.getVisualObjectPropertyDefinition=function(r,o,a){var B=o.propertyName,H=this.getDataViewObjectDefinition(r[o.objectName]||[],a);return H&&H.properties[B]},ve.prototype.getOrCreateDataViewObjectDefinition=function(r,o,a){var c=o.objectName,B=r[c]=r[c]||[],U=this.getDataViewObjectDefinition(B,a);return U||r[c].push(U=void 0!==a?{properties:{},selector:a}:{properties:{}}),U},ve.prototype.getDataViewObjectDefinition=function(r,o){return _.find(r,function(c){return null==c.selector&&null==o||c.selector&&o&&c.selector.id===o.id})},ve.prototype.checkSparklineRemovedAndLog=function(r,o,a){var c,B;if(o.expr)B=jsCommon.ArrayExtensions.ensureArray(o.expr);else{var H=o;if(H.role&&null!=H.projOptions.fieldIndex){var oe=r.tryGetExprs(H.role);_.isEmpty(oe)||(B=oe.slice(H.projOptions.fieldIndex,H.projOptions.fieldIndex+(null!==(c=H.count)&&void 0!==c?c:1)))}}if(!_.isEmpty(B))for(var te=0,_e=B;te<_e.length;te++){var de=_e[te];Y.isSparklineData(de)&&this.logSparklineEvent(de,a)}},ve.prototype.logSparklineEvent=function(r,o){var a=be.getFieldCharacteristics(r,o);this.telemetry.logEvent(De.SparklinesDelete,{groupingType:a.groupingType,measureType:a.measureType})},ve.prototype.isVisualRecommendationAllowed=function(r){return this.featureSwitchService.featureSwitches.onObject&&je.isVisualTypeAutoSelect(r)},ve.\u0275fac=function(o){return new(o||ve)(i.\u0275\u0275inject(O.D),i.\u0275\u0275inject(T.f),i.\u0275\u0275inject(V.O),i.\u0275\u0275inject(D.r),i.\u0275\u0275inject(m.y0),i.\u0275\u0275inject(h.z),i.\u0275\u0275inject(M.z),i.\u0275\u0275inject(I.q),i.\u0275\u0275inject(b.L),i.\u0275\u0275inject(P.J),i.\u0275\u0275inject(v.vZ),i.\u0275\u0275inject(g.K),i.\u0275\u0275inject(u.s),i.\u0275\u0275inject(s.s),i.\u0275\u0275inject(p.v),i.\u0275\u0275inject(C.r),i.\u0275\u0275inject(l.C),i.\u0275\u0275inject(A.j),i.\u0275\u0275inject(y.F),i.\u0275\u0275inject(d.o),i.\u0275\u0275inject(w.kc),i.\u0275\u0275inject(x.U),i.\u0275\u0275inject(N.U),i.\u0275\u0275inject(S.s),i.\u0275\u0275inject(L.Q),i.\u0275\u0275inject(X.g),i.\u0275\u0275inject(n.e,8))},ve.\u0275prov=i.\u0275\u0275defineInjectable({token:ve,factory:ve.\u0275fac}),ve}(),ke=function(ve){function r(){return null!==ve&&ve.apply(this,arguments)||this}return(0,e.ZT)(r,ve),r.prototype.visitScopedEval=function(o){return new lt(o.expression,[])},r}(powerbi.data.SQExprRewriter),We=function(){function ve(){}return ve.getVisualDefaultType=function(r,o,a,c){var B=r.getMetadata(o);if(B&&B.type.geography)return R.map.name;var U=Pe.asFieldPattern(r);if(a&&U){var H=U.column||U.groupingColumn,oe=H&&H.name,te=U.hierarchyLevel&&U.hierarchyLevel||U.columnHierarchyLevelVariation&&U.columnHierarchyLevelVariation.level;if(te){var _e=te.level;if(a.isGeographic(_e))return R.map.name;var de=ot.getConceptualHierarchyLevel(o,te.schema,te.entity,te.name,_e);oe=de&&de.column&&de.column.name}if(oe&&a.isGeographic(oe))return R.map.name}var Ee=U.column,we=Ee&&o.schema(Ee.schema).findProperty(Ee.entity,Ee.name).column;return Ze.getWhatIfParameterMetadata(we)&&1===we.defaultAggregate?R.slicer.name:ve.isNumericMeasure(r,B,o)&&1!==B.defaultAggregate?R.clusteredColumnChart.name:c&&c.pivotTableVisualEnabled?R.tableEx.name:R.table.name},ve.isNumericMeasure=function(r,o,a){return!!o&&(1===o.kind||o.type.numeric&&!Ze.discourageAggregation(r,a))},ve}();function Ue(ve){return null!=ve.expr}},5801:function(Ve,se,t){t.d(se,{$:function(){return ie}});var e=t(7005),n=t(33275),f=t(33015),i=t(35385),O=t(73637),T=t(56339),V=t(16660),h=t(93171),M=t(28252),I=t(33401),b=t(33892),P=t(23196),g=t(9161),u=t(32130),s=t(18766),p=t(33714),C=t(42),A=t(12029),S=t(71442),L=t(9020),D=t(67471),m=powerbi.visuals.ActionButtonType,v=powerbi.explore.contracts,l=powerbi.data,y=powerbi.data.DataViewObjectDefinitions,d=powerbi.explore.services.events,w=powerbi.explore.FilterUtils,x=powerbi.ItemGroupingManager,N=powerbi.visuals.plugins,X=powerbi.explore.PodUtils,ne=powerbi.explore.services.selectionUtils,Ce=powerbi.data.SemanticFilter,he=l.SQExpr,Fe=l.SQExprBuilder,fe=powerbi.telemetry,ae=powerbi.explore.util,pe=powerbi.explore.viewModels,ge=powerbi.explore.util.VisualContainerUtils,Me=powerbi.explore.contracts.VisualLink,ce={x:0,y:0,width:100,height:40};function J(G,j){return!!G&&!!j&&j.container===G&&0===j.scopeType}var ie=function(G){function j(F,E,k,R,z,Q,me,le,K,q,ye,Le,Ne,be,Y,ue,Pe){void 0===Pe&&(Pe=new f.I);var Ae=G.call(this)||this;return Ae.visualPluginService=F,Ae.conceptualSchemaProxy=E,Ae.contextActivityService=k,Ae.telemetryService=R,Ae.explorationNavigationService=z,Ae.selectionService=Q,Ae.eventBridge=me,Ae.undoRedoService=le,Ae.featureSwitchService=K,Ae.filterGenerator=q,Ae.viewModeState=ye,Ae.dataSource=Le,Ae.layoutAuthoring=Ne,Ae.visualAuthoringOperations=be,Ae.visualSyncService=Y,Ae.lazyScoped=ue,Ae.linguisticSchemaProxy=Pe,Ae.canvasItemAddedSubject=new n.xQ,Ae.canvasItemAdded$=Ae.canvasItemAddedSubject.asObservable(),Ae.canvasItemDeletedSubject=new n.xQ,Ae.canvasItemDeleted$=Ae.canvasItemDeletedSubject.asObservable(),Ae}return(0,e.ZT)(j,G),j.prototype.addFieldToVisual=function(F,E,k,R,z){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var Q,me=this;return(0,e.Jh)(this,function(le){switch(le.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return Q=le.sent(),[2,this.registerUndoableAction(E,function(K){return me.runVisualContainerUpdateAction(function(Le){return me.visualAuthoringOperations.addFieldToVisual(K,F,Le,Q,R,z)},[k])},"AddFieldToVisual")]}})})},j.prototype.toggleFieldHidden=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var z,Q,me=this;return(0,e.Jh)(this,function(le){switch(le.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return z=le.sent(),[4,this.getSchema(R)];case 2:return Q=le.sent(),[2,this.undoRedoService.register("HideField",function(){var K=me.visualAuthoringOperations.toggleFieldHidden(F,E,k,Q,z);return me.raiseVisualContainerChanged(k),K})]}})})},j.prototype.addFieldInRole=function(F,E,k,R,z,Q,me,le){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var K,q=this;return(0,e.Jh)(this,function(ye){switch(ye.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return K=ye.sent(),[2,this.registerUndoableAction(k,function(Le){return q.runVisualContainerUpdateAction(function(Y){return q.visualAuthoringOperations.addFieldInRole(Le,F,E,Y,z,Q,me,1,K,le)},[R])},"AddFieldInRole")]}})})},j.prototype.resolveParameters=function(F,E,k){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var R,le=this;return(0,e.Jh)(this,function(K){switch(K.label){case 0:return[4,this.getSchema(F)];case 1:return R=K.sent(),[2,this.runVisualContainerUpdateActionCustom(function(ye){return le.visualAuthoringOperations.resolveParameters(R,ye,k)},[E],{aliasChange:!1,queryChange:!1},function(ye){return ye.aliasChange||ye.queryChange})]}})})},j.prototype.updateVisualCalculation=function(F,E,k,R,z){var Q=this;return this.undoRedoService.register("UpdateVisualCalculation",function(){return Q.runVisualContainerUpdateAction(function(K){var q=Q.visualAuthoringOperations.updateVisualCalculation(K,E,k,R,z);return q&&Q.raiseVisualContainerChanged(K),q},[F])})},j.prototype.expandHierarchy=function(F,E,k,R,z){var Q=this;return this.registerUndoableAction(F,function(me){return Q.runVisualContainerUpdateAction(function(q){return Q.visualAuthoringOperations.expandHierarchy(me,q,k,R,z)},[E])},"ExpandHierarchy")},j.prototype.removeFieldFromAllRoles=function(F,E){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var k,R=this;return(0,e.Jh)(this,function(z){switch(z.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return k=z.sent(),[2,this.registerUndoableAction(F,function(Q){var le=ne.getSelectedVisualContainers(R.selectionService);return R.runVisualContainerUpdateAction(function(q){return R.visualAuthoringOperations.removeFieldFromAllRoles(E,Q,k,[q])},le)},"RemoveFieldFromAllRoles")]}})})},j.prototype.removeFieldFromRole=function(F,E){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var k,R=this;return(0,e.Jh)(this,function(z){switch(z.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return k=z.sent(),[2,this.undoRedoService.register("RemoveFieldFromRole",function(){var me=ne.getSelectedVisual(R.selectionService);return R.runVisualContainerUpdateAction(function(K){return R.visualAuthoringOperations.removeFieldFromRole(F,E,K,k)},[me])})]}})})},j.prototype.removeInvalidExpressions=function(F,E){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var k,R=this;return(0,e.Jh)(this,function(z){switch(z.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return k=z.sent(),[2,this.registerUndoableAction(E,function(Q){return R.visualAuthoringOperations.removeInvalidExpressions(Q,F,k)},"RemoveInvalidExpressions")]}})})},j.prototype.moveField=function(F,E,k,R,z,Q,me){var le=this;return this.registerUndoableAction(Q,function(K){var ye=ne.getSelectedVisual(le.selectionService);return le.runVisualContainerUpdateAction(function(Ne){return le.visualAuthoringOperations.moveField(K,F,E,k,R,z,Ne,me)},[ye])},"MoveField")},j.prototype.drillDownLevel=function(F,E,k){var R=this;this.undoRedoService.register("DrillDownLevel",function(){return R.visualAuthoringOperations.drillDownLevel(F,E,k)})},j.prototype.replaceField=function(F,E,k,R,z,Q){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var me,le=this;return(0,e.Jh)(this,function(K){switch(K.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return me=K.sent(),[2,this.registerUndoableAction(z,function(q){return le.runVisualContainerUpdateAction(function(Ne){return le.visualAuthoringOperations.replaceField(q,F,E,k,Ne,Q,me)},[R])},"ReplaceField")]}})})},j.prototype.drillDown=function(F,E,k,R){var z=this;return this.registerUndoableAction(k,function(Q){return z.visualAuthoringOperations.drillDown(Q,F,E,R)},"DrillDown")},j.prototype.drillUp=function(F,E){var k=this;this.undoRedoService.register("DrillUp",function(){return k.visualAuthoringOperations.drillUp(F,E)})},j.prototype.toggleDrillFilterOtherVisualsSetting=function(){var F=this,E=ne.getSelectedVisual(this.selectionService);if(E){var k=!E.drillFilterOtherVisuals;this.undoRedoService.register("SetDrillFilterOtherVisualsSetting",function(){return F.visualAuthoringOperations.setDrillFilterOtherVisualsSetting(k)})}},j.prototype.setDrillFilterOtherVisualsSetting=function(F){var E=this;this.undoRedoService.register("SetDrillFilterOtherVisualsSetting",function(){return E.visualAuthoringOperations.setDrillFilterOtherVisualsSetting(F)})},j.prototype.setAggregate=function(F,E,k,R,z){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var Q,me=this;return(0,e.Jh)(this,function(le){switch(le.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return Q=le.sent(),[2,this.registerUndoableAction(z,function(K){return me.visualAuthoringOperations.setAggregate(K,F,E,k,R,Q)},"SetAggregate")]}})})},j.prototype.removeAggregate=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var z,Q=this;return(0,e.Jh)(this,function(me){switch(me.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return z=me.sent(),[2,this.registerUndoableAction(R,function(le){return Q.visualAuthoringOperations.removeAggregate(le,F,E,k,z)},"RemoveAggregate")]}})})},j.prototype.setPercentOfGrandTotal=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var z;return(0,e.Jh)(this,function(Q){switch(Q.label){case 0:return[4,this.getSchema(R)];case 1:return z=Q.sent(),[2,this.visualAuthoringOperations.setPercentOfGrandTotal(z,F,E,k)]}})})},j.prototype.removePercentOfGrandTotal=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var z;return(0,e.Jh)(this,function(Q){switch(Q.label){case 0:return[4,this.getSchema(R)];case 1:return z=Q.sent(),[2,this.visualAuthoringOperations.removePercentOfGrandTotal(z,F,E,k)]}})})},j.prototype.setPercentOfRoleTotal=function(F,E,k,R,z){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var Q;return(0,e.Jh)(this,function(me){switch(me.label){case 0:return[4,this.getSchema(z)];case 1:return Q=me.sent(),[2,this.visualAuthoringOperations.setPercentOfRoleTotal(Q,F,E,k,R)]}})})},j.prototype.removePercentOfRoleTotal=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var z;return(0,e.Jh)(this,function(Q){switch(Q.label){case 0:return[4,this.getSchema(R)];case 1:return z=Q.sent(),[2,this.visualAuthoringOperations.removePercentOfRoleTotal(z,F,E,k)]}})})},j.prototype.toggleShowAll=function(F,E){var k=this;this.undoRedoService.register("ToggleShowAll",function(){k.visualAuthoringOperations.toggleShowAll(F,E)})},j.prototype.setVariation=function(F,E,k,R,z,Q){var me=this;return this.registerUndoableAction(F,function(le){return me.runVisualContainerUpdateAction(function(ye){return me.visualAuthoringOperations.setVariation(le,ye,k,R,z,Q)},[E])},"SetVariation")},j.prototype.createVisualContainerConfig=function(F){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var E,k;return(0,e.Jh)(this,function(R){switch(R.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return E=R.sent(),[4,this.conceptualSchemaProxy.get(F.dataSources)];case 2:return k=R.sent(),[2,this.visualAuthoringOperations.createVisualContainerConfig(k,F,E)]}})})},j.prototype.addVisualContainerImage=function(F,E,k,R,z,Q,me){var le=this;this.undoRedoService.register("AddVisualContainerImage",function(){le.visualAuthoringOperations.addVisualContainerImageFromData({sections:F,exploreCanvas:E,position:me},k,Q),le.publishVisualContainerAddedEvent()})},j.prototype.addVisualContainerBasicShapeVisual=function(F,E,k){var R=this;this.undoRedoService.register("AddVisualContainerBasicShape",function(){R.visualAuthoringOperations.addVisualContainerBasicShapeVisual({sections:F,exploreCanvas:E,position:void 0},k),R.publishVisualContainerAddedEvent()})},j.prototype.addVisualContainerShapeVisual=function(F,E,k){var R=this;this.undoRedoService.register("AddVisualContainerShape",function(){R.visualAuthoringOperations.addVisualContainerShapeVisual({sections:F,exploreCanvas:E,position:void 0},k),R.publishVisualContainerAddedEvent()})},j.prototype.addVisualContainerActionButtonVisual=function(F,E,k){var R=this;this.undoRedoService.register("AddVisualContainerActionButton",function(){R.visualAuthoringOperations.addVisualContainerActionButtonVisual({sections:F,exploreCanvas:E,position:ce},k),R.publishVisualContainerAddedEvent()})},j.prototype.addVisualContainerNavigatorVisual=function(F,E,k){var R=this;this.undoRedoService.register("addVisualContainerNavigatorVisual_"+k,function(){var z=R.getNavigatorWidth(k);R.visualAuthoringOperations.addVisualContainerNavigatorVisual({sections:F,exploreCanvas:E,position:{x:0,y:0,width:z,height:50}},k),R.publishVisualContainerAddedEvent()})},j.prototype.addVisualContainerTextbox=function(F,E,k,R,z){return this.addEmptyVisualContainer(F,E,N&&N.textbox&&N.textbox.name,k,R,z)},j.prototype.addVisualContainer=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var z,Q=this;return(0,e.Jh)(this,function(me){switch(me.label){case 0:return F.postProcessing=this.getPostProcessing(F.visualType,F.shouldSummarize),[4,this.getAuthoringVisualRecommendationInterop()];case 1:return z=me.sent(),[2,this.registerUndoableAction(F.dataSources,function(le){var K=Q.visualAuthoringOperations.addVisualContainer(le,F,E,k,z,R);return Q.publishVisualContainerAddedEvent(K),K},"AddVisualContainer")]}})})},j.prototype.addVisualContainerFromConfig=function(F,E,k,R){var z=this;return this.undoRedoService.register("AddVisualContainerFromConfig",function(){var Q=z.visualAuthoringOperations.addVisualContainerFromConfig(F,E,k,R);return z.publishVisualContainerAddedEvent(Q),Q})},j.prototype.addEmptyVisualContainer=function(F,E,k,R,z,Q){var me=this,le=this.getPostProcessing(k,z);return this.undoRedoService.register("AddEmptyVisualContainer",function(){var K=me.visualAuthoringOperations.addEmptyVisualContainer(F,E,k,R,Q,le);return me.publishVisualContainerAddedEvent(K),K})},j.prototype.groupVisualContainers=function(F,E){var k=this;return this.undoRedoService.register("GroupVisualContainers",function(){return k.visualAuthoringOperations.groupVisualContainers(F,E)})},j.prototype.ungroupVisualContainers=function(F,E){var k=this;return this.undoRedoService.register("UngroupVisualContainers",function(){return k.visualAuthoringOperations.ungroupVisualContainers(F,E)})},j.prototype.moveCanvasItemsInTree=function(F,E,k,R,z){var Q=this;return this.undoRedoService.register(z?"MergeCanvasItemContainers":"MoveCanvasItemContainersInTree",function(){return Q.visualAuthoringOperations.moveCanvasItemsInTree(F,E,k,R,z)})},j.prototype.addConfigToCategoricalFilters=function(F,E,k,R){void 0===R&&(R=!0);var z=_.filter(F,function(K){return!K.isInvalid()&&K.canVisualize()});if(z)for(var Q=0,me=z;Q<me.length;Q++)this.createFilterVisualContainerConfig(me[Q].contract,k,E,R)},j.prototype.createVisualFilters=function(F,E,k,R){return this.visualAuthoringOperations.createVisualFilters(F,E,k,R)},j.prototype.setFilterSortType=function(F,E,k){var R=this;return this.registerUndoableAction(F,function(z){return R.visualAuthoringOperations.setFilterSortType(z,E,k)},"setFilterSortType")},j.prototype.moveFilter=function(F,E,k,R){var z=this;return this.registerUndoableAction(F,function(Q){return z.visualAuthoringOperations.moveFilter(Q,E,k,R)},"moveFilter")},j.prototype.addFilter=function(F,E,k,R){var z=this;return this.registerUndoableAction(k,function(Q){return z.visualAuthoringOperations.addFilter(Q,F,E,k,!1,R)},"AddFilter")},j.prototype.addDrillthroughFilter=function(F,E,k){return(0,e.mG)(this,void 0,void 0,function(){var R,z=this;return(0,e.Jh)(this,function(Q){switch(Q.label){case 0:return[4,this.lazyScoped.get("explorationAuthoring")];case 1:return R=Q.sent(),[4,this.registerUndoableAction(k,function(me){var le=z.explorationNavigationService.getCurrentSection();z.featureSwitchService.featureSwitches.onObject&&le&&!jsCommon.EnumExtensions.hasFlag(le.type,2)&&R.setSectionType(z.explorationNavigationService.getCurrentExploration(),le,2,!0);var K=z.visualAuthoringOperations.addFilter(me,F,E,k,!0);if(!_.isEmpty(K)){var q=z.explorationNavigationService.getAllSections();if(!z.shouldAddBackButton(le))return K;var ye=ce,Le=z.explorationNavigationService.getCurrentExploreCanvas();return Le&&z.visualAuthoringOperations.addVisualContainerActionButtonVisual({sections:q,exploreCanvas:Le,position:ye,select:!1},m.back),K}},"AddDrillthroughFilter")];case 2:return[2,Q.sent()]}})})},j.prototype.shouldAddBackButton=function(F){if(!F)return!1;var k=F.type;return(this.featureSwitchService.featureSwitches.onObject?jsCommon.EnumExtensions.hasFlag(k,2):null==k||0===k)&&!this.hasBackButton(F)},j.prototype.runVisualContainerUpdateActionCustom=function(F,E,k,R){if(_.isEmpty(E))return k;for(var z=k,Q=[],me=0,le=E;me<le.length;me++){var K=le[me];if(K&&-1===_.indexOf(Q,K)){var q=F(K);if(R(q)){Q.push(K);for(var ye=0,Le=this.visualSyncService.getVisualsAffectByFieldChanges(K);ye<Le.length;ye++){var Ne=Le[ye];F(Ne),Q.push(Ne)}z=q}}}return z},j.prototype.runVisualContainerUpdateAction=function(F,E){return this.runVisualContainerUpdateActionCustom(F,E,!1,function(k){return k})},j.prototype.publishVisualContainerAddedEvent=function(F){void 0===F&&(F=null),this.canvasItemAddedSubject.next(null==F?void 0:F.name),this.eventBridge.publishToChannel(d.VisualContainerAdded,F)},j.prototype.publishVisualContainerDeletedEvent=function(F){this.canvasItemDeletedSubject.next(F.name)},j.prototype.hasBackButton=function(F){return _.some(F.visualContainers,function(k){var Q,R=l.DataViewObjectDefinitions.getObjectDefinition(k.config.singleVisual.vcObjects,"visualLink",void 0),z=R&&R.properties;return z&&(Q={show:z.show&&z.show.value,bookmark:z.bookmark&&z.bookmark.value,type:z.type&&z.type.value}),Q&&Q.show&&Me.getType(Q)===Me.Back})},j.prototype.removeFilter=function(F,E,k,R){var z=this;return this.undoRedoService.register("RemoveFilter",function(){var Q=2===F.howCreated,me=z.visualAuthoringOperations.removeFilter(F,E,k,R);return me&&Q&&J(E.container,E)&&z.updateCrossDrillFromVisualContainer(E.container),5===F.howCreated&&!F.isTransient&&ae.logDrillthroughFilterUpdateTelemetry(z.telemetryService,"Delete",E.container,k),z.telemetryService.logChildEvent(k&&k.event,fe.EXRemoveFilter,{filterType:ae.getTelemetryFilterType(F.type),filterScopeType:ae.getTelemetryFilterScopeType(E.scopeType),fieldKind:F.expression&&ae.getTelemetryFieldKind(F.expression),viewMode:ae.getTelemetryViewMode(z.viewModeState.getMode())}),me})},j.prototype.clearFilter=function(F,E,k){var R=this;return this.undoRedoService.register("ClearFilter",function(){R.telemetryService.logChildEvent(k.event,fe.EXClearFilter,{filterType:ae.getTelemetryFilterType(E.type),filterScopeType:ae.getTelemetryFilterScopeType(F.scopeType),fieldKind:ae.getTelemetryFieldKind(E.expression),viewMode:ae.getTelemetryViewMode(R.viewModeState.getMode())}),R.updateFilter(F,E,void 0)})},j.prototype.toggleFilterVisibility=function(F,E){var k=this;return this.undoRedoService.register("HideFilter",function(){k.telemetryService.logEvent(fe.EXHideFilter,{filterType:ae.getTelemetryFilterType(E.type),filterScopeType:ae.getTelemetryFilterScopeType(F.scopeType),fieldKind:ae.getTelemetryFieldKind(E.expression),isFilterHidden:E.isHiddenInViewMode}),E.isHiddenInViewMode=!E.isHiddenInViewMode,k.updateFilter(F,E,E.filter),w.ensureFilterHasName(E,F)})},j.prototype.toggleFilterLock=function(F,E){var k=this;return this.undoRedoService.register("lockFilter",function(){k.telemetryService.logEvent(fe.EXLockFilter,{filterType:ae.getTelemetryFilterType(E.type),filterScopeType:ae.getTelemetryFilterScopeType(F.scopeType),fieldKind:ae.getTelemetryFieldKind(E.expression),isFilterLocked:E.isLockedInViewMode}),E.isLockedInViewMode=!E.isLockedInViewMode,k.updateFilter(F,E,E.filter),w.ensureFilterHasName(E,F)})},j.prototype.renameFilter=function(F,E,k){var z,R=this;this.undoRedoService.register("renameFilter",function(){k?E.displayName=k:E&&delete E.displayName,R.updateFilter(F,E,E.filter),w.ensureFilterHasName(E,F)}),this.featureSwitchService.featureSwitches.certifiedTelemetryUserEvents&&(z=w.createChangeFilterActivity(this.contextActivityService,"Rename Filer")),w.notifyFilterContainerChangedByUser(this.eventBridge,{filter:E,changeType:256,scope:F,changeFilterActivity:z}),z&&z.resolve()},j.prototype.updateFilter=function(F,E,k){var R=2===E.howCreated,z=E.filter;E.filter=k;var Q=E.config&&E.config.singleVisual;if(Q){var me=this.visualPluginService.capabilities(Q.visualType),le=this.filterGenerator.tryGetFilterPropertyIdentifier(me);le&&(Q.objects||(Q.objects={}),null==k?y.deleteProperty(Q.objects,le.objectName,null,le.propertyName):y.setValue(Q.objects,le,null,k))}R&&!Ce.isSameFilter(z,k)&&J(F.container,F)&&this.updateCrossDrillFromVisualContainer(F.container);var K=F.container;null==K.filters&&(K.filters=[]),-1===_.indexOf(K.filters,E)&&K.filters.push(E)},j.prototype.updateTopNFilter=function(F,E,k,R,z,Q){var le,K,me=this;if(F){var q=ge.getVisualQuery(F);if(q){var ye=q.defn.select();le=_.some(ye,function(be){return he.equals(be.expr,E.fieldBeingFiltered,!0,!0)}),K=_.some(ye,function(be){return he.equals(be.expr,E.orderByField,!0,!0)})}}var Le=this.telemetryService.startEvent(fe.EXFilterPaneTopNFilterApplied,{isTop:E.isTop,itemCount:E.itemCount,atGrain:le,onVisualMeasure:K,viewMode:ae.getTelemetryViewMode(this.viewModeState.getMode()),isInOutspacePane:z}),Ne=this.dataSource.get();return this.registerUndoableAction(Ne,function(be){var Y=l.TopNFilterPattern.buildFilterFromParameters({fieldBeingFiltered:E.fieldBeingFiltered,isTop:E.isTop,itemCount:E.itemCount,orderByField:E.orderByField});return me.updateFilter(k,R,Y),Le.resolve(),!0},"Apply TopN Filter",Q)},j.prototype.createFilterVisualContainerConfig=function(F,E,k,R){return void 0===R&&(R=!0),this.visualAuthoringOperations.createFilterVisualContainerConfig(F,E,k,R)},j.prototype.raiseVisualContainerChanged=function(F,E){void 0===E&&(E="UserAction_EditVisual"),this.raiseVisualContainersChanged([F],E)},j.prototype.raiseVisualContainersChanged=function(F,E){void 0===E&&(E="UserAction_EditVisual"),this.eventBridge.publishToChannel(d.visualContainerChanged,{affectContainer:function(R){return _.some(F,function(z){return z===R})},sourceLabelKey:E})},j.prototype.raiseVisualContainerGroupChanged=function(F){this.raiseVisualContainerGroupsChanged([F])},j.prototype.raiseVisualContainerGroupsChanged=function(F){this.eventBridge.publishToChannel(d.visualContainerGroupChanged,{affectContainer:function(k){return _.includes(F,k)}})},j.prototype.raiseCanvasItemChanged=function(F,E){void 0===E&&(E="UserAction_EditVisual"),this.raiseCanvasItemsChanged([F],E)},j.prototype.raiseCanvasItemsChanged=function(F,E){void 0===E&&(E="UserAction_EditVisual");var k=[],R=[];v.traverseVisualContainerGroups(F,function(z){v.isVisualContainer(z)?k.push(z):R.push(z)}),_.isEmpty(k)||this.raiseVisualContainersChanged(k,E),_.isEmpty(R)||this.raiseVisualContainerGroupsChanged(R)},j.prototype.convert=function(F,E,k,R,z){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var Q,me=this;return(0,e.Jh)(this,function(le){switch(le.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return Q=le.sent(),[2,this.registerUndoableAction(E,function(K){return me.convertAction(K,F,k,Q,R,z)},"VisualConversion")]}})})},j.prototype.convertMultiple=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var z,Q=this;return(0,e.Jh)(this,function(me){switch(me.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return z=me.sent(),[2,this.registerUndoableAction(E,function(le){return F.reduce(function(K,q){return Q.convertAction(le,q,k,z,R)&&K},!0)},"MultipleVisualConversion")]}})})},j.prototype.convertAction=function(F,E,k,R,z,Q){var me,le;if(z){this.filterGenerator.clearFiltersFromVisualContainers(z,[E],"UserAction_EditVisual");var K=this.visualPluginService.getPlugin(k);null!=K&&K.supportsSummarization&&(me=this.getSummarizationPostProcessing(),le=[_.cloneDeep(E)])}return this.visualAuthoringOperations.convert(F,E,k,R,le,me,Q)},j.prototype.setOrderBy=function(F,E){var k=F.config.singleVisual;k.query.orderBy(E),k.hasDefaultSort=!1,this.raiseVisualContainerChanged(F)},j.prototype.removeOrderBy=function(F,E){for(var k=0,R=E;k<R.length;k++)F.config.singleVisual.query.removeOrderBy(R[k]);this.raiseVisualContainerChanged(F)},j.prototype.setPropertyDefinition=function(F,E,k,R,z,Q){var me=this,le=function(){return void 0!==z&&(me.visualAuthoringOperations.removeProperty(F,E,k),k=z),me.visualAuthoringOperations.addProperty(F,E,k,R),me.raiseVisualContainerChanged(F),!0};Q?le():this.undoRedoService.register("Set Property",le)},j.prototype.removePropertyDefinition=function(F,E,k){var R=this;this.undoRedoService.register("Removing Property",function(){return R.visualAuthoringOperations.removeProperty(F,E,k),R.raiseVisualContainerChanged(F),!0})},j.prototype.addDataBars=function(F,E,k){var R=this;this.undoRedoService.register("Set Data Bars",function(){return R.visualAuthoringOperations.addProperty(F,E.propertyId,E.selector,k),R.raiseVisualContainerChanged(F),!0})},j.prototype.removeDataBars=function(F,E){var k=this;this.undoRedoService.register("Removing Data Bars",function(){return k.visualAuthoringOperations.removeProperty(F,E.propertyId,E.selector),k.raiseVisualContainerChanged(F),!0})},j.prototype.removeConditionalFormattingAll=function(F,E){var k=this;this.undoRedoService.register("Removing All Conditional Formatting",function(){if(!_.isEmpty(E))for(var R=0,z=E;R<z.length;R++){var Q=z[R];k.visualAuthoringOperations.removeProperty(F,Q.propertyId,Q.selector)}return k.raiseVisualContainerChanged(F),!0})},j.prototype.persistProperties=function(F,E,k,R,z){var Q=this,me=_.isArray(F)?F:[F],le=E.config.singleVisual,K=function(){var Le=Q.visualPluginService.capabilities(le.visualType),Ne=Q.filterGenerator.tryGetFilterPropertyIdentifier(Le),be=!1,Y=function(Ze,ot,lt,yt,De){Ne&&Ze===Ne.objectName&&Ne.propertyName===lt&&(be=!0)},ue=_.reduce(me,function(Ae,Ze){return Q.visualAuthoringOperations.persistProperties(Ze,le,Y)&&Ae},!0);return be&&ge.notifyVisualContainersExceptSource(Q.eventBridge,E,"UserAction_ChangeSlicer",R,z),ue?(Q.visualSyncService.syncFilterState(E),ue):ue};return k?K():this.undoRedoService.register("VisualContainerPersistProperties",K)},j.prototype.persistVCProperties=function(F,E){var k=this,R=E.config.singleVisual;return this.undoRedoService.register("VisualContainerPersistVCProperties",function(){var me=_.reduce(F,function(le,K){return k.visualAuthoringOperations.persistVCProperties(K,R)&&le},!0);return me&&k.raiseVisualContainerChanged(E),me})},j.prototype.deleteSelectedVisuals=function(F){for(var E=_.map(this.selectionService.getSelectedElements(),function(le){return le.canvasItem}),k=!1,R=0,z=E;R<z.length;R++){var Q=z[R];Q&&(k=this.deleteVisualContainerInternal(Q,F)||k)}if(k){var me=_.chain(E).filter(function(le){return v.isVisualContainer(le)}).map(function(le){return le}).value();this.notifyVisualContainersAndClearSelection(me,F)}},j.prototype.deleteVisualContainer=function(F,E){this.deleteVisualContainerInternal(F,E)&&this.notifyVisualContainersAndClearSelection([F],E)},j.prototype.deleteVisualContainers=function(F,E){var k=this,R=E.sections.filter(function(Q){return Q.selected})[0],z=[];E.contract.sections.forEach(function(Q){F.forEach(Q.name===R.contract.name?function(me){_.some(Q.visualContainers,function(le){return le.config.singleVisual.visualType===me.config.singleVisual.visualType})&&z.push(me)}:function(me){_.remove(Q.visualContainers,function(le){return me.config.singleVisual.visualType===le.config.singleVisual.visualType}),Q.visualContainerGroups=x.removeBy(Q.visualContainerGroups,function(le){return v.isVisualContainer(le)&&me.config.singleVisual.visualType===le.config.singleVisual.visualType}),k.visualAuthoringOperations.deleteVisualRelationships(Q,me)})}),z.length>0&&(z.forEach(function(Q){k.deleteVisualContainer(Q,E.exploreCanvas)}),this.notifyVisualContainersAndClearSelection(z,E.exploreCanvas))},j.prototype.deleteVisualRelationships=function(F,E){this.visualAuthoringOperations.deleteVisualRelationships(F,E)},j.prototype.setVisualRelationship=function(F,E,k,R){var z=this;this.undoRedoService.register("SetVisualRelationship",function(){return z.visualAuthoringOperations.setVisualRelationship(F,E,k,R)})},j.prototype.setDisplayNameAlias=function(F,E,k,R){var z=this;this.undoRedoService.register("SetDisplayNameAlias",function(){z.visualAuthoringOperations.setDisplayNameAlias(F,E,k,R),z.raiseVisualContainerChanged(F)})},j.prototype.setLinkFieldAsAggregation=function(F,E,k){var R=this;this.undoRedoService.register("Set Link As Aggregation",function(){if(X.isPodEnabled(F,E)){var z=R.explorationNavigationService.getCurrentExploration(),Q=E.container;null!=z&&null!=Q&&(X.updateParameter(z,Q.name,F.name,k),R.eventBridge.publishToChannel(d.podParameterChanged,{filter:F,filterName:F.name,type:2,asAggregation:k}))}})},j.prototype.setRequireSingleSelection=function(F,E,k){var R=F.objects,z="requireSingleSelect",Q="general";if(R||(F.objects=R={}),k?y.setValue(R,{objectName:Q,propertyName:z},null,Fe.boolean(k)):y.deleteProperty(R,Q,null,z),X.isPodEnabled(F,E)){var me=this.explorationNavigationService.getCurrentExploration(),le=E.container;null!=me&&null!=le&&this.updatePodParameter(F,me,le,k)}},j.prototype.updatePodParameter=function(F,E,k,R){var z;R?5===F.howCreated||X.hasParameter(E,k.name,F.name)||(X.addParameter(E,k.name,F.name,F.expression,(z={filterName:F.name,type:0,isCausedByCode:!1,fieldExpr:F.expression,asAggregation:!1,isLegacySingleSelection:!0}).asAggregation,!0,X.determineType(k,this.featureSwitchService.featureSwitches.onObject)),this.eventBridge.publishToChannel(d.podParameterChanged,z)):(X.deleteParameter(E,k.name,F.name,this.linguisticSchemaProxy),this.eventBridge.publishToChannel(d.podParameterChanged,z={filterName:F.name,type:1}))},j.prototype.setVisibility=function(F,E,k){var R=this;this.undoRedoService.register("Set Visual Containers Visibility",function(){for(var z=0,Q=E;z<Q.length;z++)R.visualAuthoringOperations.setVisibility(Q[z],F,k);R.visualAuthoringOperations.notifyVisualContainers(E),R.eventBridge.publishToChannel(d.canvasItemHiddenChanged,{changedItems:E})})},j.prototype.setVisualContainerGroupVisibility=function(F,E,k){var R=this;this.undoRedoService.register("Set Visual Container Group Visibility",function(){for(var Q=0,me=E;Q<me.length;Q++)R.visualAuthoringOperations.setVisualContainerGroupVisibility(me[Q],F,k)}),this.raiseVisualContainerGroupsChanged(E),this.eventBridge.publishToChannel(d.canvasItemHiddenChanged,{changedItems:E})},j.prototype.setVisualContainerGroupDisplayName=function(F,E){var k=this;this.undoRedoService.register("Set Visual Container Group DisplayName",function(){for(var R=0,z=E;R<z.length;R++)k.visualAuthoringOperations.setVisualContainerGroupDisplayName(z[R],F)}),this.raiseVisualContainerGroupsChanged(E)},j.prototype.setPresentationChangesApplied=function(F){var E=this;return this.undoRedoService.register("setApplyPresentationChanges",function(){var R=ne.getSelectedVisual(E.selectionService);return E.runVisualContainerUpdateAction(function(Q){return Q.config.singleVisual.presentationChangesApplied=F},[R])})},j.prototype.updateContainerListOrders=function(F,E,k){var R=this;this.undoRedoService.register("Update Visual Containers for "+k,function(){R.visualAuthoringOperations.updateContainerListOrders(F,E,k)})},j.prototype.applyShowValueAs=function(F,E,k){var R=this;return this.registerUndoableAction(F.dataSources,function(z){if(R.removeShowValueAs(z,F,E))switch(k.kind){case void 0:return!0;case 0:return R.visualAuthoringOperations.setPercentOfGrandTotal(z,F.visualDataRole.name,F.roleIndex,F.visual);case 1:return R.visualAuthoringOperations.setPercentOfRoleTotal(z,k.roles,F.visualDataRole.name,F.roleIndex,F.visual);default:return!1}},"applying quick calc ")},j.prototype.toggleSlicerVisualSearch=function(F,E,k){var R=this;this.undoRedoService.register("ToggleSearchVisualContainer",function(){R.visualAuthoringOperations.toggleSlicerVisualSearch(F,E,k)&&R.raiseVisualContainerChanged(F)})},j.prototype.switchQueryParameter=function(F,E,k){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var R,z=this;return(0,e.Jh)(this,function(Q){switch(Q.label){case 0:return[4,this.getAuthoringVisualRecommendationInterop()];case 1:return R=Q.sent(),[2,this.undoRedoService.register("switchQueryParameter",function(){var le=ne.getSelectedVisual(z.selectionService);return z.runVisualContainerUpdateAction(function(q){return z.visualAuthoringOperations.switchQueryParameter(F,q,E,k,R)},[le])})]}})})},j.prototype.removeShowValueAs=function(F,E,k){switch(k.kind){case void 0:return!0;case 0:return this.visualAuthoringOperations.removePercentOfGrandTotal(F,E.visualDataRole.name,E.roleIndex,E.visual);case 1:return this.visualAuthoringOperations.removePercentOfRoleTotal(F,E.visualDataRole.name,E.roleIndex,E.visual);default:return!1}},j.prototype.registerUndoableAction=function(F,E,k,R){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var z;return(0,e.Jh)(this,function(Q){switch(Q.label){case 0:return[4,this.getSchema(F)];case 1:return z=Q.sent(),[2,this.undoRedoService.register(k,function(){return E(z)},R)]}})})},j.prototype.getSchema=function(F){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(E){return[2,this.conceptualSchemaProxy.get(F)]})})},j.prototype.getAuthoringVisualRecommendationInterop=function(){return(0,e.mG)(this,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(F){switch(F.label){case 0:return[4,this.lazyScoped.get("authoringVisualRecommendationInterop")];case 1:return[2,F.sent()]}})})},j.prototype.notifyVisualContainersAndClearSelection=function(F,E){this.filterGenerator.clearFiltersFromVisualContainers(E.contract,F,"UserAction_EditVisual"),this.selectionService.clearSelection()},j.prototype.deleteVisualContainerInternal=function(F,E,k){if(void 0===k&&(k=!1),F){var R=x.find(F.name,E.visualContainerGroups);if(R){var z=E.contract;if(v.isVisualContainer(F)&&pe.isVisualContainer(R)){this.visualAuthoringOperations.deleteVisualRelationships(E.contract,F);var Q=E.visualContainers.indexOf(R);E.visualContainers.splice(Q,1);var me=z.visualContainers.indexOf(F);z.visualContainers.splice(me,1),this.publishVisualContainerDeletedEvent(F)}else if(v.isVisualContainerGroup(F))for(var le=0,K=F.children;le<K.length;le++)this.deleteVisualContainerInternal(K[le],E,!0);if(!k){z.visualContainerGroups=x.remove(F,z.visualContainerGroups),E.visualContainerGroups=x.remove(R,E.visualContainerGroups),ae.CanvasVisualsUtility.syncCanvasItemViewModelsWithContracts(E.visualContainerGroups,z.visualContainerGroups);var ye=R.parentGroup&&x.find(R.parentGroup.name,E.visualContainerGroups);ye&&pe.isVisualContainerGroup(ye)&&this.layoutAuthoring.removeCanvasItemFromGroup(ye,R)}return!0}}},j.prototype.updateCrossDrillFromVisualContainer=function(F){var E=this.explorationNavigationService.getCurrentExploration(),k=_.find(E.sections,function(R){return _.includes(R.visualContainers,F)});k&&this.filterGenerator.updateCrossFilterOnDrill(k,F)},j.prototype.getPostProcessing=function(F,E){var k;if(E){var R=this.visualPluginService.getPlugin(F);R&&R.supportsSummarization&&(k=this.getSummarizationPostProcessing())}return k},j.prototype.getSummarizationPostProcessing=function(){var F=this;return function(E){return(0,e.mG)(F,void 0,powerbi.Promise,function(){return(0,e.Jh)(this,function(R){switch(R.label){case 0:return[4,this.lazyScoped.get("smartNarrativesSummarization")];case 1:return[4,R.sent().generateSummaries(E.outputVisualContainer,E.selectedVisualContainers)];case 2:return R.sent(),[2]}})})}},j.prototype.getNavigatorWidth=function(F){return"page"===F?Math.min(Math.max(200,200*this.explorationNavigationService.getAllSections().length),1e3):"bookmark"===F?600:void 0},j.\u0275fac=function(E){return new(E||j)(O.\u0275\u0275inject(T.D),O.\u0275\u0275inject(V.i),O.\u0275\u0275inject(h.r),O.\u0275\u0275inject(M.y0),O.\u0275\u0275inject(I.I),O.\u0275\u0275inject(b.z),O.\u0275\u0275inject(P.J),O.\u0275\u0275inject(g.z),O.\u0275\u0275inject(p.vZ),O.\u0275\u0275inject(u.r),O.\u0275\u0275inject(C.kc),O.\u0275\u0275inject(s.D),O.\u0275\u0275inject(A.U),O.\u0275\u0275inject(S.Q),O.\u0275\u0275inject(L.M),O.\u0275\u0275inject(D.H),O.\u0275\u0275inject(f.e,8))},j.\u0275prov=O.\u0275\u0275defineInjectable({token:j,factory:j.\u0275fac}),j}(i.t)},58791:function(Ve,se,t){t.d(se,{w:function(){return V}});var e=t(73637),n=t(70377),f=t(25991),i=t(3103),O=t(42),T=powerbi.explore.SectionUtils,V=function(){function h(M,I,b,P){this.explorationCapabilities=M,this.explorationNavigation=I,this.pinVisualService=b,this.viewModeState=P}return h.prototype.showCopyVisualImageOption=function(M,I,b){return this.explorationCapabilities.getCapabilities().showCopyVisualImageButton&&!!M.contract.config.singleVisual.query&&!M.errorInfo&&this.pinVisualService.canPin(M)&&!T.isQuickExploreSection(I)&&this.getCopySource(b)},h.prototype.getActiveSection=function(){var M=this.explorationNavigation.getCurrentExploration();return M.sections[M.activeSectionIndex]},h.prototype.getCopySource=function(M){switch(M){case"ContextMenu":return this.explorationCapabilities.getCapabilities().showCopyImageContextMenuOptions;case"VisualHeader":return 0===this.viewModeState.getMode();default:return!1}},h.\u0275fac=function(I){return new(I||h)(e.\u0275\u0275inject(n.U),e.\u0275\u0275inject(f.z),e.\u0275\u0275inject(i.k),e.\u0275\u0275inject(O.kc))},h.\u0275prov=e.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac}),h}()},27262:function(Ve,se,t){t.d(se,{s:function(){return D}});var e=t(7005),n=t(22478),f=t(73637),i=t(59279),O=t(16660),T=t(18766),V=t(23196),h=t(33892),M=t(64821),I=t(33714),b=t(18266),P=t(46706),g=t(79309),u=t(5801),s=t(28408),p=powerbi.explore.services.events,C=powerbi.explore.util.ErrorDetailsUtility,A=powerbi.data.SQExprUtils,S=jsCommon.TraceType,D=function(){function v(l,y,d,w,x,N,X,ne,Ce,he,Fe,fe,ae){this.aggrOps=l,this.commandStore=y,this.conceptualSchemaProxy=d,this.dataSources=w,this.errorService=x,this.eventBridge=N,this.featureSwitchService=X,this.localizationService=ne,this.dialogService=Ce,this.selection=he,this.telemetryService=Fe,this.visualAuthoring=fe,this.pauseQueriesService=ae,this.services={aggrOps:this.aggrOps,commandStore:this.commandStore,conceptualSchemaProxy:this.conceptualSchemaProxy,dataSources:this.dataSources,errorService:this.errorService,eventBridge:this.eventBridge,featureSwitchService:this.featureSwitchService,localizationService:this.localizationService,dialogService:this.dialogService,selection:this.selection,telemetryService:this.telemetryService,visualAuthoring:this.visualAuthoring,pauseQueriesService:this.pauseQueriesService}}return v.prototype.create=function(l,y,d){return new m(l,y,d,this.services)},v.\u0275fac=function(y){return new(y||v)(f.\u0275\u0275inject(i.C),f.\u0275\u0275inject(n.D),f.\u0275\u0275inject(O.i),f.\u0275\u0275inject(T.D),f.\u0275\u0275inject(M.T),f.\u0275\u0275inject(V.J),f.\u0275\u0275inject(I.vZ),f.\u0275\u0275inject(b.o),f.\u0275\u0275inject(P.x),f.\u0275\u0275inject(h.z),f.\u0275\u0275inject(g.y0),f.\u0275\u0275inject(u.$),f.\u0275\u0275inject(s.F))},v.\u0275prov=f.\u0275\u0275defineInjectable({token:v,factory:v.\u0275fac}),v}(),m=function(){function v(l,y,d,w){this.viewModel=l,this.getVisualType=y,this.getVisualContract=d,this.services=w}return v.prototype.showErrorDetails=function(){var l,y=this.viewModel;if(y.errorInfo){var d=!(null!==(l=y.errorInfo.details)&&void 0!==l&&l.hideDebugInfo);this.logErrorAndShowDialog(y.errorInfo,this.getVisualType(),"User"!==y.errorInfo.source,d)}},v.prototype.showWarningDetails=function(){var l=this.viewModel,y={details:l.warningInfo?l.warningInfo.details:l.customVisualDeprecatedWarningInfo.details,code:l.warningInfo?l.warningInfo.code:l.customVisualDeprecatedWarningInfo.code,fixableError:0},d=!y.details.hideDebugInfo;this.logErrorAndShowDialog(y,this.getVisualType(),!1,d)},v.prototype.showTransformWarningDetails=function(){var l=this.viewModel;this.logErrorAndShowDialog({details:l.transformWarningInfo.details,code:l.transformWarningInfo.code,fixableError:0},this.getVisualType(),!1,!0)},v.prototype.showInfoDetails=function(){var l=this.viewModel;l.versionsInfo||this.logErrorAndShowDialog({details:l.visualInfo.details,code:l.visualInfo.code,fixableError:0},this.getVisualType(),!1,!1)},v.prototype.showPauseVisualWarning=function(){this.viewModel.visualPausedWarning={iconName:"pbi-glyph-info",bannerType:0,iconTooltip:this.services.localizationService.get("Paused_Visual_Pending_Status"),buttonText:this.services.localizationService.get("Refresh"),buttonTooltip:this.services.localizationService.get("Refresh"),buttonIcon:"refresh",allowDismiss:!1}},v.prototype.clearError=function(){var l=this.viewModel;l.errorInfo=void 0,l.warningInfo=void 0,l.transformWarningInfo=void 0,l.visualInfo=void 0,l.visualPausedWarning=void 0},v.prototype.showErrorOverlay=function(l,y,d,w){var x=this.viewModel,N=this.getVisualType(),X=this.getVisualContract();if(this.services.telemetryService.logEvent(powerbi.telemetry.VisualError,{errorCode:y,targetVisualType:N,visualName:X.name,message:l.message}),!x.errorInfo||x.errorInfo.code!==y){var ne=C.getErrorOverlayType(y),Ce=C.shouldHideSeeDetails(y),he=this.services.conceptualSchemaProxy.getLatestCapabilities(this.services.dataSources.get(),void 0),Fe=this.getFixableErrorKind(y,this.services.featureSwitchService.featureSwitches.enableTableToTableRelationship&&he&&he.canEdit);if(7===Fe)return void this.showPauseVisualWarning();x.errorInfo={details:l,code:y,fixableError:Fe,hideSeeDetails:Ce,overlayType:ne,requestId:d,source:w}}},v.prototype.showWarningIcon=function(l,y){var d=this.viewModel,w=this.getVisualType();this.logVisualWarning(w,y,l.message),!d.warningInfo&&(d.warningInfo={details:l,code:y})},v.prototype.showDeprecationWarning=function(){var l=this.viewModel,y=powerbi.common.getLocalize().get("CustomVisuals_DeprecatedMessageWarningKey"),d=powerbi.common.getLocalize().get("CustomVisuals_DeprecatedMessageWarningValue"),w={message:powerbi.common.getLocalize().get("CustomVisuals_DeprecatedMessage"),displayableErrorInfo:[{errorInfoKey:y,errorInfoValue:d}],hideAdditionalErrorInfo:!0};l.customVisualDeprecatedWarningInfo={details:w,code:"CustomVisuals_DeprecatedMessage"}},v.prototype.clearDeprecationWarning=function(){this.viewModel.customVisualDeprecatedWarningInfo=void 0},v.prototype.showTransformWarningIcon=function(l,y,d){var w=this.viewModel,x=this.getVisualType(),N=d?y.concat("|").concat("Sampled"):y;this.logVisualWarning(x,N,l.message),!w.transformWarningInfo&&(w.transformWarningInfo={details:l,code:y})},v.prototype.showInfoIcon=function(l,y){var d=this.viewModel,w=this.getVisualType();this.logVisualWarning(w,y,l.message),!d.visualInfo&&(d.visualInfo={details:l,code:y})},v.prototype.showPublicVersionsInfo=function(l,y){var d=this.viewModel;if(!d.visualInfo&&!d.versionsInfo&&l&&y){var w=this.services.localizationService.format("CustomVisuals_VersionIsNotUpdatedMessage",[l,y]);d.versionsInfo={details:{message:w,displayableErrorInfo:void 0,hideAdditionalErrorInfo:!0},code:w}}},v.prototype.clearPublicVersionsInfo=function(){this.viewModel.versionsInfo=void 0},v.prototype.fixErrors=function(){return(0,e.mG)(this,void 0,void 0,function(){var l,y,w,x;return(0,e.Jh)(this,function(N){switch(N.label){case 0:switch(l=this.viewModel,y=this.getVisualContract(),l.errorInfo.fixableError){case 1:return[3,1];case 2:return[3,2];case 3:return[3,3];case 4:return[3,4];case 5:return[3,5];case 6:return[3,6];case 7:case 0:return[3,9]}return[3,10];case 1:return powerbi.explore.services.selectionUtils.selectCanvasItem(y,this.services.selection),this.services.visualAuthoring.removeInvalidExpressions(y,this.services.dataSources.get()),[3,11];case 2:return w=A.getActiveTablesNames(y.config.singleVisual.query.defn),this.services.eventBridge.publishToChannel(p.missingTableRelationship,{tables:w}),[3,11];case 3:return this.removeBrokenFilters(),[3,11];case 4:return this.services.eventBridge.publishToChannel(p.showEnableScriptVisualsDialog,0),[3,11];case 5:return this.services.eventBridge.publishToChannel(p.showEnableScriptVisualsDialog,1),[3,11];case 6:return[4,(x=this.services.commandStore.DataImport.ShowDataSourceSettingsDialog).canExecuteAsync()];case 7:return N.sent()?[4,x.execute()]:[3,9];case 8:N.sent(),N.label=9;case 9:return[3,11];case 10:N.label=11;case 11:return[2]}})})},v.prototype.clearWarning=function(l){var y=this.viewModel;y.warningInfo&&y.warningInfo.code===l&&(y.warningInfo=void 0)},v.prototype.clearPausedVisualWarning=function(){this.viewModel.visualPausedWarning=void 0},v.prototype.removeBrokenFilters=function(){var l=this,y=this.getVisualContract(),d=y.filters,w={scopeType:0,container:y};this.services.conceptualSchemaProxy.get(this.services.dataSources.get()).then(function(x){for(var N=0,X=d;N<X.length;N++){var ne=X[N];ne.filter&&!_.isEmpty(ne.filter.validate(x,l.services.aggrOps))&&l.services.visualAuthoring.removeFilter(ne,w,void 0,void 0)}})},v.prototype.generateShowMoreErrorDetails=function(l){var y=[],d=l.message,w=powerbi.common.getLocalize().get("ServiceError_CannotLoadVisual");if(C.hasAdditionalErrorInfo(l)&&(w=l.displayableErrorInfo[0].errorInfoKey,d=l.displayableErrorInfo[0].errorInfoValue,l.displayableErrorInfo.length>1))for(var x=1;x<l.displayableErrorInfo.length;x++)y.push(l.displayableErrorInfo[x]);return{title:w,message:d,displayableErrorInfo:y,debugErrorInfo:l.debugErrorInfo,source:l.source,hideErrorHelperText:l.hideErrorHelperText}},v.prototype.getFixableErrorKind=function(l,y){switch(l){case"Missing_References":return 1;case"InvalidUnconstrainedJoin":return y?2:0;case"Broken_Filters":return 3;case"ScriptVisualsNotEnabled":return 4;case"PythonVisualsNotEnabled":return 5;case"QueryCacheMissError":return 7;case powerbi.PBID_WindowsAuthImpersonationNotSupported:case powerbi.PBID_WindowsAuthNotSupported:return 6;default:return 0}},v.prototype.logErrorAndShowDialog=function(l,y,d,w){var X,ne,x=this.generateShowMoreErrorDetails(l.details),N=l.code;if(d?(X="VisualErrorSeeDetails_"+N+"_"+y,ne=S.Error):(X="VisualWarningSeeDetails_"+N+"_"+y,ne=S.Warning),w){var Ce={title:x.title,displayableErrorInfo:x.displayableErrorInfo,debugErrorInfo:x.debugErrorInfo,level:ne,source:null!=x.source?x.source:l.source,hideErrorHelperText:!!x.hideErrorHelperText},he=l.details;he&&(Ce.showAdditionalErrorInfo=!0!==he.hideAdditionalErrorInfo,he.helpLink&&(Ce.helpLink=he.helpLink,Ce.displayLearnMoreHelpLink=1===he.helpLinkType)),l.requestId&&(Ce.requestId=l.requestId),this.services.errorService.error(x.message,X,Ce)}else{var Fe=l.details.helpLink;this.services.dialogService.promptSimpleDialog(x.title,x.message,{minWidth:"560px"},Fe?{url:Fe,text:"LearnMore"}:void 0,this.services.localizationService.get("PBI_Button_Label_Close"))}},v.prototype.logVisualWarning=function(l,y,d){var w=this.getVisualContract();this.services.telemetryService.logEvent(powerbi.telemetry.VisualWarning,{targetVisualType:l,visualName:w.name,isError:!1,errorSource:"PowerBI",errorCode:y,activityName:d})},v}()},36670:function(Ve,se,t){t.d(se,{p:function(){return ce}});var e=t(7005),n=t(37473),f=t(47013),i=t(29494),O=t(73637),T=t(16660),V=t(93171),h=t(17273),M=t(18766),I=t(26326),b=t(33993),P=t(23196),g=t(97850),u=t(32130),s=t(74850),p=t(9161),C=t(33892),A=t(11032),S=t(46897),L=t(17555),D=t(70377),m=t(33401),v=t(33714),l=t(78359),y=t(58168),d=t(67471),w=t(18266),x=t(5801),N=t(42),X=t(28252),ne=t(77212),Ce=t(73109),he=t(56339),Fe=t(12029),fe=t(14814),ae=t(33339),pe=t(58791),ge=t(6234),Me=powerbi.explore.components.VisualContainerContextMenu,ce=function(){function J(ie,G,j,F,E,k,R,z,Q,me,le,K,q,ye,Le,Ne,be,Y,ue,Pe,Ae,Ze,ot,lt,yt,De,Ie,Oe,Be,qe,je,st,ht,Pt){this.localizationService=Ne,this.pbiMenuService=je,this.service=powerbi.explore.services.createVisualContainerMenuFactoryService(ie,G,j,F,E,k,R,z,Q,me,le,K,q,ye,function(ze){return Le.get(ze)},be,Y,ue,Pe,Ae,Ze,ot,lt,yt,De,Ie,Oe,Be,qe,st,Pt,ht)}return J.prototype.createDrillthroughCommands=function(ie,G,j){return this.service.createDrillthroughCommands(ie,G,j)},J.prototype.createOptionsCommands=function(ie,G,j){return this.service.createOptionsCommands(ie,G,j)},J.prototype.createCommands=function(ie,G,j,F,E,k,R,z){return this.service.createCommands(ie,G,j,F,E,k,R,z)},J.prototype.createMenu=function(ie,G,j,F,E,k,R,z,Q){return(0,e.mG)(this,void 0,void 0,function(){var me,le,K;return(0,e.Jh)(this,function(q){switch(q.label){case 0:return me=this,[4,this.createCommands(ie,G,j,F,E,k,z,Q)];case 1:return me.commands=q.sent(),le=new Me(this.localizationService),K=(0,e.pi)({element:R},G.position),[2,this.drawContextMenu(le,K,!0,!0)]}})})},J.prototype.createDrillthroughMenu=function(ie,G,j,F,E){return(0,e.mG)(this,void 0,void 0,function(){var k,R,z;return(0,e.Jh)(this,function(Q){switch(Q.label){case 0:return k=this,[4,this.createDrillthroughCommands(ie,G,F)];case 1:return k.commands=[Q.sent()],R=new Me(this.localizationService),z=(0,e.pi)({element:E},j),[2,this.drawContextMenu(R,z)]}})})},J.prototype.createOptionsMenu=function(ie,G,j,F){return(0,e.mG)(this,void 0,void 0,function(){var E,k;return(0,e.Jh)(this,function(R){return this.commands=this.createOptionsCommands(ie,G,j),E=new Me(this.localizationService,!0),k=(0,e.pi)({element:F.anchorElement.get(0)},F.position),[2,this.drawContextMenu(E,k,!0,!0,F)]})})},J.getPbiMenuConfig=function(ie,G,j,F,E){return void 0===j&&(j=!1),void 0===F&&(F=!1),{menu:J.createPbiMenu(ie.items,j,E),origin:G,closeOnButtonClick:!0,menuMode:f.Kb.Compact,ignoreOverlayMaxDimensions:F}},J.prototype.drawContextMenu=function(ie,G,j,F,E){return void 0===j&&(j=!1),void 0===F&&(F=!1),(0,e.mG)(this,void 0,powerbi.Promise,function(){var k;return(0,e.Jh)(this,function(z){switch(z.label){case 0:return[4,ie.createItems(this.commands)];case 1:return k=z.sent(),this.pbiMenuService.open(J.getPbiMenuConfig(k,G,j,F,E)).onButtonClick$.pipe((0,n.q)(1)).subscribe(function(Q){J.menuItemClick(Q.id,ie)}),[2,ie]}})})},J.menuItemClick=function(ie,G){G.getCommandByIndex(ie).execute()},J.convertItemType=function(ie){var G;return((G={})[0]=f.iB.Button,G[1]=f.iB.Divider,G[2]=f.iB.Header,G)[ie]},J.createPbiMenu=function(ie,G,j){var F,E,k=[],R=null===(F=null==j?void 0:j.backgroundStyle)||void 0===F?void 0:F.getCss(),z=null===(E=null==j?void 0:j.foregroundStyle)||void 0===E?void 0:E.getCss();return ie.forEach(function(Q){var me,le,K,q=(null===(me=Q.children)||void 0===me?void 0:me.length)>0;k.push({id:Q.key,type:q?f.iB.SubMenu:J.convertItemType(Q.type),text:Q.text,tooltip:null!==(le=Q.tooltip)&&void 0!==le?le:Q.text,checkable:null!=Q.selected||null!=Q.checked,checked:Q.selected||Q.checked,disabled:Q.disabled,styles:{"background-color":"transparent",color:null!==(K=null==z?void 0:z.color)&&void 0!==K?K:void 0},icon:G?{type:0,glyph:Q.icon,styles:null!=j&&j.foregroundStyle?{color:z.color}:void 0}:void 0,menu:q?J.createPbiMenu(Q.children,G,j):void 0})}),{items:k,styles:R?{"background-color":R["background-color"],"border-color":R["background-color"]}:void 0}},J.prototype.getSortCommands=function(ie,G,j){return this.service.getSortCommands(ie,G,j)},J.\u0275fac=function(G){return new(G||J)(O.\u0275\u0275inject(T.i),O.\u0275\u0275inject(V.r),O.\u0275\u0275inject(h.Yv),O.\u0275\u0275inject(M.D),O.\u0275\u0275inject(I.s),O.\u0275\u0275inject(b.v),O.\u0275\u0275inject(S.W),O.\u0275\u0275inject(L.M),O.\u0275\u0275inject(P.J),O.\u0275\u0275inject(D.U),O.\u0275\u0275inject(m.I),O.\u0275\u0275inject(v.vZ),O.\u0275\u0275inject(l.RD),O.\u0275\u0275inject(y.Y),O.\u0275\u0275inject(d.H),O.\u0275\u0275inject(w.o),O.\u0275\u0275inject(g.w),O.\u0275\u0275inject(i.t),O.\u0275\u0275inject(x.$),O.\u0275\u0275inject(N.kc),O.\u0275\u0275inject(u.r),O.\u0275\u0275inject(X.y0),O.\u0275\u0275inject(ne.r),O.\u0275\u0275inject(s.f),O.\u0275\u0275inject(Ce.F),O.\u0275\u0275inject(p.z),O.\u0275\u0275inject(he.D),O.\u0275\u0275inject(C.z),O.\u0275\u0275inject(Fe.U),O.\u0275\u0275inject(A.s),O.\u0275\u0275inject(fe.o),O.\u0275\u0275inject(ae.e),O.\u0275\u0275inject(pe.w),O.\u0275\u0275inject(ge.w))},J.\u0275prov=O.\u0275\u0275defineInjectable({token:J,factory:J.\u0275fac}),J}()},848:function(Ve,se,t){t.d(se,{K:function(){return f}});var e=t(73637),n=powerbi.explore.util.VisualContainerUtils,f=function(){function i(){}return i.prototype.updateVisual=function(O,T,V,h,M,I){n.updateVisual(O,T,V,h,M,I)},i.prototype.wrapRunningVisual=function(O,T,V,h,M,I,b,P,g,u){return n.wrapRunningVisual(O,T,V,h,M,I,b,P,g,u)},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac=function(T){return new(T||i)}}),i}()},9195:function(Ve,se,t){t.d(se,{k:function(){return f}});var e=t(73637),n=t(25991),f=function(){function i(O){this.explorationNavigationService=O}return i.prototype.getReportId=function(){var O=this.explorationNavigationService.getCurrentExploration();return O&&O.report&&O.report.objectId},i.\u0275fac=function(T){return new(T||i)(e.\u0275\u0275inject(n.z))},i.\u0275prov=e.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac}),i}()},72823:function(Ve,se,t){t.d(se,{S:function(){return O}});var e=t(73637),n=t(28252),f=powerbi.extensibility.convertVisualEventType,i=powerbi.telemetry,O=function(){function h(M){this.telemetryService=M}return h.prototype.create=function(M,I,b){return new V(this.telemetryService,M,I,b)},h.\u0275fac=function(I){return new(I||h)(e.\u0275\u0275inject(n.y0))},h.\u0275prov=e.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"}),h}(),V=function(){function h(M,I,b,P){this.telemetryService=M,this.visualType=I,this.visualName=b,this.instanceId=P}return h.prototype.trace=function(M,I){var b=f(M);if(b){var P=function(h){switch(h){case"VisualEventError":return i.VisualEventError;case"VisualEventTrace":return i.VisualEventTrace;case"VisualEventRenderStarted":return i.VisualEventRenderStarted;case"VisualEventRenderCompleted":return i.VisualEventRenderCompleted;default:return}}(b);P&&this.telemetryService.logEvent(P,{visualType:this.visualType,instanceId:this.instanceId,payload:I})}},h.prototype.traceCustom=function(M){M&&this.telemetryService.logCustomEvent(M)},h}()},23276:function(Ve,se,t){t.d(se,{z:function(){return T}});var e=t(98864),n=t(78936),f=t(73637),i=t(67617),O=t(31969),T=function(){function V(h,M){this.overlay=h,this.rtl=M,this.containers={},this.registeredVisualContainersSubject=new e.X([]),this.registeredVisualContainers$=this.registeredVisualContainersSubject.asObservable()}return V.prototype.getOrigin=function(h){var M=this.containers[h.name];if(M)return M.get(0)},V.prototype.getElement=function(h){return this.containers[h.name]},V.prototype.getRelativeOffsets=function(h,M){var I=this.containers[h.name];if(I){var b=this.rtl.isRtlLayout,P=(0,n.V)({origin:I.get(0),globalPoint:M,offset:M.offset}),g=P.right,u=P.left;if(b){var C=u;u=g,g=C}return{startX:u,endX:g,startY:P.top,endY:P.bottom}}},V.prototype.flexibleConnectedTo=function(h){var M=this.getOrigin(h);if(M)return this.overlay.position().flexibleConnectedTo(M)},V.prototype.registerVisualContainer=function(h,M){this.containers[h.name]=M;var b=this.registeredVisualContainersSubject.value;b.push(h),this.registeredVisualContainersSubject.next(b)},V.prototype.unregisterVisualContainer=function(h){delete this.containers[h.name];var I=this.registeredVisualContainersSubject.value;_.remove(I,function(b){return b.name===h.name}),this.registeredVisualContainersSubject.next(I)},V.\u0275fac=function(M){return new(M||V)(f.\u0275\u0275inject(i._c),f.\u0275\u0275inject(O.q))},V.\u0275prov=f.\u0275\u0275defineInjectable({token:V,factory:V.\u0275fac}),V}()},29541:function(Ve,se,t){t.d(se,{R:function(){return V}});var e=t(28252),n=t(85036),f=t(45563),i=t(29494),O=t(73637),T=function(){function h(M){var I=M&&JSON.parse(M);this.unpinnedVisuals=I&&I.unpinnedVisuals||[],this.favoritePublicCustomVisuals=I&&I.favoritePublicCustomVisuals||[]}return h.prototype.addUnpinnedVisual=function(M){this.isUnpinned(M)||this.unpinnedVisuals.push(M)},h.prototype.getFavoritePublicCustomVisuals=function(){return this.favoritePublicCustomVisuals},h.prototype.addFavoritePublicCustomVisual=function(M){this.isFavoritePublicCustomVisual(M)||this.favoritePublicCustomVisuals.push(M)},h.prototype.isFavoritePublicCustomVisual=function(M){return _.includes(this.favoritePublicCustomVisuals,M)},h.prototype.removeFavoritePublicCustomVisual=function(M){_.remove(this.favoritePublicCustomVisuals,function(I){return I===M})},h.prototype.isUnpinned=function(M){return _.includes(this.unpinnedVisuals,M)},h.prototype.removeUnpinnedVisual=function(M){_.remove(this.unpinnedVisuals,function(I){return I===M})},h.prototype.reset=function(){this.unpinnedVisuals=[]},h.prototype.toString=function(){return JSON.stringify(this)},h}(),V=function(){function h(M,I,b,P){this.visualPaneSettingsLoader=M,this.featureSwitchService=I,this.promiseFactory=b,this.telemetryService=P,this.reset()}return h.prototype.reset=function(){this.visualPaneSettings=null,this.userSettingsLoadInProgress=!1,this.userSettingsLoaded=!1,this.exlorationVisualTypes={},this.featureSwitchService.personalVisualizationPaneEnabled&&this.ensureUserSettingsLoaded(!1)},h.prototype.updateVisuals=function(){return this.ensureUserSettingsLoaded(!1)},h.prototype.getFavoritePublicCustomVisuals=function(){var M=this;return this.ensureUserSettingsLoaded(!1).then(function(){return M.visualPaneSettings.getFavoritePublicCustomVisuals()})},h.prototype.unpinVisual=function(M){var I=this;return this.ensureUserSettingsLoaded(!0).then(function(){return I.visualPaneSettings.addUnpinnedVisual(M.name),I.saveVisualPaneSettings("Unpin",M.name)})},h.prototype.addFavoritePublicCustomVisual=function(M){var I=this;return this.ensureUserSettingsLoaded(!0).then(function(){return I.visualPaneSettings.addFavoritePublicCustomVisual(M.name),I.saveVisualPaneSettings("AddFavoritePublicCustomVisual",M.name)})},h.prototype.removeFavoritePublicCustomVisual=function(M){var I=this;return this.ensureUserSettingsLoaded(!0).then(function(){return I.visualPaneSettings.removeFavoritePublicCustomVisual(M.name),I.saveVisualPaneSettings("RemoveFavoritePublicCustomVisual",M.name)})},h.prototype.restoreVisual=function(M){var I=this;return this.ensureUserSettingsLoaded(!1).then(function(){return I.visualPaneSettings.removeUnpinnedVisual(M.name),I.saveVisualPaneSettings("Restore",M.name)})},h.prototype.restoreAllVisuals=function(){var M=this;return this.ensureUserSettingsLoaded(!1).then(function(){return M.visualPaneSettings.reset(),M.saveVisualPaneSettings("RestoreAll")})},h.prototype.resetExplorationVisuals=function(){this.exlorationVisualTypes={}},h.prototype.addExplorationVisual=function(M){this.exlorationVisualTypes[M]=!0},h.prototype.isExplorationVisual=function(M){return this.exlorationVisualTypes[M]},h.prototype.isUnpinnedVisual=function(M){return!!this.visualPaneSettings&&this.visualPaneSettings.isUnpinned(M)},h.prototype.isFavoritePublicCustomVisual=function(M){return!!this.visualPaneSettings&&this.visualPaneSettings.isFavoritePublicCustomVisual(M)},h.prototype.ensureUserSettingsLoaded=function(M){var I=this;return this.userSettingsLoaded||this.userSettingsLoadInProgress||(this.userSettingsPromise=this.promiseFactory.defer(),this.visualPaneSettingsLoader.getVisualPaneSettings(M).then(function(b){I.visualPaneSettings=new T(b),I.telemetryService.logEvent(powerbi.telemetry.SettingsVisualPane,{visualPaneAction:"Get",visualPaneActionPayload:b}),I.userSettingsLoaded=!0,I.userSettingsPromise.resolve()}).catch(function(){I.userSettingsLoaded=!1,I.userSettingsPromise.reject()}).finally(function(){I.userSettingsLoadInProgress=!1}),this.userSettingsLoadInProgress=!0),this.userSettingsPromise.promise},h.prototype.saveVisualPaneSettings=function(M,I){void 0===I&&(I=null);var b=this.telemetryService.startEvent(powerbi.telemetry.SettingsVisualPane,{visualPaneAction:M,visualPaneActionPayload:I});return this.visualPaneSettingsLoader.updateVisualPaneSettings(this.visualPaneSettings.toString(),b)},h.\u0275fac=function(I){return new(I||h)(O.\u0275\u0275inject(n.Y),O.\u0275\u0275inject(f.h),O.\u0275\u0275inject(i.t),O.\u0275\u0275inject(e.y0))},h.\u0275prov=O.\u0275\u0275defineInjectable({token:h,factory:h.\u0275fac,providedIn:"root"}),h}()},9020:function(Ve,se,t){t.d(se,{M:function(){return b}});var e=t(73637),n=t(25991),f=t(78144),i=t(82195),O=t(18766),T=t(31701),V=t(33714),h=t(56339),M=t(16660),I=t(71442),b=function(){function P(g,u,s,p,C,A,S,L,D){this.service=powerbi.visualSyncServiceModuleFactory().create(s,g,u,p,C,A,S,L,D)}return P.prototype.syncFilterState=function(g,u){return this.service.syncFilterState(g,u)},P.prototype.getVisualsAffectByFieldChanges=function(g){return this.service.getVisualsAffectByFieldChanges(g)},P.prototype.generateUniqueGroupName=function(g,u,s){return this.service.generateUniqueGroupName(g,u,s)},P.prototype.syncVisualFiltersState=function(g){return this.service.syncVisualFiltersState(g)},P.\u0275fac=function(u){return new(u||P)(e.\u0275\u0275inject(n.z),e.\u0275\u0275inject(f.L),e.\u0275\u0275inject(i.J),e.\u0275\u0275inject(V.vZ),e.\u0275\u0275inject(h.D),e.\u0275\u0275inject(M.i),e.\u0275\u0275inject(O.D),e.\u0275\u0275inject(T.O),e.\u0275\u0275inject(I.Q))},P.\u0275prov=e.\u0275\u0275defineInjectable({token:P,factory:P.\u0275fac}),P}()},11378:function(Ve,se,t){t.d(se,{$:function(){return ce},$R:function(){return I},$k:function(){return x},$s:function(){return ne},Iw:function(){return S},Sw:function(){return y},iD:function(){return V},o_:function(){return Fe},qd:function(){return m},tJ:function(){return p},wJ:function(){return g},zc:function(){return pe}});var e=powerbi.TelemetryCategory,n=powerbi.telemetryEventFactory,i=(jsCommon,powerbi.telemetry.EventFactories),T="PBI.PersonalizeVisual.ResetVisual",V=i[T]=function(ie){return n({name:T,info:ie,category:e.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:void 0})},M="PBI.ExploreUI.ChangeDetection",I=i[M]=function(ie){return n({name:M,info:ie,category:e.CustomerAction,optionalParameters:["calculationType","refreshInterval","dialogInteractionType","isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:void 0})},P="PBI.Sparklines.OpenDialog",g=i[P]=function(ie){return n({name:P,info:ie,category:e.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:void 0})},s="PBI.LoadProgressNotification.ModifyCounter",p=i[s]=function(ie){return n({name:s,info:ie,category:e.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:void 0})},A="PBI.LoadProgressNotification.Reset",S=i[A]=function(ie){return n({name:A,info:ie,category:e.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:void 0})},D="PBI.LoadProgressNotification.Cancel",m=i[D]=function(ie){return n({name:D,info:ie,category:e.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:void 0})},l="PBI.Sparklines.OpenWithMaxSparklines",y=i[l]=function(ie){return n({name:l,info:ie,category:e.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:void 0})},w="PBI.EX.Panes",x=i[w]=function(ie){return n({name:w,info:ie,category:e.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:void 0})},X="PBI.ApplyAllSlicersButton.Create",ne=i[X]=function(ie){return n({name:X,info:ie,category:e.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:void 0})},he="PBI.ApplyAllSlicersButton.Click",Fe=i[he]=function(ie){return n({name:he,info:ie,category:e.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:void 0})},ae="PBI.ClearAllSlicersButton.Create",pe=i[ae]=function(ie){return n({name:ae,info:ie,category:e.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:void 0})},Me="PBI.ClearAllSlicersButton.Click",ce=i[Me]=function(ie){return n({name:Me,info:ie,category:e.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:void 0})}},27941:function(Ve,se,t){t.d(se,{lb:function(){return V}});var e=powerbi.TelemetryCategory,n=powerbi.telemetryEventFactory,i=(jsCommon,powerbi.telemetry.EventFactories),T="PBI.PersonalizeVisual.OpenOverlay",V=i[T]=function(M){return n({name:T,info:M,category:e.CustomerAction,optionalParameters:["isError","errorSource","errorCode","activityName","activityId","isCancelled","pingLatency","errorMessage","folderId","activeFolderCapacityId","baseVersion","isFireAndForget","inTeams","expAssignment","hostPlatformType","hostPlatformName","sanitized"],loggers:void 0,logExpAssignment:!0})}},98809:function(Ve,se,t){t.d(se,{H:function(){return O}});var e=t(7005),n=powerbi.visualHost.ResourcePackageReferenceResolver,f=powerbi.explore.contracts.VisualContainer,i=powerbi.explore.util.VisualContainerUtils;function O(T,V,h,M,I,b){return(0,e.mG)(this,void 0,powerbi.Promise,function(){var P,g,u,p,C;return(0,e.Jh)(this,function(A){switch(A.label){case 0:return P=i.getVisualType(T),g=i.getObjectDefinitions(T),u=h.capabilities(P),[4,n.loadAndResolveFromDataViewObjects(g,u&&u.objects,V.resourcePackages,M,I,!0)];case 1:return p=A.sent(),(C=f.clone(T,b)).config.singleVisual.objects=p,[2,C]}})})}},5347:function(Ve,se,t){t.d(se,{Dp:function(){return e},I$:function(){return i},Oq:function(){return T},Y2:function(){return O}});var e={UnitLength:96,UnitDivisions:12},n=[12,6,4,3,2,1];function i(h,M){return h===M||h&&M&&h.UnitLength===M.UnitLength&&h.UnitDivisions===M.UnitDivisions}function O(h,M){var I=h/(M/e.UnitLength);I=Math.floor(I);var b=_.find(n,function(P){return 1===P||I/P>=8});return{UnitLength:I,UnitDivisions:b}}function T(h,M){return{x:V(h.x,M.width),y:V(h.y,M.height)}}function V(h,M){var I=O(h*M,M);return O(I.UnitLength/e.UnitLength*M,M).UnitLength/e.UnitLength}},41:function(Ve,se,t){t.d(se,{h:function(){return e}});var e=function(){function n(f){this.formGroup=f}return n.prototype.setDirty=function(){this.formGroup.markAsDirty()},n.prototype.setPristine=function(){this.formGroup.markAsPristine()},n.prototype.isDirty=function(){return this.formGroup.dirty},n.prototype.isValid=function(){return this.formGroup.valid},n}()},85668:function(Ve,se,t){function f(T,V){var h=!1;if(T){var M=T.sections;if(M)for(var I=0,b=M.length;I<b;I++){var g=M[I].visualContainers;if(g)for(var u=function(S,L){var m=g[S].config.singleVisual.visualType;if(m&&!V.getPlugin(m)){if(T.resourcePackages){if(T.resourcePackages.some(function(v){return v.name===m}))return"continue";if(powerbi.visualHost.CustomVisualsUtils.isOrganizationalCustomVisual(m))return"continue"}return h=!0,"break"}},s=0,p=g.length;s<p&&"break"!==u(s);s++);}}return h}function O(T){return T===powerbi.DMTS_NoGatewayWithAllDatasourcesToBindError||T===powerbi.DMTS_MultipleGatewaysWithAllDatasourcesToBindError||T===powerbi.DMTS_DatasourceHasNoCredentialError||T===powerbi.DM_GWPipeline_Client_GatewayUnreachable||T===powerbi.DM_GWPipeline_Client_OAuthTokenRefreshFailedError||T===powerbi.DMTS_UserLostPermissionToDatasourceError||T===powerbi.DMTS_UserNotFoundInADGraphError||T===powerbi.DM_GWPipeline_Gateway_DataSourceAccessError||T===powerbi.DM_GWPipeline_Gateway_GatewayOverloadedMemory||T===powerbi.DM_GWPipeline_Gateway_GatewayOverloadedConcurrency||T===powerbi.DM_GWPipeline_Gateway_ServerUnreachable||T===powerbi.DM_GWPipeline_Gateway_GatewayOverloadedProcessor||T===powerbi.DM_GWPipeline_Gateway_ImpersonationError||T===powerbi.DM_GWPipeline_Gateway_InvalidMashupConnectionString||T===powerbi.DM_GWPipeline_Gateway_DatabaseLoginError||T===powerbi.DM_GWPipeline_Gateway_SqlTimeoutException||T===powerbi.DM_GWPipeline_Gateway_AdomdTimeoutException||T===powerbi.DM_GWPipeline_Gateway_InvalidObjectNameException||T===powerbi.DM_GWPipeline_Gateway_ConnectionBrokenException||T===powerbi.DM_GWPipeline_Gateway_MemoryError||T===powerbi.DM_GWPipeline_Gateway_MissingStructureError||T===powerbi.DM_GWPipeline_Gateway_UnprocessedStructureError||T===powerbi.DM_GWPipeline_Gateway_ModelLoadError||T===powerbi.DM_GWPipeline_Gateway_CancellationError||T===powerbi.DM_GWPipeline_Gateway_QueryExecutionError||T===powerbi.DM_GWPipeline_Gateway_RecalculationRequiredError||T===powerbi.DM_GWPipeline_Gateway_AdomdConnectError||T===powerbi.DM_GWPipeline_Gateway_MashupDataAccessError||T===powerbi.RS_CannotRetrieveModel||T===powerbi.RS_AccessDeniedDueToRLSGroup||T===powerbi.RLSNotAuthorizedForModel||T===powerbi.RS_AccessDenied}t.d(se,{$V:function(){return f},Uy:function(){return O}}),powerbi}}]);